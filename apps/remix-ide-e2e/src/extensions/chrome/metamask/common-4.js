LavaPack.loadBundle([[2657,{"../internals/index.cjs":2610,"../types/index.cjs":2665,"./components/index.cjs":2653,"@metamask/superstruct":2740,"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SpinnerStruct=n.RowStruct=n.BannerStruct=n.TooltipStruct=n.TooltipContentStruct=n.TooltipChildStruct=n.ValueStruct=n.TextStruct=n.SkeletonStruct=n.LinkStruct=n.HeadingStruct=n.DividerStruct=n.CopyableStruct=n.FooterStruct=n.FooterChildStruct=n.SectionStruct=n.FormStruct=n.FormChildStruct=n.BoxStruct=n.BoxChildrenStruct=n.AvatarStruct=n.FormattingStruct=n.ItalicStruct=n.BoldStruct=n.FieldStruct=n.FieldChildUnionStruct=n.FileInputStruct=n.RadioGroupStruct=n.RadioStruct=n.AssetSelectorStruct=n.SelectorStruct=n.SelectorOptionStruct=n.CardStruct=n.AddressStruct=n.DropdownStruct=n.OptionStruct=n.AddressInputStruct=n.InputStruct=n.NumberInputPropsStruct=n.PasswordInputPropsStruct=n.TextInputPropsStruct=n.GenericInputPropsStruct=n.CheckboxStruct=n.ButtonStruct=n.IconStruct=n.ImageStruct=n.BorderRadiusStruct=n.ElementStruct=n.StringElementStruct=n.KeyStruct=void 0,n.assertJSXElement=n.isJSXElementUnsafe=n.isJSXElement=n.JSXElementStruct=n.RootJSXElementStruct=n.ContainerStruct=n.BoxChildStruct=void 0;const r=e("@metamask/superstruct"),s=e("@metamask/utils"),i=e("./components/index.cjs"),a=e("../internals/index.cjs"),o=e("../types/index.cjs");function c(e){const t=1===e.length?e[0]:(0,a.nullUnion)(e);return function(e){const t=(0,a.selectiveUnion)((n=>Array.isArray(n)?(0,r.array)((0,r.lazy)((()=>t))):e));return t}((0,r.nullable)((0,a.selectiveUnion)((e=>"boolean"==typeof e?(0,r.boolean)():t))))}function u(e){return(0,r.nullable)((0,a.selectiveUnion)((t=>"boolean"==typeof t?(0,r.boolean)():e)))}function l(e,t={}){return(0,r.object)({type:(0,a.literal)(e),props:(0,r.object)(t),key:(0,r.nullable)(n.KeyStruct)})}n.KeyStruct=(0,a.nullUnion)([(0,r.string)(),(0,r.number)()]),n.StringElementStruct=c([(0,r.string)()]),n.ElementStruct=(0,r.object)({type:(0,r.string)(),props:(0,r.record)((0,r.string)(),s.JsonStruct),key:(0,r.nullable)(n.KeyStruct)}),n.BorderRadiusStruct=(0,a.nullUnion)([(0,a.literal)("none"),(0,a.literal)("medium"),(0,a.literal)("full")]),n.ImageStruct=l("Image",{src:(0,a.svg)(),alt:(0,r.optional)((0,r.string)()),borderRadius:(0,r.optional)(n.BorderRadiusStruct)});const d=(0,a.nullUnion)(Object.values(i.IconName).map((e=>(0,a.literal)(e))));var f,h;n.IconStruct=l("Icon",{name:d,color:(0,r.optional)((0,a.nullUnion)([(0,a.literal)("default"),(0,a.literal)("primary"),(0,a.literal)("muted")])),size:(0,r.optional)((0,a.nullUnion)([(0,a.literal)("md"),(0,a.literal)("inherit")]))}),n.ButtonStruct=l("Button",{children:c([n.StringElementStruct,n.ImageStruct,n.IconStruct]),name:(0,r.optional)((0,r.string)()),type:(0,r.optional)((0,a.nullUnion)([(0,a.literal)("button"),(0,a.literal)("submit")])),variant:(0,r.optional)((0,a.nullUnion)([(0,a.literal)("primary"),(0,a.literal)("destructive")])),size:(0,r.optional)((0,a.nullUnion)([(0,a.literal)("sm"),(0,a.literal)("md")])),disabled:(0,r.optional)((0,r.boolean)()),loading:(0,r.optional)((0,r.boolean)()),form:(0,r.optional)((0,r.string)())}),n.CheckboxStruct=l("Checkbox",{name:(0,r.string)(),checked:(0,r.optional)((0,r.boolean)()),label:(0,r.optional)((0,r.string)()),variant:(0,r.optional)((0,a.nullUnion)([(0,a.literal)("default"),(0,a.literal)("toggle")])),disabled:(0,r.optional)((0,r.boolean)())}),n.GenericInputPropsStruct=(0,r.object)({name:(0,r.string)(),value:(0,r.optional)((0,r.string)()),placeholder:(0,r.optional)((0,r.string)()),disabled:(0,r.optional)((0,r.boolean)())}),n.TextInputPropsStruct=(0,r.assign)(n.GenericInputPropsStruct,(0,r.object)({type:(0,a.literal)("text")})),n.PasswordInputPropsStruct=(0,r.assign)(n.GenericInputPropsStruct,(0,r.object)({type:(0,a.literal)("password")})),n.NumberInputPropsStruct=(0,r.assign)(n.GenericInputPropsStruct,(0,r.object)({type:(0,a.literal)("number"),min:(0,r.optional)((0,r.number)()),max:(0,r.optional)((0,r.number)()),step:(0,r.optional)((0,r.number)())})),n.InputStruct=(f="Input",h=e=>{if((0,s.isPlainObject)(e)&&(0,s.hasProperty)(e,"type"))switch(e.type){case"text":return n.TextInputPropsStruct;case"password":return n.PasswordInputPropsStruct;case"number":return n.NumberInputPropsStruct;default:return n.GenericInputPropsStruct}return n.GenericInputPropsStruct},(0,r.object)({type:(0,a.literal)(f),props:(0,a.selectiveUnion)(h),key:(0,r.nullable)(n.KeyStruct)})),n.AddressInputStruct=l("AddressInput",{name:(0,r.string)(),chainId:s.CaipChainIdStruct,value:(0,r.optional)((0,r.string)()),placeholder:(0,r.optional)((0,r.string)()),disabled:(0,r.optional)((0,r.boolean)()),displayAvatar:(0,r.optional)((0,r.boolean)())}),n.OptionStruct=l("Option",{value:(0,r.string)(),children:(0,r.string)(),disabled:(0,r.optional)((0,r.boolean)())}),n.DropdownStruct=l("Dropdown",{name:(0,r.string)(),value:(0,r.optional)((0,r.string)()),children:c([n.OptionStruct]),disabled:(0,r.optional)((0,r.boolean)())}),n.AddressStruct=l("Address",{address:(0,a.selectiveUnion)((e=>"string"==typeof e&&e.startsWith("0x")?s.HexChecksumAddressStruct:s.CaipAccountIdStruct)),truncate:(0,r.optional)((0,r.boolean)()),displayName:(0,r.optional)((0,r.boolean)()),avatar:(0,r.optional)((0,r.boolean)())}),n.CardStruct=l("Card",{image:(0,r.optional)((0,r.string)()),title:(0,a.selectiveUnion)((e=>"object"==typeof e?n.AddressStruct:(0,r.string)())),description:(0,r.optional)((0,r.string)()),value:(0,r.string)(),extra:(0,r.optional)((0,r.string)())}),n.SelectorOptionStruct=l("SelectorOption",{value:(0,r.string)(),children:n.CardStruct,disabled:(0,r.optional)((0,r.boolean)())}),n.SelectorStruct=l("Selector",{name:(0,r.string)(),title:(0,r.string)(),value:(0,r.optional)((0,r.string)()),children:c([n.SelectorOptionStruct]),disabled:(0,r.optional)((0,r.boolean)())}),n.AssetSelectorStruct=l("AssetSelector",{name:(0,r.string)(),addresses:o.NonEip155CaipAccountIdsMatchedByAddressAndNamespaceStruct,chainIds:(0,r.optional)((0,r.array)(o.NonEip155ChainIdStruct)),value:(0,r.optional)(o.NonEip155AssetTypeStruct),disabled:(0,r.optional)((0,r.boolean)())}),n.RadioStruct=l("Radio",{value:(0,r.string)(),children:(0,r.string)(),disabled:(0,r.optional)((0,r.boolean)())}),n.RadioGroupStruct=l("RadioGroup",{name:(0,r.string)(),value:(0,r.optional)((0,r.string)()),children:c([n.RadioStruct]),disabled:(0,r.optional)((0,r.boolean)())}),n.FileInputStruct=l("FileInput",{name:(0,r.string)(),accept:(0,a.nullUnion)([(0,r.optional)((0,r.array)((0,r.string)()))]),compact:(0,r.optional)((0,r.boolean)()),disabled:(0,r.optional)((0,r.boolean)())});const p=[u((0,r.lazy)((()=>n.BoxChildStruct))),n.InputStruct],m=[n.InputStruct,u((0,r.lazy)((()=>n.BoxChildStruct)))],g=[u((0,r.lazy)((()=>n.BoxChildStruct))),n.InputStruct,u((0,r.lazy)((()=>n.BoxChildStruct)))],y=[n.AssetSelectorStruct,n.AddressInputStruct,n.InputStruct,n.DropdownStruct,n.RadioGroupStruct,n.FileInputStruct,n.CheckboxStruct,n.SelectorStruct];n.FieldChildUnionStruct=(0,a.nullUnion)([...y,...p,...m,...g]);const b=(0,a.selectiveUnion)((e=>{const t=Array.isArray(e);return t&&3===e.length?(0,r.tuple)(g):t&&2===e.length?"Box"===e[0]?.type?(0,r.tuple)(p):(0,r.tuple)(m):(0,a.typedUnion)(y)}));n.FieldStruct=l("Field",{label:(0,r.optional)((0,r.string)()),error:(0,r.optional)((0,r.string)()),children:b}),n.BoldStruct=l("Bold",{children:c([(0,r.string)(),(0,r.lazy)((()=>n.ItalicStruct))])}),n.ItalicStruct=l("Italic",{children:c([(0,r.string)(),(0,r.lazy)((()=>n.BoldStruct))])}),n.FormattingStruct=(0,a.typedUnion)([n.BoldStruct,n.ItalicStruct]),n.AvatarStruct=l("Avatar",{address:s.CaipAccountIdStruct,size:(0,r.optional)((0,a.nullUnion)([(0,a.literal)("sm"),(0,a.literal)("md"),(0,a.literal)("lg")]))}),n.BoxChildrenStruct=c([(0,r.lazy)((()=>n.BoxChildStruct))]),n.BoxStruct=l("Box",{children:n.BoxChildrenStruct,direction:(0,r.optional)((0,a.nullUnion)([(0,a.literal)("horizontal"),(0,a.literal)("vertical")])),alignment:(0,r.optional)((0,a.nullUnion)([(0,a.literal)("start"),(0,a.literal)("center"),(0,a.literal)("end"),(0,a.literal)("space-between"),(0,a.literal)("space-around")])),crossAlignment:(0,r.optional)((0,a.nullUnion)([(0,a.literal)("start"),(0,a.literal)("center"),(0,a.literal)("end")])),center:(0,r.optional)((0,r.boolean)())}),n.FormChildStruct=n.BoxChildrenStruct,n.FormStruct=l("Form",{children:n.FormChildStruct,name:(0,r.string)()});const w=(0,r.refine)(n.ButtonStruct,"FooterButton",(e=>{if("string"==typeof e.props.children||"boolean"==typeof e.props.children||null===e.props.children)return!0;if(Array.isArray(e.props.children)){if(!e.props.children.some((e=>"string"!=typeof e&&"boolean"!=typeof e&&null!==e)))return!0}return"Footer buttons may only contain text."}));function v(e){return(0,r.is)(e,n.JSXElementStruct)}n.SectionStruct=l("Section",{children:n.BoxChildrenStruct,direction:(0,r.optional)((0,a.nullUnion)([(0,a.literal)("horizontal"),(0,a.literal)("vertical")])),alignment:(0,r.optional)((0,a.nullUnion)([(0,a.literal)("start"),(0,a.literal)("center"),(0,a.literal)("end"),(0,a.literal)("space-between"),(0,a.literal)("space-around")]))}),n.FooterChildStruct=(0,a.selectiveUnion)((e=>Array.isArray(e)?(0,r.tuple)([w,w]):w)),n.FooterStruct=l("Footer",{children:n.FooterChildStruct}),n.CopyableStruct=l("Copyable",{value:(0,r.string)(),sensitive:(0,r.optional)((0,r.boolean)())}),n.DividerStruct=l("Divider"),n.HeadingStruct=l("Heading",{children:n.StringElementStruct,size:(0,r.optional)((0,a.nullUnion)([(0,a.literal)("sm"),(0,a.literal)("md"),(0,a.literal)("lg")]))}),n.LinkStruct=l("Link",{href:(0,r.string)(),children:c([n.FormattingStruct,(0,r.string)(),n.IconStruct,n.ImageStruct,n.AddressStruct])}),n.SkeletonStruct=l("Skeleton",{width:(0,r.optional)((0,r.union)([(0,r.number)(),(0,r.string)()])),height:(0,r.optional)((0,r.union)([(0,r.number)(),(0,r.string)()])),borderRadius:(0,r.optional)(n.BorderRadiusStruct)}),n.TextStruct=l("Text",{children:c([(0,a.selectiveUnion)((e=>"string"==typeof e?(0,r.string)():(0,a.typedUnion)([n.BoldStruct,n.ItalicStruct,n.LinkStruct,n.IconStruct,n.SkeletonStruct])))]),alignment:(0,r.optional)((0,a.nullUnion)([(0,a.literal)("start"),(0,a.literal)("center"),(0,a.literal)("end")])),color:(0,r.optional)((0,a.nullUnion)([(0,a.literal)("default"),(0,a.literal)("alternative"),(0,a.literal)("muted"),(0,a.literal)("error"),(0,a.literal)("success"),(0,a.literal)("warning")])),size:(0,r.optional)((0,a.nullUnion)([(0,a.literal)("sm"),(0,a.literal)("md")])),fontWeight:(0,r.optional)((0,a.nullUnion)([(0,a.literal)("regular"),(0,a.literal)("medium"),(0,a.literal)("bold")]))}),n.ValueStruct=l("Value",{value:(0,a.selectiveUnion)((e=>"string"==typeof e?(0,r.string)():n.TextStruct)),extra:(0,a.selectiveUnion)((e=>"string"==typeof e?(0,r.string)():n.TextStruct))}),n.TooltipChildStruct=(0,a.selectiveUnion)((e=>"boolean"==typeof e?(0,r.boolean)():(0,a.typedUnion)([n.TextStruct,n.BoldStruct,n.ItalicStruct,n.LinkStruct,n.ImageStruct,n.IconStruct]))),n.TooltipContentStruct=(0,a.selectiveUnion)((e=>"string"==typeof e?(0,r.string)():(0,a.typedUnion)([n.TextStruct,n.BoldStruct,n.ItalicStruct,n.LinkStruct,n.IconStruct]))),n.TooltipStruct=l("Tooltip",{children:(0,r.nullable)(n.TooltipChildStruct),content:n.TooltipContentStruct}),n.BannerStruct=l("Banner",{children:c([n.TextStruct,n.LinkStruct,n.IconStruct,n.ButtonStruct,n.BoldStruct,n.ItalicStruct,n.SkeletonStruct]),title:(0,r.string)(),severity:(0,r.union)([(0,a.literal)("danger"),(0,a.literal)("info"),(0,a.literal)("success"),(0,a.literal)("warning")])}),n.RowStruct=l("Row",{label:(0,r.string)(),children:(0,a.typedUnion)([n.AddressStruct,n.ImageStruct,n.TextStruct,n.ValueStruct,n.LinkStruct,n.SkeletonStruct]),variant:(0,r.optional)((0,a.nullUnion)([(0,a.literal)("default"),(0,a.literal)("warning"),(0,a.literal)("critical")])),tooltip:(0,r.optional)((0,r.string)())}),n.SpinnerStruct=l("Spinner"),n.BoxChildStruct=(0,a.typedUnion)([n.AddressStruct,n.AssetSelectorStruct,n.AddressInputStruct,n.BoldStruct,n.BoxStruct,n.ButtonStruct,n.CopyableStruct,n.DividerStruct,n.DropdownStruct,n.RadioGroupStruct,n.FieldStruct,n.FileInputStruct,n.FormStruct,n.HeadingStruct,n.InputStruct,n.ImageStruct,n.ItalicStruct,n.LinkStruct,n.RowStruct,n.SpinnerStruct,n.TextStruct,n.TooltipStruct,n.CheckboxStruct,n.CardStruct,n.IconStruct,n.SelectorStruct,n.SectionStruct,n.AvatarStruct,n.BannerStruct,n.SkeletonStruct]),n.ContainerStruct=l("Container",{children:(0,a.selectiveUnion)((e=>Array.isArray(e)?(0,r.tuple)([n.BoxChildStruct,n.FooterStruct]):n.BoxChildStruct)),backgroundColor:(0,r.optional)((0,a.nullUnion)([(0,a.literal)("default"),(0,a.literal)("alternative")]))}),n.RootJSXElementStruct=(0,a.typedUnion)([n.BoxChildStruct,n.ContainerStruct]),n.JSXElementStruct=(0,a.typedUnion)([n.AssetSelectorStruct,n.AddressInputStruct,n.ButtonStruct,n.InputStruct,n.FileInputStruct,n.FieldStruct,n.FormStruct,n.BoldStruct,n.ItalicStruct,n.AddressStruct,n.BoxStruct,n.CopyableStruct,n.DividerStruct,n.HeadingStruct,n.ImageStruct,n.LinkStruct,n.RowStruct,n.SpinnerStruct,n.TextStruct,n.DropdownStruct,n.OptionStruct,n.RadioGroupStruct,n.RadioStruct,n.ValueStruct,n.TooltipStruct,n.CheckboxStruct,n.FooterStruct,n.ContainerStruct,n.CardStruct,n.IconStruct,n.SelectorStruct,n.SelectorOptionStruct,n.SectionStruct,n.AvatarStruct,n.BannerStruct,n.SkeletonStruct]),n.isJSXElement=v,n.isJSXElementUnsafe=function(e){return(0,s.isPlainObject)(e)&&(0,s.hasProperty)(e,"type")&&(0,s.hasProperty)(e,"props")&&(0,s.hasProperty)(e,"key")},n.assertJSXElement=function(e){if(!v(e))throw new Error(`Expected a JSX element, but received ${JSON.stringify(e)}. Please refer to the documentation for the supported JSX elements and their props.`)}}}},{package:"@metamask/snaps-sdk",file:"node_modules/@metamask/snaps-sdk/dist/jsx/validation.cjs"}],[2658,{"@metamask/superstruct":2740,"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.NonEip155AssetTypeStruct=n.NonEip155ChainIdStruct=n.NonEip155CaipAccountIdsMatchedByAddressAndNamespaceStruct=void 0;const r=e("@metamask/superstruct"),s=e("@metamask/utils");n.NonEip155CaipAccountIdsMatchedByAddressAndNamespaceStruct=(0,r.refine)((0,r.array)(s.CaipAccountIdStruct),"Non-EIP-155 Matching Addresses Account ID List",(e=>{const t=e.map((e=>(0,s.parseCaipAccountId)(e)));if(!t.every((({address:e,chain:{namespace:n}})=>e===t[0].address&&n===t[0].chain.namespace)))return"All account IDs must have the same address and namespace.";return!t.some((({chain:{namespace:e}})=>e===s.KnownCaipNamespace.Eip155))||"All account IDs must have non-EIP-155 namespaces."})),n.NonEip155ChainIdStruct=(0,r.refine)(s.CaipChainIdStruct,"Non-EIP-155 Chain ID",(e=>{const{namespace:t}=(0,s.parseCaipChainId)(e);return t!==s.KnownCaipNamespace.Eip155||"Chain ID must not be an EIP-155 chain ID."})),n.NonEip155AssetTypeStruct=(0,r.refine)(s.CaipAssetTypeStruct,"Non-EIP-155 Asset Type",(e=>{const{chain:{namespace:t}}=(0,s.parseCaipAssetType)(e);return t!==s.KnownCaipNamespace.Eip155||"Asset type must not be an EIP-155 asset type."}))}}},{package:"@metamask/snaps-sdk",file:"node_modules/@metamask/snaps-sdk/dist/types/caip.cjs"}],[2659,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0})}}},{package:"@metamask/snaps-sdk",file:"node_modules/@metamask/snaps-sdk/dist/types/global.cjs"}],[2660,{"@metamask/superstruct":2740,"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.OnAssetsLookupResponseStruct=n.FungibleAssetMetadataStruct=n.AssetIconUrlStruct=n.FungibleAssetUnitStruct=void 0;const r=e("@metamask/superstruct"),s=e("@metamask/utils");n.FungibleAssetUnitStruct=(0,r.object)({name:(0,r.optional)((0,r.string)()),symbol:(0,r.optional)((0,r.string)()),decimals:(0,r.number)()}),n.AssetIconUrlStruct=(0,r.refine)((0,r.string)(),"Asset URL",(e=>{try{const t=new URL(e);return(0,s.assert)("https:"===t.protocol||e.startsWith("data:image/svg+xml;base64,")),!0}catch{return"Invalid URL"}})),n.FungibleAssetMetadataStruct=(0,r.object)({name:(0,r.optional)((0,r.string)()),symbol:(0,r.optional)((0,r.string)()),fungible:(0,r.literal)(!0),iconUrl:n.AssetIconUrlStruct,units:(0,r.size)((0,r.array)(n.FungibleAssetUnitStruct),1,Infinity)}),n.OnAssetsLookupResponseStruct=(0,r.object)({assets:(0,r.record)(s.CaipAssetTypeStruct,(0,r.nullable)(n.FungibleAssetMetadataStruct))})}}},{package:"@metamask/snaps-sdk",file:"node_modules/@metamask/snaps-sdk/dist/types/handlers/assets-lookup.cjs"}],[2661,{"./assets-lookup.cjs":2660,"./transaction.cjs":2662,"./user-input.cjs":2663},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),s(e("./assets-lookup.cjs"),n),s(e("./transaction.cjs"),n),s(e("./user-input.cjs"),n)}}},{package:"@metamask/snaps-sdk",file:"node_modules/@metamask/snaps-sdk/dist/types/handlers/index.cjs"}],[2662,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r;Object.defineProperty(n,"__esModule",{value:!0}),n.SeverityLevel=void 0,function(e){e.Critical="critical"}(r||(n.SeverityLevel=r={}))}}},{package:"@metamask/snaps-sdk",file:"node_modules/@metamask/snaps-sdk/dist/types/handlers/transaction.cjs"}],[2663,{"@metamask/superstruct":2740,"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.UserInputEventStruct=n.FileUploadEventStruct=n.InputChangeEventStruct=n.FormSubmitEventStruct=n.AssetSelectorStateStruct=n.FileStruct=n.ButtonClickEventStruct=n.GenericEventStruct=n.UserInputEventType=void 0;const r=e("@metamask/superstruct"),s=e("@metamask/utils");var i;!function(e){e.ButtonClickEvent="ButtonClickEvent",e.FormSubmitEvent="FormSubmitEvent",e.InputChangeEvent="InputChangeEvent",e.FileUploadEvent="FileUploadEvent"}(i||(n.UserInputEventType=i={})),n.GenericEventStruct=(0,r.object)({type:(0,r.string)(),name:(0,r.optional)((0,r.string)())}),n.ButtonClickEventStruct=(0,r.assign)(n.GenericEventStruct,(0,r.object)({type:(0,r.literal)(i.ButtonClickEvent),name:(0,r.optional)((0,r.string)())})),n.FileStruct=(0,r.object)({name:(0,r.string)(),size:(0,r.number)(),contentType:(0,r.string)(),contents:(0,r.string)()}),n.AssetSelectorStateStruct=(0,r.object)({asset:s.CaipAssetTypeStruct,name:(0,r.string)(),symbol:(0,r.string)()}),n.FormSubmitEventStruct=(0,r.assign)(n.GenericEventStruct,(0,r.object)({type:(0,r.literal)(i.FormSubmitEvent),value:(0,r.record)((0,r.string)(),(0,r.nullable)((0,r.union)([(0,r.string)(),n.FileStruct,(0,r.boolean)(),n.AssetSelectorStateStruct]))),name:(0,r.string)()})),n.InputChangeEventStruct=(0,r.assign)(n.GenericEventStruct,(0,r.object)({type:(0,r.literal)(i.InputChangeEvent),name:(0,r.string)(),value:(0,r.union)([(0,r.string)(),(0,r.boolean)(),n.AssetSelectorStateStruct])})),n.FileUploadEventStruct=(0,r.assign)(n.GenericEventStruct,(0,r.object)({type:(0,r.literal)(i.FileUploadEvent),name:(0,r.string)(),file:(0,r.nullable)(n.FileStruct)})),n.UserInputEventStruct=(0,r.union)([n.ButtonClickEventStruct,n.FormSubmitEventStruct,n.InputChangeEventStruct,n.FileUploadEventStruct])}}},{package:"@metamask/snaps-sdk",file:"node_modules/@metamask/snaps-sdk/dist/types/handlers/user-input.cjs"}],[2664,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){}}},{package:"@metamask/snaps-sdk",file:"node_modules/@metamask/snaps-sdk/dist/types/images.cjs"}],[2665,{"./caip.cjs":2658,"./global.cjs":2659,"./handlers/index.cjs":2661,"./images.cjs":2664,"./interface.cjs":2666,"./methods/index.cjs":2669},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),e("./global.cjs"),e("./images.cjs"),s(e("./caip.cjs"),n),s(e("./handlers/index.cjs"),n),s(e("./methods/index.cjs"),n),s(e("./interface.cjs"),n)}}},{package:"@metamask/snaps-sdk",file:"node_modules/@metamask/snaps-sdk/dist/types/index.cjs"}],[2666,{"../internals/index.cjs":2610,"../jsx/index.cjs":2654,"../ui/index.cjs":2687,"./handlers/index.cjs":2661,"@metamask/superstruct":2740,"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ContentType=n.InterfaceContextStruct=n.ComponentOrElementStruct=n.InterfaceStateStruct=n.FormStateStruct=n.StateStruct=void 0;const r=e("@metamask/superstruct"),s=e("@metamask/utils"),i=e("./handlers/index.cjs"),a=e("../internals/index.cjs"),o=e("../jsx/index.cjs"),c=e("../ui/index.cjs");var u;n.StateStruct=(0,r.union)([i.AssetSelectorStateStruct,i.FileStruct,(0,r.string)(),(0,r.boolean)(),s.CaipAccountIdStruct]),n.FormStateStruct=(0,r.record)((0,r.string)(),(0,r.nullable)(n.StateStruct)),n.InterfaceStateStruct=(0,r.record)((0,r.string)(),(0,r.union)([n.FormStateStruct,(0,r.nullable)(n.StateStruct)])),n.ComponentOrElementStruct=(0,a.selectiveUnion)((e=>(0,s.isObject)(e)&&!(0,s.hasProperty)(e,"props")?c.ComponentStruct:o.RootJSXElementStruct)),n.InterfaceContextStruct=(0,r.record)((0,r.string)(),s.JsonStruct),function(e){e.Insight="Insight",e.Dialog="Dialog",e.Notification="Notification",e.HomePage="HomePage"}(u||(n.ContentType=u={}))}}},{package:"@metamask/snaps-sdk",file:"node_modules/@metamask/snaps-sdk/dist/types/interface.cjs"}],[2667,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r;Object.defineProperty(n,"__esModule",{value:!0}),n.DialogType=void 0,function(e){e.Alert="alert",e.Confirmation="confirmation",e.Prompt="prompt"}(r||(n.DialogType=r={}))}}},{package:"@metamask/snaps-sdk",file:"node_modules/@metamask/snaps-sdk/dist/types/methods/dialog.cjs"}],[2668,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r;Object.defineProperty(n,"__esModule",{value:!0}),n.AuxiliaryFileEncoding=void 0,function(e){e.Base64="base64",e.Hex="hex",e.Utf8="utf8"}(r||(n.AuxiliaryFileEncoding=r={}))}}},{package:"@metamask/snaps-sdk",file:"node_modules/@metamask/snaps-sdk/dist/types/methods/get-file.cjs"}],[2669,{"./dialog.cjs":2667,"./get-file.cjs":2668,"./manage-state.cjs":2670,"./notify.cjs":2671},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),s(e("./dialog.cjs"),n),s(e("./get-file.cjs"),n),s(e("./manage-state.cjs"),n),s(e("./notify.cjs"),n)}}},{package:"@metamask/snaps-sdk",file:"node_modules/@metamask/snaps-sdk/dist/types/methods/index.cjs"}],[2670,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r;Object.defineProperty(n,"__esModule",{value:!0}),n.ManageStateOperation=void 0,function(e){e.ClearState="clear",e.GetState="get",e.UpdateState="update"}(r||(n.ManageStateOperation=r={}))}}},{package:"@metamask/snaps-sdk",file:"node_modules/@metamask/snaps-sdk/dist/types/methods/manage-state.cjs"}],[2671,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r;Object.defineProperty(n,"__esModule",{value:!0}),n.NotificationType=void 0,function(e){e.InApp="inApp",e.Native="native"}(r||(n.NotificationType=r={}))}}},{package:"@metamask/snaps-sdk",file:"node_modules/@metamask/snaps-sdk/dist/types/methods/notify.cjs"}],[2672,{"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createBuilder=void 0;const r=e("@metamask/utils");n.createBuilder=function(e,t,n=[]){return(...s)=>{if(1===s.length&&(0,r.isPlainObject)(s[0])){const n={...s[0],type:e};return(0,r.assertStruct)(n,t,`Invalid ${e} component`),n}const i=n.reduce(((e,t,n)=>s[n]!==undefined?{...e,[t]:s[n]}:e),{type:e});return(0,r.assertStruct)(i,t,`Invalid ${e} component`),i}}}}},{package:"@metamask/snaps-sdk",file:"node_modules/@metamask/snaps-sdk/dist/ui/builder.cjs"}],[2673,{"./components/index.cjs":2681,"@metamask/superstruct":2740,"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.assertIsComponent=n.isComponent=void 0;const r=e("@metamask/superstruct"),s=e("@metamask/utils"),i=e("./components/index.cjs");n.isComponent=function(e){return(0,r.is)(e,i.ComponentStruct)},n.assertIsComponent=function(e){(0,s.assertStruct)(e,i.ComponentStruct,"Invalid component")}}}},{package:"@metamask/snaps-sdk",file:"node_modules/@metamask/snaps-sdk/dist/ui/component.cjs"}],[2674,{"../../internals/index.cjs":2610,"../builder.cjs":2672,"../nodes.cjs":2688,"@metamask/superstruct":2740,"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.address=n.AddressStruct=void 0;const r=e("@metamask/superstruct"),s=e("@metamask/utils"),i=e("../../internals/index.cjs"),a=e("../builder.cjs"),o=e("../nodes.cjs");n.AddressStruct=(0,r.assign)(o.LiteralStruct,(0,r.object)({type:(0,i.literal)(o.NodeType.Address),value:s.HexChecksumAddressStruct})),n.address=(0,a.createBuilder)(o.NodeType.Address,n.AddressStruct,["value"])}}},{package:"@metamask/snaps-sdk",file:"node_modules/@metamask/snaps-sdk/dist/ui/components/address.cjs"}],[2675,{"../../internals/index.cjs":2610,"../builder.cjs":2672,"../nodes.cjs":2688,"@metamask/superstruct":2740},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.button=n.ButtonStruct=n.ButtonType=n.ButtonVariant=void 0;const r=e("@metamask/superstruct"),s=e("../../internals/index.cjs"),i=e("../builder.cjs"),a=e("../nodes.cjs");var o,c;!function(e){e.Primary="primary",e.Secondary="secondary"}(o||(n.ButtonVariant=o={})),function(e){e.Button="button",e.Submit="submit"}(c||(n.ButtonType=c={})),n.ButtonStruct=(0,r.assign)(a.LiteralStruct,(0,r.object)({type:(0,s.literal)(a.NodeType.Button),value:(0,r.string)(),variant:(0,r.optional)((0,r.union)([(0,s.enumValue)(o.Primary),(0,s.enumValue)(o.Secondary)])),buttonType:(0,r.optional)((0,r.union)([(0,s.enumValue)(c.Button),(0,s.enumValue)(c.Submit)])),name:(0,r.optional)((0,r.string)())})),n.button=(0,i.createBuilder)(a.NodeType.Button,n.ButtonStruct,["value","buttonType","name","variant"])}}},{package:"@metamask/snaps-sdk",file:"node_modules/@metamask/snaps-sdk/dist/ui/components/button.cjs"}],[2676,{"../../internals/index.cjs":2610,"../builder.cjs":2672,"../nodes.cjs":2688,"@metamask/superstruct":2740},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.copyable=n.CopyableStruct=void 0;const r=e("@metamask/superstruct"),s=e("../../internals/index.cjs"),i=e("../builder.cjs"),a=e("../nodes.cjs");n.CopyableStruct=(0,r.assign)(a.LiteralStruct,(0,r.object)({type:(0,s.literal)(a.NodeType.Copyable),value:(0,r.string)(),sensitive:(0,r.optional)((0,r.boolean)())})),n.copyable=(0,i.createBuilder)(a.NodeType.Copyable,n.CopyableStruct,["value","sensitive"])}}},{package:"@metamask/snaps-sdk",file:"node_modules/@metamask/snaps-sdk/dist/ui/components/copyable.cjs"}],[2677,{"../../internals/index.cjs":2610,"../builder.cjs":2672,"../nodes.cjs":2688,"@metamask/superstruct":2740},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.divider=n.DividerStruct=void 0;const r=e("@metamask/superstruct"),s=e("../../internals/index.cjs"),i=e("../builder.cjs"),a=e("../nodes.cjs");n.DividerStruct=(0,r.assign)(a.NodeStruct,(0,r.object)({type:(0,s.literal)(a.NodeType.Divider)})),n.divider=(0,i.createBuilder)(a.NodeType.Divider,n.DividerStruct)}}},{package:"@metamask/snaps-sdk",file:"node_modules/@metamask/snaps-sdk/dist/ui/components/divider.cjs"}],[2678,{"../../internals/index.cjs":2610,"../builder.cjs":2672,"../nodes.cjs":2688,"./button.cjs":2675,"./input.cjs":2682,"@metamask/superstruct":2740},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.form=n.FormStruct=n.FormComponentStruct=void 0;const r=e("@metamask/superstruct"),s=e("./button.cjs"),i=e("./input.cjs"),a=e("../../internals/index.cjs"),o=e("../builder.cjs"),c=e("../nodes.cjs");n.FormComponentStruct=(0,r.union)([i.InputStruct,s.ButtonStruct]),n.FormStruct=(0,r.assign)(c.NodeStruct,(0,r.object)({type:(0,a.literal)(c.NodeType.Form),children:(0,r.array)(n.FormComponentStruct),name:(0,r.string)()})),n.form=(0,o.createBuilder)(c.NodeType.Form,n.FormStruct,["name","children"])}}},{package:"@metamask/snaps-sdk",file:"node_modules/@metamask/snaps-sdk/dist/ui/components/form.cjs"}],[2679,{"../../internals/index.cjs":2610,"../builder.cjs":2672,"../nodes.cjs":2688,"@metamask/superstruct":2740},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.heading=n.HeadingStruct=void 0;const r=e("@metamask/superstruct"),s=e("../../internals/index.cjs"),i=e("../builder.cjs"),a=e("../nodes.cjs");n.HeadingStruct=(0,r.assign)(a.LiteralStruct,(0,r.object)({type:(0,s.literal)(a.NodeType.Heading),value:(0,r.string)()})),n.heading=(0,i.createBuilder)(a.NodeType.Heading,n.HeadingStruct,["value"])}}},{package:"@metamask/snaps-sdk",file:"node_modules/@metamask/snaps-sdk/dist/ui/components/heading.cjs"}],[2680,{"../../internals/index.cjs":2610,"../builder.cjs":2672,"../nodes.cjs":2688,"@metamask/superstruct":2740},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.image=n.ImageStruct=void 0;const r=e("@metamask/superstruct"),s=e("../../internals/index.cjs"),i=e("../builder.cjs"),a=e("../nodes.cjs");n.ImageStruct=(0,r.assign)(a.NodeStruct,(0,r.object)({type:(0,s.literal)(a.NodeType.Image),value:(0,s.svg)()})),n.image=(0,i.createBuilder)(a.NodeType.Image,n.ImageStruct,["value"])}}},{package:"@metamask/snaps-sdk",file:"node_modules/@metamask/snaps-sdk/dist/ui/components/image.cjs"}],[2681,{"./address.cjs":2674,"./button.cjs":2675,"./copyable.cjs":2676,"./divider.cjs":2677,"./form.cjs":2678,"./heading.cjs":2679,"./image.cjs":2680,"./input.cjs":2682,"./panel.cjs":2683,"./row.cjs":2684,"./spinner.cjs":2685,"./text.cjs":2686},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),n.PanelStruct=n.panel=n.ComponentStruct=n.ImageStruct=n.image=void 0,s(e("./address.cjs"),n),s(e("./copyable.cjs"),n),s(e("./divider.cjs"),n),s(e("./heading.cjs"),n);var i=e("./image.cjs");Object.defineProperty(n,"image",{enumerable:!0,get:function(){return i.image}}),Object.defineProperty(n,"ImageStruct",{enumerable:!0,get:function(){return i.ImageStruct}});var a=e("./panel.cjs");Object.defineProperty(n,"ComponentStruct",{enumerable:!0,get:function(){return a.ComponentStruct}}),Object.defineProperty(n,"panel",{enumerable:!0,get:function(){return a.panel}}),Object.defineProperty(n,"PanelStruct",{enumerable:!0,get:function(){return a.PanelStruct}}),s(e("./spinner.cjs"),n),s(e("./text.cjs"),n),s(e("./row.cjs"),n),s(e("./button.cjs"),n),s(e("./input.cjs"),n),s(e("./form.cjs"),n)}}},{package:"@metamask/snaps-sdk",file:"node_modules/@metamask/snaps-sdk/dist/ui/components/index.cjs"}],[2682,{"../../internals/index.cjs":2610,"../builder.cjs":2672,"../nodes.cjs":2688,"@metamask/superstruct":2740},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.input=n.InputStruct=n.InputType=void 0;const r=e("@metamask/superstruct"),s=e("../../internals/index.cjs"),i=e("../builder.cjs"),a=e("../nodes.cjs");var o;!function(e){e.Text="text",e.Number="number",e.Password="password"}(o||(n.InputType=o={})),n.InputStruct=(0,r.assign)(a.LiteralStruct,(0,r.object)({type:(0,s.literal)(a.NodeType.Input),value:(0,r.optional)((0,r.string)()),name:(0,r.string)(),inputType:(0,r.optional)((0,r.union)([(0,s.enumValue)(o.Text),(0,s.enumValue)(o.Password),(0,s.enumValue)(o.Number)])),placeholder:(0,r.optional)((0,r.string)()),label:(0,r.optional)((0,r.string)()),error:(0,r.optional)((0,r.string)())})),n.input=(0,i.createBuilder)(a.NodeType.Input,n.InputStruct,["name","inputType","placeholder","value","label"])}}},{package:"@metamask/snaps-sdk",file:"node_modules/@metamask/snaps-sdk/dist/ui/components/input.cjs"}],[2683,{"../../internals/index.cjs":2610,"../builder.cjs":2672,"../nodes.cjs":2688,"./address.cjs":2674,"./button.cjs":2675,"./copyable.cjs":2676,"./divider.cjs":2677,"./form.cjs":2678,"./heading.cjs":2679,"./image.cjs":2680,"./input.cjs":2682,"./row.cjs":2684,"./spinner.cjs":2685,"./text.cjs":2686,"@metamask/superstruct":2740},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ComponentStruct=n.panel=n.PanelStruct=n.ParentStruct=void 0;const r=e("@metamask/superstruct"),s=e("./address.cjs"),i=e("./button.cjs"),a=e("./copyable.cjs"),o=e("./divider.cjs"),c=e("./form.cjs"),u=e("./heading.cjs"),l=e("./image.cjs"),d=e("./input.cjs"),f=e("./row.cjs"),h=e("./spinner.cjs"),p=e("./text.cjs"),m=e("../../internals/index.cjs"),g=e("../builder.cjs"),y=e("../nodes.cjs");n.ParentStruct=(0,r.assign)(y.NodeStruct,(0,r.object)({children:(0,r.array)((0,r.lazy)((()=>n.ComponentStruct)))})),n.PanelStruct=(0,r.assign)(n.ParentStruct,(0,r.object)({type:(0,m.literal)(y.NodeType.Panel)})),n.panel=(0,g.createBuilder)(y.NodeType.Panel,n.PanelStruct,["children"]),n.ComponentStruct=(0,m.typedUnion)([a.CopyableStruct,o.DividerStruct,u.HeadingStruct,l.ImageStruct,n.PanelStruct,h.SpinnerStruct,p.TextStruct,f.RowStruct,s.AddressStruct,d.InputStruct,c.FormStruct,i.ButtonStruct])}}},{package:"@metamask/snaps-sdk",file:"node_modules/@metamask/snaps-sdk/dist/ui/components/panel.cjs"}],[2684,{"../../internals/index.cjs":2610,"../builder.cjs":2672,"../nodes.cjs":2688,"./address.cjs":2674,"./image.cjs":2680,"./text.cjs":2686,"@metamask/superstruct":2740},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.row=n.RowStruct=n.RowVariant=void 0;const r=e("@metamask/superstruct"),s=e("./address.cjs"),i=e("./image.cjs"),a=e("./text.cjs"),o=e("../../internals/index.cjs"),c=e("../builder.cjs"),u=e("../nodes.cjs");var l;!function(e){e.Default="default",e.Critical="critical",e.Warning="warning"}(l||(n.RowVariant=l={}));const d=(0,r.union)([i.ImageStruct,a.TextStruct,s.AddressStruct]);n.RowStruct=(0,r.assign)(u.LiteralStruct,(0,r.object)({type:(0,o.literal)(u.NodeType.Row),variant:(0,r.optional)((0,r.union)([(0,o.enumValue)(l.Default),(0,o.enumValue)(l.Critical),(0,o.enumValue)(l.Warning)])),label:(0,r.string)(),value:d})),n.row=(0,c.createBuilder)(u.NodeType.Row,n.RowStruct,["label","value","variant"])}}},{package:"@metamask/snaps-sdk",file:"node_modules/@metamask/snaps-sdk/dist/ui/components/row.cjs"}],[2685,{"../../internals/index.cjs":2610,"../builder.cjs":2672,"../nodes.cjs":2688,"@metamask/superstruct":2740},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.spinner=n.SpinnerStruct=void 0;const r=e("@metamask/superstruct"),s=e("../../internals/index.cjs"),i=e("../builder.cjs"),a=e("../nodes.cjs");n.SpinnerStruct=(0,r.assign)(a.NodeStruct,(0,r.object)({type:(0,s.literal)(a.NodeType.Spinner)})),n.spinner=(0,i.createBuilder)(a.NodeType.Spinner,n.SpinnerStruct)}}},{package:"@metamask/snaps-sdk",file:"node_modules/@metamask/snaps-sdk/dist/ui/components/spinner.cjs"}],[2686,{"../../internals/index.cjs":2610,"../builder.cjs":2672,"../nodes.cjs":2688,"@metamask/superstruct":2740},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.text=n.TextStruct=void 0;const r=e("@metamask/superstruct"),s=e("../../internals/index.cjs"),i=e("../builder.cjs"),a=e("../nodes.cjs");n.TextStruct=(0,r.assign)(a.LiteralStruct,(0,r.object)({type:(0,s.literal)(a.NodeType.Text),value:(0,r.string)(),markdown:(0,r.optional)((0,r.boolean)())})),n.text=(0,i.createBuilder)(a.NodeType.Text,n.TextStruct,["value","markdown"])}}},{package:"@metamask/snaps-sdk",file:"node_modules/@metamask/snaps-sdk/dist/ui/components/text.cjs"}],[2687,{"./component.cjs":2673,"./components/index.cjs":2681,"./nodes.cjs":2688},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),n.NodeType=void 0,s(e("./components/index.cjs"),n),s(e("./component.cjs"),n);var i=e("./nodes.cjs");Object.defineProperty(n,"NodeType",{enumerable:!0,get:function(){return i.NodeType}})}}},{package:"@metamask/snaps-sdk",file:"node_modules/@metamask/snaps-sdk/dist/ui/index.cjs"}],[2688,{"@metamask/superstruct":2740},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.LiteralStruct=n.NodeStruct=n.NodeType=void 0;const r=e("@metamask/superstruct");var s;!function(e){e.Copyable="copyable",e.Divider="divider",e.Heading="heading",e.Panel="panel",e.Spinner="spinner",e.Text="text",e.Image="image",e.Row="row",e.Address="address",e.Button="button",e.Input="input",e.Form="form"}(s||(n.NodeType=s={})),n.NodeStruct=(0,r.object)({type:(0,r.string)()}),n.LiteralStruct=(0,r.assign)(n.NodeStruct,(0,r.object)({value:(0,r.unknown)()}))}}},{package:"@metamask/snaps-sdk",file:"node_modules/@metamask/snaps-sdk/dist/ui/nodes.cjs"}],[2689,{"./dist/jsx/jsx-runtime.cjs":2656},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=e("./dist/jsx/jsx-runtime.cjs")}}},{package:"@metamask/snaps-sdk",file:"node_modules/@metamask/snaps-sdk/jsx-runtime.js"}],[2690,{"./dist/jsx/index.cjs":2654},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=e("./dist/jsx/index.cjs")}}},{package:"@metamask/snaps-sdk",file:"node_modules/@metamask/snaps-sdk/jsx.js"}],[2691,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports={name:"@metamask/snaps-sdk",version:"6.22.0",description:"A library containing the core functionality for building MetaMask Snaps",keywords:["MetaMask","Snaps","Ethereum"],homepage:"https://github.com/MetaMask/snaps/tree/main/packages/snaps-sdk#readme",bugs:{url:"https://github.com/MetaMask/snaps/issues"},repository:{type:"git",url:"https://github.com/MetaMask/snaps.git"},license:"ISC",sideEffects:!1,exports:{".":{import:{types:"./dist/index.d.mts",default:"./dist/index.mjs"},require:{types:"./dist/index.d.cts",default:"./dist/index.cjs"}},"./jsx":{import:{types:"./dist/jsx/index.d.mts",default:"./dist/jsx/index.mjs"},require:{types:"./dist/jsx/index.d.cts",default:"./dist/jsx/index.cjs"}},"./jsx-runtime":{import:{types:"./dist/jsx/jsx-runtime.d.mts",default:"./dist/jsx/jsx-runtime.mjs"},require:{types:"./dist/jsx/jsx-runtime.d.cts",default:"./dist/jsx/jsx-runtime.cjs"}},"./jsx-dev-runtime":{import:{types:"./dist/jsx/jsx-dev-runtime.d.mts",default:"./dist/jsx/jsx-dev-runtime.mjs"},require:{types:"./dist/jsx/jsx-dev-runtime.d.cts",default:"./dist/jsx/jsx-dev-runtime.cjs"}},"./package.json":"./package.json"},main:"./dist/index.cjs",module:"./dist/index.mjs",types:"./dist/index.d.cts",files:["dist","jsx.js","jsx-dev-runtime.js","jsx-runtime.js","jsx.d.ts","jsx-dev-runtime.d.ts","jsx-runtime.d.ts"],scripts:{build:"ts-bridge --project tsconfig.build.json --verbose --clean --no-references","changelog:update":"../../scripts/update-changelog.sh @metamask/snaps-sdk","changelog:validate":"../../scripts/validate-changelog.sh @metamask/snaps-sdk",lint:"yarn lint:eslint && yarn lint:misc --check && yarn changelog:validate && yarn lint:dependencies","lint:ci":"yarn lint","lint:dependencies":"depcheck","lint:eslint":"eslint . --cache","lint:fix":"yarn lint:eslint --fix && yarn lint:misc --write","lint:misc":'prettier --no-error-on-unmatched-pattern --log-level warn "**/*.json" "**/*.md" "**/*.html" "!CHANGELOG.md" --ignore-path ../../.gitignore',"publish:preview":"yarn npm publish --tag preview","since-latest-release":"../../scripts/since-latest-release.sh",test:"jest --reporters=jest-silent-reporter","test:clean":"jest --clearCache","test:post":"jest-it-up","test:verbose":"jest --verbose","test:watch":"jest --watch"},dependencies:{"@metamask/key-tree":"^10.1.1","@metamask/providers":"^21.0.0","@metamask/rpc-errors":"^7.0.2","@metamask/superstruct":"^3.2.1","@metamask/utils":"^11.2.0"},devDependencies:{"@lavamoat/allow-scripts":"^3.0.4","@metamask/auto-changelog":"^5.0.1","@ts-bridge/cli":"^0.6.1","@types/jest":"^27.5.1",deepmerge:"^4.2.2",depcheck:"^1.4.7",eslint:"^9.11.0","expect-type":"^0.17.3",jest:"^29.0.2","jest-fetch-mock":"^3.0.3","jest-it-up":"^2.0.0","jest-silent-reporter":"^0.6.0",prettier:"^3.3.3","ts-jest":"^29.1.1",typescript:"~5.3.3"},engines:{node:"^18.16 || >=20"},publishConfig:{access:"public",registry:"https://registry.npmjs.org/"}}}}},{package:"@metamask/snaps-sdk",file:"node_modules/@metamask/snaps-sdk/package.json"}],[2692,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isEqual=void 0,n.isEqual=function(e,t){return e.length===t.length&&e.every(((e,n)=>e===t[n]))}}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/array.cjs"}],[2693,{"./base64.cjs":2694,"./constants.cjs":2698,"@metamask/snaps-sdk":2607,"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateAuxiliaryFiles=n.encodeAuxiliaryFile=void 0;const r=e("@metamask/snaps-sdk"),s=e("@metamask/utils"),i=e("./base64.cjs"),a=e("./constants.cjs");n.encodeAuxiliaryFile=async function(e,t){if(t===r.AuxiliaryFileEncoding.Base64)return e;const n=await(0,i.decodeBase64)(e);return t===r.AuxiliaryFileEncoding.Utf8?(0,s.bytesToString)(n):(0,s.bytesToHex)(n)},n.validateAuxiliaryFiles=function(e){for(const t of e)(0,s.assert)(t.size<a.MAX_FILE_SIZE,"Static files required by the Snap must be smaller than 64 MB.")}}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/auxiliary-files.cjs"}],[2694,{"./bytes.cjs":2695,"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.decodeBase64=n.encodeBase64=void 0;const r=e("@metamask/utils"),s=e("./bytes.cjs");n.encodeBase64=async function(e){const t=(0,s.getBytes)(e);return"FileReader"in globalThis?await new Promise(((e,n)=>{const r=Object.assign(new FileReader,{onload:()=>e(r.result.replace("data:application/octet-stream;base64,","")),onerror:()=>n(r.error)});r.readAsDataURL(new File([t],"",{type:"application/octet-stream"}))})):(0,r.bytesToBase64)(t)},n.decodeBase64=async function(e){const t=await fetch(`data:application/octet-stream;base64,${e}`);return new Uint8Array(await t.arrayBuffer())}}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/base64.cjs"}],[2695,{"./virtual-file/VirtualFile.cjs":2737,"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getBytes=void 0;const r=e("@metamask/utils"),s=e("./virtual-file/VirtualFile.cjs");n.getBytes=function(e){const t=e instanceof s.VirtualFile?e.value:e;return"string"==typeof t?(0,r.stringToBytes)(t):t}}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/bytes.cjs"}],[2696,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r;Object.defineProperty(n,"__esModule",{value:!0}),n.SnapCaveatType=void 0,function(e){e.PermittedDerivationPaths="permittedDerivationPaths",e.PermittedCoinTypes="permittedCoinTypes",e.SnapCronjob="snapCronjob",e.TransactionOrigin="transactionOrigin",e.SignatureOrigin="signatureOrigin",e.RpcOrigin="rpcOrigin",e.KeyringOrigin="keyringOrigin",e.SnapIds="snapIds",e.ChainIds="chainIds",e.LookupMatchers="lookupMatchers",e.MaxRequestTime="maxRequestTime",e.ProtocolSnapScopes="protocolSnapScopes"}(r||(n.SnapCaveatType=r={}))}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/caveats.cjs"}],[2697,{"./bytes.cjs":2695,"@metamask/utils":2822,"@noble/hashes/sha256":2872},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.checksumFiles=n.checksum=void 0;const r=e("@metamask/utils"),s=e("@noble/hashes/sha256"),i=e("./bytes.cjs");async function a(e){const t=(0,i.getBytes)(e);return"crypto"in globalThis&&"object"==typeof globalThis.crypto&&crypto.subtle?.digest?new Uint8Array(await crypto.subtle.digest("SHA-256",t)):(0,s.sha256)(t)}n.checksum=a,n.checksumFiles=async function(e){const t=await Promise.all([...e].sort(((e,t)=>((0,r.assert)(e.path!==t.path,"Tried to sort files with non-unique paths."),e.path<t.path?-1:1))).map((async e=>a(e))));return a((0,r.concatBytes)(t))}}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/checksum.cjs"}],[2698,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.MAX_FILE_SIZE=void 0,n.MAX_FILE_SIZE=64e6}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/constants.cjs"}],[2699,{"@metamask/superstruct":2740,"@metamask/utils":2822,"cron-parser":4048},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isCronjobSpecificationArray=n.CronjobSpecificationArrayStruct=n.isCronjobSpecification=n.CronjobSpecificationStruct=n.parseCronExpression=n.CronExpressionStruct=n.CronjobRpcRequestStruct=void 0;const r=e("@metamask/superstruct"),s=e("@metamask/utils"),i=e("cron-parser");n.CronjobRpcRequestStruct=(0,r.object)({jsonrpc:(0,r.optional)(s.JsonRpcVersionStruct),id:(0,r.optional)(s.JsonRpcIdStruct),method:(0,r.string)(),params:(0,r.optional)(s.JsonRpcParamsStruct)}),n.CronExpressionStruct=(0,r.refine)((0,r.string)(),"CronExpression",(e=>{try{return(0,i.parseExpression)(e),!0}catch{return!1}})),n.parseCronExpression=function(e){const t=(0,r.create)(e,n.CronExpressionStruct);return(0,i.parseExpression)(t)},n.CronjobSpecificationStruct=(0,r.object)({expression:n.CronExpressionStruct,request:n.CronjobRpcRequestStruct}),n.isCronjobSpecification=function(e){try{return(0,r.create)(e,n.CronjobSpecificationStruct),!0}catch{return!1}},n.CronjobSpecificationArrayStruct=(0,r.array)(n.CronjobSpecificationStruct),n.isCronjobSpecificationArray=function(e){try{return(0,r.create)(e,n.CronjobSpecificationArrayStruct),!0}catch{return!1}}}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/cronjob.cjs"}],[2700,{"@metamask/superstruct":2740},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.currency=void 0;const r=e("@metamask/superstruct");n.currency=function(e){const t=e.toLowerCase();return(0,r.coerce)((0,r.literal)(t),(0,r.literal)(e.toUpperCase()),(e=>(0,r.create)(e.toLowerCase(),(0,r.literal)(t))))}}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/currency.cjs"}],[2701,{rfdc:5158},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.deepClone=void 0;const s=r(e("rfdc"));n.deepClone=(0,s.default)({proto:!1,circles:!1})}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/deep-clone.cjs"}],[2702,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DEFAULT_ENDOWMENTS=void 0,n.DEFAULT_ENDOWMENTS=Object.freeze(["atob","btoa","BigInt","console","crypto","Date","Math","setTimeout","clearTimeout","SubtleCrypto","TextDecoder","TextEncoder","URL","URLSearchParams","setInterval","clearInterval","Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","isSecureContext","Intl","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array","DataView","ArrayBuffer","AbortController","AbortSignal"])}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/default-endowments.cjs"}],[2703,{"./array.cjs":2692,"@metamask/slip44":2485},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.getSlip44ProtocolName=n.getSnapDerivationPathName=n.SNAPS_DERIVATION_PATHS=void 0;const s=r(e("@metamask/slip44")),i=e("./array.cjs");function a(e){return"1"===String(e)?"Test Networks":s.default[e]?.name??null}n.SNAPS_DERIVATION_PATHS=[{path:["m","44'","0'"],curve:"ed25519",name:"Test BIP-32 Path (ed25519)"},{path:["m","44'","1'"],curve:"secp256k1",name:"Testnet"},{path:["m","44'","0'"],curve:"secp256k1",name:"Bitcoin Legacy"},{path:["m","49'","0'"],curve:"secp256k1",name:"Bitcoin Nested SegWit"},{path:["m","49'","1'"],curve:"secp256k1",name:"Bitcoin Testnet Nested SegWit"},{path:["m","84'","0'"],curve:"secp256k1",name:"Bitcoin Native SegWit"},{path:["m","84'","1'"],curve:"secp256k1",name:"Bitcoin Testnet Native SegWit"},{path:["m","86'","0'"],curve:"secp256k1",name:"Bitcoin Taproot"},{path:["m","86'","1'"],curve:"secp256k1",name:"Bitcoin Testnet Taproot"},{path:["m","44'","501'"],curve:"ed25519",name:"Solana"},{path:["m","44'","501'","0'","0'"],curve:"ed25519",name:"Solana"},{path:["m","44'","2'"],curve:"secp256k1",name:"Litecoin"},{path:["m","44'","3'"],curve:"secp256k1",name:"Dogecoin"},{path:["m","44'","60'"],curve:"secp256k1",name:"Ethereum"},{path:["m","44'","118'"],curve:"secp256k1",name:"Atom"},{path:["m","44'","145'"],curve:"secp256k1",name:"Bitcoin Cash"},{path:["m","44'","637'"],curve:"ed25519",name:"Aptos"},{path:["m","44'","714'"],curve:"secp256k1",name:"Binance (BNB)"},{path:["m","44'","784'"],curve:"ed25519",name:"Sui"},{path:["m","44'","931'"],curve:"secp256k1",name:"THORChain (RUNE)"},{path:["m","44'","330'"],curve:"secp256k1",name:"Terra (LUNA)"},{path:["m","44'","459'"],curve:"secp256k1",name:"Kava"},{path:["m","44'","529'"],curve:"secp256k1",name:"Secret Network"},{path:["m","44'","397'","0'"],curve:"ed25519",name:"NEAR Protocol"},{path:["m","44'","1'","0'"],curve:"ed25519",name:"Testnet"},{path:["m","44'","472'"],curve:"ed25519",name:"Arweave"},{path:["m","44'","12586'"],curve:"secp256k1",name:"Mina"},{path:["m","44'","242'"],curve:"ed25519",name:"Nimiq"},{path:["m","44'","1729'","0'","0'"],curve:"ed25519",name:"Tezos"},{path:["m","1789'","0'"],curve:"ed25519",name:"Vega"},{path:["m","1852'","1815'"],curve:"ed25519Bip32",name:"Cardano"},{path:["m","44'","508'","0'","0'","0'"],curve:"ed25519",name:"MultiversX"},{path:["m","44'","709'"],curve:"secp256k1",name:"Avail"},{path:["m","44'","626'"],curve:"ed25519",name:"Kadena"},{path:["m","44'","632'"],curve:"ed25519",name:"Massa"}],n.getSnapDerivationPathName=function(e,t){const r=n.SNAPS_DERIVATION_PATHS.find((n=>n.curve===t&&(0,i.isEqual)(n.path,e)));if(r)return r.name;if("secp256k1"===t&&"m"===e[0]&&"44'"===e[1]&&e[2].endsWith("'")){return a(e[2].slice(0,-1))??null}return null},n.getSlip44ProtocolName=a}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/derivation-paths.cjs"}],[2704,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.STATE_ENCRYPTION_MAGIC_VALUE=n.SIP_6_MAGIC_VALUE=void 0,n.SIP_6_MAGIC_VALUE="1399742832'",n.STATE_ENCRYPTION_MAGIC_VALUE="572232532'"}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/entropy.cjs"}],[2705,{"@metamask/rpc-errors":2415,"@metamask/snaps-sdk":2607,"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i,a=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},o=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.unwrapError=n.isWrappedSnapError=n.isSerializedSnapError=n.isSnapError=n.WrappedSnapError=n.SNAP_ERROR_WRAPPER_MESSAGE=n.SNAP_ERROR_WRAPPER_CODE=void 0;const c=e("@metamask/rpc-errors"),u=e("@metamask/snaps-sdk"),l=e("@metamask/utils");n.SNAP_ERROR_WRAPPER_CODE=-31001,n.SNAP_ERROR_WRAPPER_MESSAGE="Wrapped Snap Error";class d extends Error{constructor(e){const t=(0,u.getErrorMessage)(e);super(t),r.set(this,void 0),s.set(this,void 0),i.set(this,void 0),a(this,r,e,"f"),a(this,s,t,"f"),a(this,i,(0,u.getErrorStack)(e),"f")}get name(){return"WrappedSnapError"}get message(){return o(this,s,"f")}get stack(){return o(this,i,"f")}toJSON(){const e=f(o(this,r,"f"))?o(this,r,"f").serialize():(0,c.serializeCause)(o(this,r,"f"));return{code:n.SNAP_ERROR_WRAPPER_CODE,message:n.SNAP_ERROR_WRAPPER_MESSAGE,data:{cause:e}}}serialize(){return this.toJSON()}}function f(e){if((0,l.isObject)(e)&&"serialize"in e&&"function"==typeof e.serialize){const t=e.serialize();return(0,l.isJsonRpcError)(t)&&h(t)}return!1}function h(e){return e.code===u.SNAP_ERROR_CODE&&e.message===u.SNAP_ERROR_MESSAGE}function p(e){return(0,l.isJsonRpcError)(e)&&e.code===n.SNAP_ERROR_WRAPPER_CODE&&e.message===n.SNAP_ERROR_WRAPPER_MESSAGE}function m(e,t,n,r){const s=new c.JsonRpcError(e,t,r);return s.stack=n,s}n.WrappedSnapError=d,r=new WeakMap,s=new WeakMap,i=new WeakMap,n.isSnapError=f,n.isSerializedSnapError=h,n.isWrappedSnapError=p,n.unwrapError=function(e){if(p(e)){if((0,l.isJsonRpcError)(e.data.cause)){if(h(e.data.cause)){const{code:t,message:n,stack:r,data:s}=e.data.cause.data.cause;return[m(t,n,r,s),!0]}const{code:t,message:n,stack:r,data:s}=e.data.cause;return[m(t,n,r,s),!1]}return[m(c.errorCodes.rpc.internal,(0,u.getErrorMessage)(e.data.cause),(0,u.getErrorStack)(e.data.cause)),!1]}if((0,l.isJsonRpcError)(e)){const{code:t,message:n,stack:r,data:s}=e;return[m(t,n,r,s),!1]}return[m(c.errorCodes.rpc.internal,(0,u.getErrorMessage)(e),(0,u.getErrorStack)(e)),!1]}}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/errors.cjs"}],[2706,{"../time.cjs":2731,"@metamask/snaps-sdk":2607,"@metamask/superstruct":2740},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.OnAssetHistoricalPriceResponseStruct=n.AssetHistoricalPriceStruct=n.HistoricalPriceStruct=void 0;const r=e("@metamask/snaps-sdk"),s=e("@metamask/superstruct"),i=e("../time.cjs");n.HistoricalPriceStruct=(0,r.nonEmptyRecord)((0,s.union)([(0,s.literal)("all"),i.ISO8601DurationStruct]),(0,s.array)((0,s.tuple)([(0,s.number)(),(0,s.string)()]))),n.AssetHistoricalPriceStruct=(0,s.nullable)((0,s.object)({intervals:n.HistoricalPriceStruct,updateTime:(0,s.number)(),expirationTime:(0,s.optional)((0,s.number)())})),n.OnAssetHistoricalPriceResponseStruct=(0,s.object)({historicalPrice:n.AssetHistoricalPriceStruct})}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/handlers/asset-historical-price.cjs"}],[2707,{"../time.cjs":2731,"@metamask/snaps-sdk":2607,"@metamask/superstruct":2740,"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.OnAssetsConversionResponseStruct=n.AssetConversionStruct=n.MarketDataStruct=n.PricePercentChangeStruct=void 0;const r=e("@metamask/snaps-sdk"),s=e("@metamask/superstruct"),i=e("@metamask/utils"),a=e("../time.cjs");n.PricePercentChangeStruct=(0,r.nonEmptyRecord)((0,s.union)([(0,s.literal)("all"),a.ISO8601DurationStruct]),(0,s.number)()),n.MarketDataStruct=(0,s.object)({marketCap:(0,s.string)(),totalVolume:(0,s.string)(),circulatingSupply:(0,s.string)(),allTimeHigh:(0,s.string)(),allTimeLow:(0,s.string)(),pricePercentChange:(0,s.optional)(n.PricePercentChangeStruct)}),n.AssetConversionStruct=(0,s.object)({rate:(0,s.string)(),marketData:(0,s.optional)(n.MarketDataStruct),conversionTime:(0,s.number)(),expirationTime:(0,s.optional)((0,s.number)())}),n.OnAssetsConversionResponseStruct=(0,s.object)({conversionRates:(0,s.record)(i.CaipAssetTypeStruct,(0,s.record)(i.CaipAssetTypeStruct,(0,s.nullable)(n.AssetConversionStruct)))})}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/handlers/assets-conversion.cjs"}],[2708,{"./types.cjs":2715},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SNAP_EXPORT_NAMES=n.SNAP_EXPORTS=void 0;const r=e("./types.cjs");n.SNAP_EXPORTS={[r.HandlerType.OnRpcRequest]:{type:r.HandlerType.OnRpcRequest,required:!0,validator:e=>"function"==typeof e},[r.HandlerType.OnTransaction]:{type:r.HandlerType.OnTransaction,required:!0,validator:e=>"function"==typeof e},[r.HandlerType.OnCronjob]:{type:r.HandlerType.OnCronjob,required:!0,validator:e=>"function"==typeof e},[r.HandlerType.OnNameLookup]:{type:r.HandlerType.OnNameLookup,required:!0,validator:e=>"function"==typeof e},[r.HandlerType.OnInstall]:{type:r.HandlerType.OnInstall,required:!1,validator:e=>"function"==typeof e},[r.HandlerType.OnUpdate]:{type:r.HandlerType.OnUpdate,required:!1,validator:e=>"function"==typeof e},[r.HandlerType.OnKeyringRequest]:{type:r.HandlerType.OnKeyringRequest,required:!0,validator:e=>"function"==typeof e},[r.HandlerType.OnHomePage]:{type:r.HandlerType.OnHomePage,required:!0,validator:e=>"function"==typeof e},[r.HandlerType.OnSettingsPage]:{type:r.HandlerType.OnSettingsPage,required:!0,validator:e=>"function"==typeof e},[r.HandlerType.OnSignature]:{type:r.HandlerType.OnSignature,required:!0,validator:e=>"function"==typeof e},[r.HandlerType.OnUserInput]:{type:r.HandlerType.OnUserInput,required:!1,validator:e=>"function"==typeof e},[r.HandlerType.OnAssetHistoricalPrice]:{type:r.HandlerType.OnAssetHistoricalPrice,required:!0,validator:e=>"function"==typeof e},[r.HandlerType.OnAssetsLookup]:{type:r.HandlerType.OnAssetsLookup,required:!0,validator:e=>"function"==typeof e},[r.HandlerType.OnAssetsConversion]:{type:r.HandlerType.OnAssetsConversion,required:!0,validator:e=>"function"==typeof e},[r.HandlerType.OnProtocolRequest]:{type:r.HandlerType.OnProtocolRequest,required:!0,validator:e=>"function"==typeof e}},n.SNAP_EXPORT_NAMES=Object.values(r.HandlerType)}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/handlers/exports.cjs"}],[2709,{"@metamask/snaps-sdk":2607,"@metamask/superstruct":2740},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.OnHomePageResponseStruct=n.OnHomePageResponseWithIdStruct=n.OnHomePageResponseWithContentStruct=void 0;const r=e("@metamask/snaps-sdk"),s=e("@metamask/superstruct");n.OnHomePageResponseWithContentStruct=(0,s.object)({content:r.ComponentOrElementStruct}),n.OnHomePageResponseWithIdStruct=(0,s.object)({id:(0,s.string)()}),n.OnHomePageResponseStruct=(0,s.union)([n.OnHomePageResponseWithContentStruct,n.OnHomePageResponseWithIdStruct])}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/handlers/home-page.cjs"}],[2710,{"./asset-historical-price.cjs":2706,"./assets-conversion.cjs":2707,"./exports.cjs":2708,"./home-page.cjs":2709,"./name-lookup.cjs":2711,"./settings-page.cjs":2712,"./signature.cjs":2713,"./transaction.cjs":2714,"./types.cjs":2715},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),s(e("./asset-historical-price.cjs"),n),s(e("./assets-conversion.cjs"),n),s(e("./exports.cjs"),n),s(e("./home-page.cjs"),n),s(e("./name-lookup.cjs"),n),s(e("./settings-page.cjs"),n),s(e("./signature.cjs"),n),s(e("./transaction.cjs"),n),s(e("./types.cjs"),n)}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/handlers/index.cjs"}],[2711,{"@metamask/superstruct":2740},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.OnNameLookupResponseStruct=n.DomainResolutionResponseStruct=n.AddressResolutionResponseStruct=n.DomainResolutionStruct=n.AddressResolutionStruct=void 0;const r=e("@metamask/superstruct");n.AddressResolutionStruct=(0,r.object)({protocol:(0,r.string)(),resolvedDomain:(0,r.string)()}),n.DomainResolutionStruct=(0,r.object)({protocol:(0,r.string)(),resolvedAddress:(0,r.string)(),domainName:(0,r.string)()}),n.AddressResolutionResponseStruct=(0,r.object)({resolvedDomains:(0,r.size)((0,r.array)(n.AddressResolutionStruct),1,Infinity)}),n.DomainResolutionResponseStruct=(0,r.object)({resolvedAddresses:(0,r.size)((0,r.array)(n.DomainResolutionStruct),1,Infinity)}),n.OnNameLookupResponseStruct=(0,r.nullable)((0,r.union)([n.AddressResolutionResponseStruct,n.DomainResolutionResponseStruct]))}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/handlers/name-lookup.cjs"}],[2712,{"./home-page.cjs":2709},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.OnSettingsPageResponseStruct=void 0;const r=e("./home-page.cjs");n.OnSettingsPageResponseStruct=r.OnHomePageResponseStruct}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/handlers/settings-page.cjs"}],[2713,{"./transaction.cjs":2714},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.OnSignatureResponseStruct=void 0;const r=e("./transaction.cjs");n.OnSignatureResponseStruct=r.OnTransactionResponseStruct}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/handlers/signature.cjs"}],[2714,{"@metamask/snaps-sdk":2607,"@metamask/superstruct":2740},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.OnTransactionResponseStruct=n.OnTransactionResponseWithContentStruct=n.OnTransactionResponseWithIdStruct=n.OnTransactionSeverityResponseStruct=void 0;const r=e("@metamask/snaps-sdk"),s=e("@metamask/superstruct");n.OnTransactionSeverityResponseStruct=(0,s.object)({severity:(0,s.optional)((0,s.literal)(r.SeverityLevel.Critical))}),n.OnTransactionResponseWithIdStruct=(0,s.assign)(n.OnTransactionSeverityResponseStruct,(0,s.object)({id:(0,s.string)()})),n.OnTransactionResponseWithContentStruct=(0,s.assign)(n.OnTransactionSeverityResponseStruct,(0,s.object)({content:r.ComponentOrElementStruct})),n.OnTransactionResponseStruct=(0,s.nullable)((0,s.union)([n.OnTransactionResponseWithContentStruct,n.OnTransactionResponseWithIdStruct]))}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/handlers/transaction.cjs"}],[2715,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r;Object.defineProperty(n,"__esModule",{value:!0}),n.HandlerType=void 0,function(e){e.OnRpcRequest="onRpcRequest",e.OnSignature="onSignature",e.OnTransaction="onTransaction",e.OnCronjob="onCronjob",e.OnInstall="onInstall",e.OnUpdate="onUpdate",e.OnNameLookup="onNameLookup",e.OnKeyringRequest="onKeyringRequest",e.OnHomePage="onHomePage",e.OnSettingsPage="onSettingsPage",e.OnUserInput="onUserInput",e.OnAssetsLookup="onAssetsLookup",e.OnAssetsConversion="onAssetsConversion",e.OnAssetHistoricalPrice="onAssetHistoricalPrice",e.OnProtocolRequest="onProtocolRequest"}(r||(n.HandlerType=r={}))}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/handlers/types.cjs"}],[2716,{"./svg.cjs":2730,"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getSvgDimensions=n.assertIsSnapIcon=n.SVG_MAX_BYTE_SIZE_TEXT=n.SVG_MAX_BYTE_SIZE=void 0;const r=e("@metamask/utils"),s=e("./svg.cjs");n.SVG_MAX_BYTE_SIZE=1e5,n.SVG_MAX_BYTE_SIZE_TEXT=`${Math.floor(n.SVG_MAX_BYTE_SIZE/1e3)}kb`,n.assertIsSnapIcon=function(e){(0,r.assert)(e.path.endsWith(".svg"),'Expected snap icon to end in ".svg".');const t="string"==typeof e.value?(0,r.stringToBytes)(e.value).byteLength:e.value.byteLength;(0,r.assert)(t<=n.SVG_MAX_BYTE_SIZE,`The specified SVG icon exceeds the maximum size of ${n.SVG_MAX_BYTE_SIZE_TEXT}.`),(0,r.assert)((0,s.isSvg)(e.toString()),"Snap icon must be a valid SVG.")},n.getSvgDimensions=function(e){try{const t=(0,s.parseSvg)(e),n=t["@_height"],i=t["@_width"];if(n&&i)return{height:n,width:i};const a=t["@_viewBox"];if(a){const[e,t,n,s]=a.split(" ");if(n&&s){const e=parseInt(n,10),t=parseInt(s,10);return(0,r.assert)(Number.isInteger(e)&&e>0),(0,r.assert)(Number.isInteger(t)&&t>0),{width:e,height:t}}}}catch{throw new Error("Snap icon must be a valid SVG.")}return null}}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/icon.cjs"}],[2717,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createWindow=void 0,n.createWindow=async function({uri:e,id:t,sandbox:n=!0,testId:r="snaps-iframe"}){return await new Promise(((s,i)=>{const a=document.createElement("iframe");a.setAttribute("id",t),a.setAttribute("data-testid",r),n&&a.setAttribute("sandbox","allow-scripts"),a.setAttribute("src",e),document.body.appendChild(a),a.addEventListener("load",(()=>{a.contentWindow?s(a.contentWindow):i(new Error(`iframe.contentWindow not present on load for job "${t}".`))}))}))}}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/iframe.cjs"}],[2718,{"./array.cjs":2692,"./auxiliary-files.cjs":2693,"./base64.cjs":2694,"./bytes.cjs":2695,"./caveats.cjs":2696,"./checksum.cjs":2697,"./constants.cjs":2698,"./cronjob.cjs":2699,"./currency.cjs":2700,"./deep-clone.cjs":2701,"./default-endowments.cjs":2702,"./derivation-paths.cjs":2703,"./entropy.cjs":2704,"./errors.cjs":2705,"./handlers/index.cjs":2710,"./iframe.cjs":2717,"./json-rpc.cjs":2719,"./json.cjs":2720,"./localization.cjs":2721,"./logging.cjs":2722,"./manifest/index.cjs":2723,"./path.cjs":2725,"./platform-version.cjs":2726,"./snaps.cjs":2727,"./strings.cjs":2728,"./structs.cjs":2729,"./time.cjs":2731,"./types.cjs":2732,"./ui.cjs":2733,"./url.cjs":2734,"./validation.cjs":2735,"./versions.cjs":2736,"./virtual-file/index.cjs":2738},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),s(e("./array.cjs"),n),s(e("./auxiliary-files.cjs"),n),s(e("./base64.cjs"),n),s(e("./bytes.cjs"),n),s(e("./caveats.cjs"),n),s(e("./checksum.cjs"),n),s(e("./constants.cjs"),n),s(e("./cronjob.cjs"),n),s(e("./currency.cjs"),n),s(e("./deep-clone.cjs"),n),s(e("./default-endowments.cjs"),n),s(e("./derivation-paths.cjs"),n),s(e("./entropy.cjs"),n),s(e("./errors.cjs"),n),s(e("./handlers/index.cjs"),n),s(e("./iframe.cjs"),n),s(e("./json.cjs"),n),s(e("./json-rpc.cjs"),n),s(e("./localization.cjs"),n),s(e("./logging.cjs"),n),s(e("./manifest/index.cjs"),n),s(e("./path.cjs"),n),s(e("./platform-version.cjs"),n),s(e("./snaps.cjs"),n),s(e("./strings.cjs"),n),s(e("./structs.cjs"),n),s(e("./time.cjs"),n),s(e("./types.cjs"),n),s(e("./ui.cjs"),n),s(e("./url.cjs"),n),s(e("./validation.cjs"),n),s(e("./versions.cjs"),n),s(e("./virtual-file/index.cjs"),n)}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/index.cjs"}],[2719,{"@metamask/permission-controller":2254,"@metamask/superstruct":2740,"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.assertIsJsonRpcSuccess=n.isOriginAllowed=n.assertIsKeyringOrigins=n.KeyringOriginsStruct=n.assertIsRpcOrigins=n.RpcOriginsStruct=void 0;const r=e("@metamask/permission-controller"),s=e("@metamask/superstruct"),i=e("@metamask/utils"),a=(0,s.array)((0,s.refine)((0,s.string)(),"Allowed origin",(e=>!(e.split("*").length-1>2)||'No more than two wildcards ("*") are allowed in an origin specifier.')));function o(e,t){if("*"===e||e===t)return!0;const n=function(e){const t=e.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&").replace(/\\\*/gu,".*");return RegExp(`^${t}$`,"u")}(e);return n.test(t)}n.RpcOriginsStruct=(0,s.refine)((0,s.object)({dapps:(0,s.optional)((0,s.boolean)()),snaps:(0,s.optional)((0,s.boolean)()),allowedOrigins:(0,s.optional)(a)}),"RPC origins",(e=>!!Boolean(!0===e.snaps||!0===e.dapps||e.allowedOrigins&&e.allowedOrigins.length>0)||"Must specify at least one JSON-RPC origin.")),n.assertIsRpcOrigins=function(e,t){(0,i.assertStruct)(e,n.RpcOriginsStruct,"Invalid JSON-RPC origins",t)},n.KeyringOriginsStruct=(0,s.object)({allowedOrigins:(0,s.optional)(a)}),n.assertIsKeyringOrigins=function(e,t){(0,i.assertStruct)(e,n.KeyringOriginsStruct,"Invalid keyring origins",t)},n.isOriginAllowed=function(e,t,n){return"metamask"===n||(!!e.allowedOrigins?.some((e=>o(e,n)))||(!(t!==r.SubjectType.Website||!e.dapps)||Boolean(t===r.SubjectType.Snap&&e.snaps)))},n.assertIsJsonRpcSuccess=function(e){if(!(0,i.isJsonRpcSuccess)(e)){if((0,i.isJsonRpcFailure)(e))throw new Error(`JSON-RPC request failed: ${e.error.message}`);throw new Error("Invalid JSON-RPC response.")}}}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/json-rpc.cjs"}],[2720,{"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getJsonSizeUnsafe=n.parseJson=void 0;const r=e("@metamask/utils");n.parseJson=function(e){return(0,r.getSafeJson)(JSON.parse(e))},n.getJsonSizeUnsafe=function(e){const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength}}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/json.cjs"}],[2721,{"./json.cjs":2720,"@metamask/snaps-sdk":2607,"@metamask/superstruct":2740},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateSnapManifestLocalizations=n.getLocalizedSnapManifest=n.translate=n.TRANSLATION_REGEX=n.getLocalizationFile=n.getValidatedLocalizationFiles=n.LocalizationFileStruct=n.LOCALIZABLE_FIELDS=void 0;const r=e("@metamask/snaps-sdk"),s=e("@metamask/superstruct"),i=e("./json.cjs");function a(e,t){const n=t.find((t=>t.locale===e));return n||t.find((e=>"en"===e.locale))}function o(e,t){const r=e.matchAll(n.TRANSLATION_REGEX);return Array.from(r).reduce(((n,[r,s])=>{if(!t)throw new Error(`Failed to translate "${e}": No localization file found.`);const i=t.messages[s.trim()];if(!i)throw new Error(`Failed to translate "${e}": No translation found for "${s.trim()}" in "${t.locale}" file.`);return n.replace(r,i.message)}),e)}function c(e,t,r){const s=a(t,r);return n.LOCALIZABLE_FIELDS.reduce(((e,t)=>{const n=o(e[t],s);return{...e,[t]:n}}),e)}n.LOCALIZABLE_FIELDS=["description","proposedName"],n.LocalizationFileStruct=(0,s.object)({locale:(0,s.string)(),messages:(0,s.record)((0,s.string)(),(0,s.object)({message:(0,s.string)(),description:(0,s.optional)((0,s.string)())}))}),n.getValidatedLocalizationFiles=function(e){for(const t of e)try{t.result=(0,s.create)((0,i.parseJson)(t.toString()),n.LocalizationFileStruct)}catch(e){if(e instanceof s.StructError)throw new Error(`Failed to validate localization file "${t.path}": ${e.message}.`);if(e instanceof SyntaxError)throw new Error(`Failed to parse localization file "${t.path}" as JSON.`);throw e}return e},n.getLocalizationFile=a,n.TRANSLATION_REGEX=/\{\{\s?([a-zA-Z0-9-_\s]+)\s?\}\}/gu,n.translate=o,n.getLocalizedSnapManifest=c,n.validateSnapManifestLocalizations=function(e,t){try{t.filter((e=>"en"!==e.locale)).forEach((n=>{c(e,n.locale,t)})),c(e,"en",t)}catch(e){throw new Error(`Failed to localize Snap manifest: ${(0,r.getErrorMessage)(e)}`)}}}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/localization.cjs"}],[2722,{"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.logWarning=n.logError=n.logInfo=n.snapsLogger=void 0;const r=e("@metamask/utils");n.snapsLogger=(0,r.createProjectLogger)("snaps"),n.logInfo=function(e,...t){console.log(e,...t)},n.logError=function(e,...t){console.error(e,...t)},n.logWarning=function(e,...t){console.warn(e,...t)}}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/logging.cjs"}],[2723,{"./validation.cjs":2724},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),s(e("./validation.cjs"),n)}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/manifest/index.cjs"}],[2724,{"../array.cjs":2692,"../cronjob.cjs":2699,"../entropy.cjs":2704,"../json-rpc.cjs":2719,"../snaps.cjs":2727,"../structs.cjs":2729,"../types.cjs":2732,"@metamask/key-tree":1976,"@metamask/superstruct":2740,"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createSnapManifest=n.assertIsSnapManifest=n.isSnapManifest=n.SnapManifestStruct=n.InitialConnectionsStruct=n.SnapAuxilaryFilesStruct=n.PermissionsStruct=n.EmptyObjectStruct=n.HandlerCaveatsStruct=n.ProtocolScopesStruct=n.MaxRequestTimeStruct=n.MAXIMUM_REQUEST_TIMEOUT=n.MINIMUM_REQUEST_TIMEOUT=n.LookupMatchersStruct=n.ChainIdsStruct=n.SnapIdsStruct=n.SemVerRangeStruct=n.SnapGetBip32EntropyPermissionsStruct=n.Bip32EntropyStruct=n.CurveStruct=n.bip32entropy=n.Bip32PathStruct=n.FORBIDDEN_COIN_TYPES=void 0;const r=e("@metamask/key-tree"),s=e("@metamask/superstruct"),i=e("@metamask/utils"),a=e("../array.cjs"),o=e("../cronjob.cjs"),c=e("../entropy.cjs"),u=e("../json-rpc.cjs"),l=e("../snaps.cjs"),d=e("../structs.cjs"),f=e("../types.cjs"),h=[c.SIP_6_MAGIC_VALUE,c.STATE_ENCRYPTION_MAGIC_VALUE];n.FORBIDDEN_COIN_TYPES=[60];const p=n.FORBIDDEN_COIN_TYPES.map((e=>["m","44'",`${e}'`]));n.Bip32PathStruct=(0,s.refine)((0,s.array)((0,s.string)()),"BIP-32 path",(e=>0===e.length?"Path must be a non-empty BIP-32 derivation path array":"m"!==e[0]?'Path must start with "m".':e.length<3?"Paths must have a length of at least three.":e.slice(1).some((e=>!(0,r.isValidBIP32PathSegment)(e)))?"Path must be a valid BIP-32 derivation path array.":h.includes(e[1])?`The purpose "${e[1]}" is not allowed for entropy derivation.`:!p.some((t=>(0,a.isEqual)(e.slice(0,t.length),t)))||`The path "${e.join("/")}" is not allowed for entropy derivation.`));n.bip32entropy=e=>(0,s.refine)(e,"BIP-32 entropy",(e=>"ed25519"!==e.curve||!e.path.slice(1).some((e=>!e.endsWith("'")))||"Ed25519 does not support unhardened paths.")),n.CurveStruct=(0,s.enums)(["ed25519","secp256k1","ed25519Bip32"]),n.Bip32EntropyStruct=(0,n.bip32entropy)((0,s.type)({path:n.Bip32PathStruct,curve:n.CurveStruct})),n.SnapGetBip32EntropyPermissionsStruct=(0,s.size)((0,s.array)(n.Bip32EntropyStruct),1,Infinity),n.SemVerRangeStruct=(0,s.refine)((0,s.string)(),"SemVer range",(e=>!!(0,i.isValidSemVerRange)(e)||"Expected a valid SemVer range.")),n.SnapIdsStruct=(0,s.refine)((0,s.record)(l.SnapIdStruct,(0,s.object)({version:(0,s.optional)(n.SemVerRangeStruct)})),"SnapIds",(e=>0!==Object.keys(e).length)),n.ChainIdsStruct=(0,s.size)((0,s.array)(i.CaipChainIdStruct),1,Infinity),n.LookupMatchersStruct=(0,s.union)([(0,s.object)({tlds:(0,s.size)((0,s.array)((0,s.string)()),1,Infinity)}),(0,s.object)({schemes:(0,s.size)((0,s.array)((0,s.string)()),1,Infinity)}),(0,s.object)({tlds:(0,s.size)((0,s.array)((0,s.string)()),1,Infinity),schemes:(0,s.size)((0,s.array)((0,s.string)()),1,Infinity)})]),n.MINIMUM_REQUEST_TIMEOUT=(0,i.inMilliseconds)(5,i.Duration.Second),n.MAXIMUM_REQUEST_TIMEOUT=(0,i.inMilliseconds)(3,i.Duration.Minute),n.MaxRequestTimeStruct=(0,s.size)((0,s.integer)(),n.MINIMUM_REQUEST_TIMEOUT,n.MAXIMUM_REQUEST_TIMEOUT),n.ProtocolScopesStruct=(0,s.record)(i.CaipChainIdStruct,(0,s.object)({methods:(0,s.array)((0,s.string)())})),n.HandlerCaveatsStruct=(0,s.object)({maxRequestTime:(0,s.optional)(n.MaxRequestTimeStruct)}),n.EmptyObjectStruct=(0,s.object)({}),n.PermissionsStruct=(0,s.type)({"endowment:assets":(0,s.optional)((0,d.mergeStructs)(n.HandlerCaveatsStruct,(0,s.object)({scopes:n.ChainIdsStruct}))),"endowment:cronjob":(0,s.optional)((0,d.mergeStructs)(n.HandlerCaveatsStruct,(0,s.object)({jobs:(0,s.optional)(o.CronjobSpecificationArrayStruct)}))),"endowment:ethereum-provider":(0,s.optional)(n.EmptyObjectStruct),"endowment:keyring":(0,s.optional)((0,d.mergeStructs)(n.HandlerCaveatsStruct,u.KeyringOriginsStruct)),"endowment:protocol":(0,s.optional)((0,d.mergeStructs)(n.HandlerCaveatsStruct,(0,s.object)({scopes:n.ProtocolScopesStruct}))),"endowment:lifecycle-hooks":(0,s.optional)(n.HandlerCaveatsStruct),"endowment:name-lookup":(0,s.optional)((0,d.mergeStructs)(n.HandlerCaveatsStruct,(0,s.object)({chains:(0,s.optional)(n.ChainIdsStruct),matchers:(0,s.optional)(n.LookupMatchersStruct)}))),"endowment:network-access":(0,s.optional)(n.EmptyObjectStruct),"endowment:page-home":(0,s.optional)(n.HandlerCaveatsStruct),"endowment:rpc":(0,s.optional)((0,d.mergeStructs)(n.HandlerCaveatsStruct,u.RpcOriginsStruct)),"endowment:signature-insight":(0,s.optional)((0,d.mergeStructs)(n.HandlerCaveatsStruct,(0,s.object)({allowSignatureOrigin:(0,s.optional)((0,s.boolean)())}))),"endowment:transaction-insight":(0,s.optional)((0,d.mergeStructs)(n.HandlerCaveatsStruct,(0,s.object)({allowTransactionOrigin:(0,s.optional)((0,s.boolean)())}))),"endowment:webassembly":(0,s.optional)(n.EmptyObjectStruct),snap_dialog:(0,s.optional)(n.EmptyObjectStruct),snap_manageState:(0,s.optional)(n.EmptyObjectStruct),snap_manageAccounts:(0,s.optional)(n.EmptyObjectStruct),snap_notify:(0,s.optional)(n.EmptyObjectStruct),snap_getBip32Entropy:(0,s.optional)(n.SnapGetBip32EntropyPermissionsStruct),snap_getBip32PublicKey:(0,s.optional)(n.SnapGetBip32EntropyPermissionsStruct),snap_getBip44Entropy:(0,s.optional)((0,s.size)((0,s.array)((0,s.object)({coinType:(0,s.size)((0,s.integer)(),0,2**32-1)})),1,Infinity)),snap_getEntropy:(0,s.optional)(n.EmptyObjectStruct),snap_getLocale:(0,s.optional)(n.EmptyObjectStruct),wallet_snap:(0,s.optional)(n.SnapIdsStruct)}),n.SnapAuxilaryFilesStruct=(0,s.array)((0,s.string)()),n.InitialConnectionsStruct=(0,s.record)((0,s.intersection)([(0,s.string)(),(0,f.uri)()]),(0,s.object)({})),n.SnapManifestStruct=(0,s.object)({version:i.VersionStruct,description:(0,s.size)((0,s.string)(),1,280),proposedName:(0,s.size)((0,s.string)(),1,214),repository:(0,s.optional)((0,s.type)({type:(0,s.size)((0,s.string)(),1,Infinity),url:(0,s.size)((0,s.string)(),1,Infinity)})),source:(0,s.object)({shasum:i.ChecksumStruct,location:(0,s.object)({npm:(0,s.object)({filePath:(0,s.size)((0,s.string)(),1,Infinity),iconPath:(0,s.optional)((0,s.size)((0,s.string)(),1,Infinity)),packageName:f.NameStruct,registry:(0,s.union)([(0,s.literal)("https://registry.npmjs.org"),(0,s.literal)("https://registry.npmjs.org/")])})}),files:(0,s.optional)(n.SnapAuxilaryFilesStruct),locales:(0,s.optional)(n.SnapAuxilaryFilesStruct)}),initialConnections:(0,s.optional)(n.InitialConnectionsStruct),initialPermissions:n.PermissionsStruct,manifestVersion:(0,s.literal)("0.1"),platformVersion:(0,s.optional)(i.VersionStruct),$schema:(0,s.optional)((0,s.string)())}),n.isSnapManifest=function(e){return(0,s.is)(e,n.SnapManifestStruct)},n.assertIsSnapManifest=function(e){(0,i.assertStruct)(e,n.SnapManifestStruct,`"${f.NpmSnapFileNames.Manifest}" is invalid`)},n.createSnapManifest=function(e){return(0,s.create)(e,n.SnapManifestStruct)}}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/manifest/validation.cjs"}],[2725,{"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.normalizeRelative=void 0;const r=e("@metamask/utils");n.normalizeRelative=function(e){return(0,r.assert)(!e.startsWith("/")),(0,r.assert)(-1===e.search(/:|\/\//u),`Path "${e}" potentially an URI instead of local relative`),e.startsWith("./")?e.slice(2):e}}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/path.cjs"}],[2726,{"@metamask/snaps-sdk/package.json":2691},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.getPlatformVersion=void 0;const s=r(e("@metamask/snaps-sdk/package.json"));n.getPlatformVersion=function(){return s.default.version}}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/platform-version.cjs"}],[2727,{"./caveats.cjs":2696,"./checksum.cjs":2697,"./types.cjs":2732,"@metamask/snaps-sdk":2607,"@metamask/superstruct":2740,"@metamask/utils":2822,"@scure/base":2896,"fast-json-stable-stringify":4304,"validate-npm-package-name":5549},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.verifyRequestedSnapPermissions=n.isSnapPermitted=n.assertIsValidSnapId=n.isSnapId=n.stripSnapPrefix=n.getSnapPrefix=n.SnapIdStruct=n.SnapIdPrefixStruct=n.HttpSnapIdStruct=n.NpmSnapIdStruct=n.LocalSnapIdStruct=n.BaseSnapIdStruct=n.LOCALHOST_HOSTNAMES=n.validateSnapShasum=n.getSnapChecksum=n.SnapStatusEvents=n.SnapStatus=n.PROPOSED_NAME_REGEX=void 0;const s=e("@metamask/snaps-sdk"),i=e("@metamask/superstruct"),a=e("@metamask/utils"),o=e("@scure/base"),c=r(e("fast-json-stable-stringify")),u=r(e("validate-npm-package-name")),l=e("./caveats.cjs"),d=e("./checksum.cjs"),f=e("./types.cjs");var h,p;function m(e){const t=e.clone();return delete t.result.source.shasum,t.value=(0,c.default)(t.result),t}async function g(e){const{manifest:t,sourceCode:n,svgIcon:r,auxiliaryFiles:s,localizationFiles:i}=e,a=[m(t),n,r,...s,...i].filter((e=>e!==undefined));return o.base64.encode(await(0,d.checksumFiles)(a))}n.PROPOSED_NAME_REGEX=/^(?:[A-Za-z0-9-_]+( [A-Za-z0-9-_]+)*)|(?:(?:@[A-Za-z0-9-*~][A-Za-z0-9-*._~]*\/)?[A-Za-z0-9-~][A-Za-z0-9-._~]*)$/u,function(e){e.Installing="installing",e.Updating="updating",e.Running="running",e.Stopped="stopped",e.Crashed="crashed"}(h||(n.SnapStatus=h={})),function(e){e.Start="START",e.Stop="STOP",e.Crash="CRASH",e.Update="UPDATE"}(p||(n.SnapStatusEvents=p={})),n.getSnapChecksum=g,n.validateSnapShasum=async function(e,t="Invalid Snap manifest: manifest shasum does not match computed shasum."){if(e.manifest.result.source.shasum!==await g(e))throw new Error(t)},n.LOCALHOST_HOSTNAMES=["localhost","127.0.0.1","[::1]"],n.BaseSnapIdStruct=(0,a.definePattern)("Base Snap Id",/^[\x21-\x7E]*$/u);const y=(0,f.uri)({protocol:(0,i.enums)(["http:","https:"]),hostname:(0,i.enums)(n.LOCALHOST_HOSTNAMES),hash:(0,i.empty)((0,i.string)()),search:(0,i.empty)((0,i.string)())});function b(e){const t=Object.values(f.SnapIdPrefixes).find((t=>e.startsWith(t)));if(t!==undefined)return t;throw new Error(`Invalid or no prefix found for "${e}"`)}n.LocalSnapIdStruct=(0,i.refine)(n.BaseSnapIdStruct,"local Snap Id",(e=>{if(!e.startsWith(f.SnapIdPrefixes.local))return`Expected local snap ID, got "${e}".`;const[t]=(0,i.validate)(e.slice(f.SnapIdPrefixes.local.length),y);return t??!0})),n.NpmSnapIdStruct=(0,i.intersection)([n.BaseSnapIdStruct,(0,f.uri)({protocol:(0,i.literal)(f.SnapIdPrefixes.npm),pathname:(0,i.refine)((0,i.string)(),"package name",(function*(e){const t=e.startsWith("/")?e.slice(1):e,{errors:n,validForNewPackages:r,warnings:s}=(0,u.default)(t);return r||(n===undefined?((0,a.assert)(s!==undefined),yield*s):yield*n),!0})),search:(0,i.empty)((0,i.string)()),hash:(0,i.empty)((0,i.string)())})]),n.HttpSnapIdStruct=(0,i.intersection)([n.BaseSnapIdStruct,(0,f.uri)({protocol:(0,i.enums)(["http:","https:"]),search:(0,i.empty)((0,i.string)()),hash:(0,i.empty)((0,i.string)())})]),n.SnapIdPrefixStruct=(0,i.refine)((0,i.string)(),"Snap ID prefix",(e=>{if(Object.values(f.SnapIdPrefixes).some((t=>e.startsWith(t))))return!0;return`Invalid or no prefix found. Expected Snap ID to start with one of: ${Object.values(f.SnapIdPrefixes).map((e=>`"${e}"`)).join(", ")}, but received: "${e}"`})),n.SnapIdStruct=(0,s.selectiveUnion)((e=>"string"==typeof e&&e.startsWith(f.SnapIdPrefixes.npm)?n.NpmSnapIdStruct:"string"==typeof e&&e.startsWith(f.SnapIdPrefixes.local)?n.LocalSnapIdStruct:n.SnapIdPrefixStruct)),n.getSnapPrefix=b,n.stripSnapPrefix=function(e){return e.replace(b(e),"")},n.isSnapId=function(e){return(0,i.is)(e,n.SnapIdStruct)},n.assertIsValidSnapId=function(e){(0,a.assertStruct)(e,n.SnapIdStruct,"Invalid snap ID")},n.isSnapPermitted=function(e,t){return Boolean((e?.wallet_snap?.caveats?.find((e=>e.type===l.SnapCaveatType.SnapIds))??{}).value?.[t])},n.verifyRequestedSnapPermissions=function(e){(0,a.assert)((0,a.isObject)(e),"Requested permissions must be an object.");const{wallet_snap:t}=e;(0,a.assert)((0,a.isObject)(t),"wallet_snap is missing from the requested permissions.");const{caveats:n}=t;(0,a.assert)(Array.isArray(n)&&1===n.length,"wallet_snap must have a caveat property with a single-item array value.");const[r]=n;(0,a.assert)((0,a.isObject)(r)&&r.type===l.SnapCaveatType.SnapIds&&(0,a.isObject)(r.value),`The requested permissions do not have a valid ${l.SnapCaveatType.SnapIds} caveat.`)}}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/snaps.cjs"}],[2728,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.indent=void 0,n.indent=function(e,t=2){return e.replace(/^/gmu," ".repeat(t))}}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/strings.cjs"}],[2729,{"./strings.cjs":2728,"@metamask/snaps-sdk":2607,"@metamask/superstruct":2740,"@metamask/utils":2822,chalk:3963},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.mergeStructs=n.createUnion=n.validateUnion=n.getStructErrorMessage=n.getStructFailureMessage=n.getStructErrorPrefix=n.getUnionStructNames=n.getStructFromPath=n.createFromStruct=n.getError=n.arrayToGenerator=n.SnapsStructError=n.named=void 0;const r=e("@metamask/snaps-sdk"),s=e("@metamask/superstruct"),i=e("@metamask/utils"),a=e("chalk"),o=e("./strings.cjs");function c(e,t,n){return n?t(e):e}n.named=function(e,t){return new s.Struct({...t,type:e})};class u extends s.StructError{constructor(e,t,n,r,s,i=!0){super(r,s),this.name="SnapsStructError",this.message=`${t}.\n\n${g(e,[...s()],i)}${n?`\n\n${n}`:""}`}}function*l(e){for(const t of e)yield t}function d({struct:e,prefix:t,suffix:n="",error:r,colorize:s}){return new u(e,t,n,r,(()=>l(r.failures())),s)}function f(e,t){return t.reduce(((t,n)=>(0,i.isObject)(e.schema)&&e.schema[n]?e.schema[n]:t),e)}function h(e,t=!0){return Array.isArray(e.schema)?e.schema.map((({type:e})=>c(e,a.green,t))):null}function p(e,t=!0){return"never"===e.type||0===e.path.length?"":`At path: ${c(e.path.join("."),a.bold,t)}  `}function m(e,t,n=!0){const r=c(JSON.stringify(t.value),a.red,n),s=p(t,n);if("union"===t.type){const i=h(f(e,t.path),n);return i?`${s}Expected the value to be one of: ${i.join(", ")}, but received: ${r}.`:`${s}${t.message}.`}if("literal"===t.type){return`${s}${t.message.replace(/the literal `(.+)`,/u,`the value to be \`${c("$1",a.green,n)}\`,`).replace(/, but received: (.+)/u,`, but received: ${c("$1",a.red,n)}`)}.`}if("never"===t.type)return`Unknown key: ${c(t.path.join("."),a.bold,n)}, received: ${r}.`;if("size"===t.refinement){return`${s}${t.message.replace(/length between `(\d+)` and `(\d+)`/u,`length between ${c("$1",a.green,n)} and ${c("$2",a.green,n)},`).replace(/length of `(\d+)`/u,`length of ${c("$1",a.red,n)}`).replace(/a array/u,"an array")}.`}return t.refinement!==undefined?`${s}${t.message}.`:`${s}Expected a value of type ${c(t.type,a.green,n)}, but received: ${r}.`}function g(e,t,n=!0){return t.map((t=>(0,o.indent)(` ${m(e,t,n)}`))).join("\n")}function y(e,t,n,a=!1){(0,i.assert)(t.schema,"Expected a struct with a schema. Make sure to use `union` from `@metamask/snaps-sdk`."),(0,i.assert)(t.schema.length>0,"Expected a non-empty array of structs.");const o=t.schema.map((e=>e.schema[n])),c=(0,s.type)({[n]:(0,r.union)(o)}),[u]=(0,s.validate)(e,c,{coerce:a});if(u)throw new Error(m(c,u.failures()[0],!1));const l=e,d=t.schema.filter((e=>(0,s.is)(l[n],e.schema[n])));(0,i.assert)(d.length>0,"Expected a struct to match the value.");const f=d.map((e=>(0,s.validate)(l,e,{coerce:a}))),h=f.find((([e])=>!e));if(h)return h[1];(0,i.assert)(f[0][0],"Expected at least one error.");const p=f.reduce(((e,[t])=>((0,i.assert)(t,"Expected an error."),t.failures().length<e.failures().length?t:e)),f[0][0]);throw new Error(m(t,p.failures()[0],!1))}n.SnapsStructError=u,n.arrayToGenerator=l,n.getError=d,n.createFromStruct=function(e,t,n,r=""){try{return(0,s.create)(e,t)}catch(e){if(e instanceof s.StructError)throw d({struct:t,prefix:n,suffix:r,error:e});throw e}},n.getStructFromPath=f,n.getUnionStructNames=h,n.getStructErrorPrefix=p,n.getStructFailureMessage=m,n.getStructErrorMessage=g,n.validateUnion=y,n.createUnion=function(e,t,n){return y(e,t,n,!0)},n.mergeStructs=function(...e){const t=s.assign(...e);return new s.Struct({...t,*refiner(t,n){for(const r of e)yield*r.refiner(t,n)}})}}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/structs.cjs"}],[2730,{"@metamask/utils":2822,"fast-xml-parser":4306},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isSvg=n.parseSvg=void 0;const r=e("@metamask/utils"),s=e("fast-xml-parser");function i(e){try{const t=e.trim();(0,r.assert)(t.length>0);const n=new s.XMLParser({ignoreAttributes:!1,parseAttributeValue:!0}).parse(t,!0);return(0,r.assert)((0,r.hasProperty)(n,"svg")),(0,r.isObject)(n.svg)?n.svg:{}}catch{throw new Error("Snap icon must be a valid SVG.")}}n.parseSvg=i,n.isSvg=function(e){try{return i(e),!0}catch{return!1}}}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/svg.cjs"}],[2731,{"@metamask/superstruct":2740,luxon:4735},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ISO8601DateStruct=n.ISO8601DurationStruct=void 0;const r=e("@metamask/superstruct"),s=e("luxon");n.ISO8601DurationStruct=(0,r.refine)((0,r.string)(),"ISO 8601 duration",(e=>!!s.Duration.fromISO(e).isValid||"Not a valid ISO 8601 duration"));const i=/Z|([+-]\d{2}:?\d{2})$/u;n.ISO8601DateStruct=(0,r.refine)((0,r.string)(),"ISO 8601 date",(e=>s.DateTime.fromISO(e).isValid?!!i.test(e)||"ISO 8601 date must have timezone information":"Not a valid ISO 8601 date"))}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/time.cjs"}],[2732,{"@metamask/superstruct":2740,"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.WALLET_SNAP_PERMISSION_KEY=n.isValidUrl=n.uri=n.SNAP_STREAM_NAMES=n.SnapIdPrefixes=n.NpmSnapPackageJsonStruct=n.NameStruct=n.NpmSnapFileNames=void 0;const r=e("@metamask/superstruct"),s=e("@metamask/utils");var i,a,o;!function(e){e.PackageJson="package.json",e.Manifest="snap.manifest.json"}(i||(n.NpmSnapFileNames=i={})),n.NameStruct=(0,r.size)((0,s.definePattern)("Snap Name",/^(?:@[a-z0-9-*~][a-z0-9-*._~]*\/)?[a-z0-9-~][a-z0-9-._~]*$/u),1,214),n.NpmSnapPackageJsonStruct=(0,r.type)({version:s.VersionStruct,name:n.NameStruct,main:(0,r.optional)((0,r.size)((0,r.string)(),1,Infinity)),repository:(0,r.optional)((0,r.type)({type:(0,r.size)((0,r.string)(),1,Infinity),url:(0,r.size)((0,r.string)(),1,Infinity)}))}),function(e){e.npm="npm:",e.local="local:"}(a||(n.SnapIdPrefixes=a={})),function(e){e.JSON_RPC="jsonRpc",e.COMMAND="command"}(o||(n.SNAP_STREAM_NAMES=o={}));n.uri=(e={})=>(0,r.refine)((0,r.union)([(0,r.string)(),(0,r.instance)(URL)]),"uri",(t=>{try{const n=new URL(t),s=(0,r.type)(e);return(0,r.assert)(n,s),!0}catch{return`Expected URL, got "${t.toString()}".`}})),n.isValidUrl=function(e,t={}){return(0,r.is)(e,(0,n.uri)(t))},n.WALLET_SNAP_PERMISSION_KEY="wallet_snap"}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/types.cjs"}],[2733,{"./url.cjs":2734,"@metamask/snaps-sdk":2607,"@metamask/snaps-sdk/jsx":2690,"@metamask/snaps-sdk/jsx-runtime":2689,"@metamask/utils":2822,marked:4736},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.serialiseJsx=n.walkJsx=n.getJsxChildren=n.hasChildren=n.getTotalTextLength=n.validateJsxElements=n.validateAssetSelector=n.validateTextLinks=n.validateLink=n.getJsxElementFromComponent=n.getTextChildren=void 0;const r=e("@metamask/snaps-sdk/jsx-runtime"),s=e("@metamask/snaps-sdk"),i=e("@metamask/snaps-sdk/jsx"),a=e("@metamask/utils"),o=e("marked"),c=e("./url.cjs"),u=5e4,l=["https:","mailto:","metamask:"];function d(e){switch(e){case"primary":return"primary";case"secondary":return"destructive";default:return undefined}}function f(e){return 1===e.length?e[0]:e}function h(e){return e.tokens&&e.tokens.length>0?f(e.tokens.flatMap(m)):e.href}function p(e){return f(e.flatMap(m))}function m(e){switch(e.type){case"link":return(0,r.jsx)(i.Link,{href:e.href,children:h(e)});case"text":return e.text;case"strong":return(0,r.jsx)(i.Bold,{children:p(e.tokens)});case"em":return(0,r.jsx)(i.Italic,{children:p(e.tokens)});default:return null}}function g(e){const t=(0,o.lexer)(e,{gfm:!1}),n=[];return(0,o.walkTokens)(t,(e=>{if("paragraph"===e.type){n.length>0&&n.push("\n\n");const{tokens:t}=e;n.push(...t.flatMap(m))}})),n.filter((e=>null!==e))}function y(e,t,n){try{const r=new URL(e);if((0,a.assert)(l.includes(r.protocol),`Protocol must be one of: ${l.join(", ")}.`),"metamask:"===r.protocol){const t=(0,c.parseMetaMaskUrl)(e);t.snapId&&(0,a.assert)(n(t.snapId),"The Snap being navigated to is not installed.")}else if("mailto:"===r.protocol){const e=r.pathname.split(",");for(const n of e){const e=n.split("@")[1];(0,a.assert)(!e.includes(":"));const r=`https://${e}`;(0,a.assert)(!t(r),"The specified URL is not allowed.")}return}(0,a.assert)(!t(r.href),"The specified URL is not allowed.")}catch(e){throw new Error(`Invalid URL: ${"ERR_ASSERTION"===e?.code?e.message:"Unable to parse URL."}`)}}function b(e,t){const n=t(e);(0,a.assert)(n,`Could not find account for address: ${e}`)}function w(e){const{type:t}=e;switch(t){case s.NodeType.Panel:return e.children.reduce(((e,t)=>e+w(t)),0);case s.NodeType.Row:return w(e.value);case s.NodeType.Text:return e.value.length;default:return 0}}function v(e){return(0,a.hasProperty)(e.props,"children")}function S(e){return Boolean(e)&&!0!==e}function T(e){if(v(e)){if(Array.isArray(e.props.children))return e.props.children.filter(S).flat(Infinity);if(e.props.children)return[e.props.children]}return[]}function E(e,t,n=0){if(Array.isArray(e)){for(const r of e){const e=E(r,t,n);if(e!==undefined)return e}return undefined}const r=t(e,n);if(r!==undefined)return r;if((0,a.hasProperty)(e,"props")&&(0,a.isPlainObject)(e.props)&&(0,a.hasProperty)(e.props,"children")){const r=T(e);for(const e of r)if((0,a.isPlainObject)(e)){const r=E(e,t,n+1);if(r!==undefined)return r}}return undefined}function j(e){return Object.entries(e).filter((([e])=>"children"!==e)).sort((([e],[t])=>e.localeCompare(t))).map((([e,t])=>{return` ${e}=${n=t,"string"==typeof n?`"${n}"`:`{${JSON.stringify(n)}}`}`;var n})).join("")}n.getTextChildren=g,n.getJsxElementFromComponent=function(e){return function(e){const t=w(e);(0,a.assert)(t<=u,`The text in a Snap UI may not be larger than ${u/1e3} kB.`)}(e),function e(t){switch(t.type){case s.NodeType.Address:return(0,r.jsx)(i.Address,{address:t.value});case s.NodeType.Button:return(0,r.jsx)(i.Button,{name:t.name,variant:d(t.variant),type:t.buttonType,children:t.value});case s.NodeType.Copyable:return(0,r.jsx)(i.Copyable,{value:t.value,sensitive:t.sensitive});case s.NodeType.Divider:return(0,r.jsx)(i.Divider,{});case s.NodeType.Form:return(0,r.jsx)(i.Form,{name:t.name,children:f(t.children.map(e))});case s.NodeType.Heading:return(0,r.jsx)(i.Heading,{children:t.value});case s.NodeType.Image:return(0,r.jsx)(i.Image,{src:t.value});case s.NodeType.Input:return(0,r.jsx)(i.Field,{label:t.label,error:t.error,children:(0,r.jsx)(i.Input,{name:t.name,type:t.inputType,value:t.value,placeholder:t.placeholder})});case s.NodeType.Panel:return(0,r.jsx)(i.Box,{children:f(t.children.map(e))});case s.NodeType.Row:return(0,r.jsx)(i.Row,{label:t.label,variant:t.variant,children:e(t.value)});case s.NodeType.Spinner:return(0,r.jsx)(i.Spinner,{});case s.NodeType.Text:return(0,r.jsx)(i.Text,{children:f(g(t.value))});default:return(0,a.assertExhaustive)(t)}}(e)},n.validateLink=y,n.validateTextLinks=function(e,t,n){const r=function(e){const t=(0,o.lexer)(e,{gfm:!1}),n=[];return(0,o.walkTokens)(t,(e=>{"link"===e.type&&n.push(e)})),n}(e);for(const e of r)y(e.href,t,n)},n.validateAssetSelector=b,n.validateJsxElements=function(e,{isOnPhishingList:t,getSnap:n,getAccountByAddress:r}){E(e,(e=>{switch(e.type){case"Link":y(e.props.href,t,n);break;case"AssetSelector":b(e.props.addresses[0],r)}}))},n.getTotalTextLength=w,n.hasChildren=v,n.getJsxChildren=T,n.walkJsx=E,n.serialiseJsx=function e(t,n=0){if(Array.isArray(t))return t.map((t=>e(t,n))).join("");const r="  ".repeat(n);if("string"==typeof t)return`${r}${t}\n`;if(!t)return"";const{type:s,props:i}=t,o=n>0?"\n":"";if((0,a.hasProperty)(i,"children")){const t=e(i.children,n+1);return`${r}<${s}${j(i)}>\n${t}${r}</${s}>${o}`}return`${r}<${s}${j(i)} />${o}`}}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/ui.cjs"}],[2734,{"./snaps.cjs":2727,"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.parseMetaMaskUrl=n.SNAP_PATHS=n.CLIENT_PATHS=void 0;const r=e("@metamask/utils"),s=e("./snaps.cjs");n.CLIENT_PATHS=["/"],n.SNAP_PATHS=["/home"],n.parseMetaMaskUrl=function(e){const t=new URL(e),{protocol:i}=t;if("metamask:"!==i)throw new Error(`Unable to parse URL. Expected the protocol to be "metamask:", but received "${i}".`);const[a,...o]=t.href.replace("metamask://","").split("/"),c=`/${o.join("/")}`;switch(a){case"client":return(0,r.assert)(n.CLIENT_PATHS.includes(c),`Unable to navigate to "${c}". The provided path is not allowed.`),{authority:a,path:c};case"snap":return function(e){const t="Invalid MetaMask url:",i=(0,s.stripSnapPrefix)(e.slice(1)),a=e.slice(1).startsWith("npm:")?"npm:":"local:",o=i.startsWith("@"),c=i.split("/"),u=`/${c[c.length-1]}`;let l;if("local:"===a){const[e,,...s]=c.slice(0,-1);l=`${e}//${s.join("/")}`,(0,r.assert)(n.SNAP_PATHS.includes(u),`${t} invalid snap path.`)}else l=o?`${c[0]}/${c[1]}`:c[0],(0,r.assert)(o?3===c.length&&n.SNAP_PATHS.includes(u):2===c.length&&n.SNAP_PATHS.includes(u),`${t} invalid snap path.`);const d=`${a}${l}`;return(0,s.assertIsValidSnapId)(d),{authority:"snap",snapId:d,path:u}}(c);default:throw new Error(`Expected "metamask:" URL to start with "client" or "snap", but received "${a}".`)}}}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/url.cjs"}],[2735,{"./icon.cjs":2716,"./localization.cjs":2721,"./manifest/validation.cjs":2724,"./snaps.cjs":2727},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateFetchedSnap=void 0;const r=e("./icon.cjs"),s=e("./localization.cjs"),i=e("./manifest/validation.cjs"),a=e("./snaps.cjs");n.validateFetchedSnap=async function(e){(0,i.assertIsSnapManifest)(e.manifest.result),await(0,a.validateSnapShasum)(e),(0,s.validateSnapManifestLocalizations)(e.manifest.result,e.localizationFiles.map((e=>e.result))),e.svgIcon&&(0,r.assertIsSnapIcon)(e.svgIcon)}}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/validation.cjs"}],[2736,{"@metamask/superstruct":2740,"@metamask/utils":2822,semver:5417},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.resolveVersionRange=n.getTargetVersion=n.DEFAULT_REQUESTED_SNAP_VERSION=void 0;const r=e("@metamask/superstruct"),s=e("@metamask/utils"),i=e("semver");n.DEFAULT_REQUESTED_SNAP_VERSION="*",n.getTargetVersion=function(e,t){const n=(0,i.maxSatisfying)(e,t);return n||(0,i.maxSatisfying)(e,t,{includePrerelease:!0})},n.resolveVersionRange=function(e){return e===undefined||"latest"===e?[undefined,n.DEFAULT_REQUESTED_SNAP_VERSION]:(0,r.validate)(e,s.VersionRangeStruct)}}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/versions.cjs"}],[2737,{"../deep-clone.cjs":2701,"@metamask/utils":2822,"@scure/base":2896},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.VirtualFile=void 0;const r=e("@metamask/utils"),s=e("@scure/base"),i=e("../deep-clone.cjs");class a{constructor(e){let t;t="string"==typeof e||e instanceof Uint8Array?{value:e}:e,this.value=t?.value??"",this.result=t?.result??undefined,this.data=t?.data??{},this.path=t?.path??"/"}get size(){return"string"==typeof this.value?this.value.length:this.value.byteLength}toString(e){if("string"==typeof this.value)return(0,r.assert)(e===undefined,"Tried to encode string."),this.value;if(this.value instanceof Uint8Array&&"hex"===e)return(0,r.bytesToHex)(this.value);if(this.value instanceof Uint8Array&&"base64"===e)return s.base64.encode(this.value);return new TextDecoder(e).decode(this.value)}clone(){const e=new a;return"string"==typeof this.value?e.value=this.value:e.value=this.value.slice(0),e.result=(0,i.deepClone)(this.result),e.data=(0,i.deepClone)(this.data),e.path=this.path,e}}n.VirtualFile=a}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/virtual-file/VirtualFile.cjs"}],[2738,{"./VirtualFile.cjs":2737},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),s(e("./VirtualFile.cjs"),n)}}},{package:"@metamask/snaps-utils",file:"node_modules/@metamask/snaps-utils/dist/virtual-file/index.cjs"}],[2739,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.StructError=void 0;class r extends TypeError{constructor(e,t){let n;const{message:r,explanation:s,...i}=e,{path:a}=e,o=0===a.length?r:`At path: ${a.join(".")} -- ${r}`;super(s??o),null!==s&&s!==undefined&&(this.cause=o),Object.assign(this,i),this.name=this.constructor.name,this.failures=()=>n??(n=[e,...t()])}}n.StructError=r}}},{package:"@metamask/utils>@metamask/superstruct",file:"node_modules/@metamask/superstruct/dist/error.cjs"}],[2740,{"./error.cjs":2739,"./struct.cjs":2741,"./structs/coercions.cjs":2742,"./structs/refinements.cjs":2743,"./structs/types.cjs":2744,"./structs/utilities.cjs":2745},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),s(e("./error.cjs"),n),s(e("./struct.cjs"),n),s(e("./structs/coercions.cjs"),n),s(e("./structs/refinements.cjs"),n),s(e("./structs/types.cjs"),n),s(e("./structs/utilities.cjs"),n)}}},{package:"@metamask/utils>@metamask/superstruct",file:"node_modules/@metamask/superstruct/dist/index.cjs"}],[2741,{"./error.cjs":2739,"./utils.cjs":2746},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.validate=n.is=n.mask=n.create=n.assert=n.ExactOptionalStruct=n.Struct=void 0;const r=e("./error.cjs"),s=e("./utils.cjs");class i{constructor(e){const{type:t,schema:n,validator:r,refiner:i,coercer:a=(e=>e),entries:o=function*(){}}=e;this.type=t,this.schema=n,this.entries=o,this.coercer=a,this.validator=r?(e,t)=>{const n=r(e,t);return(0,s.toFailures)(n,t,this,e)}:()=>[],this.refiner=i?(e,t)=>{const n=i(e,t);return(0,s.toFailures)(n,t,this,e)}:()=>[]}assert(e,t){return o(e,this,t)}create(e,t){return c(e,this,t)}is(e){return l(e,this)}mask(e,t){return u(e,this,t)}validate(e,t={}){return d(e,this,t)}}n.Struct=i;const a="EXACT_OPTIONAL";function o(e,t,n){const r=d(e,t,{message:n});if(r[0])throw r[0]}function c(e,t,n){const r=d(e,t,{coerce:!0,message:n});if(r[0])throw r[0];return r[1]}function u(e,t,n){const r=d(e,t,{coerce:!0,mask:!0,message:n});if(r[0])throw r[0];return r[1]}function l(e,t){return!d(e,t)[0]}function d(e,t,n={}){const i=(0,s.run)(e,t,n),a=(0,s.shiftIterator)(i);if(a[0]){return[new r.StructError(a[0],(function*(){for(const e of i)e[0]&&(yield e[0])})),undefined]}const o=a[1];return[undefined,o]}n.ExactOptionalStruct=class extends i{constructor(e){super({...e,type:`exact optional ${e.type}`}),this.brand=a}static isExactOptional(e){return(0,s.isObject)(e)&&"brand"in e&&e.brand===a}},n.assert=o,n.create=c,n.mask=u,n.is=l,n.validate=d}}},{package:"@metamask/utils>@metamask/superstruct",file:"node_modules/@metamask/superstruct/dist/struct.cjs"}],[2742,{"../struct.cjs":2741,"../utils.cjs":2746,"./types.cjs":2744},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.trimmed=n.defaulted=n.coerce=void 0;const r=e("../struct.cjs"),s=e("../utils.cjs"),i=e("./types.cjs");function a(e,t,n){return new r.Struct({...e,coercer:(s,i)=>(0,r.is)(s,t)?e.coercer(n(s,i),i):e.coercer(s,i)})}n.coerce=a,n.defaulted=function(e,t,n={}){return a(e,(0,i.unknown)(),(e=>{const r="function"==typeof t?t():t;if(e===undefined)return r;if(!n.strict&&(0,s.isPlainObject)(e)&&(0,s.isPlainObject)(r)){const t={...e};let n=!1;for(const e in r)t[e]===undefined&&(t[e]=r[e],n=!0);if(n)return t}return e}))},n.trimmed=function(e){return a(e,(0,i.string)(),(e=>e.trim()))}}}},{package:"@metamask/utils>@metamask/superstruct",file:"node_modules/@metamask/superstruct/dist/structs/coercions.cjs"}],[2743,{"../struct.cjs":2741,"../utils.cjs":2746},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.refine=n.size=n.pattern=n.nonempty=n.min=n.max=n.empty=void 0;const r=e("../struct.cjs"),s=e("../utils.cjs");function i(e){return e instanceof Map||e instanceof Set?e.size:e.length}function a(e,t,n){return new r.Struct({...e,*refiner(r,i){yield*e.refiner(r,i);const a=n(r,i),o=(0,s.toFailures)(a,i,e,r);for(const e of o)yield{...e,refinement:t}}})}n.empty=function(e){return a(e,"empty",(t=>{const n=i(t);return 0===n||`Expected an empty ${e.type} but received one with a size of \`${n}\``}))},n.max=function(e,t,n={}){const{exclusive:r}=n;return a(e,"max",(n=>r?n<t:n<=t||`Expected a ${e.type} less than ${r?"":"or equal to "}${t} but received \`${n}\``))},n.min=function(e,t,n={}){const{exclusive:r}=n;return a(e,"min",(n=>r?n>t:n>=t||`Expected a ${e.type} greater than ${r?"":"or equal to "}${t} but received \`${n}\``))},n.nonempty=function(e){return a(e,"nonempty",(t=>i(t)>0||`Expected a nonempty ${e.type} but received an empty one`))},n.pattern=function(e,t){return a(e,"pattern",(n=>t.test(n)||`Expected a ${e.type} matching \`/${t.source}/\` but received "${n}"`))},n.size=function(e,t,n=t){const r=`Expected a ${e.type}`,s=t===n?`of \`${t}\``:`between \`${t}\` and \`${n}\``;return a(e,"size",(e=>{if("number"==typeof e||e instanceof Date)return t<=e&&e<=n||`${r} ${s} but received \`${e}\``;if(e instanceof Map||e instanceof Set){const{size:i}=e;return t<=i&&i<=n||`${r} with a size ${s} but received one with a size of \`${i}\``}const{length:i}=e;return t<=i&&i<=n||`${r} with a length ${s} but received one with a length of \`${i}\``}))},n.refine=a}}},{package:"@metamask/utils>@metamask/superstruct",file:"node_modules/@metamask/superstruct/dist/structs/refinements.cjs"}],[2744,{"../struct.cjs":2741,"../utils.cjs":2746,"./utilities.cjs":2745},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.unknown=n.union=n.type=n.tuple=n.string=n.set=n.regexp=n.record=n.exactOptional=n.optional=n.object=n.number=n.nullable=n.never=n.map=n.literal=n.intersection=n.integer=n.instance=n.func=n.enums=n.date=n.boolean=n.bigint=n.array=n.any=void 0;const r=e("../struct.cjs"),s=e("../utils.cjs"),i=e("./utilities.cjs");function a(){return(0,i.define)("never",(()=>!1))}n.any=function(){return(0,i.define)("any",(()=>!0))},n.array=function(e){return new r.Struct({type:"array",schema:e,*entries(t){if(e&&Array.isArray(t))for(const[n,r]of t.entries())yield[n,r,e]},coercer:e=>Array.isArray(e)?e.slice():e,validator:e=>Array.isArray(e)||`Expected an array value, but received: ${(0,s.print)(e)}`})},n.bigint=function(){return(0,i.define)("bigint",(e=>"bigint"==typeof e))},n.boolean=function(){return(0,i.define)("boolean",(e=>"boolean"==typeof e))},n.date=function(){return(0,i.define)("date",(e=>e instanceof Date&&!isNaN(e.getTime())||`Expected a valid \`Date\` object, but received: ${(0,s.print)(e)}`))},n.enums=function(e){const t={},n=e.map((e=>(0,s.print)(e))).join();for(const n of e)t[n]=n;return new r.Struct({type:"enums",schema:t,validator:t=>e.includes(t)||`Expected one of \`${n}\`, but received: ${(0,s.print)(t)}`})},n.func=function(){return(0,i.define)("func",(e=>"function"==typeof e||`Expected a function, but received: ${(0,s.print)(e)}`))},n.instance=function(e){return(0,i.define)("instance",(t=>t instanceof e||`Expected a \`${e.name}\` instance, but received: ${(0,s.print)(t)}`))},n.integer=function(){return(0,i.define)("integer",(e=>"number"==typeof e&&!isNaN(e)&&Number.isInteger(e)||`Expected an integer, but received: ${(0,s.print)(e)}`))},n.intersection=function(e){return new r.Struct({type:"intersection",schema:null,*entries(t,n){for(const{entries:r}of e)yield*r(t,n)},*validator(t,n){for(const{validator:r}of e)yield*r(t,n)},*refiner(t,n){for(const{refiner:r}of e)yield*r(t,n)}})},n.literal=function(e){const t=(0,s.print)(e),n=typeof e;return new r.Struct({type:"literal",schema:"string"===n||"number"===n||"boolean"===n?e:null,validator:n=>n===e||`Expected the literal \`${t}\`, but received: ${(0,s.print)(n)}`})},n.map=function(e,t){return new r.Struct({type:"map",schema:null,*entries(n){if(e&&t&&n instanceof Map)for(const[r,s]of n.entries())yield[r,r,e],yield[r,s,t]},coercer:e=>e instanceof Map?new Map(e):e,validator:e=>e instanceof Map||`Expected a \`Map\` object, but received: ${(0,s.print)(e)}`})},n.never=a,n.nullable=function(e){return new r.Struct({...e,validator:(t,n)=>null===t||e.validator(t,n),refiner:(t,n)=>null===t||e.refiner(t,n)})},n.number=function(){return(0,i.define)("number",(e=>"number"==typeof e&&!isNaN(e)||`Expected a number, but received: ${(0,s.print)(e)}`))},n.object=function(e){const t=e?Object.keys(e):[],n=a();return new r.Struct({type:"object",schema:e??null,*entries(i){if(e&&(0,s.isObject)(i)){const s=new Set(Object.keys(i));for(const n of t){s.delete(n);const t=e[n];r.ExactOptionalStruct.isExactOptional(t)&&!Object.prototype.hasOwnProperty.call(i,n)||(yield[n,i[n],e[n]])}for(const e of s)yield[e,i[e],n]}},validator:e=>(0,s.isObject)(e)||`Expected an object, but received: ${(0,s.print)(e)}`,coercer:e=>(0,s.isObject)(e)?{...e}:e})},n.optional=function(e){return new r.Struct({...e,validator:(t,n)=>t===undefined||e.validator(t,n),refiner:(t,n)=>t===undefined||e.refiner(t,n)})},n.exactOptional=function(e){return new r.ExactOptionalStruct(e)},n.record=function(e,t){return new r.Struct({type:"record",schema:null,*entries(n){if((0,s.isObject)(n))for(const r in n){const s=n[r];yield[r,r,e],yield[r,s,t]}},validator:e=>(0,s.isObject)(e)||`Expected an object, but received: ${(0,s.print)(e)}`})},n.regexp=function(){return(0,i.define)("regexp",(e=>e instanceof RegExp))},n.set=function(e){return new r.Struct({type:"set",schema:null,*entries(t){if(e&&t instanceof Set)for(const n of t)yield[n,n,e]},coercer:e=>e instanceof Set?new Set(e):e,validator:e=>e instanceof Set||`Expected a \`Set\` object, but received: ${(0,s.print)(e)}`})},n.string=function(){return(0,i.define)("string",(e=>"string"==typeof e||`Expected a string, but received: ${(0,s.print)(e)}`))},n.tuple=function(e){const t=a();return new r.Struct({type:"tuple",schema:null,*entries(n){if(Array.isArray(n)){const r=Math.max(e.length,n.length);for(let s=0;s<r;s++)yield[s,n[s],e[s]||t]}},validator:e=>Array.isArray(e)||`Expected an array, but received: ${(0,s.print)(e)}`})},n.type=function(e){const t=Object.keys(e);return new r.Struct({type:"type",schema:e,*entries(n){if((0,s.isObject)(n))for(const r of t)yield[r,n[r],e[r]]},validator:e=>(0,s.isObject)(e)||`Expected an object, but received: ${(0,s.print)(e)}`,coercer:e=>(0,s.isObject)(e)?{...e}:e})},n.union=function(e){const t=e.map((e=>e.type)).join(" | ");return new r.Struct({type:"union",schema:null,coercer(t){for(const n of e){const[e,r]=n.validate(t,{coerce:!0});if(!e)return r}return t},validator(n,r){const i=[];for(const t of e){const[...e]=(0,s.run)(n,t,r),[a]=e;if(!a?.[0])return[];for(const[t]of e)t&&i.push(t)}return[`Expected the value to satisfy a union of \`${t}\`, but received: ${(0,s.print)(n)}`,...i]}})},n.unknown=function(){return(0,i.define)("unknown",(()=>!0))}}}},{package:"@metamask/utils>@metamask/superstruct",file:"node_modules/@metamask/superstruct/dist/structs/types.cjs"}],[2745,{"../struct.cjs":2741,"./types.cjs":2744},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.pick=n.partial=n.omit=n.lazy=n.dynamic=n.deprecated=n.define=n.assign=void 0;const r=e("../struct.cjs"),s=e("./types.cjs");n.assign=function(...e){const t="type"===e[0]?.type,n=e.map((({schema:e})=>e)),r=Object.assign({},...n);return t?(0,s.type)(r):(0,s.object)(r)},n.define=function(e,t){return new r.Struct({type:e,schema:null,validator:t})},n.deprecated=function(e,t){return new r.Struct({...e,refiner:(t,n)=>t===undefined||e.refiner(t,n),validator:(n,r)=>n===undefined||(t(n,r),e.validator(n,r))})},n.dynamic=function(e){return new r.Struct({type:"dynamic",schema:null,*entries(t,n){const r=e(t,n);yield*r.entries(t,n)},validator:(t,n)=>e(t,n).validator(t,n),coercer:(t,n)=>e(t,n).coercer(t,n),refiner:(t,n)=>e(t,n).refiner(t,n)})},n.lazy=function(e){let t;return new r.Struct({type:"lazy",schema:null,*entries(n,r){t??(t=e()),yield*t.entries(n,r)},validator:(n,r)=>(t??(t=e()),t.validator(n,r)),coercer:(n,r)=>(t??(t=e()),t.coercer(n,r)),refiner:(n,r)=>(t??(t=e()),t.refiner(n,r))})},n.omit=function(e,t){const{schema:n}=e,r={...n};for(const e of t)delete r[e];return"type"===e.type?(0,s.type)(r):(0,s.object)(r)},n.partial=function(e){const t=e instanceof r.Struct,n=t?{...e.schema}:{...e};for(const e in n)n[e]=(0,s.optional)(n[e]);return t&&"type"===e.type?(0,s.type)(n):(0,s.object)(n)},n.pick=function(e,t){const{schema:n}=e,r={};for(const e of t)r[e]=n[e];return"type"===e.type?(0,s.type)(r):(0,s.object)(r)}}}},{package:"@metamask/utils>@metamask/superstruct",file:"node_modules/@metamask/superstruct/dist/structs/utilities.cjs"}],[2746,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e){return"object"==typeof e&&null!==e}function s(e){return"symbol"==typeof e?e.toString():"string"==typeof e?JSON.stringify(e):`${e}`}function i(e,t,n,r){if(!0===e)return undefined;!1===e?e={}:"string"==typeof e&&(e={message:e});const{path:i,branch:a}=t,{type:o}=n,{refinement:c,message:u=`Expected a value of type \`${o}\`${c?` with refinement \`${c}\``:""}, but received: \`${s(r)}\``}=e;return{value:r,type:o,refinement:c,key:i[i.length-1],path:i,branch:a,...e,message:u}}Object.defineProperty(n,"__esModule",{value:!0}),n.run=n.toFailures=n.toFailure=n.shiftIterator=n.print=n.isPlainObject=n.isObject=void 0,n.isObject=r,n.isPlainObject=function(e){if("[object Object]"!==Object.prototype.toString.call(e))return!1;const t=Object.getPrototypeOf(e);return null===t||t===Object.prototype},n.print=s,n.shiftIterator=function(e){const{done:t,value:n}=e.next();return t?undefined:n},n.toFailure=i,n.toFailures=function*(e,t,n,s){(function(e){return r(e)&&"function"==typeof e[Symbol.iterator]})(e)||(e=[e]);for(const r of e){const e=i(r,t,n,s);e&&(yield e)}},n.run=function*e(t,n,s={}){const{path:i=[],branch:a=[t],coerce:o=!1,mask:c=!1}=s,u={path:i,branch:a};if(o&&(t=n.coercer(t,u),c&&"type"!==n.type&&r(n.schema)&&r(t)&&!Array.isArray(t)))for(const e in t)n.schema[e]===undefined&&delete t[e];let l="valid";for(const e of n.validator(t,u))e.explanation=s.message,l="not_valid",yield[e,undefined];for(let[d,f,h]of n.entries(t,u)){const n=e(f,h,{path:d===undefined?i:[...i,d],branch:d===undefined?a:[...a,f],coerce:o,mask:c,message:s.message});for(const e of n)e[0]?(l=null===e[0].refinement||e[0].refinement===undefined?"not_valid":"not_refined",yield[e[0],undefined]):o&&(f=e[1],d===undefined?t=f:t instanceof Map?t.set(d,f):t instanceof Set?t.add(f):r(t)&&(f!==undefined||d in t)&&(t[d]=f))}if("not_valid"!==l)for(const e of n.refiner(t,u))e.explanation=s.message,l="not_refined",yield[e,undefined];"valid"===l&&(yield[undefined,t])}}}},{package:"@metamask/utils>@metamask/superstruct",file:"node_modules/@metamask/superstruct/dist/utils.cjs"}],[2747,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createEventEmitterProxy=void 0;const r=()=>!0,s=["newListener","removeListener"],i=e=>!s.includes(e);n.createEventEmitterProxy=function(e,{eventFilter:t=r}={}){const n="skipInternal"===t?i:t;if("function"!=typeof n)throw new Error("createEventEmitterProxy - Invalid eventFilter");let s=[],a=e,o=e=>{const t=a;a=e,s.forEach((({name:n,handler:r,addedWith:s,filtered:i})=>{i||e[s](n,r),t.off(n,r)}))};const c=(e,t)=>{s=s.filter((n=>e!==n.name||t!==n.handler&&t!==n.unwrappedHandler))};return new Proxy(a,{get(e,t,r){if("setTarget"===t)return o;const i=a[t];return"function"==typeof i?function(...e){const o=e[1];if("once"===t){const t=(...n)=>(c(e[0],t),o(...n));e[1]=t}if("on"===t||"addListener"===t||"prependListener"===t||"once"===t)s.push({addedWith:t,name:e[0],unwrappedHandler:o,handler:e[1],filtered:!n(e[0])});else if("off"===t||"removeListener"===t){const t=s.find((({name:t,unwrappedHandler:n})=>t===e[0]&&n===e[1]));if(t===undefined)return a;c(e[0],e[1]),e[1]=t.handler}return i.apply(this===r?a:this,e)}:i},set:(e,t,n)=>"setTarget"===t?(o=n,!0):(a[t]=n,!0)})}}}},{package:"@metamask/network-controller>@metamask/swappable-obj-proxy",file:"node_modules/@metamask/swappable-obj-proxy/dist/createEventEmitterProxy.js"}],[2748,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createSwappableProxy=void 0,n.createSwappableProxy=function(e){let t=e,n=e=>{t=e};return new Proxy(t,{get(e,r,s){if("setTarget"===r)return n;const i=t[r];return i instanceof Function?function(...e){return i.apply(this===s?t:this,e)}:i},set:(e,r,s)=>"setTarget"===r?(n=s,!0):(t[r]=s,!0)})}}}},{package:"@metamask/network-controller>@metamask/swappable-obj-proxy",file:"node_modules/@metamask/swappable-obj-proxy/dist/createSwappableProxy.js"}],[2749,{"./createEventEmitterProxy":2747,"./createSwappableProxy":2748,"./types":2750},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),s(e("./createEventEmitterProxy"),n),s(e("./createSwappableProxy"),n),s(e("./types"),n)}}},{package:"@metamask/network-controller>@metamask/swappable-obj-proxy",file:"node_modules/@metamask/swappable-obj-proxy/dist/index.js"}],[2750,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0})}}},{package:"@metamask/network-controller>@metamask/swappable-obj-proxy",file:"node_modules/@metamask/swappable-obj-proxy/dist/types.js"}],[2752,{"./api/accounts-api.cjs":2753,"./gas-flows/DefaultGasFeeFlow.cjs":2756,"./gas-flows/LineaGasFeeFlow.cjs":2757,"./gas-flows/OptimismLayer1GasFeeFlow.cjs":2758,"./gas-flows/RandomisedEstimationsGasFeeFlow.cjs":2760,"./gas-flows/ScrollLayer1GasFeeFlow.cjs":2761,"./gas-flows/TestGasFeeFlow.cjs":2762,"./helpers/AccountsApiRemoteTransactionSource.cjs":2763,"./helpers/GasFeePoller.cjs":2764,"./helpers/IncomingTransactionHelper.cjs":2765,"./helpers/MethodDataHelper.cjs":2766,"./helpers/MultichainTrackingHelper.cjs":2767,"./helpers/PendingTransactionTracker.cjs":2768,"./helpers/ResimulateHelper.cjs":2769,"./hooks/ExtraTransactionsPublishHook.cjs":2772,"./logger.cjs":2774,"./types.cjs":2775,"./utils/batch.cjs":2776,"./utils/eip7702.cjs":2777,"./utils/external-transactions.cjs":2778,"./utils/gas-fees.cjs":2780,"./utils/gas-flow.cjs":2781,"./utils/gas.cjs":2782,"./utils/history.cjs":2783,"./utils/layer1-gas-fee-flow.cjs":2784,"./utils/nonce.cjs":2785,"./utils/prepare.cjs":2786,"./utils/retry.cjs":2787,"./utils/simulation.cjs":2790,"./utils/swaps.cjs":2791,"./utils/transaction-type.cjs":2792,"./utils/utils.cjs":2793,"./utils/validation.cjs":2794,"@metamask/base-controller":1405,"@metamask/controller-utils":1512,"@metamask/eth-query":1718,"@metamask/network-controller":2188,"@metamask/nonce-tracker":2194,"@metamask/rpc-errors":2415,"@metamask/utils":2822,events:4269,lodash:4725,uuid:5533},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i,a,o,c,u,l,d,f,h,p,m,g,y,b,w,v,S,T,E,j,k,x,_,I,P,A,C,O,B,R,N,F,M,L,D,H,U,G,$,q,z,W,V,K=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},J=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},X=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.TransactionController=n.ApprovalState=n.SPEED_UP_RATE=n.CANCEL_RATE=void 0;const Z=e("@metamask/base-controller"),Y=e("@metamask/controller-utils"),Q=X(e("@metamask/eth-query")),ee=e("@metamask/network-controller"),te=e("@metamask/nonce-tracker"),ne=e("@metamask/rpc-errors"),re=e("@metamask/utils"),se=e("events"),ie=e("lodash"),ae=e("uuid"),oe=e("./api/accounts-api.cjs"),ce=e("./gas-flows/DefaultGasFeeFlow.cjs"),ue=e("./gas-flows/LineaGasFeeFlow.cjs"),le=e("./gas-flows/OptimismLayer1GasFeeFlow.cjs"),de=e("./gas-flows/RandomisedEstimationsGasFeeFlow.cjs"),fe=e("./gas-flows/ScrollLayer1GasFeeFlow.cjs"),he=e("./gas-flows/TestGasFeeFlow.cjs"),pe=e("./helpers/AccountsApiRemoteTransactionSource.cjs"),me=e("./helpers/GasFeePoller.cjs"),ge=e("./helpers/IncomingTransactionHelper.cjs"),ye=e("./helpers/MethodDataHelper.cjs"),be=e("./helpers/MultichainTrackingHelper.cjs"),we=e("./helpers/PendingTransactionTracker.cjs"),ve=e("./helpers/ResimulateHelper.cjs"),Se=e("./hooks/ExtraTransactionsPublishHook.cjs"),Te=e("./logger.cjs"),Ee=e("./types.cjs"),je=e("./utils/batch.cjs"),ke=e("./utils/eip7702.cjs"),xe=e("./utils/external-transactions.cjs"),_e=e("./utils/gas.cjs"),Ie=e("./utils/gas-fees.cjs"),Pe=e("./utils/gas-flow.cjs"),Ae=e("./utils/history.cjs"),Ce=e("./utils/layer1-gas-fee-flow.cjs"),Oe=e("./utils/nonce.cjs"),Be=e("./utils/prepare.cjs"),Re=e("./utils/retry.cjs"),Ne=e("./utils/simulation.cjs"),Fe=e("./utils/swaps.cjs"),Me=e("./utils/transaction-type.cjs"),Le=e("./utils/utils.cjs"),De=e("./utils/validation.cjs"),He={transactions:{persist:!0,anonymous:!1},methodData:{persist:!0,anonymous:!1},lastFetchedBlockNumbers:{persist:!0,anonymous:!1},submitHistory:{persist:!0,anonymous:!1}};n.CANCEL_RATE=1.1,n.SPEED_UP_RATE=1.1;const Ue="TransactionController";var Ge;!function(e){e.Approved="approved",e.NotApproved="not-approved",e.SkippedViaBeforePublishHook="skipped-via-before-publish-hook"}(Ge||(n.ApprovalState=Ge={}));class $e extends Z.BaseController{failTransaction(e,t,n){let i;try{i=K(this,r,"m",F).call(this,{transactionId:e.id,note:"TransactionController#failTransaction - Add error message and set status to failed",skipValidation:!0},(e=>{e.status=Ee.TransactionStatus.failed,e.error=(0,Le.normalizeTxError)(t)}))}catch(n){(0,Te.projectLogger)("Failed to mark transaction as failed",n),i={...e,status:Ee.TransactionStatus.failed,error:(0,Le.normalizeTxError)(t)}}this.messagingSystem.publish(`${Ue}:transactionFailed`,{actionId:n,error:t.message,transactionMeta:i}),this.onTransactionStatusChange(i),this.messagingSystem.publish(`${Ue}:transactionFinished`,i),K(this,s,"f").emit(`${e.id}:finished`,i)}constructor(e){const{disableHistory:t,disableSendFlowHistory:n,disableSwaps:y,isAutomaticGasFeeUpdateEnabled:b,getCurrentAccountEIP1559Compatibility:w,getCurrentNetworkEIP1559Compatibility:v,getExternalPendingTransactions:S,getGasFeeEstimates:E,getNetworkClientRegistry:j,getNetworkState:k,getPermittedAccounts:P,getSavedGasFees:O,incomingTransactions:B={},isFirstTimeInteractionEnabled:F,isSimulationEnabled:M,messenger:U,pendingTransactions:G={},publicKeyEIP7702:$,securityProviderRequest:z,sign:W,state:V,testGasFeeFlows:X,trace:Z,transactionHistoryLimit:Y=40,hooks:Q}=e;super({name:Ue,metadata:He,messenger:U,state:{methodData:{},transactions:[],lastFetchedBlockNumbers:{},submitHistory:[],...V}}),r.add(this),s.set(this,new se.EventEmitter),this.approvingTransactionIds=new Set,i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),c.set(this,void 0),u.set(this,void 0),l.set(this,void 0),this.signAbortCallbacks=new Map,d.set(this,void 0),f.set(this,void 0),h.set(this,void 0),p.set(this,void 0),m.set(this,void 0),g.set(this,void 0),I.set(this,(()=>{K(this,g,"f").checkForPendingTransactionAndStartPolling()})),this.messagingSystem=U,this.isTxParamsGasFeeUpdatesEnabled=b??(e=>!1),this.getNetworkState=k,this.isSendFlowHistoryDisabled=n??!1,this.isHistoryDisabled=t??!1,this.isSwapsDisabled=y??!1,J(this,h,F??(()=>!0),"f"),J(this,p,M??(()=>!0),"f"),this.getSavedGasFees=O??(e=>undefined),this.getCurrentAccountEIP1559Compatibility=w??(()=>Promise.resolve(!0)),this.getCurrentNetworkEIP1559Compatibility=v,this.getGasFeeEstimates=E||(()=>Promise.resolve({})),this.getPermittedAccounts=P,this.getExternalPendingTransactions=S??(()=>[]),this.securityProviderRequest=z,J(this,o,B,"f"),J(this,c,G,"f"),J(this,u,Q?.publishBatch,"f"),J(this,l,$,"f"),J(this,f,Y,"f"),this.sign=W,J(this,m,!0===X,"f"),J(this,d,Z??((e,t)=>t?.()),"f"),this.afterSign=Q?.afterSign??(()=>!0),this.beforeCheckPendingTransaction=Q?.beforeCheckPendingTransaction??(()=>Promise.resolve(!0)),this.beforePublish=Q?.beforePublish??(()=>Promise.resolve(!0)),this.getAdditionalSignArguments=Q?.getAdditionalSignArguments??(()=>[]),this.publish=Q?.publish??(()=>Promise.resolve({transactionHash:undefined}));const ee=e=>this.messagingSystem.call("NetworkController:findNetworkClientIdByChainId",e);J(this,g,new be.MultichainTrackingHelper({findNetworkClientIdByChainId:ee,getNetworkClientById:e=>this.messagingSystem.call("NetworkController:getNetworkClientById",e),getNetworkClientRegistry:j,removePendingTransactionTrackerListeners:K(this,r,"m",C).bind(this),createNonceTracker:K(this,r,"m",x).bind(this),createPendingTransactionTracker:K(this,r,"m",_).bind(this),onNetworkStateChange:e=>{this.messagingSystem.subscribe("NetworkController:stateChange",e)}}),"f"),K(this,g,"f").initialize(),this.gasFeeFlows=K(this,r,"m",R).call(this),this.layer1GasFeeFlows=K(this,r,"m",N).call(this);new me.GasFeePoller({findNetworkClientIdByChainId:ee,gasFeeFlows:this.gasFeeFlows,getGasFeeControllerEstimates:this.getGasFeeEstimates,getProvider:e=>K(this,r,"m",T).call(this,{networkClientId:e}),getTransactions:()=>this.state.transactions,layer1GasFeeFlows:this.layer1GasFeeFlows,messenger:this.messagingSystem,onStateChange:e=>{this.messagingSystem.subscribe("TransactionController:stateChange",e)}}).hub.on("transaction-updated",K(this,r,"m",D).bind(this)),J(this,i,new ye.MethodDataHelper({getProvider:e=>K(this,r,"m",T).call(this,{networkClientId:e}),getState:()=>this.state.methodData}),"f"),K(this,i,"f").hub.on("update",(({fourBytePrefix:e,methodData:t})=>{this.update((n=>{n.methodData[e]=t}))}));J(this,a,new ge.IncomingTransactionHelper({getCache:()=>this.state.lastFetchedBlockNumbers,getCurrentAccount:()=>K(this,r,"m",H).call(this),getLocalTransactions:()=>this.state.transactions,includeTokenTransfers:K(this,o,"f").includeTokenTransfers,isEnabled:K(this,o,"f").isEnabled,queryEntireHistory:K(this,o,"f").queryEntireHistory,remoteTransactionSource:new pe.AccountsApiRemoteTransactionSource,trimTransactions:this.trimTransactionsForState.bind(this),updateCache:e=>{this.update((t=>{e(t.lastFetchedBlockNumbers)}))},updateTransactions:K(this,o,"f").updateTransactions}),"f"),K(this,r,"m",A).call(this,K(this,a,"f")),this.messagingSystem.subscribe("TransactionController:stateChange",K(this,I,"f")),new ve.ResimulateHelper({simulateTransaction:K(this,r,"m",L).bind(this),onTransactionsUpdate:e=>{this.messagingSystem.subscribe("TransactionController:stateChange",e,(e=>e.transactions))},getTransactions:()=>this.state.transactions}),this.onBootCleanup(),K(this,I,"f").call(this),K(this,r,"m",q).call(this)}destroy(){K(this,r,"m",P).call(this)}async handleMethodData(e,t){return K(this,i,"f").lookup(e,t)}async addTransactionBatch(e){return await(0,je.addTransactionBatch)({addTransaction:this.addTransaction.bind(this),getChainId:K(this,r,"m",w).bind(this),getEthQuery:e=>K(this,r,"m",S).call(this,{networkClientId:e}),getInternalAccounts:K(this,r,"m",U).bind(this),getTransaction:e=>this.getTransactionOrThrow(e),messenger:this.messagingSystem,publishBatchHook:K(this,u,"f"),publicKeyEIP7702:K(this,l,"f"),request:e,updateTransaction:K(this,r,"m",F).bind(this)})}async isAtomicBatchSupported(e){return(0,je.isAtomicBatchSupported)({...e,getEthQuery:e=>K(this,r,"m",S).call(this,{chainId:e}),messenger:this.messagingSystem,publicKeyEIP7702:K(this,l,"f")})}async addTransaction(e,t){(0,Te.projectLogger)("Adding transaction",e,t);const{actionId:n,batchId:s,deviceConfirmedOn:i,disableGasBuffer:a,method:o,nestedTransactions:c,networkClientId:u,origin:l,publishHook:f,requireApproval:h,securityAlertResponse:p,sendFlowHistory:m,swaps:y={},traceContext:v,type:T}=t;if(e=(0,Le.normalizeTransactionParams)(e),!K(this,g,"f").has(u))throw new Error(`Network client not found - ${u}`);const E=K(this,r,"m",w).call(this,u),j=K(this,r,"m",S).call(this,{networkClientId:u}),k=l===undefined?undefined:await(this.getPermittedAccounts?.(l)),x=K(this,r,"m",H).call(this).address,_=K(this,r,"m",U).call(this);await(0,De.validateTransactionOrigin)({data:e.data,from:e.from,internalAccounts:_,origin:l,permittedAddresses:k,selectedAddress:x,txParams:e,type:T});const I=(0,ke.getDelegationAddress)(e.from,j).catch((()=>undefined)),P=await this.getEIP1559Compatibility(u);(0,De.validateTxParams)(e,P,E),e.type||(0,Le.setEnvelopeType)(e,P);if(s?.length&&this.state.transactions.some((e=>e.batchId?.toLowerCase()===s?.toLowerCase()))&&l&&l!==Y.ORIGIN_METAMASK)throw ne.rpcErrors.invalidInput("Batch ID already exists");const A=this.generateDappSuggestedGasFees(e,l),C=T??(await(0,Me.determineTransactionType)(e,j)).type,O=await I,B=this.getTransactionWithActionId(n);let R=B?(0,ie.cloneDeep)(B):{actionId:n,batchId:s,chainId:E,dappSuggestedGasFees:A,delegationAddress:O,deviceConfirmedOn:i,disableGasBuffer:a,id:(0,ae.v1)(),isFirstTimeInteraction:undefined,nestedTransactions:c,networkClientId:u,origin:l,securityAlertResponse:p,status:Ee.TransactionStatus.unapproved,time:Date.now(),txParams:e,type:C,userEditedGasLimit:!1,verifiedOnBlockchain:!1};if(await K(this,d,"f").call(this,{name:"Estimate Gas Properties",parentContext:v},(e=>this.updateGasProperties(R,{traceContext:e}))),!B){if(o&&this.securityProviderRequest){const e=await this.securityProviderRequest(R,o);R.securityProviderResponse=e}this.isSendFlowHistoryDisabled||(R.sendFlowHistory=m??[]),this.isHistoryDisabled||(R=(0,Ae.addInitialHistorySnapshot)(R)),R=(0,Fe.updateSwapsTransaction)(R,C,y,{isSwapsDisabled:this.isSwapsDisabled,cancelTransaction:K(this,r,"m",b).bind(this),messenger:this.messagingSystem}),this.addMetadata(R),!1!==h?(K(this,r,"m",L).call(this,R,{traceContext:v}).catch((e=>{throw(0,Te.projectLogger)("Error while updating simulation data",e),e})),K(this,r,"m",M).call(this,R,{traceContext:v}).catch((e=>{(0,Te.projectLogger)("Error while updating first interaction properties",e)}))):(0,Te.projectLogger)("Skipping simulation & first interaction update as approval not required"),this.messagingSystem.publish(`${Ue}:unapprovedTransactionAdded`,R)}return{result:this.processApproval(R,{actionId:n,isExisting:Boolean(B),publishHook:f,requireApproval:h,traceContext:v}),transactionMeta:R}}startIncomingTransactionPolling(){K(this,a,"f").start()}stopIncomingTransactionPolling(){K(this,a,"f").stop()}async updateIncomingTransactions(){await K(this,a,"f").update()}async stopTransaction(e,t,{estimatedBaseFee:i,actionId:a}={}){await K(this,r,"m",y).call(this,{actionId:a,estimatedBaseFee:i,gasValues:t,label:"cancel",rate:n.CANCEL_RATE,transactionId:e,transactionType:Ee.TransactionType.cancel,prepareTransactionParams:e=>{delete e.data,e.to=e.from,e.value="0x0"},afterSubmit:e=>{this.messagingSystem.publish(`${Ue}:transactionFinished`,e),K(this,s,"f").emit(`${e.id}:finished`,e)}})}async speedUpTransaction(e,t,{actionId:s,estimatedBaseFee:i}={}){await K(this,r,"m",y).call(this,{actionId:s,estimatedBaseFee:i,gasValues:t,label:"speed up",rate:n.SPEED_UP_RATE,transactionId:e,transactionType:Ee.TransactionType.retry,afterSubmit:e=>{this.messagingSystem.publish(`${Ue}:speedupTransactionAdded`,e)}})}async estimateGas(e,t){const n=K(this,r,"m",S).call(this,{networkClientId:t}),{estimatedGas:s,simulationFails:i}=await(0,_e.estimateGas)({chainId:K(this,r,"m",w).call(this,t),ethQuery:n,isSimulationEnabled:K(this,p,"f").call(this),messenger:this.messagingSystem,txParams:e});return{gas:s,simulationFails:i}}async estimateGasBuffered(e,t,n){const s=K(this,r,"m",S).call(this,{networkClientId:n}),{blockGasLimit:i,estimatedGas:a,simulationFails:o}=await(0,_e.estimateGas)({chainId:K(this,r,"m",w).call(this,n),ethQuery:s,isSimulationEnabled:K(this,p,"f").call(this),messenger:this.messagingSystem,txParams:e});return{gas:(0,_e.addGasBuffer)(a,i,t),simulationFails:o}}updateTransaction(e,t){const{id:n}=e;K(this,r,"m",F).call(this,{transactionId:n,note:t},(()=>({...e})))}updateSecurityAlertResponse(e,t){if(!t)throw new Error("updateSecurityAlertResponse: securityAlertResponse should not be null");const n=this.getTransaction(e);if(!n)throw new Error("Cannot update security alert response as no transaction metadata found");const r={...n,securityAlertResponse:t};this.updateTransaction(r,`${Ue}:updatesecurityAlertResponse - securityAlertResponse updated`)}wipeTransactions({address:e,chainId:t}={}){if(!t&&!e)return void this.update((e=>{e.transactions=[]}));const n=this.state.transactions.filter((({chainId:n,txParams:r})=>{if(!(!t||t===n))return!0;return!(!e||r.from?.toLowerCase()===e.toLowerCase())}));this.update((e=>{e.transactions=this.trimTransactionsForState(n)}))}async confirmExternalTransaction(e,t,n){const s=this.addExternalTransaction(e);try{const e=s.id,i={...s,status:Ee.TransactionStatus.confirmed,txReceipt:t};n&&(i.baseFeePerGas=n),K(this,r,"m",E).call(this,e),this.updateTransaction(i,`${Ue}:confirmExternalTransaction - Add external transaction`),this.onTransactionStatusChange(i),this.updatePostBalance(i).catch((e=>{throw(0,Te.projectLogger)("Error while updating post balance",e),e})),this.messagingSystem.publish(`${Ue}:transactionConfirmed`,i)}catch(e){console.error("Failed to confirm external transaction",e)}}updateTransactionSendFlowHistory(e,t,n){if(this.isSendFlowHistoryDisabled)throw new Error("Send flow history is disabled for the current transaction controller");const r=this.getTransaction(e);if(!r)throw new Error("Cannot update send flow history as no transaction metadata found");(0,Le.validateIfTransactionUnapproved)(r,"updateTransactionSendFlowHistory");const s=r.sendFlowHistory??[];if(t===s.length){const e={...r,sendFlowHistory:[...s,...n]};this.updateTransaction(e,`${Ue}:updateTransactionSendFlowHistory - sendFlowHistory updated`)}return this.getTransaction(e)}updateTransactionGasFees(e,{defaultGasEstimates:t,estimateUsed:n,estimateSuggested:r,gas:s,gasLimit:i,gasPrice:a,maxPriorityFeePerGas:o,maxFeePerGas:c,originalGasEstimate:u,userEditedGasLimit:l,userFeeLevel:d}){const f=this.getTransaction(e);if(!f)throw new Error("Cannot update transaction as no transaction metadata found");(0,Le.validateIfTransactionUnapproved)(f,"updateTransactionGasFees");let h={txParams:{gas:s,gasLimit:i,gasPrice:a,maxPriorityFeePerGas:o,maxFeePerGas:c},defaultGasEstimates:t,estimateUsed:n,estimateSuggested:r,originalGasEstimate:u,userEditedGasLimit:l,userFeeLevel:d};h.txParams=(0,ie.pickBy)(h.txParams),h=(0,ie.pickBy)(h);const p=(0,ie.merge)({},f,h);return this.updateTransaction(p,`${Ue}:updateTransactionGasFees - gas values updated`),this.getTransaction(e)}updatePreviousGasParams(e,{gasLimit:t,maxFeePerGas:n,maxPriorityFeePerGas:r}){const s=this.getTransaction(e);if(!s)throw new Error("Cannot update transaction as no transaction metadata found");(0,Le.validateIfTransactionUnapproved)(s,"updatePreviousGasParams");const i={previousGas:{gasLimit:t,maxFeePerGas:n,maxPriorityFeePerGas:r}};i.previousGas=(0,ie.pickBy)(i.previousGas);const a=(0,ie.merge)({},s,i);return this.updateTransaction(a,`${Ue}:updatePreviousGasParams - Previous gas values updated`),this.getTransaction(e)}async getNonceLock(e,t){return K(this,g,"f").getNonceLock(e,t)}async updateEditableParams(e,{data:t,from:n,gas:s,gasPrice:i,maxFeePerGas:a,maxPriorityFeePerGas:o,to:c,value:u}){const l=this.getTransaction(e);if(!l)throw new Error("Cannot update editable params as no transaction metadata found");(0,Le.validateIfTransactionUnapproved)(l,"updateEditableParams");const d={txParams:{data:t,from:n,to:c,value:u,gas:s,gasPrice:i,maxFeePerGas:a,maxPriorityFeePerGas:o}};d.txParams=(0,ie.pickBy)(d.txParams);const f=(0,ie.merge)({},l,d),{networkClientId:h}=l,p=K(this,r,"m",T).call(this,{networkClientId:h}),m=new Q.default(p),{type:g}=await(0,Me.determineTransactionType)(f.txParams,m);return f.type=g,await(0,Ce.updateTransactionLayer1GasFee)({layer1GasFeeFlows:this.layer1GasFeeFlows,messenger:this.messagingSystem,provider:p,transactionMeta:f}),this.updateTransaction(f,`Update Editable Params for ${e}`),this.getTransaction(e)}setTransactionActive(e,t){if(!this.getTransaction(e))throw new Error(`Transaction with id ${e} not found`);K(this,r,"m",F).call(this,{transactionId:e,note:"TransactionController#setTransactionActive - Transaction isActive updated",skipHistory:!0,skipValidation:!0,skipResimulateCheck:!0},(e=>{e.isActive=t}))}async approveTransactionsWithSameNonce(e=[],{hasNonce:t}={}){if((0,Te.projectLogger)("Approving transactions with same nonce",{transactions:e}),0===e.length)return"";const n=e[0],{chainId:s}=n,i=K(this,r,"m",v).call(this,{chainId:s}),a=(0,Be.prepareTransaction)(s,n),o=(0,Be.serializeTransaction)(a);if(this.approvingTransactionIds.has(o))return"";let c,u;this.approvingTransactionIds.add(o);try{const r=n.from;u=!0!==t?await this.getNonceLock(r,i):undefined;const s=u?(0,re.add0x)(u.nextNonce.toString(16)):n.nonce;u&&(0,Te.projectLogger)("Using nonce from nonce tracker",s,u.nonceDetails),c=await Promise.all(e.map((e=>(e.nonce=s,this.signExternalTransaction(e.chainId,e)))))}catch(e){throw(0,Te.projectLogger)("Error while signing transactions with same nonce",e),e}finally{u?.releaseLock(),this.approvingTransactionIds.delete(o)}return c}updateCustodialTransaction(e){const{transactionId:t,errorMessage:n,hash:r,status:i,gasLimit:a,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,type:d}=e,f=this.getTransaction(t);if(!f)throw new Error("Cannot update custodial transaction as no transaction metadata found");if(i&&![Ee.TransactionStatus.submitted,Ee.TransactionStatus.signed,Ee.TransactionStatus.failed].includes(i))throw new Error(`Cannot update custodial transaction with status: ${i}`);const h=(0,ie.merge)({},f,(0,ie.pickBy)({hash:r,status:i}));return h.status===Ee.TransactionStatus.submitted&&(h.submittedTime=(new Date).getTime()),h.status===Ee.TransactionStatus.failed&&(h.error=(0,Le.normalizeTxError)(new Error(n))),h.txParams=(0,ie.merge)({},h.txParams,(0,ie.pickBy)({gasLimit:a,gasPrice:o,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:l,type:d})),d===Ee.TransactionEnvelopeType.legacy&&(delete h.txParams.maxFeePerGas,delete h.txParams.maxPriorityFeePerGas),this.updateTransaction(h,`${Ue}:updateCustodialTransaction - Custodial transaction updated`),i&&[Ee.TransactionStatus.submitted,Ee.TransactionStatus.failed].includes(i)&&(this.messagingSystem.publish(`${Ue}:transactionFinished`,h),K(this,s,"f").emit(`${h.id}:finished`,h)),h}getTransactions({initialList:e,limit:t,searchCriteria:n={}}={}){const r=(0,ie.mapValues)(n,(e=>"function"==typeof e?e:t=>t===e)),s=e??this.state.transactions,i=(0,ie.sortBy)((0,ie.pickBy)(s,(e=>{for(const[t,n]of Object.entries(r))if(t in e.txParams){if(!1===n(e.txParams[t]))return!1}else if(!1===n(e[t]))return!1;return!0})),"time");if(t!==undefined){const e=new Set,n=[];for(let r=i.length-1;r>-1;r--){const s=i[r],{nonce:a}=s.txParams;if(!e.has(a)){if(!(e.size<t))continue;e.add(a)}n.unshift(s)}return n}return i}async estimateGasFee({transactionParams:e,chainId:t,networkClientId:n}){const{id:r,provider:s}=K(this,g,"f").getNetworkClient({chainId:t,networkClientId:n}),i={txParams:e,chainId:t,networkClientId:r},a=(0,Pe.getGasFeeFlow)(i,this.gasFeeFlows,this.messagingSystem),o=new Q.default(s),c=await this.getGasFeeEstimates({networkClientId:r});return a.getGasFees({ethQuery:o,gasFeeControllerData:c,messenger:this.messagingSystem,transactionMeta:i})}async getLayer1GasFee({transactionParams:e,chainId:t,networkClientId:n}){const s=K(this,r,"m",T).call(this,{chainId:t,networkClientId:n});return await(0,Ce.getTransactionLayer1GasFee)({layer1GasFeeFlows:this.layer1GasFeeFlows,messenger:this.messagingSystem,provider:s,transactionMeta:{txParams:e,chainId:t}})}async signExternalTransaction(e,t){if(!this.sign)throw new Error("No sign method defined.");const n=(0,Le.normalizeTransactionParams)(t),r=(0,Le.isEIP1559Transaction)(n)?Ee.TransactionEnvelopeType.feeMarket:Ee.TransactionEnvelopeType.legacy,s={...n,type:r,gasLimit:n.gas,chainId:e},{from:i}=s,a=(0,Be.prepareTransaction)(e,s),o=await this.sign(a,i);return(0,Be.serializeTransaction)(o)}clearUnapprovedTransactions(){const e=this.state.transactions.filter((({status:e})=>e!==Ee.TransactionStatus.unapproved));this.update((t=>{t.transactions=this.trimTransactionsForState(e)}))}abortTransactionSigning(e){if(!this.getTransaction(e))throw new Error("Cannot abort signing as no transaction metadata found");const t=this.signAbortCallbacks.get(e);if(!t)throw new Error("Cannot abort signing as transaction is not waiting for signing");t(),this.signAbortCallbacks.delete(e)}async updateAtomicBatchData({transactionId:e,transactionIndex:t,transactionData:n}){(0,Te.projectLogger)("Updating atomic batch data",{transactionId:e,transactionIndex:t,transactionData:n});const s=K(this,r,"m",F).call(this,{transactionId:e,note:"TransactionController#updateAtomicBatchData - Atomic batch data updated"},(e=>{const{nestedTransactions:r,txParams:s}=e,i=s.from,a=r?.[t];if(!a)throw new Error(`Nested transaction not found with index - ${t}`);a.data=n;const o=(0,ke.generateEIP7702BatchTransaction)(i,r);e.txParams.data=o.data})),i=(0,ie.cloneDeep)({...s,txParams:{...s.txParams,gas:undefined}});return await K(this,r,"m",$).call(this,i),K(this,r,"m",F).call(this,{transactionId:e,note:"TransactionController#updateAtomicBatchData - Gas estimate updated"},(e=>{e.txParams.gas=i.txParams.gas,e.simulationFails=i.simulationFails,e.gasLimitNoBuffer=i.gasLimitNoBuffer})),s.txParams.data}updateBatchTransactions({transactionId:e,batchTransactions:t}){(0,Te.projectLogger)("Updating batch transactions",{transactionId:e,batchTransactions:t}),K(this,r,"m",F).call(this,{transactionId:e,note:"TransactionController#updateBatchTransactions - Batch transactions updated"},(e=>{e.batchTransactions=t}))}updateSelectedGasFeeToken(e,t){K(this,r,"m",F).call(this,{transactionId:e},(e=>{const n=e.gasFeeTokens?.some((e=>e.tokenAddress.toLowerCase()===t?.toLowerCase()));if(t&&!n)throw new Error(`No matching gas fee token found with address - ${t}`);e.selectedGasFeeToken=t}))}addMetadata(e){(0,De.validateTxParams)(e.txParams),this.update((t=>{t.transactions=this.trimTransactionsForState([...t.transactions,e])}))}async updateGasProperties(e,{traceContext:t}={}){const n=e.txParams.type!==Ee.TransactionEnvelopeType.legacy&&await this.getEIP1559Compatibility(e.networkClientId),{networkClientId:s}=e,i=K(this,r,"m",S).call(this,{networkClientId:s}),a=K(this,r,"m",T).call(this,{networkClientId:s});await K(this,d,"f").call(this,{name:"Update Gas",parentContext:t},(async()=>{await K(this,r,"m",$).call(this,e)})),await K(this,d,"f").call(this,{name:"Update Gas Fees",parentContext:t},(async()=>await(0,Ie.updateGasFees)({eip1559:n,ethQuery:i,gasFeeFlows:this.gasFeeFlows,getGasFeeEstimates:this.getGasFeeEstimates,getSavedGasFees:this.getSavedGasFees.bind(this),messenger:this.messagingSystem,txMeta:e}))),await K(this,d,"f").call(this,{name:"Update Layer 1 Gas Fees",parentContext:t},(async()=>await(0,Ce.updateTransactionLayer1GasFee)({layer1GasFeeFlows:this.layer1GasFeeFlows,messenger:this.messagingSystem,provider:a,transactionMeta:e})))}onBootCleanup(){this.clearUnapprovedTransactions(),this.failIncompleteTransactions()}failIncompleteTransactions(){const e=this.state.transactions.filter((e=>[Ee.TransactionStatus.approved,Ee.TransactionStatus.signed].includes(e.status)));for(const t of e)this.failTransaction(t,new Error("Transaction incomplete at startup"))}async processApproval(e,{actionId:t,isExisting:n=!1,publishHook:s,requireApproval:i,shouldShowRequest:a=!0,traceContext:o}){const c=e.id;let u;const{meta:l,isCompleted:f}=this.isTransactionCompleted(c),h=f?Promise.resolve(l):this.waitForTransactionFinished(c);if(l&&!n&&!f)try{if(!1!==i){const t=await K(this,d,"f").call(this,{name:"Await Approval",parentContext:o},(t=>this.requestApproval(e,{shouldShowRequest:a,traceContext:t})));u=t.resultCallbacks;const n=t.value,r=n?.txMeta;r&&((0,Te.projectLogger)("Updating transaction with approval data",{customNonce:r.customNonceValue,params:r.txParams}),this.updateTransaction(r,"TransactionController#processApproval - Updated with approval data"))}const{isCompleted:n}=this.isTransactionCompleted(c);if(!n){await this.approveTransaction(c,o,s)===Ge.SkippedViaBeforePublishHook&&u&&u.success();const e=this.getTransaction(c);this.messagingSystem.publish(`${Ue}:transactionApproved`,{transactionMeta:e,actionId:t})}}catch(e){const n=e,{isCompleted:s}=this.isTransactionCompleted(c);s||(K(this,r,"m",W).call(this,n)?K(this,r,"m",V).call(this,c,t,n):this.failTransaction(l,n,t))}const p=await h;switch(p?.status){case Ee.TransactionStatus.failed:const e=p.error;throw u?.error(e),ne.rpcErrors.internal(e.message);case Ee.TransactionStatus.submitted:return u?.success(),p.hash;default:const t=ne.rpcErrors.internal(`MetaMask Tx Signature: Unknown problem: ${JSON.stringify(p||c)}`);throw u?.error(t),t}}async approveTransaction(e,t,n){let i,a,o=this.getTransactionOrThrow(e);(0,Te.projectLogger)("Approving transaction",o);try{if(!this.sign)return this.failTransaction(o,new Error("No sign method defined.")),Ge.NotApproved;if(!o.chainId)return this.failTransaction(o,new Error("No chainId defined.")),Ge.NotApproved;if(this.approvingTransactionIds.has(e))return(0,Te.projectLogger)("Skipping approval as signing in progress",e),Ge.NotApproved;this.approvingTransactionIds.add(e),i=()=>this.approvingTransactionIds.delete(e);const[c,u]=await(0,Oe.getNextNonce)(o,(e=>K(this,g,"f").getNonceLock(e,o.networkClientId)));a=u,o=K(this,r,"m",F).call(this,{transactionId:e,note:"TransactionController#approveTransaction - Transaction approved"},(e=>{const{chainId:t,txParams:n}=e,{gas:r,type:s}=n;e.status=Ee.TransactionStatus.approved,e.txParams.chainId=t,e.txParams.gasLimit=r,e.txParams.nonce=c,!s&&(0,Le.isEIP1559Transaction)(n)&&(e.txParams.type=Ee.TransactionEnvelopeType.feeMarket)})),this.onTransactionStatusChange(o);const l=await K(this,d,"f").call(this,{name:"Sign",parentContext:t},(()=>K(this,r,"m",j).call(this,o)));if(!await this.beforePublish(o))return(0,Te.projectLogger)("Skipping publishing transaction based on hook"),this.messagingSystem.publish(`${Ue}:transactionPublishingSkipped`,o),Ge.SkippedViaBeforePublishHook;if(!l&&!o.isExternalSign)return Ge.NotApproved;const{networkClientId:f}=o,h=K(this,r,"m",S).call(this,{networkClientId:f});let p;const m=o.type===Ee.TransactionType.swap;let y;if(m&&((0,Te.projectLogger)("Determining pre-transaction balance"),p=await(0,Y.query)(h,"getBalance",[o.txParams.from])),(0,Te.projectLogger)("Publishing transaction",o.txParams),a?.(),a=undefined,o.batchTransactions?.length){(0,Te.projectLogger)("Found batch transactions",o.batchTransactions);const e=new Se.ExtraTransactionsPublishHook({addTransactionBatch:this.addTransactionBatch.bind(this),transactions:o.batchTransactions});n=e.getHook()}return await K(this,d,"f").call(this,{name:"Publish",parentContext:t},(async()=>{const e=n??this.publish;({transactionHash:y}=await e(o,l??"0x")),y===undefined&&(y=await this.publishTransaction(h,{...o,rawTx:l}))})),(0,Te.projectLogger)("Publish successful",y),o=K(this,r,"m",F).call(this,{transactionId:e,note:"TransactionController#approveTransaction - Transaction submitted"},(e=>{e.hash=y,e.status=Ee.TransactionStatus.submitted,e.submittedTime=(new Date).getTime(),m&&(e.preTxBalance=p,(0,Te.projectLogger)("Updated pre-transaction balance",p))})),this.messagingSystem.publish(`${Ue}:transactionSubmitted`,{transactionMeta:o}),this.messagingSystem.publish(`${Ue}:transactionFinished`,o),K(this,s,"f").emit(`${e}:finished`,o),this.onTransactionStatusChange(o),Ge.Approved}catch(e){return this.failTransaction(o,e),Ge.NotApproved}finally{i?.(),a?.()}}async publishTransaction(e,t,{skipSubmitHistory:n}={}){const s=await(0,Y.query)(e,"sendRawTransaction",[t.rawTx]);return!0!==n&&K(this,r,"m",G).call(this,t,s),s}trimTransactionsForState(e){const t=new Set,n=[...e].sort(((e,t)=>e.time>t.time?-1:1)).filter((e=>{const{chainId:n,status:r,txParams:s,time:i}=e;if(s){const e=`${String(s.nonce)}-${(0,Y.convertHexToDecimal)(n)}-${new Date(i).toDateString()}`;if(t.has(e))return!0;if(t.size<K(this,f,"f")||!this.isFinalState(r))return t.add(e),!0}return!1}));return n.reverse(),n}isFinalState(e){return e===Ee.TransactionStatus.rejected||e===Ee.TransactionStatus.confirmed||e===Ee.TransactionStatus.failed}isLocalFinalState(e){return[Ee.TransactionStatus.confirmed,Ee.TransactionStatus.failed,Ee.TransactionStatus.rejected,Ee.TransactionStatus.submitted].includes(e)}async requestApproval(e,{shouldShowRequest:t,traceContext:n}){const r=this.getApprovalId(e),{origin:s}=e,i=Y.ApprovalType.Transaction,a={txId:e.id};return await K(this,d,"f").call(this,{name:"Notification Display",id:r,parentContext:n}),await this.messagingSystem.call("ApprovalController:addRequest",{id:r,origin:s||Y.ORIGIN_METAMASK,type:i,requestData:a,expectsResult:!0},t)}getTransaction(e){const{transactions:t}=this.state;return t.find((({id:t})=>t===e))}getTransactionOrThrow(e,t="TransactionController"){const n=this.getTransaction(e);if(!n)throw new Error(`${t}: No transaction found with id ${e}`);return n}getApprovalId(e){return String(e.id)}isTransactionCompleted(e){const t=this.getTransaction(e);if(!t)return{meta:undefined,isCompleted:!1};return{meta:t,isCompleted:this.isLocalFinalState(t.status)}}onIncomingTransactions(e){if(!e.length)return;const t=e.map((e=>{const{chainId:t}=e,n=K(this,r,"m",v).call(this,{chainId:t});return{...e,networkClientId:n}}));this.update((e=>{const{transactions:n}=e;e.transactions=this.trimTransactionsForState([...t,...n]),(0,Te.projectLogger)("Added incoming transactions to state",t.length,t)})),this.messagingSystem.publish(`${Ue}:incomingTransactionsReceived`,t)}generateDappSuggestedGasFees(e,t){if(!t||t===Y.ORIGIN_METAMASK)return undefined;const{gasPrice:n,maxFeePerGas:r,maxPriorityFeePerGas:s,gas:i}=e;if(n===undefined&&r===undefined&&s===undefined&&i===undefined)return undefined;const a={};return n!==undefined?a.gasPrice=n:r===undefined&&s===undefined||(a.maxFeePerGas=r,a.maxPriorityFeePerGas=s),i!==undefined&&(a.gas=i),a}addExternalTransaction(e){const{chainId:t}=e,{transactions:n}=this.state,r=e?.txParams?.from,s=n.filter((e=>e.txParams.from===r&&e.chainId===t)),i=s.filter((e=>e.status===Ee.TransactionStatus.confirmed)),a=s.filter((e=>e.status===Ee.TransactionStatus.submitted));(0,xe.validateConfirmedExternalTransaction)(e,i,a);const o=0!==(e.history??[]).length||this.isHistoryDisabled?e:(0,Ae.addInitialHistorySnapshot)(e);return this.update((e=>{e.transactions=this.trimTransactionsForState([...e.transactions,o])})),o}setTransactionStatusDropped(e){const t={...e,status:Ee.TransactionStatus.dropped};this.messagingSystem.publish(`${Ue}:transactionDropped`,{transactionMeta:t}),this.updateTransaction(t,"TransactionController#setTransactionStatusDropped - Transaction dropped"),this.onTransactionStatusChange(t)}getTransactionWithActionId(e){return this.state.transactions.find((t=>e&&t.actionId===e))}async waitForTransactionFinished(e){return new Promise((t=>{K(this,s,"f").once(`${e}:finished`,(e=>{t(e)}))}))}updateTransactionMetaRSV(e,t){const n=(0,ie.cloneDeep)(e);for(const e of["r","s","v"]){const r=t[e];r!==undefined&&null!==r&&(n[e]=(0,re.add0x)(r.toString(16)))}return n}async getEIP1559Compatibility(e){const t=await this.getCurrentNetworkEIP1559Compatibility(e),n=await this.getCurrentAccountEIP1559Compatibility();return t&&n}onTransactionStatusChange(e){this.messagingSystem.publish(`${Ue}:transactionStatusUpdated`,{transactionMeta:e})}getNonceTrackerTransactions(e,t,n){return(0,Oe.getAndFormatTransactionsForNonceTracker)(n,t,e,this.state.transactions)}async updatePostBalance(e){try{const{networkClientId:t,type:n}=e;if(n!==Ee.TransactionType.swap)return;const s=K(this,r,"m",S).call(this,{networkClientId:t}),{updatedTransactionMeta:i,approvalTransactionMeta:a}=await(0,Fe.updatePostTransactionBalance)(e,{ethQuery:s,getTransaction:this.getTransaction.bind(this),updateTransaction:this.updateTransaction.bind(this)});this.messagingSystem.publish(`${Ue}:postTransactionBalanceUpdated`,{transactionMeta:i,approvalTransactionMeta:a})}catch(e){(0,Te.projectLogger)("Error while updating post transaction balance",e)}}async publishTransactionForRetry(e,t){try{return await this.publishTransaction(e,t)}catch(e){if(this.isTransactionAlreadyConfirmedError(e))throw new Error("Previous transaction is already confirmed");throw e}}isTransactionAlreadyConfirmedError(e){return e?.message?.includes("nonce too low")||e?.data?.message?.includes("nonce too low")}}n.TransactionController=$e,s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,d=new WeakMap,f=new WeakMap,h=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakMap,I=new WeakMap,r=new WeakSet,y=async function({actionId:e,afterSubmit:t,estimatedBaseFee:n,gasValues:s,label:i,prepareTransactionParams:a,rate:o,transactionId:c,transactionType:u}){if(this.getTransactionWithActionId(e))return;s&&(s=(0,Le.normalizeGasFeeValues)(s),(0,Le.validateGasValues)(s)),(0,Te.projectLogger)(`Creating ${i} transaction`,c,s);const l=this.getTransaction(c);if(!l)return;if(!this.sign)throw new Error("No sign method defined.");const d=(0,Re.getTransactionParamsWithIncreasedGasFee)(l.txParams,o,s);a?.(d);const f=(0,Be.prepareTransaction)(l.chainId,d),h=await this.sign(f,l.txParams.from),p=this.updateTransactionMetaRSV(l,h),m=(0,Be.serializeTransaction)(h),g=d.maxFeePerGas??d.gasPrice,y=d.maxFeePerGas?p.txParams.maxFeePerGas:p.txParams.gasPrice;(0,Te.projectLogger)(`Submitting ${i} transaction`,{oldFee:y,newFee:g,txParams:d});const{networkClientId:b}=l,w=K(this,r,"m",S).call(this,{networkClientId:b}),v={...p,actionId:e,estimatedBaseFee:n,id:(0,ae.v1)(),originalGasEstimate:l.txParams.gas,originalType:l.type,rawTx:m,time:Date.now(),txParams:d,type:u},T=await this.publishTransactionForRetry(w,{...v,origin:i});v.hash=T,this.addMetadata(v),this.messagingSystem.publish(`${Ue}:transactionApproved`,{transactionMeta:v,actionId:e}),this.messagingSystem.publish(`${Ue}:transactionSubmitted`,{transactionMeta:v,actionId:e}),t?.(v)},b=function(e,t,n){const i=this.getTransaction(e);if(!i)return;K(this,r,"m",z).call(this,e);const a={...i,status:Ee.TransactionStatus.rejected,error:(0,Le.normalizeTxError)(n??ne.providerErrors.userRejectedRequest())};this.messagingSystem.publish(`${Ue}:transactionFinished`,a),K(this,s,"f").emit(`${i.id}:finished`,a),this.messagingSystem.publish(`${Ue}:transactionRejected`,{transactionMeta:a,actionId:t}),this.onTransactionStatusChange(a)},w=function(e){return K(this,g,"f").getNetworkClient({networkClientId:e}).configuration.chainId},v=function({chainId:e,networkClientId:t}){return t||K(this,g,"f").getNetworkClient({chainId:e}).id},S=function({chainId:e,networkClientId:t}){return new Q.default(K(this,r,"m",T).call(this,{chainId:e,networkClientId:t}))},T=function({chainId:e,networkClientId:t}){return K(this,g,"f").getNetworkClient({chainId:e,networkClientId:t}).provider},E=function(e){const t=this.getTransaction(e);if(!t)return;const n=t.txParams?.nonce,r=t.txParams?.from,{chainId:s}=t,i=this.state.transactions.filter((t=>t.id!==e&&t.txParams.from===r&&n&&t.txParams.nonce===n&&t.chainId===s&&t.type!==Ee.TransactionType.incoming)),a=i.map((e=>e.id));if(0!==i.length){this.update((e=>{for(const n of e.transactions)a.includes(n.id)&&(n.replacedBy=t?.hash,n.replacedById=t?.id)}));for(const e of this.state.transactions)a.includes(e.id)&&e.status!==Ee.TransactionStatus.failed&&this.setTransactionStatusDropped(e)}},j=async function(e){const{isExternalSign:t,txParams:n}=e;if(t)return(0,Te.projectLogger)("Skipping sign as signed externally"),undefined;(0,Te.projectLogger)("Signing transaction",n);const{authorizationList:r,from:s}=n,i={...n};i.authorizationList=await(0,ke.signAuthorizationList)({authorizationList:r,messenger:this.messagingSystem,transactionMeta:e});const a=(0,Be.prepareTransaction)(e.chainId,i);this.approvingTransactionIds.add(e.id);const o=await new Promise(((t,n)=>{this.sign?.(a,s,...this.getAdditionalSignArguments(e)).then(t,n),this.signAbortCallbacks.set(e.id,(()=>n(new Error("Signing aborted by user"))))}));if(this.signAbortCallbacks.delete(e.id),!o)return(0,Te.projectLogger)("Skipping signed status as no signed transaction"),undefined;const c=(0,ie.cloneDeep)(e);if(!this.afterSign(c,o))return this.updateTransaction(c,"TransactionController#signTransaction - Update after sign"),(0,Te.projectLogger)("Skipping signed status based on hook"),undefined;const u={...this.updateTransactionMetaRSV(c,o),status:Ee.TransactionStatus.signed,txParams:i};this.updateTransaction(u,"TransactionController#approveTransaction - Transaction signed"),this.onTransactionStatusChange(u);const l=(0,Be.serializeTransaction)(o),d=(0,ie.merge)({},u,{rawTx:l});return this.updateTransaction(d,"TransactionController#approveTransaction - RawTransaction added"),l},k=function(e){(0,Te.projectLogger)("Processing confirmed transaction",e.id),K(this,r,"m",E).call(this,e.id),this.messagingSystem.publish(`${Ue}:transactionConfirmed`,e),this.onTransactionStatusChange(e),this.updatePostBalance(e).catch((e=>{throw(0,Te.projectLogger)("Error while updating post balance",e),e}))},x=function({provider:e,blockTracker:t,chainId:n}){return new te.NonceTracker({provider:e,blockTracker:t,getPendingTransactions:K(this,r,"m",B).bind(this,n),getConfirmedTransactions:this.getNonceTrackerTransactions.bind(this,[Ee.TransactionStatus.confirmed],n)})},_=function({provider:e,blockTracker:t,chainId:n,networkClientId:s}){const i=new Q.default(e),a=new we.PendingTransactionTracker({blockTracker:t,getChainId:()=>n,getEthQuery:()=>i,getNetworkClientId:()=>s,getTransactions:()=>this.state.transactions,isResubmitEnabled:K(this,c,"f").isResubmitEnabled,getGlobalLock:()=>K(this,g,"f").acquireNonceLockForChainIdKey({chainId:n}),messenger:this.messagingSystem,publishTransaction:(e,t)=>this.publishTransaction(e,t,{skipSubmitHistory:!0}),hooks:{beforeCheckPendingTransaction:this.beforeCheckPendingTransaction.bind(this)}});return K(this,r,"m",O).call(this,a),a},P=function(){K(this,g,"f").stopAllTracking()},A=function(e){e.hub.on("transactions",this.onIncomingTransactions.bind(this))},C=function(e){e.hub.removeAllListeners("transaction-confirmed"),e.hub.removeAllListeners("transaction-dropped"),e.hub.removeAllListeners("transaction-failed"),e.hub.removeAllListeners("transaction-updated")},O=function(e){e.hub.on("transaction-confirmed",K(this,r,"m",k).bind(this)),e.hub.on("transaction-dropped",this.setTransactionStatusDropped.bind(this)),e.hub.on("transaction-failed",this.failTransaction.bind(this)),e.hub.on("transaction-updated",this.updateTransaction.bind(this))},B=function(e,t){return[...this.getNonceTrackerTransactions([Ee.TransactionStatus.approved,Ee.TransactionStatus.signed,Ee.TransactionStatus.submitted],t,e),...this.getExternalPendingTransactions(t,e)]},R=function(){return K(this,m,"f")?[new he.TestGasFeeFlow]:[new de.RandomisedEstimationsGasFeeFlow,new ue.LineaGasFeeFlow,new ce.DefaultGasFeeFlow]},N=function(){return[new le.OptimismLayer1GasFeeFlow,new fe.ScrollLayer1GasFeeFlow]},F=function({transactionId:e,note:t,skipHistory:n,skipValidation:s,skipResimulateCheck:i},a){let o;this.update((r=>{const c=r.transactions.findIndex((({id:t})=>t===e));if(-1===c)throw new Error(`Cannot update transaction as ID not found - ${e}`);let u=r.transactions[c];const l=(0,ie.cloneDeep)(u);u=a(u)??u,!0!==s&&(u.txParams=(0,Le.normalizeTransactionParams)(u.txParams),(0,De.validateTxParams)(u.txParams)),!i&&K(this,p,"f").call(this)&&(o=(0,ve.shouldResimulate)(l,u));this.isHistoryDisabled||n||(u=(0,Ae.updateTransactionHistory)(u,t??"Transaction updated")),r.transactions[c]=u}));const c=this.getTransaction(e);return o?.resimulate&&K(this,r,"m",L).call(this,c,{blockTime:o.blockTime}).catch((e=>{throw(0,Te.projectLogger)("Error during re-simulation",e),e})),c},M=async function(e,{traceContext:t}={}){if(!K(this,h,"f").call(this))return;const{chainId:n,id:s,txParams:{to:i,from:a}}=e,o={chainId:(0,re.hexToNumber)(n),to:i,from:a};(0,De.validateParamTo)(i);if(!this.state.transactions.find((e=>e.chainId===n&&e.txParams.from===a&&e.txParams.to===i&&e.id!==s)))try{const{count:e}=await K(this,d,"f").call(this,{name:"Account Address Relationship",parentContext:t},(()=>(0,oe.getAccountAddressRelationship)(o))),n=e===undefined?undefined:0===e;if(!this.getTransaction(s))return void(0,Te.projectLogger)("Cannot update first time interaction as transaction not found",s);K(this,r,"m",F).call(this,{transactionId:s,note:"TransactionController#updateFirstInteraction - Update first time interaction"},(e=>{e.isFirstTimeInteraction=n})),(0,Te.projectLogger)("Updated first time interaction",s,{isFirstTimeInteraction:n})}catch(e){(0,Te.projectLogger)("Error fetching account address relationship, skipping first time interaction update",e)}},L=async function(e,{blockTime:t,traceContext:n}={}){const{id:s,chainId:i,txParams:a,simulationData:o}=e,{from:c,to:u,value:l,data:f}=a;let h={error:{code:Ee.SimulationErrorCode.Disabled,message:"Simulation disabled"},tokenBalanceChanges:[]},m=[];if(K(this,p,"f").call(this)){const e=a?.authorizationList?.[0]?.address,r=e&&ke.DELEGATION_PREFIX+(0,re.remove0x)(e),s=await K(this,d,"f").call(this,{name:"Simulate",parentContext:n},(()=>(0,Ne.getSimulationData)({chainId:i,from:c,to:u,value:l,data:f},{blockTime:t,senderCode:r})));m=s?.gasFeeTokens,h=s?.simulationData,t&&o&&(0,ve.hasSimulationDataChanged)(o,h)&&(h={...h,isUpdatedAfterSecurityCheck:!0})}this.getTransaction(s)?(K(this,r,"m",F).call(this,{transactionId:s,note:"TransactionController#updateSimulationData - Update simulation data",skipResimulateCheck:Boolean(t)},(e=>{e.gasFeeTokens=m,e.simulationData=h})),(0,Te.projectLogger)("Updated simulation data",s,h)):(0,Te.projectLogger)("Cannot update simulation data as transaction not found",s,h)},D=function({transactionId:e,gasFeeEstimates:t,gasFeeEstimatesLoaded:n,layer1GasFee:s}){K(this,r,"m",F).call(this,{transactionId:e,skipHistory:!0},(e=>{(0,me.updateTransactionGasFees)({txMeta:e,gasFeeEstimates:t,gasFeeEstimatesLoaded:n,isTxParamsGasFeeUpdatesEnabled:this.isTxParamsGasFeeUpdatesEnabled,layer1GasFee:s})}))},H=function(){return this.messagingSystem.call("AccountsController:getSelectedAccount")},U=function(){const e=this.messagingSystem.call("AccountsController:getState");return Object.values(e.internalAccounts?.accounts??{}).filter((e=>"eip155:eoa"===e.type)).map((e=>e.address))},G=function(e,t){const{chainId:n,networkClientId:r,origin:s,rawTx:i,txParams:a}=e,{networkConfigurationsByChainId:o}=this.getNetworkState(),c=o[n],u=c?.rpcEndpoints.find((e=>e.networkClientId===r)),l=u?.url,d={chainId:n,hash:t,networkType:u?.name??r,networkUrl:l,origin:s,rawTransaction:i,time:Date.now(),transaction:a};(0,Te.projectLogger)("Updating submit history",d),this.update((e=>{const{submitHistory:t}=e;100===t.length&&t.pop(),t.unshift(d)}))},$=async function(e){const{chainId:t,networkClientId:n}=e,s=K(this,g,"f").getNetworkClient({networkClientId:n}).configuration.type===ee.NetworkClientType.Custom,i=K(this,r,"m",S).call(this,{networkClientId:n});await(0,_e.updateGas)({chainId:t,ethQuery:i,isCustomNetwork:s,isSimulationEnabled:K(this,p,"f").call(this),messenger:this.messagingSystem,txMeta:e})},q=function(){this.messagingSystem.registerActionHandler(`${Ue}:updateCustodialTransaction`,this.updateCustodialTransaction.bind(this))},z=function(e){this.update((t=>{const n=t.transactions.filter((({id:t})=>t!==e));t.transactions=this.trimTransactionsForState(n)}))},W=function(e){return[ne.errorCodes.provider.userRejectedRequest,ne.errorCodes.rpc.methodNotSupported].includes(e.code)},V=function(e,t,n){if(K(this,r,"m",b).call(this,e,t,n),n.code===ne.errorCodes.provider.userRejectedRequest)throw ne.providerErrors.userRejectedRequest({message:"MetaMask Tx Signature: User denied transaction signature.",data:n?.data});throw n}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/TransactionController.cjs"}],[2753,{"../errors.cjs":2755,"../logger.cjs":2774,"@metamask/controller-utils":1512,"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getAccountTransactions=n.getAccountAddressRelationship=void 0;const r=e("@metamask/controller-utils"),s=e("@metamask/utils"),i=e("../errors.cjs"),a=e("../logger.cjs"),o="https://accounts.api.cx.metamask.io",c=`${o}/v1/accounts/`,u="x-metamask-clientproduct",l="metamask-transaction-controller",d=[1,10,56,137,8453,42161,59144,534352],f=(0,s.createModuleLogger)(a.projectLogger,"accounts-api");n.getAccountAddressRelationship=async function(e){const{chainId:t,from:n,to:s}=e;if(!d.includes(t))throw f("Unsupported chain ID for account relationship API",t),new i.FirstTimeInteractionError("Unsupported chain ID");const a=`${o}/v1/networks/${t}/accounts/${n}/relationships/${s}`;f("Getting account address relationship",{request:e,url:a});const c={[u]:l},h=await(0,r.successfulFetch)(a,{headers:c});if(204===h.status)return{count:0};const p=await h.json();if(f("Retrieved account address relationship",p),p.error){const{code:e,message:t}=p.error;throw new i.FirstTimeInteractionError(t,e)}return p},n.getAccountTransactions=async function(e){const{address:t,chainIds:n,cursor:s,endTimestamp:i,sortDirection:a,startTimestamp:o}=e;let d=`${c}${t}/transactions`;const h=[];if(n){const e=n.join(",");h.push(`networks=${e}`)}o&&h.push(`startTimestamp=${o}`),i&&h.push(`endTimestamp=${i}`),s&&h.push(`cursor=${s}`),a&&h.push(`sortDirection=${a}`),h.length&&(d+=`?${h.join("&")}`),f("Getting account transactions",{request:e,url:d});const p={[u]:l},m=await(0,r.successfulFetch)(d,{headers:p}),g=await m.json();return f("Retrieved account transactions",g),g}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/api/accounts-api.cjs"}],[2754,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ABI_IERC7821=n.ABI_SIMULATION_ERC721_LEGACY=n.ABI_SIMULATION_ERC20_WRAPPED=n.GAS_BUFFER_CHAIN_OVERRIDES=n.CHAIN_IDS=void 0,n.CHAIN_IDS={MAINNET:"0x1",GOERLI:"0x5",BASE:"0x2105",BASE_TESTNET:"0x14a33",BSC:"0x38",BSC_TESTNET:"0x61",OPTIMISM:"0xa",OPTIMISM_TESTNET:"0x1a4",OPBNB:"0xcc",OPBNB_TESTNET:"0x15eb",OPTIMISM_SEPOLIA:"0xaa37dc",POLYGON:"0x89",POLYGON_TESTNET:"0x13881",AVALANCHE:"0xa86a",AVALANCHE_TESTNET:"0xa869",FANTOM:"0xfa",FANTOM_TESTNET:"0xfa2",SEPOLIA:"0xaa36a7",LINEA_GOERLI:"0xe704",LINEA_SEPOLIA:"0xe705",LINEA_MAINNET:"0xe708",MOONBEAM:"0x504",MOONBEAM_TESTNET:"0x507",MOONRIVER:"0x505",GNOSIS:"0x64",ARBITRUM:"0xa4b1",ZKSYNC_ERA:"0x144",ZORA:"0x76adf1",SCROLL:"0x82750",SCROLL_SEPOLIA:"0x8274f",MEGAETH_TESTNET:"0x18c6"},n.GAS_BUFFER_CHAIN_OVERRIDES={[n.CHAIN_IDS.OPTIMISM]:1,[n.CHAIN_IDS.OPTIMISM_SEPOLIA]:1},n.ABI_SIMULATION_ERC20_WRAPPED=[{anonymous:!1,inputs:[{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"wad",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!1,name:"wad",type:"uint256"}],name:"Withdrawal",type:"event"}],n.ABI_SIMULATION_ERC721_LEGACY=[{anonymous:!1,inputs:[{indexed:!1,name:"_from",type:"address"},{indexed:!1,name:"_to",type:"address"},{indexed:!1,name:"_tokenId",type:"uint256"}],name:"Transfer",type:"event"}],n.ABI_IERC7821=[{type:"function",name:"execute",inputs:[{name:"mode",type:"bytes32",internalType:"ModeCode"},{name:"executionData",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"payable"},{type:"function",name:"supportsExecutionMode",inputs:[{name:"mode",type:"bytes32",internalType:"ModeCode"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"}]}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/constants.cjs"}],[2755,{"./types.cjs":2775},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.SimulationRevertedError=n.SimulationInvalidResponseError=n.SimulationChainNotSupportedError=n.FirstTimeInteractionError=n.SimulationError=void 0;const r=e("./types.cjs");class s extends Error{constructor(e,t){super(e??"Simulation failed"),this.code=t}}n.SimulationError=s;class i extends Error{constructor(e,t){super(e??"Error checking first time interaction"),this.code=t}}n.FirstTimeInteractionError=i;n.SimulationChainNotSupportedError=class extends s{constructor(e){super(`Chain is not supported: ${e}`,r.SimulationErrorCode.ChainNotSupported)}};n.SimulationInvalidResponseError=class extends s{constructor(){super("Invalid response from simulation API",r.SimulationErrorCode.InvalidResponse)}};n.SimulationRevertedError=class extends s{constructor(){super("Transaction was reverted",r.SimulationErrorCode.Reverted)}}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/errors.cjs"}],[2756,{"../logger.cjs":2774,"../types.cjs":2775,"../utils/gas-fees.cjs":2780,"@metamask/gas-fee-controller":1942,"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i,a,o,c,u=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.DefaultGasFeeFlow=void 0;const l=e("@metamask/gas-fee-controller"),d=e("@metamask/utils"),f=e("../logger.cjs"),h=e("../types.cjs"),p=e("../utils/gas-fees.cjs"),m=(0,d.createModuleLogger)(f.projectLogger,"default-gas-fee-flow");n.DefaultGasFeeFlow=class{constructor(){r.add(this)}matchesTransaction(){return!0}async getGasFees(e){const{gasFeeControllerData:t}=e,{gasEstimateType:n,gasFeeEstimates:o}=t;let c;switch(n){case l.GAS_ESTIMATE_TYPES.FEE_MARKET:m("Using fee market estimates",o),c=u(this,r,"m",s).call(this,o);break;case l.GAS_ESTIMATE_TYPES.LEGACY:m("Using legacy estimates",o),c=u(this,r,"m",i).call(this,o);break;case l.GAS_ESTIMATE_TYPES.ETH_GASPRICE:m("Using eth_gasPrice estimates",o),c=u(this,r,"m",a).call(this,o);break;default:throw new Error(`Unsupported gas estimate type: ${n}`)}return{estimates:c}}},r=new WeakSet,s=function(e){const t=Object.values(h.GasFeeEstimateLevel).reduce(((t,n)=>({...t,[n]:u(this,r,"m",o).call(this,e,n)})),{});return{type:h.GasFeeEstimateType.FeeMarket,...t}},i=function(e){const t=Object.values(h.GasFeeEstimateLevel).reduce(((t,n)=>({...t,[n]:u(this,r,"m",c).call(this,e,n)})),{});return{type:h.GasFeeEstimateType.Legacy,...t}},a=function(e){return{type:h.GasFeeEstimateType.GasPrice,gasPrice:(0,p.gweiDecimalToWeiHex)(e.gasPrice)}},o=function(e,t){return{maxFeePerGas:(0,p.gweiDecimalToWeiHex)(e[t].suggestedMaxFeePerGas),maxPriorityFeePerGas:(0,p.gweiDecimalToWeiHex)(e[t].suggestedMaxPriorityFeePerGas)}},c=function(e,t){return(0,p.gweiDecimalToWeiHex)(e[t])}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/gas-flows/DefaultGasFeeFlow.cjs"}],[2757,{"../logger.cjs":2774,"../types.cjs":2775,"./DefaultGasFeeFlow.cjs":2756,"@metamask/controller-utils":1512,"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i,a,o,c,u=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.LineaGasFeeFlow=void 0;const l=e("@metamask/controller-utils"),d=e("@metamask/utils"),f=e("./DefaultGasFeeFlow.cjs"),h=e("../logger.cjs"),p=e("../types.cjs"),m=(0,d.createModuleLogger)(h.projectLogger,"linea-gas-fee-flow"),g=[l.ChainId["linea-mainnet"],l.ChainId["linea-goerli"],l.ChainId["linea-sepolia"]],y={low:1,medium:1.35,high:1.7},b={low:1,medium:1.05,high:1.1};n.LineaGasFeeFlow=class{constructor(){r.add(this)}matchesTransaction({transactionMeta:e}){return g.includes(e.chainId)}async getGasFees(e){try{return await u(this,r,"m",s).call(this,e)}catch(t){return m("Using default flow as fallback due to error",t),(new f.DefaultGasFeeFlow).getGasFees(e)}}},r=new WeakSet,s=async function(e){const{ethQuery:t,transactionMeta:n}=e,s=await u(this,r,"m",i).call(this,n,t);m("Received Linea response",s);const d=u(this,r,"m",a).call(this,s.baseFeePerGas,y);m("Generated base fees",u(this,r,"m",c).call(this,d));const f=u(this,r,"m",a).call(this,s.priorityFeePerGas,b);m("Generated priority fees",u(this,r,"m",c).call(this,f));const h=u(this,r,"m",o).call(this,d,f);m("Generated max fees",u(this,r,"m",c).call(this,h));return{estimates:Object.values(p.GasFeeEstimateLevel).reduce(((e,t)=>({...e,[t]:{maxFeePerGas:(0,l.toHex)(h[t]),maxPriorityFeePerGas:(0,l.toHex)(f[t])}})),{type:p.GasFeeEstimateType.FeeMarket})}},i=function(e,t){return(0,l.query)(t,"linea_estimateGas",[{from:e.txParams.from,to:e.txParams.to,value:e.txParams.value,input:e.txParams.data}])},a=function(e,t){const n=(0,l.hexToBN)(e);return{low:n.muln(t.low),medium:n.muln(t.medium),high:n.muln(t.high)}},o=function(e,t){return{low:e.low.add(t.low),medium:e.medium.add(t.medium),high:e.high.add(t.high)}},c=function(e){return Object.values(p.GasFeeEstimateLevel).map((t=>e[t].toString(10)))}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/gas-flows/LineaGasFeeFlow.cjs"}],[2758,{"../constants.cjs":2754,"./OracleLayer1GasFeeFlow.cjs":2759},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.OptimismLayer1GasFeeFlow=void 0;const r=e("./OracleLayer1GasFeeFlow.cjs"),s=e("../constants.cjs"),i=[s.CHAIN_IDS.OPTIMISM,s.CHAIN_IDS.OPTIMISM_TESTNET,s.CHAIN_IDS.BASE,s.CHAIN_IDS.BASE_TESTNET,s.CHAIN_IDS.OPBNB,s.CHAIN_IDS.OPBNB_TESTNET,s.CHAIN_IDS.ZORA];class a extends r.OracleLayer1GasFeeFlow{constructor(){super("0x420000000000000000000000000000000000000F")}matchesTransaction({transactionMeta:e}){return i.includes(e.chainId)}}n.OptimismLayer1GasFeeFlow=a}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/gas-flows/OptimismLayer1GasFeeFlow.cjs"}],[2759,{"../logger.cjs":2774,"../utils/prepare.cjs":2786,"@ethersproject/contracts":526,"@ethersproject/providers":564,"@metamask/utils":2822,buffer:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r,s,i,a,o,c,u=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},l=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.OracleLayer1GasFeeFlow=void 0;const d=e("@ethersproject/contracts"),f=e("@ethersproject/providers"),h=e("@metamask/utils"),p=e("../logger.cjs"),m=e("../utils/prepare.cjs"),g=(0,h.createModuleLogger)(p.projectLogger,"oracle-layer1-gas-fee-flow"),y=[{inputs:[{internalType:"bytes",name:"_data",type:"bytes"}],name:"getL1Fee",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}];n.OracleLayer1GasFeeFlow=class{constructor(e,t){r.add(this),s.set(this,void 0),i.set(this,void 0),u(this,s,e,"f"),u(this,i,t??!1,"f")}async getLayer1Fee(e){try{return await l(this,r,"m",a).call(this,e)}catch(e){throw g("Failed to get oracle layer 1 gas fee",e),new Error("Failed to get oracle layer 1 gas fee")}}},s=new WeakMap,i=new WeakMap,r=new WeakSet,a=async function(e){const{provider:t,transactionMeta:n}=e,a=new d.Contract(l(this,s,"f"),y,new f.Web3Provider(t)),c=l(this,r,"m",o).call(this,n,l(this,i,"f")).serialize(),u=await a.getL1Fee(c);if(u===undefined)throw new Error("No value returned from oracle contract");return{layer1Fee:u.toHexString()}},o=function(e,n){const s=l(this,r,"m",c).call(this,e),{chainId:i}=e;let a=(0,m.prepareTransaction)(i,s);if(n){const e=t.from("abcdef0123456789abcdef0123456789abcdef0123456789abcdef0123456789","hex");a=a.sign(e)}return a},c=function(e){return{...e.txParams,gasLimit:e.txParams.gas}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/gas-flows/OracleLayer1GasFeeFlow.cjs"}],[2760,{"../logger.cjs":2774,"../types.cjs":2775,"../utils/feature-flags.cjs":2779,"../utils/gas-fees.cjs":2780,"./DefaultGasFeeFlow.cjs":2756,"@metamask/gas-fee-controller":1942,"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i,a,o,c=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.randomiseDecimalGWEIAndConvertToHex=n.RandomisedEstimationsGasFeeFlow=void 0;const u=e("@metamask/gas-fee-controller"),l=e("@metamask/utils"),d=e("./DefaultGasFeeFlow.cjs"),f=e("../logger.cjs"),h=e("../types.cjs"),p=e("../utils/feature-flags.cjs"),m=e("../utils/gas-fees.cjs"),g=(0,l.createModuleLogger)(f.projectLogger,"randomised-estimation-gas-fee-flow");function y(e,t,n){const r=(0,m.gweiDecimalToWeiDecimal)(e),s=r.length,i=Math.min(t,s-n);if(0===Number(r)||i<=0)return`0x${Number(r).toString(16)}`;const a=s-i,o=r.slice(0,a),c=r.slice(-i),u=function(e,t){const n=10**e;return t+Math.floor(Math.random()*(n-t))}(i,Number(c)),d=`0x${(BigInt(o+"0".repeat(i))+BigInt(u)).toString(16)}`;return(0,l.add0x)(d)}n.RandomisedEstimationsGasFeeFlow=class{constructor(){r.add(this)}matchesTransaction({transactionMeta:e,messenger:t}){const{chainId:n}=e;return(0,p.getGasFeeRandomisation)(t).randomisedGasFeeDigits[n]!==undefined}async getGasFees(e){try{return await c(this,r,"m",i).call(this,e)}catch(t){return g("Using default flow as fallback due to error",t),await c(this,r,"m",s).call(this,e)}}},r=new WeakSet,s=async function(e){return(new d.DefaultGasFeeFlow).getGasFees(e)},i=async function(e){const{messenger:t,gasFeeControllerData:n,transactionMeta:i}=e,{gasEstimateType:o,gasFeeEstimates:l}=n,d=(0,p.getGasFeeRandomisation)(t),f=d.randomisedGasFeeDigits[i.chainId],h=d.preservedNumberOfDigits??2;if(o===u.GAS_ESTIMATE_TYPES.FEE_MARKET){g("Randomising fee market estimates",l);const e=c(this,r,"m",a).call(this,l,f,h);return g("Added randomised fee market estimates",e),{estimates:e}}return await c(this,r,"m",s).call(this,e)},a=function(e,t,n){const s=Object.values(h.GasFeeEstimateLevel).reduce(((s,i)=>({...s,[i]:c(this,r,"m",o).call(this,e,i,t,n)})),{});return{type:h.GasFeeEstimateType.FeeMarket,...s}},o=function(e,t,n,r){return{maxFeePerGas:(0,m.gweiDecimalToWeiHex)(e[t].suggestedMaxFeePerGas),maxPriorityFeePerGas:y(e[t].suggestedMaxPriorityFeePerGas,n,r)}},n.randomiseDecimalGWEIAndConvertToHex=y}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/gas-flows/RandomisedEstimationsGasFeeFlow.cjs"}],[2761,{"../constants.cjs":2754,"./OracleLayer1GasFeeFlow.cjs":2759},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ScrollLayer1GasFeeFlow=void 0;const r=e("./OracleLayer1GasFeeFlow.cjs"),s=e("../constants.cjs"),i=[s.CHAIN_IDS.SCROLL,s.CHAIN_IDS.SCROLL_SEPOLIA];class a extends r.OracleLayer1GasFeeFlow{constructor(){super("0x5300000000000000000000000000000000000002",!0)}matchesTransaction({transactionMeta:e}){return i.includes(e.chainId)}}n.ScrollLayer1GasFeeFlow=a}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/gas-flows/ScrollLayer1GasFeeFlow.cjs"}],[2762,{"../types.cjs":2775,"@metamask/controller-utils":1512},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i,a=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},o=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n};Object.defineProperty(n,"__esModule",{value:!0}),n.TestGasFeeFlow=void 0;const c=e("@metamask/controller-utils"),u=e("../types.cjs"),l=1e15;n.TestGasFeeFlow=class{constructor(){r.add(this),s.set(this,1)}matchesTransaction(){return!0}async getGasFees(e){const{transactionMeta:t}=e,{txParams:n}=t,{gas:c}=n;if(!c)throw new Error("Cannot estimate fee without gas value");const d=parseInt(c,16),f=.5*l,h=(a(this,s,"f")+1)*l,p=a(this,s,"f")*l,m=h-f,g=p-f,y=h+f,b=p+f;return o(this,s,a(this,s,"f")+1,"f"),{estimates:{type:u.GasFeeEstimateType.FeeMarket,low:{maxFeePerGas:a(this,r,"m",i).call(this,m,d),maxPriorityFeePerGas:a(this,r,"m",i).call(this,g,d)},medium:{maxFeePerGas:a(this,r,"m",i).call(this,h,d),maxPriorityFeePerGas:a(this,r,"m",i).call(this,p,d)},high:{maxFeePerGas:a(this,r,"m",i).call(this,y,d),maxPriorityFeePerGas:a(this,r,"m",i).call(this,b,d)}}}}},s=new WeakMap,r=new WeakSet,i=function(e,t){const n=Math.ceil(e/t);return(0,c.toHex)(n)}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/gas-flows/TestGasFeeFlow.cjs"}],[2763,{"../api/accounts-api.cjs":2753,"../constants.cjs":2754,"../logger.cjs":2774,"../types.cjs":2775,"@metamask/controller-utils":1512,"bn.js":3895,uuid:5533},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i,a,o,c,u,l,d=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},f=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.AccountsApiRemoteTransactionSource=n.SUPPORTED_CHAIN_IDS=void 0;const h=e("@metamask/controller-utils"),p=f(e("bn.js")),m=e("uuid"),g=e("../api/accounts-api.cjs"),y=e("../constants.cjs"),b=e("../logger.cjs"),w=e("../types.cjs");n.SUPPORTED_CHAIN_IDS=[y.CHAIN_IDS.MAINNET,y.CHAIN_IDS.POLYGON,y.CHAIN_IDS.BSC,y.CHAIN_IDS.LINEA_MAINNET,y.CHAIN_IDS.BASE,y.CHAIN_IDS.OPTIMISM,y.CHAIN_IDS.ARBITRUM,y.CHAIN_IDS.SCROLL];const v=(0,b.createModuleLogger)(b.incomingTransactionsLogger,"accounts-api-source");n.AccountsApiRemoteTransactionSource=class{constructor(){r.add(this)}getSupportedChains(){return n.SUPPORTED_CHAIN_IDS}async fetchTransactions(e){const{address:t}=e,n=await d(this,r,"m",s).call(this,e);v("Fetched transactions",n.length,n);const i=n.map((e=>d(this,r,"m",o).call(this,t,e)));v("Normalized transactions",i);const c=d(this,r,"m",a).call(this,e,i);return v("Filtered transactions",c.length,c),c}},r=new WeakSet,s=async function(e){v("Getting transactions",e);const{address:t,cache:s}=e,a=d(this,r,"m",u).call(this,s,n.SUPPORTED_CHAIN_IDS,t);return a&&v("Using cached cursor",a),await d(this,r,"m",i).call(this,e,n.SUPPORTED_CHAIN_IDS,a)},i=async function(e,t,n){const{address:s,queryEntireHistory:i,updateCache:a}=e,o=[];let u=!0,f=n,h=0;const p=i||n?undefined:d(this,r,"m",l).call(this,Date.now());for(;u;)try{const e=await(0,g.getAccountTransactions)({address:s,chainIds:t,cursor:f,sortDirection:"ASC",startTimestamp:p});h+=1,e?.data&&o.push(...e.data),u=e?.pageInfo?.hasNextPage,f=e?.pageInfo?.cursor,f&&a((e=>{const n=d(this,r,"m",c).call(this,t,s);e[n]=f,v("Updated cache",{key:n,newCursor:f})}))}catch(e){v("Error while fetching transactions",e);break}return v("Queried transactions",{pageCount:h}),o},a=function(e,t){const{address:n,includeTokenTransfers:r,updateTransactions:s}=e;let i=t;return s||(i=i.filter((e=>e.txParams.to===n))),r||(i=i.filter((e=>!e.isTransfer))),i},o=function(e,t){const n=String(t.blockNumber),r=`0x${t.chainId.toString(16)}`,{hash:s}=t,i=new Date(t.timestamp).getTime(),a=(0,m.v1)({msecs:i}),{from:o}=t,c=(0,h.BNToHex)(new p.default(t.gas)),u=(0,h.BNToHex)(new p.default(t.gasPrice)),l=(0,h.BNToHex)(new p.default(t.gasUsed)),d=(0,h.BNToHex)(new p.default(t.nonce)),f=w.TransactionType.incoming,g=t.isError?w.TransactionStatus.failed:w.TransactionStatus.confirmed,y=t.valueTransfers.find((t=>t.to.toLowerCase()===e.toLowerCase()&&t.contractAddress)),b=Boolean(y),v=y?.contractAddress,S=y?.decimal,T=y?.symbol,E=(0,h.BNToHex)(new p.default(y?.amount??t.value)),j=y?e:t.to;return{blockNumber:n,chainId:r,error:g===w.TransactionStatus.failed?new Error("Transaction failed"):undefined,hash:s,id:a,isTransfer:b,networkClientId:"",status:g,time:i,toSmartContract:!1,transferInformation:b?{contractAddress:v,decimals:S,symbol:T}:undefined,txParams:{chainId:r,from:o,gas:c,gasPrice:u,gasUsed:l,nonce:d,to:j,value:E},type:f,verifiedOnBlockchain:!1}},c=function(e,t){return`accounts-api#${e.join(",")}#${t}`},u=function(e,t,n){return e[d(this,r,"m",c).call(this,t,n)]},l=function(e){return Math.floor(e/1e3)}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/helpers/AccountsApiRemoteTransactionSource.cjs"}],[2764,{"../logger.cjs":2774,"../types.cjs":2775,"../utils/gas-flow.cjs":2781,"../utils/layer1-gas-fee-flow.cjs":2784,"@metamask/eth-query":1718,"@metamask/utils":2822,events:4269},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i,a,o,c,u,l,d,f,h,p,m,g,y,b,w,v,S,T=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},E=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},j=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.updateTransactionGasFees=n.GasFeePoller=void 0;const k=j(e("@metamask/eth-query")),x=e("@metamask/utils"),_=j(e("events")),I=e("../logger.cjs"),P=e("../types.cjs"),A=e("../utils/gas-flow.cjs"),C=e("../utils/layer1-gas-fee-flow.cjs"),O=(0,x.createModuleLogger)(I.projectLogger,"gas-fee-poller");n.GasFeePoller=class{constructor({findNetworkClientIdByChainId:e,gasFeeFlows:t,getGasFeeControllerEstimates:n,getProvider:m,getTransactions:g,layer1GasFeeFlows:y,messenger:b,onStateChange:w}){r.add(this),this.hub=new _.default,s.set(this,void 0),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),c.set(this,void 0),u.set(this,void 0),l.set(this,void 0),d.set(this,void 0),f.set(this,!1),T(this,s,e,"f"),T(this,i,t,"f"),T(this,u,y,"f"),T(this,a,n,"f"),T(this,o,m,"f"),T(this,c,g,"f"),T(this,l,b,"f"),w((()=>{E(this,r,"m",v).call(this).length?E(this,r,"m",h).call(this):E(this,r,"m",p).call(this)}))}},s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,d=new WeakMap,f=new WeakMap,r=new WeakSet,h=function(){E(this,f,"f")||(E(this,r,"m",m).call(this),T(this,f,!0,"f"),O("Started polling"))},p=function(){E(this,f,"f")&&(clearTimeout(E(this,d,"f")),T(this,d,undefined,"f"),T(this,f,!1,"f"),O("Stopped polling"))},m=async function e(){await E(this,r,"m",g).call(this),T(this,d,setTimeout((()=>E(this,r,"m",e).call(this)),1e4),"f")},g=async function(){const e=E(this,r,"m",v).call(this);if(!e.length)return;O("Found unapproved transactions",e.length);const t=await E(this,r,"m",S).call(this,e);O("Retrieved gas fee controller data",t),await Promise.all(e.flatMap((e=>{const{chainId:n}=e,s=t.get(n);return E(this,r,"m",y).call(this,e,s)})))},y=async function(e,t){const{id:n}=e,[s,i]=await Promise.all([E(this,r,"m",b).call(this,e,t),E(this,r,"m",w).call(this,e)]);(s||i)&&this.hub.emit("transaction-updated",{transactionId:n,gasFeeEstimates:s?.gasFeeEstimates,gasFeeEstimatesLoaded:s?.gasFeeEstimatesLoaded,layer1GasFee:i})},b=async function(e,t){const{networkClientId:n}=e,r=new k.default(E(this,o,"f").call(this,n)),s=(0,A.getGasFeeFlow)(e,E(this,i,"f"),E(this,l,"f"));s&&O("Found gas fee flow",s.constructor.name,e.id);const a={ethQuery:r,gasFeeControllerData:t,messenger:E(this,l,"f"),transactionMeta:e};let c;if(s)try{c=(await s.getGasFees(a)).estimates}catch(t){O("Failed to get suggested gas fees",e.id,t)}return!c&&e.gasFeeEstimatesLoaded?undefined:(O("Updated gas fee estimates",{gasFeeEstimates:c,transaction:e.id}),{gasFeeEstimates:c,gasFeeEstimatesLoaded:!0})},w=async function(e){const{networkClientId:t}=e,n=E(this,o,"f").call(this,t),r=await(0,C.getTransactionLayer1GasFee)({layer1GasFeeFlows:E(this,u,"f"),messenger:E(this,l,"f"),provider:n,transactionMeta:e});return r&&O("Updated layer 1 gas fee",r,e.id),r},v=function(){return E(this,c,"f").call(this).filter((e=>e.status===P.TransactionStatus.unapproved))},S=async function(e){const t=new Map;for(const n of e){const{chainId:e,networkClientId:r}=n;if(t.has(e))continue;const i=r??E(this,s,"f").call(this,e);t.set(e,i)}O("Extracted network client IDs by chain ID",t);const n=Array.from(t.entries()).map((async([e,t])=>[e,await E(this,a,"f").call(this,{networkClientId:t})]));return new Map(await Promise.all(n))},n.updateTransactionGasFees=function({txMeta:e,gasFeeEstimates:t,gasFeeEstimatesLoaded:n,isTxParamsGasFeeUpdatesEnabled:r,layer1GasFee:s}){const i=e.userFeeLevel,a=Object.values(P.GasFeeEstimateLevel).includes(i),{type:o}=t??{};if(r(e)&&a){if(e.txParams.type!==P.TransactionEnvelopeType.legacy){if(o===P.GasFeeEstimateType.FeeMarket){const n=t;e.txParams.maxFeePerGas=n[i].maxFeePerGas,e.txParams.maxPriorityFeePerGas=n[i].maxPriorityFeePerGas}if(o===P.GasFeeEstimateType.GasPrice){const n=t;e.txParams.maxFeePerGas=n.gasPrice,e.txParams.maxPriorityFeePerGas=n.gasPrice}if(o===P.GasFeeEstimateType.Legacy){const n=t[i];e.txParams.maxFeePerGas=n,e.txParams.maxPriorityFeePerGas=n}delete e.txParams.gasPrice}else{if(o===P.GasFeeEstimateType.FeeMarket){const n=t;e.txParams.gasPrice=n[i].maxFeePerGas}if(o===P.GasFeeEstimateType.GasPrice){const n=t;e.txParams.gasPrice=n.gasPrice}if(o===P.GasFeeEstimateType.Legacy){const n=t;e.txParams.gasPrice=n[i]}delete e.txParams.maxFeePerGas,delete e.txParams.maxPriorityFeePerGas}}t&&(e.gasFeeEstimates=t),n!==undefined&&(e.gasFeeEstimatesLoaded=n),s&&(e.layer1GasFee=s)}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/helpers/GasFeePoller.cjs"}],[2765,{"../logger.cjs":2774,events:4269},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i,a,o,c,u,l,d,f,h,p,m,g,y,b,w=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},v=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},S=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.IncomingTransactionHelper=void 0;const T=S(e("events")),E=e("../logger.cjs");n.IncomingTransactionHelper=class{constructor({getCache:e,getCurrentAccount:t,getLocalTransactions:n,includeTokenTransfers:g,isEnabled:y,queryEntireHistory:b,remoteTransactionSource:v,trimTransactions:S,updateCache:E,updateTransactions:j}){r.add(this),s.set(this,void 0),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),c.set(this,void 0),u.set(this,void 0),l.set(this,void 0),d.set(this,void 0),f.set(this,void 0),h.set(this,void 0),p.set(this,void 0),m.set(this,void 0),this.hub=new T.default,w(this,s,e,"f"),w(this,i,t,"f"),w(this,a,n,"f"),w(this,o,g,"f"),w(this,c,y??(()=>!0),"f"),w(this,u,!1,"f"),w(this,l,b,"f"),w(this,d,v,"f"),w(this,h,S,"f"),w(this,p,E,"f"),w(this,m,j,"f")}start(){v(this,u,"f")||v(this,r,"m",b).call(this)&&((0,E.incomingTransactionsLogger)("Starting polling"),w(this,f,setTimeout((()=>v(this,r,"m",g).call(this)),3e4),"f"),w(this,u,!0,"f"),(0,E.incomingTransactionsLogger)("Started polling"))}stop(){v(this,f,"f")&&clearTimeout(v(this,f,"f")),v(this,u,"f")&&(w(this,u,!1,"f"),(0,E.incomingTransactionsLogger)("Stopped polling"))}async update({isInterval:e}={}){if((0,E.incomingTransactionsLogger)("Checking for incoming transactions",{isInterval:Boolean(e)}),!v(this,r,"m",b).call(this))return;const t=v(this,i,"f").call(this),n=v(this,s,"f").call(this),c=v(this,o,"f")??!0,u=v(this,l,"f")??!0,f=v(this,m,"f")??!1;let g=[];try{g=await v(this,d,"f").fetchTransactions({address:t.address,cache:n,includeTokenTransfers:c,queryEntireHistory:u,updateCache:v(this,p,"f"),updateTransactions:f})}catch(e){return void(0,E.incomingTransactionsLogger)("Error while fetching remote transactions",e)}if(!g.length)return;v(this,r,"m",y).call(this,g),(0,E.incomingTransactionsLogger)("Found potential transactions",g.length,g);const w=v(this,a,"f").call(this),S=g.filter((e=>!w.some((t=>t.hash?.toLowerCase()===e.hash?.toLowerCase()&&t.txParams.from?.toLowerCase()===e.txParams.from?.toLowerCase()&&t.type===e.type))));if(!S.length)return void(0,E.incomingTransactionsLogger)("All transactions are already known");(0,E.incomingTransactionsLogger)("Found unique transactions",S.length,S);const T=v(this,h,"f").call(this,[...S,...w]),j=S.map((e=>e.id)),k=T.filter((e=>j.includes(e.id)));k.length?((0,E.incomingTransactionsLogger)("Adding new transactions",k.length,k),this.hub.emit("transactions",k)):(0,E.incomingTransactionsLogger)("All unique transactions truncated due to limit")}},s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,d=new WeakMap,f=new WeakMap,h=new WeakMap,p=new WeakMap,m=new WeakMap,r=new WeakSet,g=async function e(){try{await this.update({isInterval:!0})}catch(e){console.error("Error while checking incoming transactions",e)}v(this,u,"f")&&w(this,f,setTimeout((()=>v(this,r,"m",e).call(this)),3e4),"f")},y=function(e){e.sort(((e,t)=>e.time<t.time?-1:1))},b=function(){return v(this,c,"f").call(this)}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/helpers/IncomingTransactionHelper.cjs"}],[2766,{"../logger.cjs":2774,"@metamask/utils":2822,"async-mutex":3782,"eth-method-registry":4167,events:4269},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i,a,o,c,u=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},l=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.MethodDataHelper=void 0;const f=e("@metamask/utils"),h=e("async-mutex"),p=e("eth-method-registry"),m=d(e("events")),g=e("../logger.cjs"),y=(0,f.createModuleLogger)(g.projectLogger,"method-data");n.MethodDataHelper=class{constructor({getProvider:e,getState:t}){r.add(this),s.set(this,void 0),i.set(this,void 0),a.set(this,void 0),o.set(this,new h.Mutex),this.hub=new m.default,u(this,s,e,"f"),u(this,i,t,"f"),u(this,a,new Map,"f")}async lookup(e,t){y("lookup",e,t);const n=await l(this,o,"f").acquire();try{const n=l(this,i,"f").call(this)[e];if(n)return y("Cached",n),n;let o=l(this,a,"f").get(t);if(!o){const e=l(this,s,"f").call(this,t);o=new p.MethodRegistry({provider:e}),l(this,a,"f").set(t,o),y("Created registry",t)}const u=await l(this,r,"m",c).call(this,e,o);return y("Result",u),this.hub.emit("update",{fourBytePrefix:e,methodData:u}),u}finally{n()}}},s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,r=new WeakSet,c=async function(e,t){const n=await t.lookup(e);if(!n)return y("No method found",e),{registryMethod:"",parsedRegistryMethod:{name:undefined,args:undefined}};y("Parsing",n);return{registryMethod:n,parsedRegistryMethod:t.parse(n)}}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/helpers/MethodDataHelper.cjs"}],[2767,{"../logger.cjs":2774,"async-mutex":3782},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i,a,o,c,u,l,d,f,h,p,m=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},g=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.MultichainTrackingHelper=void 0;const y=e("async-mutex"),b=e("../logger.cjs"),w=(0,b.createModuleLogger)(b.projectLogger,"multichain-tracking");n.MultichainTrackingHelper=class{constructor({findNetworkClientIdByChainId:e,getNetworkClientById:t,getNetworkClientRegistry:n,removePendingTransactionTrackerListeners:y,createNonceTracker:b,createPendingTransactionTracker:v,onNetworkStateChange:S}){r.add(this),s.set(this,void 0),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),c.set(this,void 0),u.set(this,void 0),l.set(this,new Map),d.set(this,new Map),this.checkForPendingTransactionAndStartPolling=()=>{for(const[,e]of g(this,d,"f"))e.pendingTransactionTracker.startIfPendingTransactions()},f.set(this,(e=>{const t=Object.keys(e),n=Array.from(g(this,d,"f").keys()),s=n.filter((e=>!t.includes(e)));s.forEach((e=>{g(this,r,"m",h).call(this,e)}));const i=t.filter((e=>!n.includes(e)));i.forEach((e=>{g(this,r,"m",p).call(this,e)})),i.length&&w("Added trackers",i),s.length&&w("Removed trackers",s)})),m(this,s,e,"f"),m(this,i,t,"f"),m(this,a,n,"f"),m(this,o,y,"f"),m(this,c,b,"f"),m(this,u,v,"f"),S(((e,t)=>{const n=g(this,a,"f").call(this);t.forEach((({op:e,path:t})=>{if("remove"===e&&"networkConfigurations"===t[0]){const e=t[1];delete n[e]}})),g(this,f,"f").call(this,n)}))}initialize(){const e=g(this,a,"f").call(this);g(this,f,"f").call(this,e),w("Initialized")}has(e){return g(this,d,"f").has(e)}async acquireNonceLockForChainIdKey({chainId:e,key:t="global"}){let n=g(this,l,"f").get(e);n||(n=new Map,g(this,l,"f").set(e,n));let r=n.get(t);return r||(r=new y.Mutex,n.set(t,r)),await r.acquire()}async getNonceLock(e,t){const n=g(this,i,"f").call(this,t),r=await this.acquireNonceLockForChainIdKey({chainId:n.configuration.chainId,key:e}),s=g(this,d,"f").get(t)?.nonceTracker;if(!s)throw new Error(`Missing nonce tracker for network client ID - ${t}`);try{const t=await s.getNonceLock(e),n=()=>{t.releaseLock(),r?.()};return{...t,releaseLock:n}}catch(e){throw r?.(),e}}stopAllTracking(){for(const[e]of g(this,d,"f"))g(this,r,"m",h).call(this,e)}getNetworkClient({chainId:e,networkClientId:t}){if(!t&&!e)throw new Error("Cannot locate network client without networkClientId or chainId");let n,r=t;try{t&&(n=g(this,i,"f").call(this,t))}catch(n){if(w("No network client found with ID",t),!e)throw n}return!n&&e&&(r=g(this,s,"f").call(this,e),n=g(this,i,"f").call(this,r)),{...n,id:r}}},s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,d=new WeakMap,f=new WeakMap,r=new WeakSet,h=function(e){const t=g(this,d,"f").get(e);t&&(t.pendingTransactionTracker.stop(),g(this,o,"f").call(this,t.pendingTransactionTracker),g(this,d,"f").delete(e))},p=function(e){if(g(this,d,"f").get(e))return;const{provider:t,blockTracker:n,configuration:{chainId:r}}=g(this,i,"f").call(this,e),s=g(this,c,"f").call(this,{provider:t,blockTracker:n,chainId:r}),a=g(this,u,"f").call(this,{provider:t,blockTracker:n,chainId:r,networkClientId:e});g(this,d,"f").set(e,{nonceTracker:s,pendingTransactionTracker:a})}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/helpers/MultichainTrackingHelper.cjs"}],[2768,{"../logger.cjs":2774,"../types.cjs":2775,"./TransactionPoller.cjs":2770,"@metamask/controller-utils":1512,events:4269,lodash:4725},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i,a,o,c,u,l,d,f,h,p,m,g,y,b,w,v,S,T,E,j,k,x,_,I,P,A,C,O,B,R,N,F,M,L=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},D=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},H=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.PendingTransactionTracker=void 0;const U=e("@metamask/controller-utils"),G=H(e("events")),$=e("lodash"),q=e("./TransactionPoller.cjs"),z=e("../logger.cjs"),W=e("../types.cjs"),V=["replacement transaction underpriced","known transaction","gas price too low to replace","transaction with the same hash was already imported","gateway timeout","nonce too low"],K=(0,z.createModuleLogger)(z.projectLogger,"pending-transactions");n.PendingTransactionTracker=class{constructor({blockTracker:e,getChainId:t,getEthQuery:n,getGlobalLock:w,getNetworkClientId:v,getTransactions:S,hooks:T,isResubmitEnabled:E,messenger:j,publishTransaction:k}){r.add(this),s.set(this,void 0),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),c.set(this,void 0),u.set(this,void 0),l.set(this,void 0),d.set(this,void 0),f.set(this,void 0),h.set(this,void 0),p.set(this,void 0),m.set(this,void 0),g.set(this,void 0),this.startIfPendingTransactions=()=>{const e=D(this,r,"m",I).call(this);e.length?D(this,r,"m",y).call(this,e):this.stop()},this.hub=new G.default,L(this,s,new Map,"f"),L(this,i,t,"f"),L(this,a,n,"f"),L(this,o,v,"f"),L(this,c,S,"f"),L(this,u,E??(()=>!0),"f"),L(this,l,D(this,r,"m",b).bind(this),"f"),L(this,f,w,"f"),L(this,h,k,"f"),L(this,p,!1,"f"),L(this,m,new q.TransactionPoller({blockTracker:e,chainId:t(),messenger:j}),"f"),L(this,g,T?.beforeCheckPendingTransaction??(()=>Promise.resolve(!0)),"f"),L(this,d,(0,z.createModuleLogger)(K,`${t()}:${v()}`),"f")}async forceCheckTransaction(e){const t=await D(this,f,"f").call(this);try{await D(this,r,"m",j).call(this,e)}catch(e){D(this,d,"f").call(this,"Failed to check transaction",e)}finally{t()}}stop(){D(this,p,"f")&&(D(this,m,"f").stop(),L(this,p,!1,"f"),D(this,d,"f").call(this,"Stopped polling"))}},s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,d=new WeakMap,f=new WeakMap,h=new WeakMap,p=new WeakMap,m=new WeakMap,g=new WeakMap,r=new WeakSet,y=function(e){D(this,m,"f").setPendingTransactions(e),D(this,p,"f")||(D(this,m,"f").start(D(this,l,"f")),L(this,p,!0,"f"),D(this,d,"f").call(this,"Started polling"))},b=async function(e){const t=await D(this,f,"f").call(this);try{await D(this,r,"m",w).call(this)}catch(e){D(this,d,"f").call(this,"Failed to check transactions",e)}finally{t()}try{await D(this,r,"m",v).call(this,e)}catch(e){D(this,d,"f").call(this,"Failed to resubmit transactions",e)}},w=async function(){D(this,d,"f").call(this,"Checking transactions");const e=D(this,r,"m",I).call(this);e.length?(D(this,d,"f").call(this,"Found pending transactions to check",{count:e.length,ids:e.map((e=>e.id))}),await Promise.all(e.map((e=>D(this,r,"m",j).call(this,e))))):D(this,d,"f").call(this,"No pending transactions to check")},v=async function(e){if(!D(this,u,"f").call(this)||!D(this,p,"f"))return;D(this,d,"f").call(this,"Resubmitting transactions");const t=D(this,r,"m",I).call(this);if(t.length){D(this,d,"f").call(this,"Found pending transactions to resubmit",{count:t.length,ids:t.map((e=>e.id))});for(const n of t)try{await D(this,r,"m",T).call(this,n,e)}catch(e){const t=e.value?.message?.toLowerCase()||e.message?.toLowerCase()||String(e);if(D(this,r,"m",S).call(this,t)){D(this,d,"f").call(this,"Ignoring known transaction error",t);continue}D(this,r,"m",P).call(this,n,e.message,"There was an error when resubmitting this transaction.")}}else D(this,d,"f").call(this,"No pending transactions to resubmit")},S=function(e){return V.some((t=>e.includes(t)))},T=async function(e,t){if(!D(this,r,"m",E).call(this,e,t))return;if(!await D(this,g,"f").call(this,e))return;const n=D(this,a,"f").call(this,e.networkClientId);await D(this,h,"f").call(this,n,e);const s=(e.retryCount??0)+1;D(this,r,"m",O).call(this,(0,$.merge)({},e,{retryCount:s}),"PendingTransactionTracker:transaction-retry - Retry count increased")},E=function(e,t){const n=(0,$.cloneDeep)(e);n.firstRetryBlockNumber||(n.firstRetryBlockNumber=t,D(this,r,"m",O).call(this,n,"PendingTransactionTracker:#isResubmitDue - First retry block number set"));const{firstRetryBlockNumber:s}=n,i=Number.parseInt(t,16)-Number.parseInt(s,16),a=e.retryCount||0;return i>=Math.min(50,Math.pow(2,a))},j=async function(e){const{hash:t,id:n}=e;if(!t&&await D(this,g,"f").call(this,e)){const t=new Error("We had an error while submitting this transaction, please try again.");return t.name="NoTxHashError",void D(this,r,"m",A).call(this,e,t)}if(D(this,r,"m",_).call(this,e))return D(this,d,"f").call(this,"Nonce already taken",n),void D(this,r,"m",C).call(this,e);try{const n=await D(this,r,"m",B).call(this,t),s="0x1"===n?.status;if("0x0"===n?.status)return D(this,d,"f").call(this,"Transaction receipt has failed status"),void D(this,r,"m",A).call(this,e,new Error("Transaction dropped or replaced"));const{blockNumber:i,blockHash:a}=n||{};if(s&&i&&a)return void await D(this,r,"m",k).call(this,e,{...n,blockNumber:i,blockHash:a})}catch(t){return D(this,d,"f").call(this,"Failed to check transaction",n,t),void D(this,r,"m",P).call(this,e,t.message,"There was a problem loading this transaction.")}await D(this,r,"m",x).call(this,e)&&D(this,r,"m",C).call(this,e)},k=async function(e,t){const{id:n}=e,{blockHash:s}=t;D(this,d,"f").call(this,"Transaction confirmed",n);const{baseFeePerGas:i,timestamp:a}=await D(this,r,"m",R).call(this,s,!1),o=(0,$.cloneDeep)(e);o.baseFeePerGas=i,o.blockTimestamp=a,o.status=W.TransactionStatus.confirmed,o.txParams={...o.txParams,gasUsed:t.gasUsed},o.txReceipt=t,o.verifiedOnBlockchain=!0,D(this,r,"m",O).call(this,o,"PendingTransactionTracker:#onTransactionConfirmed - Transaction confirmed"),this.hub.emit("transaction-confirmed",o)},x=async function(e){const{hash:t,id:n,txParams:{nonce:i,from:a}}=e;if(!i||!t)return!1;const o=await D(this,r,"m",N).call(this,a),c=parseInt(o,16);if(parseInt(i,16)>=c)return!1;let u=D(this,s,"f").get(t);return u===undefined&&(u=0,D(this,s,"f").set(t,u)),u<3?(D(this,d,"f").call(this,"Incrementing dropped block count",{id:n,droppedBlockCount:u}),D(this,s,"f").set(t,u+1),!1):(D(this,d,"f").call(this,"Hit dropped block count",n),D(this,s,"f").delete(t),!0)},_=function(e){const{id:t,txParams:n}=e;return D(this,r,"m",F).call(this).some((e=>e.id!==t&&e.txParams.from===n.from&&e.status===W.TransactionStatus.confirmed&&e.txParams.nonce&&e.txParams.nonce===n.nonce&&e.type!==W.TransactionType.incoming))},I=function(){return D(this,r,"m",M).call(this).filter((e=>e.status===W.TransactionStatus.submitted&&!e.verifiedOnBlockchain&&!e.isUserOperation))},P=function(e,t,n){D(this,r,"m",O).call(this,{...e,warning:{error:t,message:n}},"PendingTransactionTracker:#warnTransaction - Warning added")},A=function(e,t){D(this,d,"f").call(this,"Transaction failed",e.id,t),this.hub.emit("transaction-failed",e,t)},C=function(e){D(this,d,"f").call(this,"Transaction dropped",e.id),this.hub.emit("transaction-dropped",e)},O=function(e,t){this.hub.emit("transaction-updated",e,t)},B=async function(e){return await(0,U.query)(D(this,a,"f").call(this),"getTransactionReceipt",[e])},R=async function(e,t){return await(0,U.query)(D(this,a,"f").call(this),"getBlockByHash",[e,t])},N=async function(e){return await(0,U.query)(D(this,a,"f").call(this),"getTransactionCount",[e])},F=function(){const e=D(this,i,"f").call(this);return D(this,c,"f").call(this).filter((t=>t.chainId===e))},M=function(){const e=D(this,o,"f").call(this);return D(this,c,"f").call(this).filter((t=>t.networkClientId===e))}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/helpers/PendingTransactionTracker.cjs"}],[2769,{"../logger.cjs":2774,"../types.cjs":2775,"../utils/utils.cjs":2793,"@metamask/utils":2822,"bn.js":3895,lodash:4725},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i,a,o,c,u,l,d,f=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},h=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.hasSimulationDataChanged=n.shouldResimulate=n.ResimulateHelper=n.RESIMULATE_INTERVAL_MS=n.BLOCK_TIME_ADDITIONAL_SECONDS=n.VALUE_COMPARISON_PERCENT_THRESHOLD=n.BLOCKAID_RESULT_TYPE_MALICIOUS=n.RESIMULATE_PARAMS=void 0;const p=e("@metamask/utils"),m=e("bn.js"),g=e("lodash"),y=e("../logger.cjs"),b=e("../types.cjs"),w=e("../utils/utils.cjs"),v=(0,y.createModuleLogger)(y.projectLogger,"resimulate-helper");n.RESIMULATE_PARAMS=["to","value","data"],n.BLOCKAID_RESULT_TYPE_MALICIOUS="Malicious",n.VALUE_COMPARISON_PERCENT_THRESHOLD=5,n.BLOCK_TIME_ADDITIONAL_SECONDS=60,n.RESIMULATE_INTERVAL_MS=3e3;function S(e,t){return!T(e?.difference??"0x0",t?.difference??"0x0",!1===e?.isDecrease,!1===t?.isDecrease)}function T(e,t,r,s){let i=new m.BN((0,p.remove0x)(e),"hex"),a=new m.BN((0,p.remove0x)(t),"hex");return r&&(i=i.neg()),s&&(a=a.neg()),(0,w.getPercentageChange)(i,a)<=n.VALUE_COMPARISON_PERCENT_THRESHOLD}n.ResimulateHelper=class{constructor({getTransactions:e,simulateTransaction:t,onTransactionsUpdate:n}){r.add(this),s.set(this,new Map),i.set(this,void 0),a.set(this,void 0),f(this,i,e,"f"),f(this,a,t,"f"),n(h(this,r,"m",o).bind(this))}},s=new WeakMap,i=new WeakMap,a=new WeakMap,r=new WeakSet,o=function(){const e=h(this,i,"f").call(this).filter((e=>e.status===b.TransactionStatus.unapproved)),t=new Set(e.map((e=>e.id)));new Set([...t,...h(this,s,"f").keys()]).forEach((t=>{const n=e.find((e=>e.id===t));n?.isActive?h(this,r,"m",c).call(this,n):h(this,r,"m",l).call(this,t)}))},c=function(e){const{id:t}=e;if(h(this,s,"f").has(t))return;const i=()=>{h(this,a,"f").call(this,e).catch((e=>{v("Error during transaction resimulation",e)})).finally((()=>{h(this,s,"f").has(t)&&h(this,r,"m",u).call(this,t,i)}))};h(this,r,"m",u).call(this,t,i),v(`Started resimulating transaction ${t} every ${n.RESIMULATE_INTERVAL_MS} milliseconds`)},u=function(e,t){const r=setTimeout(t,n.RESIMULATE_INTERVAL_MS);h(this,s,"f").set(e,r)},l=function(e){h(this,s,"f").has(e)&&(h(this,r,"m",d).call(this,e),v(`Stopped resimulating transaction ${e} every ${n.RESIMULATE_INTERVAL_MS} milliseconds`))},d=function(e){const t=h(this,s,"f").get(e);t&&(clearTimeout(t),h(this,s,"f").delete(e))},n.shouldResimulate=function(e,t){const{id:r}=t,s=function(e,t){const{id:r,txParams:s}=t,{txParams:i}=e;if(!i||(0,g.isEqual)(i,s))return!1;const a=Object.keys(s).filter((e=>s[e]!==i[e]));return v("Transaction parameters updated",{transactionId:r,updatedProperties:a,originalParams:i,newParams:s}),n.RESIMULATE_PARAMS.some((e=>a.includes(e)))}(e,t),i=function(e,t){const{securityAlertResponse:r}=e,{id:s,securityAlertResponse:i}=t;if((0,g.isEqual)(r,i))return!1;return v("Security alert updated",{transactionId:s,originalSecurityAlertResponse:r,newSecurityAlertResponse:i}),i?.result_type===n.BLOCKAID_RESULT_TYPE_MALICIOUS}(e,t),a=function(e,t){const{simulationData:n}=e,{simulationData:r,txParams:s}=t;if(!r||(0,g.isEqual)(n,r))return!1;return!T(s?.value??"0x0",r?.nativeBalanceChange?.difference??"0x0",!1,!1===r?.nativeBalanceChange?.isDecrease)}(e,t),o=s||i||a;let c;if(i||a){c=Math.floor(Date.now()/1e3)+n.BLOCK_TIME_ADDITIONAL_SECONDS}return o&&v("Transaction should be resimulated",{transactionId:r,blockTime:c,parametersUpdated:s,securityAlert:i,valueAndNativeBalanceMismatch:a}),{blockTime:c,resimulate:o}},n.hasSimulationDataChanged=function(e,t){if((0,g.isEqual)(e,t))return!1;if(S(e?.nativeBalanceChange,t?.nativeBalanceChange))return v("Simulation data native balance changed"),!0;if(e.tokenBalanceChanges.length!==t.tokenBalanceChanges.length)return!0;for(const n of e.tokenBalanceChanges){const e=t.tokenBalanceChanges.find((({address:e,id:t})=>e===n.address&&t===n.id));if(!e)return v("Missing new token balance",{address:n.address,id:n.id}),!0;if(S(n,e))return v("Simulation data token balance changed",{originalTokenBalanceChange:n,newTokenBalanceChange:e}),!0}return!1}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/helpers/ResimulateHelper.cjs"}],[2770,{"../logger.cjs":2774,"../utils/feature-flags.cjs":2779,"@metamask/utils":2822,lodash:4725},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i,a,o,c,u,l,d,f,h,p,m,g,y=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},b=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.TransactionPoller=void 0;const w=e("@metamask/utils"),v=e("lodash"),S=e("../logger.cjs"),T=e("../utils/feature-flags.cjs"),E=(0,w.createModuleLogger)(S.projectLogger,"transaction-poller");n.TransactionPoller=class{constructor({blockTracker:e,chainId:t,messenger:n}){r.add(this),s.set(this,0),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),c.set(this,void 0),u.set(this,void 0),l.set(this,void 0),d.set(this,!1),f.set(this,void 0),y(this,i,e,"f"),y(this,a,t,"f"),y(this,o,n,"f")}start(e){b(this,d,"f")||(y(this,u,e,"f"),y(this,d,!0,"f"),b(this,r,"m",h).call(this),E("Started"))}stop(){b(this,d,"f")&&(y(this,d,!1,"f"),y(this,u,undefined,"f"),y(this,s,0,"f"),y(this,l,undefined,"f"),b(this,r,"m",m).call(this),b(this,r,"m",g).call(this),E("Stopped"))}setPendingTransactions(e){const t=(b(this,l,"f")??[]).map((e=>e.id));y(this,l,e,"f");const n=e.map((e=>e.id)),i=!(0,v.isEqual)(t,n);b(this,d,"f")&&i&&(E("Detected new pending transactions",n),y(this,s,0,"f"),b(this,c,"f")&&(b(this,r,"m",g).call(this),b(this,r,"m",h).call(this)))}},s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,c=new WeakMap,u=new WeakMap,l=new WeakMap,d=new WeakMap,f=new WeakMap,r=new WeakSet,h=function e(){if(!b(this,d,"f"))return;const{countMax:t,intervalMs:n}=(0,T.getAcceleratedPollingParams)(b(this,a,"f"),b(this,o,"f"));if(b(this,s,"f")>=t)return y(this,c,(e=>b(this,r,"m",p).call(this,!1,e)),"f"),b(this,i,"f").on("latest",b(this,c,"f")),void E("Added block tracker listener");b(this,r,"m",m).call(this),y(this,f,setTimeout((async()=>{await b(this,r,"m",p).call(this,!0),b(this,r,"m",e).call(this)}),n),"f")},p=async function(e,t){e?E("Accelerated interval",b(this,s,"f")+1):E("Block tracker interval",t);const n=t??await b(this,i,"f").getLatestBlock();await(b(this,u,"f")?.call(this,n)),e&&b(this,d,"f")&&y(this,s,b(this,s,"f")+1,"f")},m=function(){b(this,f,"f")&&(clearTimeout(b(this,f,"f")),y(this,f,undefined,"f"))},g=function(){b(this,c,"f")&&(b(this,i,"f").removeListener("latest",b(this,c,"f")),y(this,c,undefined,"f"))}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/helpers/TransactionPoller.cjs"}],[2771,{"../logger.cjs":2774,"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i,a,o,c,u=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},l=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.CollectPublishHook=void 0;const d=e("@metamask/utils"),f=e("../logger.cjs"),h=(0,d.createModuleLogger)(f.projectLogger,"collect-publish-hook");n.CollectPublishHook=class{constructor(e){r.add(this),s.set(this,void 0),i.set(this,void 0),a.set(this,void 0),o.set(this,void 0),u(this,s,[],"f"),u(this,o,(0,d.createDeferredPromise)(),"f"),u(this,i,[],"f"),u(this,a,e,"f")}getHook(){return l(this,r,"m",c).bind(this)}ready(){return l(this,o,"f").promise}success(e){if(h("Success",{transactionHashes:e}),e.length!==l(this,a,"f"))throw new Error("Transaction hash count mismatch");for(let t=0;t<l(this,s,"f").length;t++){const n=l(this,s,"f")[t],r=e[t];n.resolve({transactionHash:r})}}error(e){h("Error",{error:e});for(const t of l(this,s,"f"))t.reject(e)}},s=new WeakMap,i=new WeakMap,a=new WeakMap,o=new WeakMap,r=new WeakSet,c=function(e,t){l(this,i,"f").push(t),h("Processing transaction",{transactionMeta:e,signedTx:t});const n=(0,d.createDeferredPromise)();return l(this,s,"f").push(n),l(this,i,"f").length===l(this,a,"f")&&(h("All transactions signed"),l(this,o,"f").resolve({signedTransactions:l(this,i,"f")})),n.promise}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/hooks/CollectPublishHook.cjs"}],[2772,{"../logger.cjs":2774,"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i,a,o=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n},c=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)};Object.defineProperty(n,"__esModule",{value:!0}),n.ExtraTransactionsPublishHook=void 0;const u=e("@metamask/utils"),l=e("../logger.cjs"),d=(0,u.createModuleLogger)(l.projectLogger,"extra-transactions-publish-hook");n.ExtraTransactionsPublishHook=class{constructor({addTransactionBatch:e,transactions:t}){r.add(this),s.set(this,void 0),i.set(this,void 0),o(this,s,e,"f"),o(this,i,t,"f")}getHook(){return c(this,r,"m",a).bind(this)}},s=new WeakMap,i=new WeakMap,r=new WeakSet,a=async function(e,t){d("Publishing transaction as batch",{transactionMeta:e,signedTx:t});const{id:n,networkClientId:r,txParams:a}=e,o=a.from,l=a.to,f=a.data,h=a.value,p=a.gas,m=a.maxFeePerGas,g=a.maxPriorityFeePerGas,y=t,b=(0,u.createDeferredPromise)(),w=[{existingTransaction:{id:n,onPublish:({transactionHash:e})=>{b.resolve({transactionHash:e})},signedTransaction:y},params:{data:f,gas:p,maxFeePerGas:m,maxPriorityFeePerGas:g,to:l,value:h}},...c(this,i,"f").map((e=>({params:e})))];return d("Adding transaction batch",{from:o,networkClientId:r,transactions:w}),await c(this,s,"f").call(this,{from:o,networkClientId:r,transactions:w,useHook:!0}),b.promise}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/hooks/ExtraTransactionsPublishHook.cjs"}],[2773,{"./TransactionController.cjs":2752,"./constants.cjs":2754,"./helpers/AccountsApiRemoteTransactionSource.cjs":2763,"./types.cjs":2775,"./utils/gas-flow.cjs":2781,"./utils/history.cjs":2783,"./utils/prepare.cjs":2786,"./utils/transaction-type.cjs":2792,"./utils/utils.cjs":2793},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.HARDFORK=n.INCOMING_TRANSACTIONS_SUPPORTED_CHAIN_IDS=n.CHAIN_IDS=n.normalizeTransactionParams=n.isEIP1559Transaction=n.mergeGasFeeEstimates=n.determineTransactionType=n.MAX_TRANSACTION_HISTORY_LENGTH=n.DISPLAYED_TRANSACTION_HISTORY_PATHS=n.WalletDevice=n.UserFeeLevel=n.TransactionType=n.TransactionStatus=n.TransactionEnvelopeType=n.SimulationTokenStandard=n.SimulationErrorCode=n.GasFeeEstimateType=n.GasFeeEstimateLevel=n.TransactionController=n.SPEED_UP_RATE=n.CANCEL_RATE=void 0;var r=e("./TransactionController.cjs");Object.defineProperty(n,"CANCEL_RATE",{enumerable:!0,get:function(){return r.CANCEL_RATE}}),Object.defineProperty(n,"SPEED_UP_RATE",{enumerable:!0,get:function(){return r.SPEED_UP_RATE}}),Object.defineProperty(n,"TransactionController",{enumerable:!0,get:function(){return r.TransactionController}});var s=e("./types.cjs");Object.defineProperty(n,"GasFeeEstimateLevel",{enumerable:!0,get:function(){return s.GasFeeEstimateLevel}}),Object.defineProperty(n,"GasFeeEstimateType",{enumerable:!0,get:function(){return s.GasFeeEstimateType}}),Object.defineProperty(n,"SimulationErrorCode",{enumerable:!0,get:function(){return s.SimulationErrorCode}}),Object.defineProperty(n,"SimulationTokenStandard",{enumerable:!0,get:function(){return s.SimulationTokenStandard}}),Object.defineProperty(n,"TransactionEnvelopeType",{enumerable:!0,get:function(){return s.TransactionEnvelopeType}}),Object.defineProperty(n,"TransactionStatus",{enumerable:!0,get:function(){return s.TransactionStatus}}),Object.defineProperty(n,"TransactionType",{enumerable:!0,get:function(){return s.TransactionType}}),Object.defineProperty(n,"UserFeeLevel",{enumerable:!0,get:function(){return s.UserFeeLevel}}),Object.defineProperty(n,"WalletDevice",{enumerable:!0,get:function(){return s.WalletDevice}});var i=e("./utils/history.cjs");Object.defineProperty(n,"DISPLAYED_TRANSACTION_HISTORY_PATHS",{enumerable:!0,get:function(){return i.DISPLAYED_TRANSACTION_HISTORY_PATHS}}),Object.defineProperty(n,"MAX_TRANSACTION_HISTORY_LENGTH",{enumerable:!0,get:function(){return i.MAX_TRANSACTION_HISTORY_LENGTH}});var a=e("./utils/transaction-type.cjs");Object.defineProperty(n,"determineTransactionType",{enumerable:!0,get:function(){return a.determineTransactionType}});var o=e("./utils/gas-flow.cjs");Object.defineProperty(n,"mergeGasFeeEstimates",{enumerable:!0,get:function(){return o.mergeGasFeeEstimates}});var c=e("./utils/utils.cjs");Object.defineProperty(n,"isEIP1559Transaction",{enumerable:!0,get:function(){return c.isEIP1559Transaction}}),Object.defineProperty(n,"normalizeTransactionParams",{enumerable:!0,get:function(){return c.normalizeTransactionParams}});var u=e("./constants.cjs");Object.defineProperty(n,"CHAIN_IDS",{enumerable:!0,get:function(){return u.CHAIN_IDS}});var l=e("./helpers/AccountsApiRemoteTransactionSource.cjs");Object.defineProperty(n,"INCOMING_TRANSACTIONS_SUPPORTED_CHAIN_IDS",{enumerable:!0,get:function(){return l.SUPPORTED_CHAIN_IDS}});var d=e("./utils/prepare.cjs");Object.defineProperty(n,"HARDFORK",{enumerable:!0,get:function(){return d.HARDFORK}})}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/index.cjs"}],[2774,{"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createModuleLogger=n.incomingTransactionsLogger=n.projectLogger=void 0;const r=e("@metamask/utils");Object.defineProperty(n,"createModuleLogger",{enumerable:!0,get:function(){return r.createModuleLogger}}),n.projectLogger=(0,r.createProjectLogger)("transaction-controller"),n.incomingTransactionsLogger=(0,r.createModuleLogger)(n.projectLogger,"incoming-transactions")}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/logger.cjs"}],[2775,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i,a,o,c,u,l,d;Object.defineProperty(n,"__esModule",{value:!0}),n.SimulationErrorCode=n.SimulationTokenStandard=n.GasFeeEstimateType=n.GasFeeEstimateLevel=n.UserFeeLevel=n.TransactionEnvelopeType=n.TransactionType=n.WalletDevice=n.TransactionStatus=void 0,function(e){e.unapproved="unapproved",e.approved="approved",e.signed="signed",e.submitted="submitted",e.confirmed="confirmed",e.failed="failed",e.dropped="dropped",e.rejected="rejected",e.cancelled="cancelled"}(r||(n.TransactionStatus=r={})),function(e){e.MM_MOBILE="metamask_mobile",e.MM_EXTENSION="metamask_extension",e.OTHER="other_device"}(s||(n.WalletDevice=s={})),function(e){e.batch="batch",e.bridge="bridge",e.bridgeApproval="bridgeApproval",e.cancel="cancel",e.contractInteraction="contractInteraction",e.deployContract="contractDeployment",e.ethDecrypt="eth_decrypt",e.ethGetEncryptionPublicKey="eth_getEncryptionPublicKey",e.gasPayment="gas_payment",e.incoming="incoming",e.personalSign="personal_sign",e.retry="retry",e.revokeDelegation="revokeDelegation",e.simpleSend="simpleSend",e.signTypedData="eth_signTypedData",e.smart="smart",e.stakingClaim="stakingClaim",e.stakingDeposit="stakingDeposit",e.stakingUnstake="stakingUnstake",e.swap="swap",e.swapAndSend="swapAndSend",e.swapApproval="swapApproval",e.tokenMethodApprove="approve",e.tokenMethodSafeTransferFrom="safetransferfrom",e.tokenMethodTransfer="transfer",e.tokenMethodTransferFrom="transferfrom",e.tokenMethodSetApprovalForAll="setapprovalforall",e.tokenMethodIncreaseAllowance="increaseAllowance"}(i||(n.TransactionType=i={})),function(e){e.legacy="0x0",e.accessList="0x1",e.feeMarket="0x2",e.setCode="0x4"}(a||(n.TransactionEnvelopeType=a={})),function(e){e.CUSTOM="custom",e.DAPP_SUGGESTED="dappSuggested",e.MEDIUM="medium"}(o||(n.UserFeeLevel=o={})),function(e){e.Low="low",e.Medium="medium",e.High="high"}(c||(n.GasFeeEstimateLevel=c={})),function(e){e.FeeMarket="fee-market",e.Legacy="legacy",e.GasPrice="eth_gasPrice"}(u||(n.GasFeeEstimateType=u={})),function(e){e.erc20="erc20",e.erc721="erc721",e.erc1155="erc1155"}(l||(n.SimulationTokenStandard=l={})),function(e){e.ChainNotSupported="chain-not-supported",e.Disabled="disabled",e.InvalidResponse="invalid-response",e.Reverted="reverted"}(d||(n.SimulationErrorCode=d={}))}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/types.cjs"}],[2776,{"../hooks/CollectPublishHook.cjs":2771,"../index.cjs":2773,"../logger.cjs":2774,"../types.cjs":2775,"./eip7702.cjs":2777,"./feature-flags.cjs":2779,"./validation.cjs":2794,"@metamask/rpc-errors":2415,"@metamask/utils":2822,uuid:5533},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isAtomicBatchSupported=n.addTransactionBatch=void 0;const r=e("@metamask/rpc-errors"),s=e("@metamask/utils"),i=e("uuid"),a=e("./eip7702.cjs"),o=e("./feature-flags.cjs"),c=e("./validation.cjs"),u=e("../index.cjs"),l=e("../hooks/CollectPublishHook.cjs"),d=e("../logger.cjs"),f=e("../types.cjs"),h=(0,s.createModuleLogger)(d.projectLogger,"batch");function p(){const e=(0,i.v4)(),t=new Uint8Array((0,i.parse)(e));return(0,s.bytesToHex)(t)}async function m(e,t,n,r){const{existingTransaction:s,params:i}=t,{addTransaction:a,getTransaction:o,request:c,updateTransaction:u}=r,{from:l,networkClientId:d}=c;if(s){const{id:t,onPublish:r,signedTransaction:a}=s,c=o(t);return u({transactionId:t},(t=>{t.batchId=e})),n(c,a).then(r).catch((()=>{})),h("Processed existing transaction with hook",{id:t,params:i}),{id:t,params:i}}const{transactionMeta:f}=await a({...i,from:l},{batchId:e,disableGasBuffer:!0,networkClientId:d,publishHook:n,requireApproval:!1}),{id:p,txParams:m}=f,g={data:m.data,gas:m.gas,maxFeePerGas:m.maxFeePerGas,maxPriorityFeePerGas:m.maxPriorityFeePerGas,to:m.to,value:m.value};return h("Processed new transaction with hook",{id:p,params:g}),{id:p,params:g}}n.addTransactionBatch=async function(e){const{addTransaction:t,getChainId:n,getInternalAccounts:s,messenger:i,publicKeyEIP7702:d,request:g}=e,y=(0,o.getBatchSizeLimit)(i);(0,c.validateBatchRequest)({internalAccounts:s(),request:g,sizeLimit:y});const{batchId:b,from:w,networkClientId:v,requireApproval:S,securityAlertId:T,transactions:E,useHook:j,validateSecurity:k,origin:x}=g;if(h("Adding",g),j)return await async function(e){const{publishBatchHook:t,request:n}=e,{from:r,networkClientId:s,transactions:i}=n;if(h("Adding transaction batch using hook",n),!t)throw h("No publish batch hook provided"),new Error("No publish batch hook provided");const a=p(),o=i.length,c=new l.CollectPublishHook(o),u=c.getHook(),d=[];try{for(const t of i){const n=await m(a,t,u,e);d.push(n)}const{signedTransactions:n}=await c.ready(),o=d.map(((e,t)=>({...e,signedTx:n[t]})));h("Calling publish batch hook",{from:r,networkClientId:s,transactions:o});const l=await t({from:r,networkClientId:s,transactions:o});if(h("Publish batch hook result",l),!l)throw new Error("Publish batch hook did not return a result");const f=l.results.map((({transactionHash:e})=>e));return c.success(f),h("Completed batch transaction with hook",f),{batchId:a}}catch(e){throw h("Publish batch hook failed",e),c.error(e),e}}(e);const _=n(v),I=e.getEthQuery(v);if(!(0,a.doesChainSupportEIP7702)(_,i))throw h("Chain does not support EIP-7702",_),r.rpcErrors.internal("Chain does not support EIP-7702");if(!d)throw r.rpcErrors.internal("EIP-7702 public key not specified");const{delegationAddress:P,isSupported:A}=await(0,a.isAccountUpgradedToEIP7702)(w,_,d,i,I);if(h("Account",{delegationAddress:P,isSupported:A}),!A&&P)throw h("Account upgraded to unsupported contract",w,P),r.rpcErrors.internal("Account upgraded to unsupported contract");const C=await Promise.all(E.map((e=>async function(e,t,n){const{from:r}=e,{params:s}=t,{type:i}=await(0,u.determineTransactionType)({from:r,...s},n);return{...s,type:i}}(g,e,I)))),O={from:w,...(0,a.generateEIP7702BatchTransaction)(w,C)};if(!A){const e=(0,o.getEIP7702UpgradeContractAddress)(_,i,d);if(!e)throw r.rpcErrors.internal("Upgrade contract address not found");O.type=f.TransactionEnvelopeType.setCode,O.authorizationList=[{address:e}]}if(k){const e={method:"eth_sendTransaction",params:[{...O,authorizationList:undefined,type:f.TransactionEnvelopeType.feeMarket}],delegationMock:O.authorizationList?.[0]?.address};h("Security request",e),k(e,_).catch((e=>{h("Security validation failed",e)}))}h("Adding batch transaction",O,v);const B=b??p(),R=T?{securityAlertId:T}:undefined,{result:N}=await t(O,{batchId:B,nestedTransactions:C,networkClientId:v,requireApproval:S,securityAlertResponse:R,type:f.TransactionType.batch,origin:x});return await N,{batchId:B}},n.isAtomicBatchSupported=async function(e){const{address:t,chainIds:n,getEthQuery:s,messenger:i,publicKeyEIP7702:c}=e;if(!c)throw r.rpcErrors.internal("EIP-7702 public key not specified");const u=(0,o.getEIP7702SupportedChains)(i),l=[];for(const e of u){if(n&&!n.includes(e))continue;const r=s(e),{isSupported:u,delegationAddress:d}=await(0,a.isAccountUpgradedToEIP7702)(t,e,c,i,r),f=(0,o.getEIP7702UpgradeContractAddress)(e,i,c);l.push({chainId:e,delegationAddress:d,isSupported:u,upgradeContractAddress:f})}return h("Atomic batch supported results",l),l}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/batch.cjs"}],[2777,{"../constants.cjs":2754,"../logger.cjs":2774,"./feature-flags.cjs":2779,"@ethersproject/abi":503,"@ethersproject/contracts":526,"@metamask/controller-utils":1512,"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.signAuthorizationList=n.generateEIP7702BatchTransaction=n.isAccountUpgradedToEIP7702=n.getDelegationAddress=n.doesChainSupportEIP7702=n.CALLS_SIGNATURE=n.BATCH_FUNCTION_NAME=n.DELEGATION_PREFIX=void 0;const r=e("@ethersproject/abi"),s=e("@ethersproject/contracts"),i=e("@metamask/controller-utils"),a=e("@metamask/utils"),o=e("./feature-flags.cjs"),c=e("../constants.cjs"),u=e("../logger.cjs");n.DELEGATION_PREFIX="0xef0100",n.BATCH_FUNCTION_NAME="execute",n.CALLS_SIGNATURE="(address,uint256,bytes)[]";const l=["gas","maxFeePerGas","maxPriorityFeePerGas"],d=(0,a.createModuleLogger)(u.projectLogger,"eip-7702");async function f(e,t){const r=await(0,i.query)(t,"eth_getCode",[e]),s=(0,a.add0x)(r?.toLowerCase?.()??"");return 48===r?.length&&s.startsWith(n.DELEGATION_PREFIX)?(0,a.add0x)(s.slice(n.DELEGATION_PREFIX.length)):undefined}async function h(e,t,n,r){const s=function(e,t,n){const{chainId:r,nonce:s}=e,{txParams:a,chainId:o}=t,{nonce:c}=a,u=r??o;let l=s;l===undefined&&(l=(0,i.toHex)(parseInt(c,16)+1+n));const f={...e,chainId:u,nonce:l};return d("Prepared authorization",f),f}(e,t,r),{txParams:a}=t,{from:o}=a,{address:c,chainId:u,nonce:l}=s,f=parseInt(u,16),h=parseInt(l,16),p=await n.call("KeyringController:signEip7702Authorization",{chainId:f,contractAddress:c,from:o,nonce:h}),m={address:c,chainId:u,nonce:0===h?"0x":l,r:p.slice(0,66),s:`0x${p.slice(66,130)}`,yParity:parseInt(p.slice(130,132),16)-27==0?"0x":"0x1"};return d("Signed authorization",m),m}n.doesChainSupportEIP7702=function(e,t){return(0,o.getEIP7702SupportedChains)(t).some((t=>t.toLowerCase()===e.toLowerCase()))},n.getDelegationAddress=f,n.isAccountUpgradedToEIP7702=async function(e,t,n,r,s){const i=(0,o.getEIP7702ContractAddresses)(t,r,n),a=await f(e,s),c=Boolean(a&&i.some((e=>e.toLowerCase()===a.toLowerCase())));return{delegationAddress:a,isSupported:c}},n.generateEIP7702BatchTransaction=function(e,t){const i=s.Contract.getInterface(c.ABI_IERC7821),a=t.map((e=>{const{data:t,to:n,value:r}=e,s=l.filter((t=>e[t]!==undefined));if(s.length){const t=s.map((t=>`${t}: ${e[t]}`)).join(", ");throw new Error(`EIP-7702 batch transactions do not support gas parameters per call - ${t}`)}return[n??"0x0000000000000000000000000000000000000000",r??"0x0",t??"0x"]})),o="0x01".padEnd(66,"0"),u=r.defaultAbiCoder.encode([n.CALLS_SIGNATURE],[a]),f=i.encodeFunctionData(n.BATCH_FUNCTION_NAME,[o,u]);return d("Transaction data",f),{data:f,to:e}},n.signAuthorizationList=async function({authorizationList:e,messenger:t,transactionMeta:n}){if(!e)return undefined;const r=[];let s=0;for(const i of e){const e=await h(i,n,t,s);r.push(e),s+=1}return r}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/eip7702.cjs"}],[2778,{"../types.cjs":2775,"@metamask/rpc-errors":2415},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateConfirmedExternalTransaction=void 0;const r=e("@metamask/rpc-errors"),s=e("../types.cjs");n.validateConfirmedExternalTransaction=function(e,t,n){if(!e||!e.txParams)throw r.rpcErrors.invalidParams('"transactionMeta" or "transactionMeta.txParams" is missing');if(e.status!==s.TransactionStatus.confirmed)throw r.rpcErrors.invalidParams('External transaction status should be "confirmed"');const i=e.txParams.nonce;if(n&&n.length>0){if(n.find((e=>e.txParams?.nonce===i)))throw r.rpcErrors.invalidParams("External transaction nonce should not be in pending txs")}if(t&&t.length>0){if(t.find((e=>e.txParams?.nonce===i)))throw r.rpcErrors.invalidParams("External transaction nonce should not be in confirmed txs")}}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/external-transactions.cjs"}],[2779,{"../logger.cjs":2774,"./signature.cjs":2788,"./utils.cjs":2793,"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getGasEstimateFallback=n.getGasFeeRandomisation=n.getAcceleratedPollingParams=n.getBatchSizeLimit=n.getEIP7702UpgradeContractAddress=n.getEIP7702ContractAddresses=n.getEIP7702SupportedChains=n.FEATURE_FLAG_EIP_7702=n.FEATURE_FLAG_TRANSACTIONS=void 0;const r=e("@metamask/utils"),s=e("./signature.cjs"),i=e("./utils.cjs"),a=e("../logger.cjs");n.FEATURE_FLAG_TRANSACTIONS="confirmations_transactions",n.FEATURE_FLAG_EIP_7702="confirmations_eip_7702";const o=(0,r.createModuleLogger)(a.projectLogger,"feature-flags");function c(e,t,r){const a=u(t);return(a?.[n.FEATURE_FLAG_EIP_7702]?.contracts?.[e.toLowerCase()]??[]).filter((t=>(0,s.isValidSignature)([t.address,(0,i.padHexToEvenLength)(e)],t.signature,r))).map((e=>e.address))}function u(e){const t=e.call("RemoteFeatureFlagController:getState").remoteFeatureFlags;return o("Retrieved feature flags",t),t}n.getEIP7702SupportedChains=function(e){const t=u(e);return t?.[n.FEATURE_FLAG_EIP_7702]?.supportedChains??[]},n.getEIP7702ContractAddresses=c,n.getEIP7702UpgradeContractAddress=function(e,t,n){return c(e,t,n)?.[0]},n.getBatchSizeLimit=function(e){const t=u(e);return t?.[n.FEATURE_FLAG_TRANSACTIONS]?.batchSizeLimit??10},n.getAcceleratedPollingParams=function(e,t){const r=u(t),s=r?.[n.FEATURE_FLAG_TRANSACTIONS]?.acceleratedPolling;return{countMax:s?.perChainConfig?.[e]?.countMax||s?.defaultCountMax||10,intervalMs:s?.perChainConfig?.[e]?.intervalMs||s?.defaultIntervalMs||3e3}},n.getGasFeeRandomisation=function(e){const t=u(e),r=t?.[n.FEATURE_FLAG_TRANSACTIONS]?.gasFeeRandomisation||{};return{randomisedGasFeeDigits:r.randomisedGasFeeDigits||{},preservedNumberOfDigits:r.preservedNumberOfDigits}},n.getGasEstimateFallback=function(e,t){const r=u(t),s=r?.[n.FEATURE_FLAG_TRANSACTIONS]?.gasEstimateFallback,i=s?.perChainConfig?.[e],a=i?.percentage??s?.default?.percentage??35;return{fixed:i?.fixed??s?.default?.fixed,percentage:a}}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/feature-flags.cjs"}],[2780,{"../logger.cjs":2774,"../types.cjs":2775,"./gas-flow.cjs":2781,"./swaps.cjs":2791,"@metamask/controller-utils":1512,"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.gweiDecimalToWeiDecimal=n.gweiDecimalToWeiHex=n.updateGasFees=void 0;const r=e("@metamask/controller-utils"),s=e("@metamask/utils"),i=e("./gas-flow.cjs"),a=e("./swaps.cjs"),o=e("../logger.cjs"),c=e("../types.cjs"),u=(0,s.createModuleLogger)(o.projectLogger,"gas-fees");function l(e){return(0,r.toHex)((0,r.gweiDecToWEIBN)(e))}n.updateGasFees=async function(e){const{txMeta:t}=e,n={...t.txParams},o=a.SWAP_TRANSACTION_TYPES.includes(t.type)?undefined:e.getSavedGasFees(t.chainId),d=await async function(e){const{eip1559:t,ethQuery:n,gasFeeFlows:a,getGasFeeEstimates:o,messenger:l,txMeta:d}=e,{networkClientId:f}=d;if(!t&&d.txParams.gasPrice||t&&d.txParams.maxFeePerGas&&d.txParams.maxPriorityFeePerGas)return{};const h=(0,i.getGasFeeFlow)(d,a,l);try{const e=await o({networkClientId:f}),t=await h.getGasFees({ethQuery:n,gasFeeControllerData:e,messenger:l,transactionMeta:d}),r=t.estimates?.type;switch(r){case c.GasFeeEstimateType.FeeMarket:return t.estimates.medium;case c.GasFeeEstimateType.Legacy:return{gasPrice:t.estimates.medium};case c.GasFeeEstimateType.GasPrice:return{gasPrice:t.estimates.gasPrice};default:throw new Error(`Unsupported gas fee estimate type returned from flow: ${r}`)}}catch(e){u("Failed to get suggested gas fees",e)}const p=await(0,r.query)(n,"gasPrice");return{gasPrice:p?(0,s.add0x)(p.toString(16)):undefined}}(e);u("Suggested gas fees",d);const f={...e,initialParams:n,savedGasFees:o,suggestedGasFees:d};t.txParams.maxFeePerGas=function(e){const{savedGasFees:t,eip1559:n,initialParams:r,suggestedGasFees:s}=e;if(!n)return undefined;if(t){const e=l(t.maxBaseFee);return u("Using maxFeePerGas from savedGasFees",e),e}if(r.maxFeePerGas)return u("Using maxFeePerGas from request",r.maxFeePerGas),r.maxFeePerGas;if(r.gasPrice&&!r.maxPriorityFeePerGas)return u("Setting maxFeePerGas to gasPrice from request",r.gasPrice),r.gasPrice;if(s.maxFeePerGas)return u("Using suggested maxFeePerGas",s.maxFeePerGas),s.maxFeePerGas;if(s.gasPrice)return u("Setting maxFeePerGas to suggested gasPrice",s.gasPrice),s.gasPrice;return u("maxFeePerGas not set"),undefined}(f),t.txParams.maxPriorityFeePerGas=function(e){const{eip1559:t,initialParams:n,savedGasFees:r,suggestedGasFees:s,txMeta:i}=e;if(!t)return undefined;if(r){const e=l(r.priorityFee);return u("Using maxPriorityFeePerGas from savedGasFees.priorityFee",e),e}if(n.maxPriorityFeePerGas)return u("Using maxPriorityFeePerGas from request",n.maxPriorityFeePerGas),n.maxPriorityFeePerGas;if(n.gasPrice&&!n.maxFeePerGas)return u("Setting maxPriorityFeePerGas to gasPrice from request",n.gasPrice),n.gasPrice;if(s.maxPriorityFeePerGas)return u("Using suggested maxPriorityFeePerGas",s.maxPriorityFeePerGas),s.maxPriorityFeePerGas;if(i.txParams.maxFeePerGas)return u("Setting maxPriorityFeePerGas to maxFeePerGas",i.txParams.maxFeePerGas),i.txParams.maxFeePerGas;return u("maxPriorityFeePerGas not set"),undefined}(f),t.txParams.gasPrice=function(e){const{eip1559:t,initialParams:n,suggestedGasFees:r}=e;if(t)return undefined;if(n.gasPrice)return u("Using gasPrice from request",n.gasPrice),n.gasPrice;if(r.maxFeePerGas)return u("Using suggested maxFeePerGas",r.maxFeePerGas),r.maxFeePerGas;if(r.gasPrice)return u("Using suggested gasPrice",r.gasPrice),r.gasPrice;return u("gasPrice not set"),undefined}(f),t.userFeeLevel=function(e){const{eip1559:t,initialParams:n,savedGasFees:s,suggestedGasFees:i,txMeta:a}=e;if(!t)return undefined;if(s)return c.UserFeeLevel.CUSTOM;if(!n.maxFeePerGas&&!n.maxPriorityFeePerGas&&n.gasPrice)return a.origin===r.ORIGIN_METAMASK?c.UserFeeLevel.CUSTOM:c.UserFeeLevel.DAPP_SUGGESTED;if(!n.maxFeePerGas&&!n.maxPriorityFeePerGas&&i.maxFeePerGas&&i.maxPriorityFeePerGas)return c.UserFeeLevel.MEDIUM;if(a.origin===r.ORIGIN_METAMASK)return c.UserFeeLevel.MEDIUM;return c.UserFeeLevel.DAPP_SUGGESTED}(f),u("Updated gas fee properties",{maxFeePerGas:t.txParams.maxFeePerGas,maxPriorityFeePerGas:t.txParams.maxPriorityFeePerGas,gasPrice:t.txParams.gasPrice}),(t.txParams.maxFeePerGas||t.txParams.maxPriorityFeePerGas)&&delete t.txParams.gasPrice,t.txParams.gasPrice&&(delete t.txParams.maxFeePerGas,delete t.txParams.maxPriorityFeePerGas),function(e){e.defaultGasEstimates||(e.defaultGasEstimates={});e.defaultGasEstimates.maxFeePerGas=e.txParams.maxFeePerGas,e.defaultGasEstimates.maxPriorityFeePerGas=e.txParams.maxPriorityFeePerGas,e.defaultGasEstimates.gasPrice=e.txParams.gasPrice,e.defaultGasEstimates.estimateType=e.userFeeLevel}(t)},n.gweiDecimalToWeiHex=l,n.gweiDecimalToWeiDecimal=function(e){const t="string"==typeof e?e:String(e);return(1e9*Number(t)).toString()}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/gas-fees.cjs"}],[2781,{"../types.cjs":2775,"@metamask/controller-utils":1512},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.mergeGasFeeEstimates=n.getGasFeeFlow=void 0;const r=e("@metamask/controller-utils"),s=e("../types.cjs");function i(e,t){return(0,r.weiHexToGweiDec)(e[t])}n.getGasFeeFlow=function(e,t,n){return t.find((t=>t.matchesTransaction({transactionMeta:e,messenger:n})))},n.mergeGasFeeEstimates=function({gasFeeControllerEstimates:e,transactionGasFeeEstimates:t}){const n=t.type;return n===s.GasFeeEstimateType.FeeMarket?Object.values(s.GasFeeEstimateLevel).reduce(((n,s)=>{return{...n,[s]:(i=e?.[s],a=t[s],{...i,suggestedMaxFeePerGas:(0,r.weiHexToGweiDec)(a.maxFeePerGas),suggestedMaxPriorityFeePerGas:(0,r.weiHexToGweiDec)(a.maxPriorityFeePerGas)})};var i,a}),{...e}):n===s.GasFeeEstimateType.Legacy?Object.values(s.GasFeeEstimateLevel).reduce(((e,n)=>({...e,[n]:i(t,n)})),{}):n===s.GasFeeEstimateType.GasPrice?{gasPrice:(a=t,(0,r.weiHexToGweiDec)(a.gasPrice))}:e;var a}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/gas-flow.cjs"}],[2782,{"../constants.cjs":2754,"../logger.cjs":2774,"../types.cjs":2775,"./eip7702.cjs":2777,"./feature-flags.cjs":2779,"./simulation-api.cjs":2789,"@metamask/controller-utils":1512,"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.addGasBuffer=n.estimateGas=n.updateGas=n.DUMMY_AUTHORIZATION_SIGNATURE=n.INTRINSIC_GAS=n.MAX_GAS_BLOCK_PERCENT=n.DEFAULT_GAS_MULTIPLIER=n.FIXED_GAS=n.log=void 0;const r=e("@metamask/controller-utils"),s=e("@metamask/utils"),i=e("./eip7702.cjs"),a=e("./feature-flags.cjs"),o=e("./simulation-api.cjs"),c=e("../constants.cjs"),u=e("../logger.cjs"),l=e("../types.cjs");async function d({chainId:e,ethQuery:t,isSimulationEnabled:c,messenger:u,txParams:d}){const f={...d},{authorizationList:h,data:p,from:m,value:g,to:y}=f,{gasLimit:b,number:w}=await async function(e){return await(0,r.query)(e,"getBlockByNumber",["latest",!1])}(t),v=(0,r.hexToBN)(b),{percentage:S,fixed:T}=(0,a.getGasEstimateFallback)(e,u),E=T?(0,r.toHex)(T):(0,r.BNToHex)((0,r.fractionBN)(v,S,100));(0,n.log)("Estimation fallback values",E),f.data=p?(0,s.add0x)(p):p,f.value=g||"0x0",f.authorizationList=function(e,t){return e?.map((e=>({...e,chainId:e.chainId??t,nonce:e.nonce??"0x1",r:e.r??n.DUMMY_AUTHORIZATION_SIGNATURE,s:e.s??n.DUMMY_AUTHORIZATION_SIGNATURE,yParity:e.yParity??"0x1"})))}(f.authorizationList,e),delete f.gasPrice,delete f.maxFeePerGas,delete f.maxPriorityFeePerGas;let j,k=E;const x=d.type===l.TransactionEnvelopeType.setCode&&h?.length&&p&&"0x"!==p&&m?.toLowerCase()===y?.toLowerCase();try{k=c&&x?await async function(e,t,a){const c=await(0,r.query)(t,"estimateGas",[{...e,data:"0x"}]);(0,n.log)("Upgrade only gas",c);const u=e.authorizationList?.[0].address,l=await async function({chainId:e,delegationAddress:t,transaction:n}){const r=await(0,o.simulateTransactions)(e,{transactions:[{to:n.to,from:n.from,data:n.data,value:n.value}],overrides:{[n.from]:{code:t&&i.DELEGATION_PREFIX+(0,s.remove0x)(t)}}}),a=r?.transactions?.[0].gasUsed;if(!a)throw new Error("No simulated gas returned");return a}({chainId:a,delegationAddress:u,transaction:e});(0,n.log)("Execute gas",l);const d=(0,r.BNToHex)((0,r.hexToBN)(c).add((0,r.hexToBN)(l)).subn(n.INTRINSIC_GAS));return(0,n.log)("Total type 4 gas",d),d}(f,t,e):await(0,r.query)(t,"estimateGas",[f])}catch(e){j={reason:e.message,errorKey:e.errorKey,debug:{blockNumber:w,blockGasLimit:b}},(0,n.log)("Estimation failed",{...j,fallback:E})}return{blockGasLimit:b,estimatedGas:k,simulationFails:j}}function f(e,t,i){const a=(0,r.hexToBN)(e),o=(0,r.fractionBN)((0,r.hexToBN)(t),n.MAX_GAS_BLOCK_PERCENT,100),c=(0,r.fractionBN)(a,100*i,100);if(a.gt(o)){const t=(0,s.add0x)(e);return(0,n.log)("Using estimated value",t),t}if(c.lt(o)){const e=(0,s.add0x)((0,r.BNToHex)(c));return(0,n.log)("Using padded estimate",e,i),e}const u=(0,s.add0x)((0,r.BNToHex)(o));return(0,n.log)("Using 90% of block gas limit",u),u}n.log=(0,s.createModuleLogger)(u.projectLogger,"gas"),n.FIXED_GAS="0x5208",n.DEFAULT_GAS_MULTIPLIER=1.5,n.MAX_GAS_BLOCK_PERCENT=90,n.INTRINSIC_GAS=21e3,n.DUMMY_AUTHORIZATION_SIGNATURE="0x1111111111111111111111111111111111111111111111111111111111111111",n.updateGas=async function(e){const{txMeta:t}=e,s={...t.txParams},[i,a,o]=await async function(e){const{chainId:t,isCustomNetwork:s,isSimulationEnabled:i,txMeta:a}=e,{disableGasBuffer:o}=a;if(a.txParams.gas)return(0,n.log)("Using value from request",a.txParams.gas),[a.txParams.gas,undefined,a.txParams.gas];if(await async function({ethQuery:e,txMeta:t,isCustomNetwork:n}){const{txParams:{to:s,data:i}}=t;if(n||!s||i)return!1;const a=await async function(e,t){return await(0,r.query)(e,"getCode",[t])}(e,s);return!a||"0x"===a}(e))return(0,n.log)("Using fixed value",n.FIXED_GAS),[n.FIXED_GAS,undefined,n.FIXED_GAS];const{blockGasLimit:u,estimatedGas:l,simulationFails:h}=await d({chainId:e.chainId,ethQuery:e.ethQuery,isSimulationEnabled:i,messenger:e.messenger,txParams:a.txParams});if(s||h)return(0,n.log)(s?"Using original estimate as custom network":"Using original fallback estimate as simulation failed"),[l,h,l];let p=l;if(!o){p=f(l,u,c.GAS_BUFFER_CHAIN_OVERRIDES[t]??n.DEFAULT_GAS_MULTIPLIER)}return[p,h,l]}(e);t.txParams.gas=i,t.simulationFails=a,t.gasLimitNoBuffer=o,s.gas||(t.originalGasEstimate=t.txParams.gas),t.defaultGasEstimates||(t.defaultGasEstimates={}),t.defaultGasEstimates.gas=t.txParams.gas},n.estimateGas=d,n.addGasBuffer=f}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/gas.cjs"}],[2783,{"fast-json-patch":4303,lodash:4725},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.updateTransactionHistory=n.addInitialHistorySnapshot=n.DISPLAYED_TRANSACTION_HISTORY_PATHS=n.MAX_TRANSACTION_HISTORY_LENGTH=void 0;const s=r(e("fast-json-patch")),i=e("lodash");function a(e,t,n){const r=s.default.compare(e,t);return r[0]&&(n&&(r[0].note=n),r[0].timestamp=Date.now()),r}function o(e){return(0,i.cloneDeep)(e).reduce(((e,t)=>s.default.applyPatch(e,t).newDocument))}function c(e){const t={...e};return delete t.history,(0,i.cloneDeep)(t)}n.MAX_TRANSACTION_HISTORY_LENGTH=100,n.DISPLAYED_TRANSACTION_HISTORY_PATHS=["/status","/txParams/gasPrice","/txParams/gas","/estimatedBaseFee","/blockTimestamp"],n.addInitialHistorySnapshot=function(e){const t=c(e);return(0,i.merge)({},e,{history:[t]})},n.updateTransactionHistory=function(e,t){if(!e.history)return e;const r=c(e),s=a(o(e.history),r,t);if(0===s.length)return e;let u=[...e.history,s];return u.length>n.MAX_TRANSACTION_HISTORY_LENGTH&&(u=function(e){const t=e[0],r=e.slice(1),s=r.findIndex((e=>!e.some((({path:e})=>n.DISPLAYED_TRANSACTION_HISTORY_PATHS.includes(e)))));if(-1===s)return e;const i=s===r.length-1?s-1:s+1,c=Math.min(s,i),u=r[c],l=r[c+1],d=o([t,...r.slice(0,c)]),f=o([d,u,l]),h=a(d,f,`${String(u[0].note)}, ${String(l[0].note)}`);return r.splice(c,2,h),[t,...r]}(u)),(0,i.merge)({},e,{history:u})}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/history.cjs"}],[2784,{"../logger.cjs":2774,"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getTransactionLayer1GasFee=n.updateTransactionLayer1GasFee=void 0;const r=e("@metamask/utils"),s=e("../logger.cjs"),i=(0,r.createModuleLogger)(s.projectLogger,"layer-1-gas-fee-flow");async function a({layer1GasFeeFlows:e,messenger:t,provider:n,transactionMeta:r}){const s=function(e,t,n){return t.find((t=>t.matchesTransaction({transactionMeta:e,messenger:n})))}(r,e,t);if(!s)return undefined;i("Found layer 1 gas fee flow",s.constructor.name,r.id);try{const{layer1Fee:e}=await s.getLayer1Fee({provider:n,transactionMeta:r});return e}catch(e){return i("Failed to get layer 1 gas fee",r.id,e),undefined}}n.updateTransactionLayer1GasFee=async function(e){const t=await a(e);if(!t)return;const{transactionMeta:n}=e;n.layer1GasFee=t,i("Updated layer 1 gas fee",t,n.id)},n.getTransactionLayer1GasFee=a}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/layer1-gas-fee-flow.cjs"}],[2785,{"../logger.cjs":2774,"@metamask/controller-utils":1512},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getAndFormatTransactionsForNonceTracker=n.getNextNonce=void 0;const r=e("@metamask/controller-utils"),s=e("../logger.cjs"),i=(0,s.createModuleLogger)(s.projectLogger,"nonce");n.getNextNonce=async function(e,t){const{customNonceValue:n,isExternalSign:s,txParams:{from:a,nonce:o}}=e;if(s)return[undefined,undefined];const c=n?(0,r.toHex)(n):undefined;if(c)return i("Using custom nonce",c),[c,undefined];if(o)return i("Using existing nonce",o),[o,undefined];const u=await t(a),l=(0,r.toHex)(u.nextNonce),d=u.releaseLock.bind(u);return i("Using nonce from nonce tracker",l,u.nonceDetails),[l,d]},n.getAndFormatTransactionsForNonceTracker=function(e,t,n,r){return r.filter((({chainId:r,isTransfer:s,isUserOperation:i,status:a,txParams:{from:o}})=>!s&&!i&&r===e&&n.includes(a)&&o.toLowerCase()===t.toLowerCase())).map((({status:e,txParams:{from:t,gas:n,value:r,nonce:s}})=>({status:e,history:[{}],txParams:{from:t??"",gas:n??"",value:r??"",nonce:s??""}})))}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/nonce.cjs"}],[2786,{"@ethereumjs/common":444,"@ethereumjs/tx":461,"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.serializeTransaction=n.prepareTransaction=n.HARDFORK=void 0;const r=e("@ethereumjs/common"),s=e("@ethereumjs/tx"),i=e("@metamask/utils");function a(e){const t={chainId:parseInt(e,16),defaultHardfork:n.HARDFORK};return r.Common.custom(t,{eips:[7702]})}n.HARDFORK=r.Hardfork.Prague,n.prepareTransaction=function(e,t){const n=t;return s.TransactionFactory.fromTxData(n,{freeze:!1,common:a(e)})},n.serializeTransaction=function(e){return(0,i.bytesToHex)(e.serialize())}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/prepare.cjs"}],[2787,{"@metamask/controller-utils":1512,"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getTransactionParamsWithIncreasedGasFee=void 0;const r=e("@metamask/controller-utils"),s=e("@metamask/utils");function i(e,t){const n=(0,r.convertHexToDecimal)(e),i=parseInt(""+n*t,10);return(0,s.add0x)(i.toString(16))}n.getTransactionParamsWithIncreasedGasFee=function(e,t,n){const r=function(e,t,n){if(n&&"gasPrice"in n)return n.gasPrice;const r=e.gasPrice;if(!r||"0x0"===r)return undefined;return i(r,t)}(e,t,n),s=function(e,t,n){if(n&&"maxFeePerGas"in n&&"maxPriorityFeePerGas"in n)return n;const r=e.maxFeePerGas,s=e.maxPriorityFeePerGas;if(!r||!s||"0x0"===r||"0x0"===s)return undefined;const a=i(r,t),o=i(s,t);return{maxFeePerGas:a,maxPriorityFeePerGas:o}}(e,t,n);if(s){const t={...e,...s};return delete t.gasPrice,t}if(r){const t={...e,gasPrice:r};return delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,t}throw new Error("Cannot increase gas fee as no current values and no new values were provided")}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/retry.cjs"}],[2788,{"@ethersproject/wallet":599,"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isValidSignature=void 0;const r=e("@ethersproject/wallet"),s=e("@metamask/utils");n.isValidSignature=function(e,t,n){try{const i=(0,s.add0x)(e.map(s.remove0x).join("")),a=(0,s.hexToBytes)(i);return(0,r.verifyMessage)(a,t).toLowerCase()===n.toLowerCase()}catch{return!1}}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/signature.cjs"}],[2789,{"../errors.cjs":2755,"../logger.cjs":2774,"@metamask/controller-utils":1512,"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.simulateTransactions=void 0;const r=e("@metamask/controller-utils"),s=e("@metamask/utils"),i=e("../errors.cjs"),a=e("../logger.cjs"),o=(0,s.createModuleLogger)(a.projectLogger,"simulation-api"),c="https://tx-sentinel-{0}.api.cx.metamask.io/",u="networks";let l=0;function d(e){return c.replace("{0}",e)}n.simulateTransactions=async function(e,t){const n=await async function(e){const t=await async function(){const e=`${d("ethereum-mainnet")}${u}`,t=await fetch(e);return t.json()}(),n=(0,r.convertHexToDecimal)(e),s=t[n];if(!s?.confirmations)throw o("Chain is not supported",e),new i.SimulationChainNotSupportedError(e);return d(s.network)}(e);o("Sending request",n,t);const s=l;l+=1;const a=await fetch(n,{method:"POST",body:JSON.stringify({id:String(s),jsonrpc:"2.0",method:"infura_simulateTransactions",params:[t]})}),c=await a.json();if(o("Received response",c),c.error){const{code:e,message:t}=c.error;throw new i.SimulationError(t,e)}return c?.result}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/simulation-api.cjs"}],[2790,{"../constants.cjs":2754,"../errors.cjs":2755,"../logger.cjs":2774,"../types.cjs":2775,"./simulation-api.cjs":2789,"@ethersproject/abi":503,"@metamask/controller-utils":1512,"@metamask/metamask-eth-abis":2099,"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getEvents=n.getSimulationData=n.SupportedToken=void 0;const r=e("@ethersproject/abi"),s=e("@metamask/controller-utils"),i=e("@metamask/metamask-eth-abis"),a=e("@metamask/utils"),o=e("./simulation-api.cjs"),c=e("../constants.cjs"),u=e("../errors.cjs"),l=e("../logger.cjs"),d=e("../types.cjs");var f;!function(e){e.ERC20="erc20",e.ERC721="erc721",e.ERC1155="erc1155",e.ERC20_WRAPPED="erc20Wrapped",e.ERC721_LEGACY="erc721Legacy"}(f||(n.SupportedToken=f={}));const h=(0,a.createModuleLogger)(l.projectLogger,"simulation"),p=["Transfer","TransferSingle","TransferBatch","Deposit","Withdrawal"],m={[f.ERC20]:{abi:i.abiERC20,standard:d.SimulationTokenStandard.erc20},[f.ERC721]:{abi:i.abiERC721,standard:d.SimulationTokenStandard.erc721},[f.ERC1155]:{abi:i.abiERC1155,standard:d.SimulationTokenStandard.erc1155},[f.ERC20_WRAPPED]:{abi:c.ABI_SIMULATION_ERC20_WRAPPED,standard:d.SimulationTokenStandard.erc20},[f.ERC721_LEGACY]:{abi:c.ABI_SIMULATION_ERC721_LEGACY,standard:d.SimulationTokenStandard.erc721}},g=["execution reverted","insufficient funds for gas"];function y(e){const t=j(e.transactions[0]?.callTrace??{});h("Extracted logs",t);const n=function(){const e=Object.values(f);return new Map(e.map((e=>{const{abi:t}=m[e];return[e,new r.Interface(t)]})))}();return t.map((e=>{const t=function(e,t){const n=Object.values(f);for(const r of n)try{const n=t.get(r),{abi:s,standard:i}=m[r];return{...n.parseLog(e),abi:s,standard:i}}catch(e){continue}return undefined}(e,n);if(!t)return h("Failed to parse log",e),undefined;const r=t.abi.find((e=>e.name===t.name))?.inputs;if(!r)return h("Failed to find inputs for event",t),undefined;if(!p.includes(t.name))return h("Ignoring unsupported event",t.name,t),undefined;h("Normalizing event args",t.name,t);const s=function(e,t){return e.reduce(((e,n,r)=>{const s=t[r].name.replace("_",""),i=b(n);return e[s]=i,e}),{})}(t.args,r);return{contractAddress:e.address,tokenStandard:t.standard,name:t.name,args:s,abi:t.abi}})).filter((e=>e!==undefined))}function b(e){if(Array.isArray(e))return e.map(b);let t=e;return t=t.toHexString?.()??t,t=t.toLowerCase?.()??t,t}function w(e){return"Transfer"===e.name&&e.tokenStandard===d.SimulationTokenStandard.erc721&&0===parseInt(e.args.from,16)}function v(e){return e.tokenStandard===d.SimulationTokenStandard.erc721?[e.args.tokenId]:e.tokenStandard===d.SimulationTokenStandard.erc1155&&"TransferSingle"===e.name?[e.args.id]:e.tokenStandard===d.SimulationTokenStandard.erc1155&&"TransferBatch"===e.name?e.args.ids:[undefined]}function S(e){switch(e){case d.SimulationTokenStandard.erc721:return new r.Interface(i.abiERC721);case d.SimulationTokenStandard.erc1155:return new r.Interface(i.abiERC1155);default:return new r.Interface(i.abiERC20)}}function T(e,t,n){const r=S(t.standard);try{if(t.standard===d.SimulationTokenStandard.erc721){const t=r.decodeFunctionResult("ownerOf",n.return);return t[0].toLowerCase()===e.toLowerCase()?"0x1":"0x0"}const i=r.decodeFunctionResult("balanceOf",n.return);return(0,s.toHex)(i[0])}catch(e){throw h("Failed to decode balance transaction",e,{token:t,response:n}),new u.SimulationError(`Failed to decode balance transaction for token ${t.address}: ${String(e)}`)}}function E(e,t,n){const r=S(e);switch(e){case d.SimulationTokenStandard.erc721:return r.encodeFunctionData("ownerOf",[n]);case d.SimulationTokenStandard.erc1155:return r.encodeFunctionData("balanceOf",[t,n]);default:return r.encodeFunctionData("balanceOf",[t])}}function j(e){return[...e.logs??[],...(e.calls??[]).map((e=>j(e))).flat()]}function k(e,t){const n=(0,s.hexToBN)(t).sub((0,s.hexToBN)(e)),r=n.isNeg(),i=(0,s.toHex)(n.abs());return n.isZero()?(h("Balance change is zero"),undefined):{previousBalance:e,newBalance:t,difference:i,isDecrease:r}}n.getSimulationData=async function(e,t={}){const{chainId:n,from:r,to:i,value:a,data:c}=e,{blockTime:l,senderCode:d}=t;h("Getting simulation data",e);try{const f=await(0,o.simulateTransactions)(n,{transactions:[{data:c,from:r,to:i,value:a}],suggestFees:{withTransfer:!0,withFeeTransfer:!0},withCallTrace:!0,withLogs:!0,...l&&{blockOverrides:{time:(0,s.toHex)(l)}},...d&&{overrides:{[r]:{code:d}}}}),p=f.transactions?.[0]?.error;if(p)throw new u.SimulationError(p);const m=function(e,t){const n=t.transactions[0];if(!n)return undefined;const{stateDiff:r}=n,s=r?.pre?.[e]?.balance,i=r?.post?.[e]?.balance;if(!s||!i)return undefined;return k(s,i)}(e.from,f),g=y(f);h("Parsed events",g);const b=await async function(e,t,n){const{from:r}=e,{blockTime:i,senderCode:a}=n,c=function(e,t){const n=new Set,r=new Map,s=new Map,i=t.filter((t=>[t.args.from,t.args.to].includes(e.from)));h("Filtered user events",i);for(const t of i){const i=v(t);h("Extracted token IDs",i);for(const a of i){const i={address:t.contractAddress,standard:t.tokenStandard,id:a},o=JSON.stringify(i);if(n.has(o)){h("Ignoring additional event with same contract and token ID",i);continue}n.add(o);const c=E(t.tokenStandard,e.from,a),u={from:e.from,to:t.contractAddress,data:c};w(t)||r.set(i,u),s.set(i,u)}}return{before:r,after:s}}(e,t);h("Generated balance transactions",[...c.after.values()]);const l=[...c.before.values(),e,...c.after.values()];if(1===l.length)return[];const d=await(0,o.simulateTransactions)(e.chainId,{transactions:l,...i&&{blockOverrides:{time:(0,s.toHex)(i)}},...a&&{overrides:{[r]:{code:a}}}});if(h("Balance simulation response",d),d.transactions.length!==l.length)throw new u.SimulationInvalidResponseError;let f=0;return[...c.after.keys()].map(((t,n)=>{const r=k(!c.before.get(t)?"0x0":T(e.from,t,d.transactions[f++]),T(e.from,t,d.transactions[n+c.before.size+1]));return r?{...t,...r}:undefined})).filter((e=>e!==undefined))}(e,g,t),S={nativeBalanceChange:m,tokenBalanceChanges:b};let j=[];try{j=function(e){const t=e.transactions?.[0]?.fees?.[0];return(t?.tokenFees??[]).map((e=>({amount:e.balanceNeededToken,balance:e.currentBalanceToken,decimals:e.token.decimals,gas:t.gas,maxFeePerGas:t.maxFeePerGas,maxPriorityFeePerGas:t.maxPriorityFeePerGas,rateWei:e.rateWei,recipient:e.feeRecipient,symbol:e.token.symbol,tokenAddress:e.token.address})))}(f)}catch(e){h("Failed to parse gas fee tokens",e,f)}return{gasFeeTokens:j,simulationData:S}}catch(t){h("Failed to get simulation data",t,e);let n=t;g.some((e=>n.message?.includes(e)))&&(n=new u.SimulationRevertedError);const{code:r,message:s}=n;return{gasFeeTokens:[],simulationData:{tokenBalanceChanges:[],error:{code:r,message:s}}}}},n.getEvents=y}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/simulation.cjs"}],[2791,{"../constants.cjs":2754,"../logger.cjs":2774,"../types.cjs":2775,"./utils.cjs":2793,"@metamask/controller-utils":1512,lodash:4725},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.updatePostTransactionBalance=n.updateSwapsTransaction=n.SWAP_TRANSACTION_TYPES=n.SWAPS_CHAINID_DEFAULT_TOKEN_MAP=n.DEFAULT_TOKEN_ADDRESS=n.UPDATE_POST_TX_BALANCE_ATTEMPTS=n.UPDATE_POST_TX_BALANCE_TIMEOUT=void 0;const r=e("@metamask/controller-utils"),s=e("lodash"),i=e("./utils.cjs"),a=e("../constants.cjs"),o=e("../logger.cjs"),c=e("../types.cjs"),u=(0,o.createModuleLogger)(o.projectLogger,"swaps");n.UPDATE_POST_TX_BALANCE_TIMEOUT=5e3,n.UPDATE_POST_TX_BALANCE_ATTEMPTS=6;n.DEFAULT_TOKEN_ADDRESS="0x0000000000000000000000000000000000000000";const l={name:"Ether",address:n.DEFAULT_TOKEN_ADDRESS,decimals:18},d={name:"Binance Coin",address:n.DEFAULT_TOKEN_ADDRESS,decimals:18},f={name:"Matic",address:n.DEFAULT_TOKEN_ADDRESS,decimals:18},h={name:"Avalanche",address:n.DEFAULT_TOKEN_ADDRESS,decimals:18},p={name:"Test Ether",address:n.DEFAULT_TOKEN_ADDRESS,decimals:18},m={name:"Ether",address:n.DEFAULT_TOKEN_ADDRESS,decimals:18},g={...l},y={...l},b={...l};function w(e,t){return!(!e||!t)&&e===n.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[t]?.address}function v(e){return new Promise((t=>setTimeout(t,e)))}n.SWAPS_CHAINID_DEFAULT_TOKEN_MAP={[a.CHAIN_IDS.MAINNET]:l,"0x539":p,[a.CHAIN_IDS.BSC]:d,[a.CHAIN_IDS.POLYGON]:f,[a.CHAIN_IDS.GOERLI]:m,[a.CHAIN_IDS.AVALANCHE]:h,[a.CHAIN_IDS.OPTIMISM]:y,[a.CHAIN_IDS.ARBITRUM]:g,[a.CHAIN_IDS.ZKSYNC_ERA]:b},n.SWAP_TRANSACTION_TYPES=[c.TransactionType.swap,c.TransactionType.swapAndSend,c.TransactionType.swapApproval],n.updateSwapsTransaction=function(e,t,r,{isSwapsDisabled:a,cancelTransaction:o,messenger:u}){if(a||!n.SWAP_TRANSACTION_TYPES.includes(t))return e;if(t===c.TransactionType.swap&&!1===r?.hasApproveTx&&e.simulationFails)throw o(e.id),new Error("Simulation failed");const l=r?.meta;if(!l)return e;let d=e;return t===c.TransactionType.swapApproval&&(d=function(e,{type:t,sourceTokenSymbol:n}){(0,i.validateIfTransactionUnapproved)(e,"updateSwapApprovalTransaction");let r={type:t,sourceTokenSymbol:n};return r=(0,s.pickBy)({type:t,sourceTokenSymbol:n}),(0,s.merge)({},e,r)}(e,l),u.publish("TransactionController:transactionNewSwapApproval",{transactionMeta:d})),t===c.TransactionType.swapAndSend&&(d=function(e,{approvalTxId:t,destinationTokenAddress:n,destinationTokenAmount:r,destinationTokenDecimals:a,destinationTokenSymbol:o,estimatedBaseFee:c,sourceTokenAddress:u,sourceTokenAmount:l,sourceTokenDecimals:d,sourceTokenSymbol:f,swapAndSendRecipient:h,swapMetaData:p,swapTokenValue:m,type:g}){(0,i.validateIfTransactionUnapproved)(e,"updateSwapTransaction");let y={approvalTxId:t,destinationTokenAddress:n,destinationTokenAmount:r,destinationTokenDecimals:a,destinationTokenSymbol:o,estimatedBaseFee:c,sourceTokenAddress:u,sourceTokenAmount:l,sourceTokenDecimals:d,sourceTokenSymbol:f,swapAndSendRecipient:h,swapMetaData:p,swapTokenValue:m,type:g};return y=(0,s.pickBy)(y),(0,s.merge)({},e,y)}(e,l),u.publish("TransactionController:transactionNewSwapAndSend",{transactionMeta:d})),t===c.TransactionType.swap&&(d=function(e,{sourceTokenSymbol:t,destinationTokenSymbol:n,type:r,destinationTokenDecimals:a,destinationTokenAddress:o,swapMetaData:c,swapTokenValue:u,estimatedBaseFee:l,approvalTxId:d}){(0,i.validateIfTransactionUnapproved)(e,"updateSwapTransaction");let f={sourceTokenSymbol:t,destinationTokenSymbol:n,type:r,destinationTokenDecimals:a,destinationTokenAddress:o,swapMetaData:c,swapTokenValue:u,estimatedBaseFee:l,approvalTxId:d};return f=(0,s.pickBy)(f),(0,s.merge)({},e,f)}(e,l),u.publish("TransactionController:transactionNewSwap",{transactionMeta:d})),d},n.updatePostTransactionBalance=async function(e,{ethQuery:t,getTransaction:s,updateTransaction:i}){u("Updating post transaction balance",e.id);const a=e.id;let o,c;for(let i=0;i<n.UPDATE_POST_TX_BALANCE_ATTEMPTS;i++){u("Querying balance",{attempt:i});const l=await(0,r.query)(t,"getBalance",[e.txParams.from]);o={...s(a)??{}},c=o.approvalTxId?s(o.approvalTxId):undefined,o.postTxBalance=l.toString(16);const d=w(e.destinationTokenAddress,e.chainId);if(!d||e.preTxBalance!==o.postTxBalance){u("Finishing post balance update",{isDefaultTokenAddress:d,preTxBalance:e.preTxBalance,postTxBalance:o.postTxBalance});break}u("Waiting for balance to update",{delay:n.UPDATE_POST_TX_BALANCE_TIMEOUT}),await v(n.UPDATE_POST_TX_BALANCE_TIMEOUT)}return i(o,"TransactionController#updatePostTransactionBalance - Add post transaction balance"),u("Completed post balance update",o?.postTxBalance),{updatedTransactionMeta:o,approvalTransactionMeta:c}}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/swaps.cjs"}],[2792,{"../types.cjs":2775,"@ethersproject/abi":503,"@metamask/controller-utils":1512,"@metamask/metamask-eth-abis":2099},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.determineTransactionType=n.ESTIMATE_GAS_ERROR=void 0;const r=e("@ethersproject/abi"),s=e("@metamask/controller-utils"),i=e("@metamask/metamask-eth-abis"),a=e("../types.cjs");n.ESTIMATE_GAS_ERROR="eth_estimateGas rpc method error";const o=new r.Interface(i.abiERC20),c=new r.Interface(i.abiERC721),u=new r.Interface(i.abiERC1155),l=new r.Interface(i.abiFiatTokenV2);n.determineTransactionType=async function(e,t){const{data:n,to:r}=e;if(n&&!r)return{type:a.TransactionType.deployContract,getCodeResponse:undefined};const{contractCode:i,isContractAddress:d}=await async function(e,t){let n;try{n=await(0,s.query)(e,"getCode",[t])}catch(e){n=null}const r=!!n&&("0x"!==n&&"0x0"!==n);return{contractCode:n,isContractAddress:r}}(t,r);if(!d)return{type:a.TransactionType.simpleSend,getCodeResponse:i};const f=0!==Number(e.value??"0"),h={type:a.TransactionType.contractInteraction,getCodeResponse:i};if(!n||f)return h;const p=function(e){if(!e)return undefined;try{return o.parseTransaction({data:e})}catch{}try{return c.parseTransaction({data:e})}catch{}try{return u.parseTransaction({data:e})}catch{}try{return l.parseTransaction({data:e})}catch{}return undefined}(n)?.name;if(!p)return h;const m=[a.TransactionType.tokenMethodApprove,a.TransactionType.tokenMethodSetApprovalForAll,a.TransactionType.tokenMethodTransfer,a.TransactionType.tokenMethodTransferFrom,a.TransactionType.tokenMethodSafeTransferFrom,a.TransactionType.tokenMethodIncreaseAllowance].find((e=>e.toLowerCase()===p.toLowerCase()));return m?{type:m,getCodeResponse:i}:h}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/transaction-type.cjs"}],[2793,{"../types.cjs":2775,"@metamask/utils":2822,"bn.js":3895},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.setEnvelopeType=n.getPercentageChange=n.padHexToEvenLength=n.normalizeGasFeeValues=n.normalizeTxError=n.validateIfTransactionUnapproved=n.validateGasValues=n.isEIP1559Transaction=n.normalizeTransactionParams=n.ESTIMATE_GAS_ERROR=void 0;const s=e("@metamask/utils"),i=r(e("bn.js")),a=e("../types.cjs");n.ESTIMATE_GAS_ERROR="eth_estimateGas rpc method error";const o={accessList:e=>e,authorizationList:e=>e,data:e=>(0,s.add0x)(u(e)),from:e=>(0,s.add0x)(e).toLowerCase(),gas:e=>(0,s.add0x)(e),gasLimit:e=>(0,s.add0x)(e),gasPrice:e=>(0,s.add0x)(e),nonce:e=>(0,s.add0x)(e),to:e=>(0,s.add0x)(e).toLowerCase(),value:e=>(0,s.add0x)(e),maxFeePerGas:e=>(0,s.add0x)(e),maxPriorityFeePerGas:e=>(0,s.add0x)(e),estimatedBaseFee:e=>(0,s.add0x)(e),type:e=>(0,s.add0x)(e)};n.normalizeTransactionParams=function(e){const t={from:""};for(const n of(0,s.getKnownPropertyNames)(o))e[n]&&(t[n]=o[n](e[n]));return t.value||(t.value="0x0"),t.gasLimit&&!t.gas&&(t.gas=t.gasLimit),t},n.isEIP1559Transaction=function(e){const t=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);return t(e,"maxFeePerGas")&&t(e,"maxPriorityFeePerGas")};function c(e){try{return JSON.parse(JSON.stringify(e)),!0}catch{return!1}}function u(e){const t=e.toLowerCase().startsWith("0x")?e.slice(0,2):"",n=t?e.slice(2):e;return t+(n.length%2==0?n:`0${n}`)}n.validateGasValues=e=>{Object.keys(e).forEach((t=>{const n=e[t];if("string"!=typeof n||!(0,s.isStrictHexString)(n))throw new TypeError(`expected hex string for ${t} but received: ${n}`)}))},n.validateIfTransactionUnapproved=function(e,t){if(e?.status!==a.TransactionStatus.unapproved)throw new Error(`TransactionsController: Can only call ${t} on an unapproved transaction.\n      Current tx status: ${e?.status}`)},n.normalizeTxError=function(e){return{name:e.name,message:e.message,stack:e.stack,code:e.code,rpc:c(e.value)?e.value:undefined}},n.normalizeGasFeeValues=function(e){const t=e=>"string"==typeof e?(0,s.add0x)(e):e;return"gasPrice"in e?{gasPrice:t(e.gasPrice)}:{maxFeePerGas:t(e.maxFeePerGas),maxPriorityFeePerGas:t(e.maxPriorityFeePerGas)}},n.padHexToEvenLength=u,n.getPercentageChange=function(e,t){const n=new i.default(10).pow(new i.default(18)),r=e.mul(n),s=t.mul(n),a=s.sub(r);return a.isZero()?0:r.isZero()&&!s.isZero()?100:a.muln(100).div(r).abs().toNumber()},n.setEnvelopeType=function(e,t){e.accessList?e.type=a.TransactionEnvelopeType.accessList:e.authorizationList?e.type=a.TransactionEnvelopeType.setCode:e.type=t?a.TransactionEnvelopeType.feeMarket:a.TransactionEnvelopeType.legacy}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/utils.cjs"}],[2794,{"../types.cjs":2775,"./utils.cjs":2793,"@ethersproject/abi":503,"@metamask/controller-utils":1512,"@metamask/metamask-eth-abis":2099,"@metamask/rpc-errors":2415,"@metamask/utils":2822},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.validateBatchRequest=n.validateParamTo=n.validateTxParams=n.validateTransactionOrigin=void 0;const r=e("@ethersproject/abi"),s=e("@metamask/controller-utils"),i=e("@metamask/metamask-eth-abis"),a=e("@metamask/rpc-errors"),o=e("@metamask/utils"),c=e("./utils.cjs"),u=e("../types.cjs"),l=[u.TransactionEnvelopeType.feeMarket,u.TransactionEnvelopeType.setCode];function d(e,t){const n=e.type;switch(t){case"authorizationList":if(n&&n!==u.TransactionEnvelopeType.setCode)throw a.rpcErrors.invalidParams(`Invalid transaction envelope type: specified type "${n}" but including authorizationList requires type: "${u.TransactionEnvelopeType.setCode}"`);break;case"maxFeePerGas":case"maxPriorityFeePerGas":if(n&&!l.includes(n))throw a.rpcErrors.invalidParams(`Invalid transaction envelope type: specified type "${n}" but including maxFeePerGas and maxPriorityFeePerGas requires type: "${l.join(", ")}"`);break;default:if(n&&l.includes(n))throw a.rpcErrors.invalidParams(`Invalid transaction envelope type: specified type "${n}" but included a gasPrice instead of maxFeePerGas and maxPriorityFeePerGas`)}}function f(e,t,n){if(void 0!==e[n])throw a.rpcErrors.invalidParams(`Invalid transaction params: specified ${t} but also included ${n}, these cannot be mixed`)}function h(e,t){const n=e[t];if("string"!=typeof n||!(0,o.isStrictHexString)(n))throw a.rpcErrors.invalidParams(`Invalid transaction params: ${String(t)} is not a valid hexadecimal string. got: (${String(n)})`)}function p(e){h(e,"address"),function(e,t,n){const r=(0,o.remove0x)(e).length/2;if(r!==t)throw a.rpcErrors.invalidParams(`Invalid transaction params: ${n} must be ${t} bytes. got: ${r} bytes`)}(e.address,20,"address");for(const t of["chainId","nonce","r","s"])e[t]&&h(e,t);const{yParity:t}=e;if(t&&!["0x","0x1"].includes(t))throw a.rpcErrors.invalidParams(`Invalid transaction params: yParity must be '0x' or '0x1'. got: ${t}`)}n.validateTransactionOrigin=async function({data:e,from:t,internalAccounts:n,origin:r,permittedAddresses:i,selectedAddress:o,txParams:c,type:l}){const d=r===s.ORIGIN_METAMASK,f=r&&r!==s.ORIGIN_METAMASK,{authorizationList:h,to:p,type:m}=c;if(d&&t!==o)throw a.rpcErrors.internal({message:"Internally initiated transaction is using invalid account.",data:{origin:r,fromAddress:t,selectedAddress:o}});if(f&&i&&!i.includes(t))throw a.providerErrors.unauthorized({data:{origin:r}});if(l===u.TransactionType.batch)return;if(f&&(h||m===u.TransactionEnvelopeType.setCode))throw a.rpcErrors.invalidParams("External EIP-7702 transactions are not supported");const g=Boolean(e&&"0x"!==e);if(f&&g&&n?.some((e=>e.toLowerCase()===p?.toLowerCase())))throw a.rpcErrors.invalidParams("External transactions to internal accounts cannot include data")},n.validateTxParams=function(e,t=!0,n){!function(e){if(e&&!Object.values(u.TransactionEnvelopeType).includes(e))throw a.rpcErrors.invalidParams(`Invalid transaction envelope type: "${e}". Must be one of: ${Object.values(u.TransactionEnvelopeType).join(", ")}`)}(e.type),function(e,t){if((0,c.isEIP1559Transaction)(e)&&!t)throw a.rpcErrors.invalidParams("Invalid transaction params: params specify an EIP-1559 transaction but the current network does not support EIP-1559")}(e,t),function(e){if(!e||"string"!=typeof e)throw a.rpcErrors.invalidParams(`Invalid "from" address ${e}: not a string.`);if(!(0,s.isValidHexAddress)(e))throw a.rpcErrors.invalidParams('Invalid "from" address.')}(e.from),function(e){if("0x"===e.to||e.to===undefined){if(!e.data)throw a.rpcErrors.invalidParams('Invalid "to" address.');delete e.to}else if(e.to!==undefined&&!(0,s.isValidHexAddress)(e.to))throw a.rpcErrors.invalidParams('Invalid "to" address.')}(e),function(e){if(e!==undefined){if(e.includes("-"))throw a.rpcErrors.invalidParams(`Invalid transaction value "${e}": not a positive number.`);if(e.includes("."))throw a.rpcErrors.invalidParams(`Invalid transaction value "${e}": number must be in wei.`);const t=parseInt(e,10);if(!(Number.isFinite(t)&&!Number.isNaN(t)&&!isNaN(Number(e))&&Number.isSafeInteger(t)))throw a.rpcErrors.invalidParams(`Invalid transaction value ${e}: number must be a valid number.`)}}(e.value),function(e){if(e){const t=new r.Interface(i.abiERC20);try{t.parseTransaction({data:e})}catch(e){if(e.message.match(/BUFFER_OVERRUN/u))throw a.rpcErrors.invalidParams("Invalid transaction params: data out-of-bounds, BUFFER_OVERRUN.")}}}(e.data),function(e,t){if(e&&t&&e.toLowerCase?.()!==t.toLowerCase())throw a.rpcErrors.invalidParams(`Invalid transaction params: chainId must match the network client, got: ${e}, expected: ${t}`)}(e.chainId,n),function(e){e.gasPrice&&(d(e,"gasPrice"),f(e,"gasPrice","maxFeePerGas"),f(e,"gasPrice","maxPriorityFeePerGas"),h(e,"gasPrice"));e.maxFeePerGas&&(d(e,"maxFeePerGas"),f(e,"maxFeePerGas","gasPrice"),h(e,"maxFeePerGas"));e.maxPriorityFeePerGas&&(d(e,"maxPriorityFeePerGas"),f(e,"maxPriorityFeePerGas","gasPrice"),h(e,"maxPriorityFeePerGas"));e.gasLimit&&h(e,"gasLimit");e.gas&&h(e,"gas")}(e),function(e){const{authorizationList:t}=e;if(!t)return;if(d(e,"authorizationList"),!Array.isArray(t))throw a.rpcErrors.invalidParams("Invalid transaction params: authorizationList must be an array");for(const e of t)p(e)}(e)},n.validateParamTo=function(e){if(!e||"string"!=typeof e)throw a.rpcErrors.invalidParams('Invalid "to" address')},n.validateBatchRequest=function({internalAccounts:e,request:t,sizeLimit:n}){const{origin:r}=t,i=r&&r!==s.ORIGIN_METAMASK,o=t.transactions.map((e=>e.params.to?.toLowerCase())),c=e.map((e=>e.toLowerCase()));if(i&&o.some((e=>c.includes(e))))throw a.rpcErrors.invalidParams("Calls to internal accounts are not supported");if(i&&t.transactions.length>n)throw a.rpcErrors.invalidParams(`Batch size cannot exceed ${n}. got: ${t.transactions.length}`)}}}},{package:"@metamask/transaction-controller",file:"node_modules/@metamask/transaction-controller/dist/utils/validation.cjs"}],[2812,{"./errors.cjs":2820,"@metamask/superstruct":2740},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.assertExhaustive=n.assertStruct=n.assert=n.AssertionError=void 0;const r=e("@metamask/superstruct"),s=e("./errors.cjs");function i(e,t){return n=e,Boolean("string"==typeof n?.prototype?.constructor?.name)?new e({message:t}):e({message:t});var n}class a extends Error{constructor(e){super(e.message),this.code="ERR_ASSERTION"}}n.AssertionError=a,n.assert=function(e,t="Assertion failed.",n=a){if(!e){if(t instanceof Error)throw t;throw i(n,t)}},n.assertStruct=function(e,t,n="Assertion failed",o=a){try{(0,r.assert)(e,t)}catch(e){throw i(o,`${n}: ${function(e){return(0,s.getErrorMessage)(e).replace(/\.$/u,"")}(e)}.`)}},n.assertExhaustive=function(e){throw new Error("Invalid branch reached. Should be detected during compilation.")}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/assert.cjs"}],[2813,{"./assert.cjs":2812,"@metamask/superstruct":2740},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.base64=void 0;const r=e("@metamask/superstruct"),s=e("./assert.cjs");n.base64=(e,t={})=>{const n=t.paddingRequired??!1,i=t.characterSet??"base64";let a,o;return"base64"===i?a=String.raw`[A-Za-z0-9+\/]`:((0,s.assert)("base64url"===i),a=String.raw`[-_A-Za-z0-9]`),o=n?new RegExp(`^(?:${a}{4})*(?:${a}{3}=|${a}{2}==)?$`,"u"):new RegExp(`^(?:${a}{4})*(?:${a}{2,3}|${a}{3}=|${a}{2}==)?$`,"u"),(0,r.pattern)(e,o)}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/base64.cjs"}],[2814,{"./assert.cjs":2812,"./hex.cjs":2821,"@scure/base":2896,buffer:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.createDataView=n.concatBytes=n.valueToBytes=n.base64ToBytes=n.stringToBytes=n.numberToBytes=n.signedBigIntToBytes=n.bigIntToBytes=n.hexToBytes=n.bytesToBase64=n.bytesToString=n.bytesToNumber=n.bytesToSignedBigInt=n.bytesToBigInt=n.bytesToHex=n.assertIsBytes=n.isBytes=void 0;const r=e("@scure/base"),s=e("./assert.cjs"),i=e("./hex.cjs"),a=48,o=58,c=87;const u=function(){const e=[];return()=>{if(0===e.length)for(let t=0;t<256;t++)e.push(t.toString(16).padStart(2,"0"));return e}}();function l(e){return e instanceof Uint8Array}function d(e){(0,s.assert)(l(e),"Value must be a Uint8Array.")}function f(e){if(d(e),0===e.length)return"0x";const t=u(),n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=t[e[r]];return(0,i.add0x)(n.join(""))}function h(e){d(e);const t=f(e);return BigInt(t)}function p(e){if("0x"===e?.toLowerCase?.())return new Uint8Array;(0,i.assertIsHexString)(e);const t=(0,i.remove0x)(e).toLowerCase(),n=t.length%2==0?t:`0${t}`,r=new Uint8Array(n.length/2);for(let e=0;e<r.length;e++){const t=n.charCodeAt(2*e),s=n.charCodeAt(2*e+1),i=t-(t<o?a:c),u=s-(s<o?a:c);r[e]=16*i+u}return r}function m(e){(0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)(e>=BigInt(0),"Value must be a non-negative bigint.");return p(e.toString(16))}function g(e){(0,s.assert)("number"==typeof e,"Value must be a number."),(0,s.assert)(e>=0,"Value must be a non-negative number."),(0,s.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToBytes` instead.");return p(e.toString(16))}function y(e){return(0,s.assert)("string"==typeof e,"Value must be a string."),(new TextEncoder).encode(e)}function b(e){if("bigint"==typeof e)return m(e);if("number"==typeof e)return g(e);if("string"==typeof e)return e.startsWith("0x")?p(e):y(e);if(l(e))return e;throw new TypeError(`Unsupported value type: "${typeof e}".`)}n.isBytes=l,n.assertIsBytes=d,n.bytesToHex=f,n.bytesToBigInt=h,n.bytesToSignedBigInt=function(e){d(e);let t=BigInt(0);for(const n of e)t=(t<<BigInt(8))+BigInt(n);return BigInt.asIntN(8*e.length,t)},n.bytesToNumber=function(e){d(e);const t=h(e);return(0,s.assert)(t<=BigInt(Number.MAX_SAFE_INTEGER),"Number is not a safe integer. Use `bytesToBigInt` instead."),Number(t)},n.bytesToString=function(e){return d(e),(new TextDecoder).decode(e)},n.bytesToBase64=function(e){return d(e),r.base64.encode(e)},n.hexToBytes=p,n.bigIntToBytes=m,n.signedBigIntToBytes=function(e,t){(0,s.assert)("bigint"==typeof e,"Value must be a bigint."),(0,s.assert)("number"==typeof t,"Byte length must be a number."),(0,s.assert)(t>0,"Byte length must be greater than 0."),(0,s.assert)(function(e,t){(0,s.assert)(t>0);const n=e>>BigInt(31);return!((~e&n)+(e&~n)>>BigInt(8*t-1))}(e,t),"Byte length is too small to represent the given value.");let n=e;const r=new Uint8Array(t);for(let e=0;e<r.length;e++)r[e]=Number(BigInt.asUintN(8,n)),n>>=BigInt(8);return r.reverse()},n.numberToBytes=g,n.stringToBytes=y,n.base64ToBytes=function(e){return(0,s.assert)("string"==typeof e,"Value must be a string."),r.base64.decode(e)},n.valueToBytes=b,n.concatBytes=function(e){const t=new Array(e.length);let n=0;for(let r=0;r<e.length;r++){const s=b(e[r]);t[r]=s,n+=s.length}const r=new Uint8Array(n);for(let e=0,n=0;e<t.length;e++)r.set(t[e],n),n+=t[e].length;return r},n.createDataView=function(e){if(void 0!==t&&e instanceof t){const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return new DataView(t)}return new DataView(e.buffer,e.byteOffset,e.byteLength)}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/bytes.cjs"}],[2815,{"./superstruct.cjs":2830,"@metamask/superstruct":2740},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.toCaipAssetId=n.toCaipAssetType=n.toCaipAccountId=n.toCaipChainId=n.parseCaipAssetId=n.parseCaipAssetType=n.parseCaipAccountId=n.parseCaipChainId=n.isCaipAssetId=n.isCaipAssetType=n.isCaipTokenId=n.isCaipAssetReference=n.isCaipAssetNamespace=n.isCaipAccountAddress=n.isCaipAccountId=n.isCaipReference=n.isCaipNamespace=n.isCaipChainId=n.KnownCaipNamespace=n.CaipAssetTypeOrIdStruct=n.CaipAssetIdStruct=n.CaipAssetTypeStruct=n.CaipTokenIdStruct=n.CaipAssetReferenceStruct=n.CaipAssetNamespaceStruct=n.CaipAccountAddressStruct=n.CaipAccountIdStruct=n.CaipReferenceStruct=n.CaipNamespaceStruct=n.CaipChainIdStruct=n.CAIP_ASSET_ID_REGEX=n.CAIP_ASSET_TYPE_REGEX=n.CAIP_TOKEN_ID_REGEX=n.CAIP_ASSET_REFERENCE_REGEX=n.CAIP_ASSET_NAMESPACE_REGEX=n.CAIP_ACCOUNT_ADDRESS_REGEX=n.CAIP_ACCOUNT_ID_REGEX=n.CAIP_REFERENCE_REGEX=n.CAIP_NAMESPACE_REGEX=n.CAIP_CHAIN_ID_REGEX=void 0;const r=e("@metamask/superstruct"),s=e("./superstruct.cjs");n.CAIP_CHAIN_ID_REGEX=/^(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})$/u,n.CAIP_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,n.CAIP_REFERENCE_REGEX=/^[-_a-zA-Z0-9]{1,32}$/u,n.CAIP_ACCOUNT_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32})):(?<accountAddress>[-.%a-zA-Z0-9]{1,128})$/u,n.CAIP_ACCOUNT_ADDRESS_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,n.CAIP_ASSET_NAMESPACE_REGEX=/^[-a-z0-9]{3,8}$/u,n.CAIP_ASSET_REFERENCE_REGEX=/^[-.%a-zA-Z0-9]{1,128}$/u,n.CAIP_TOKEN_ID_REGEX=/^[-.%a-zA-Z0-9]{1,78}$/u,n.CAIP_ASSET_TYPE_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})$/u,n.CAIP_ASSET_ID_REGEX=/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})\/(?<tokenId>[-.%a-zA-Z0-9]{1,78})$/u;function i(e){return(0,r.is)(e,n.CaipNamespaceStruct)}function a(e){return(0,r.is)(e,n.CaipReferenceStruct)}function o(e){return(0,r.is)(e,n.CaipAccountAddressStruct)}function c(e){return(0,r.is)(e,n.CaipAssetNamespaceStruct)}function u(e){return(0,r.is)(e,n.CaipAssetReferenceStruct)}function l(e){return(0,r.is)(e,n.CaipTokenIdStruct)}n.CaipChainIdStruct=(0,s.definePattern)("CaipChainId",n.CAIP_CHAIN_ID_REGEX),n.CaipNamespaceStruct=(0,s.definePattern)("CaipNamespace",n.CAIP_NAMESPACE_REGEX),n.CaipReferenceStruct=(0,s.definePattern)("CaipReference",n.CAIP_REFERENCE_REGEX),n.CaipAccountIdStruct=(0,s.definePattern)("CaipAccountId",n.CAIP_ACCOUNT_ID_REGEX),n.CaipAccountAddressStruct=(0,s.definePattern)("CaipAccountAddress",n.CAIP_ACCOUNT_ADDRESS_REGEX),n.CaipAssetNamespaceStruct=(0,s.definePattern)("CaipAssetNamespace",n.CAIP_ASSET_NAMESPACE_REGEX),n.CaipAssetReferenceStruct=(0,s.definePattern)("CaipAssetReference",n.CAIP_ASSET_REFERENCE_REGEX),n.CaipTokenIdStruct=(0,s.definePattern)("CaipTokenId",n.CAIP_TOKEN_ID_REGEX),n.CaipAssetTypeStruct=(0,s.definePattern)("CaipAssetType",n.CAIP_ASSET_TYPE_REGEX),n.CaipAssetIdStruct=(0,s.definePattern)("CaipAssetId",n.CAIP_ASSET_ID_REGEX),n.CaipAssetTypeOrIdStruct=(0,s.definePattern)("CaipAssetTypeOrId",/^(?<chainId>(?<namespace>[-a-z0-9]{3,8}):(?<reference>[-_a-zA-Z0-9]{1,32}))\/(?<assetNamespace>[-a-z0-9]{3,8}):(?<assetReference>[-.%a-zA-Z0-9]{1,128})(\/(?<tokenId>[-.%a-zA-Z0-9]{1,78}))?$/u),function(e){e.Bip122="bip122",e.Solana="solana",e.Eip155="eip155",e.Wallet="wallet"}(n.KnownCaipNamespace||(n.KnownCaipNamespace={})),n.isCaipChainId=function(e){return(0,r.is)(e,n.CaipChainIdStruct)},n.isCaipNamespace=i,n.isCaipReference=a,n.isCaipAccountId=function(e){return(0,r.is)(e,n.CaipAccountIdStruct)},n.isCaipAccountAddress=o,n.isCaipAssetNamespace=c,n.isCaipAssetReference=u,n.isCaipTokenId=l,n.isCaipAssetType=function(e){return(0,r.is)(e,n.CaipAssetTypeStruct)},n.isCaipAssetId=function(e){return(0,r.is)(e,n.CaipAssetIdStruct)},n.parseCaipChainId=function(e){const t=n.CAIP_CHAIN_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP chain ID.");return{namespace:t.groups.namespace,reference:t.groups.reference}},n.parseCaipAccountId=function(e){const t=n.CAIP_ACCOUNT_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP account ID.");return{address:t.groups.accountAddress,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},n.parseCaipAssetType=function(e){const t=n.CAIP_ASSET_TYPE_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP asset type.");return{assetNamespace:t.groups.assetNamespace,assetReference:t.groups.assetReference,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},n.parseCaipAssetId=function(e){const t=n.CAIP_ASSET_ID_REGEX.exec(e);if(!t?.groups)throw new Error("Invalid CAIP asset ID.");return{assetNamespace:t.groups.assetNamespace,assetReference:t.groups.assetReference,tokenId:t.groups.tokenId,chainId:t.groups.chainId,chain:{namespace:t.groups.namespace,reference:t.groups.reference}}},n.toCaipChainId=function(e,t){if(!i(e))throw new Error(`Invalid "namespace", must match: ${n.CAIP_NAMESPACE_REGEX.toString()}`);if(!a(t))throw new Error(`Invalid "reference", must match: ${n.CAIP_REFERENCE_REGEX.toString()}`);return`${e}:${t}`},n.toCaipAccountId=function(e,t,r){if(!i(e))throw new Error(`Invalid "namespace", must match: ${n.CAIP_NAMESPACE_REGEX.toString()}`);if(!a(t))throw new Error(`Invalid "reference", must match: ${n.CAIP_REFERENCE_REGEX.toString()}`);if(!o(r))throw new Error(`Invalid "accountAddress", must match: ${n.CAIP_ACCOUNT_ADDRESS_REGEX.toString()}`);return`${e}:${t}:${r}`},n.toCaipAssetType=function(e,t,r,s){if(!i(e))throw new Error(`Invalid "namespace", must match: ${n.CAIP_NAMESPACE_REGEX.toString()}`);if(!a(t))throw new Error(`Invalid "reference", must match: ${n.CAIP_REFERENCE_REGEX.toString()}`);if(!c(r))throw new Error(`Invalid "assetNamespace", must match: ${n.CAIP_ASSET_NAMESPACE_REGEX.toString()}`);if(!u(s))throw new Error(`Invalid "assetReference", must match: ${n.CAIP_ASSET_REFERENCE_REGEX.toString()}`);return`${e}:${t}/${r}:${s}`},n.toCaipAssetId=function(e,t,r,s,o){if(!i(e))throw new Error(`Invalid "namespace", must match: ${n.CAIP_NAMESPACE_REGEX.toString()}`);if(!a(t))throw new Error(`Invalid "reference", must match: ${n.CAIP_REFERENCE_REGEX.toString()}`);if(!c(r))throw new Error(`Invalid "assetNamespace", must match: ${n.CAIP_ASSET_NAMESPACE_REGEX.toString()}`);if(!u(s))throw new Error(`Invalid "assetReference", must match: ${n.CAIP_ASSET_REFERENCE_REGEX.toString()}`);if(!l(o))throw new Error(`Invalid "tokenId", must match: ${n.CAIP_TOKEN_ID_REGEX.toString()}`);return`${e}:${t}/${r}:${s}/${o}`}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/caip-types.cjs"}],[2816,{"./base64.cjs":2813,"@metamask/superstruct":2740},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ChecksumStruct=void 0;const r=e("@metamask/superstruct"),s=e("./base64.cjs");n.ChecksumStruct=(0,r.size)((0,s.base64)((0,r.string)(),{paddingRequired:!0}),44,44)}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/checksum.cjs"}],[2817,{"./assert.cjs":2812,"./bytes.cjs":2814,"./hex.cjs":2821,"@metamask/superstruct":2740},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createHex=n.createBytes=n.createBigInt=n.createNumber=void 0;const r=e("@metamask/superstruct"),s=e("./assert.cjs"),i=e("./bytes.cjs"),a=e("./hex.cjs"),o=(0,r.union)([(0,r.number)(),(0,r.bigint)(),(0,r.string)(),a.StrictHexStruct]),c=(0,r.coerce)((0,r.number)(),o,Number),u=(0,r.coerce)((0,r.bigint)(),o,BigInt),l=((0,r.union)([a.StrictHexStruct,(0,r.instance)(Uint8Array)]),(0,r.coerce)((0,r.instance)(Uint8Array),(0,r.union)([a.StrictHexStruct]),i.hexToBytes)),d=(0,r.coerce)(a.StrictHexStruct,(0,r.instance)(Uint8Array),i.bytesToHex);n.createNumber=function(e){try{const t=(0,r.create)(e,c);return(0,s.assert)(Number.isFinite(t),`Expected a number-like value, got "${e}".`),t}catch(t){if(t instanceof r.StructError)throw new Error(`Expected a number-like value, got "${e}".`);throw t}},n.createBigInt=function(e){try{return(0,r.create)(e,u)}catch(e){if(e instanceof r.StructError)throw new Error(`Expected a number-like value, got "${String(e.value)}".`);throw e}},n.createBytes=function(e){if("string"==typeof e&&"0x"===e.toLowerCase())return new Uint8Array;try{return(0,r.create)(e,l)}catch(e){if(e instanceof r.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}},n.createHex=function(e){if(e instanceof Uint8Array&&0===e.length||"string"==typeof e&&"0x"===e.toLowerCase())return"0x";try{return(0,r.create)(e,d)}catch(e){if(e instanceof r.StructError)throw new Error(`Expected a bytes-like value, got "${String(e.value)}".`);throw e}}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/coercers.cjs"}],[2818,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r,s,i=this&&this.__classPrivateFieldGet||function(e,t,n,r){if("a"===n&&!r)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===n?r:"a"===n?r.call(e):r?r.value:t.get(e)},a=this&&this.__classPrivateFieldSet||function(e,t,n,r,s){if("m"===r)throw new TypeError("Private method is not writable");if("a"===r&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===r?s.call(e,n):s?s.value=n:t.set(e,n),n};Object.defineProperty(n,"__esModule",{value:!0}),n.FrozenSet=n.FrozenMap=void 0;class o{get size(){return i(this,r,"f").size}[(r=new WeakMap,Symbol.iterator)](){return i(this,r,"f")[Symbol.iterator]()}constructor(e){r.set(this,void 0),a(this,r,new Map(e),"f"),Object.freeze(this)}entries(){return i(this,r,"f").entries()}forEach(e,t){return i(this,r,"f").forEach(((n,r,s)=>e.call(t,n,r,this)))}get(e){return i(this,r,"f").get(e)}has(e){return i(this,r,"f").has(e)}keys(){return i(this,r,"f").keys()}values(){return i(this,r,"f").values()}toString(){return`FrozenMap(${this.size}) {${this.size>0?` ${[...this.entries()].map((([e,t])=>`${String(e)} => ${String(t)}`)).join(", ")} `:""}}`}}n.FrozenMap=o;class c{get size(){return i(this,s,"f").size}[(s=new WeakMap,Symbol.iterator)](){return i(this,s,"f")[Symbol.iterator]()}constructor(e){s.set(this,void 0),a(this,s,new Set(e),"f"),Object.freeze(this)}entries(){return i(this,s,"f").entries()}forEach(e,t){return i(this,s,"f").forEach(((n,r,s)=>e.call(t,n,r,this)))}has(e){return i(this,s,"f").has(e)}keys(){return i(this,s,"f").keys()}values(){return i(this,s,"f").values()}toString(){return`FrozenSet(${this.size}) {${this.size>0?` ${[...this.values()].map((e=>String(e))).join(", ")} `:""}}`}}n.FrozenSet=c,Object.freeze(o),Object.freeze(o.prototype),Object.freeze(c),Object.freeze(c.prototype)}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/collections.cjs"}],[2819,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0})}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/encryption-types.cjs"}],[2820,{"./misc.cjs":2826,"pony-cause":4873},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.wrapError=n.getErrorMessage=n.isErrorWithStack=n.isErrorWithMessage=n.isErrorWithCode=void 0;const r=e("pony-cause"),s=e("./misc.cjs");function i(e){return"object"==typeof e&&null!==e&&"code"in e}function a(e){return"object"==typeof e&&null!==e&&"message"in e}n.isErrorWithCode=i,n.isErrorWithMessage=a,n.isErrorWithStack=function(e){return"object"==typeof e&&null!==e&&"stack"in e},n.getErrorMessage=function(e){return a(e)&&"string"==typeof e.message?e.message:(0,s.isNullOrUndefined)(e)?"":String(e)},n.wrapError=function(e,t){if((n=e)instanceof Error||(0,s.isObject)(n)&&"Error"===n.constructor.name){let n;return n=2===Error.length?new Error(t,{cause:e}):new r.ErrorWithCause(t,{cause:e}),i(e)&&(n.code=e.code),n}var n;return t.length>0?new Error(`${String(e)}: ${t}`):new Error(String(e))}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/errors.cjs"}],[2821,{"./assert.cjs":2812,"./bytes.cjs":2814,"@metamask/superstruct":2740,"@noble/hashes/sha3":2873},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.remove0x=n.add0x=n.isValidChecksumAddress=n.getChecksumAddress=n.isValidHexAddress=n.assertIsStrictHexString=n.assertIsHexString=n.isStrictHexString=n.isHexString=n.HexChecksumAddressStruct=n.HexAddressStruct=n.StrictHexStruct=n.HexStruct=void 0;const r=e("@metamask/superstruct"),s=e("@noble/hashes/sha3"),i=e("./assert.cjs"),a=e("./bytes.cjs");function o(e){return(0,r.is)(e,n.HexStruct)}function c(e){return(0,r.is)(e,n.StrictHexStruct)}function u(e){(0,i.assert)((0,r.is)(e,n.HexChecksumAddressStruct),"Invalid hex address.");const t=d(e.toLowerCase()),o=d((0,a.bytesToHex)((0,s.keccak_256)(t)));return`0x${t.split("").map(((e,t)=>{const n=o[t];return(0,i.assert)((0,r.is)(n,(0,r.string)()),"Hash shorter than address."),parseInt(n,16)>7?e.toUpperCase():e})).join("")}`}function l(e){return!!(0,r.is)(e,n.HexChecksumAddressStruct)&&u(e)===e}function d(e){return e.startsWith("0x")||e.startsWith("0X")?e.substring(2):e}n.HexStruct=(0,r.pattern)((0,r.string)(),/^(?:0x)?[0-9a-f]+$/iu),n.StrictHexStruct=(0,r.pattern)((0,r.string)(),/^0x[0-9a-f]+$/iu),n.HexAddressStruct=(0,r.pattern)((0,r.string)(),/^0x[0-9a-f]{40}$/u),n.HexChecksumAddressStruct=(0,r.pattern)((0,r.string)(),/^0x[0-9a-fA-F]{40}$/u),n.isHexString=o,n.isStrictHexString=c,n.assertIsHexString=function(e){(0,i.assert)(o(e),"Value must be a hexadecimal string.")},n.assertIsStrictHexString=function(e){(0,i.assert)(c(e),'Value must be a hexadecimal string, starting with "0x".')},n.isValidHexAddress=function(e){return(0,r.is)(e,n.HexAddressStruct)||l(e)},n.getChecksumAddress=u,n.isValidChecksumAddress=l,n.add0x=function(e){return e.startsWith("0x")?e:e.startsWith("0X")?`0x${e.substring(2)}`:`0x${e}`},n.remove0x=d}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/hex.cjs"}],[2822,{"./assert.cjs":2812,"./base64.cjs":2813,"./bytes.cjs":2814,"./caip-types.cjs":2815,"./checksum.cjs":2816,"./coercers.cjs":2817,"./collections.cjs":2818,"./encryption-types.cjs":2819,"./errors.cjs":2820,"./hex.cjs":2821,"./json.cjs":2823,"./keyring.cjs":2824,"./logging.cjs":2825,"./misc.cjs":2826,"./number.cjs":2827,"./opaque.cjs":2828,"./promise.cjs":2829,"./superstruct.cjs":2830,"./time.cjs":2831,"./transaction-types.cjs":2832,"./versions.cjs":2833},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){r===undefined&&(r=n);var s=Object.getOwnPropertyDescriptor(t,n);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,s)}:function(e,t,n,r){r===undefined&&(r=n),e[r]=t[n]}),s=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(n,"__esModule",{value:!0}),s(e("./assert.cjs"),n),s(e("./base64.cjs"),n),s(e("./bytes.cjs"),n),s(e("./caip-types.cjs"),n),s(e("./checksum.cjs"),n),s(e("./coercers.cjs"),n),s(e("./collections.cjs"),n),s(e("./encryption-types.cjs"),n),s(e("./errors.cjs"),n),s(e("./hex.cjs"),n),s(e("./json.cjs"),n),s(e("./keyring.cjs"),n),s(e("./logging.cjs"),n),s(e("./misc.cjs"),n),s(e("./number.cjs"),n),s(e("./opaque.cjs"),n),s(e("./promise.cjs"),n),s(e("./superstruct.cjs"),n),s(e("./time.cjs"),n),s(e("./transaction-types.cjs"),n),s(e("./versions.cjs"),n)}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/index.cjs"}],[2823,{"./assert.cjs":2812,"./misc.cjs":2826,"@metamask/superstruct":2740},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getJsonRpcIdValidator=n.assertIsJsonRpcError=n.isJsonRpcError=n.assertIsJsonRpcFailure=n.isJsonRpcFailure=n.assertIsJsonRpcSuccess=n.isJsonRpcSuccess=n.assertIsJsonRpcResponse=n.isJsonRpcResponse=n.assertIsPendingJsonRpcResponse=n.isPendingJsonRpcResponse=n.JsonRpcResponseStruct=n.JsonRpcFailureStruct=n.JsonRpcSuccessStruct=n.PendingJsonRpcResponseStruct=n.assertIsJsonRpcRequest=n.isJsonRpcRequest=n.assertIsJsonRpcNotification=n.isJsonRpcNotification=n.JsonRpcNotificationStruct=n.JsonRpcRequestStruct=n.JsonRpcParamsStruct=n.JsonRpcErrorStruct=n.JsonRpcIdStruct=n.JsonRpcVersionStruct=n.jsonrpc2=n.getJsonSize=n.getSafeJson=n.isValidJson=n.JsonStruct=n.UnsafeJsonStruct=n.exactOptional=n.object=void 0;const r=e("@metamask/superstruct"),s=e("./assert.cjs"),i=e("./misc.cjs");function a({path:e,branch:t}){const n=e[e.length-1];return(0,i.hasProperty)(t[t.length-2],n)}function o(e){return new r.Struct({...e,type:`optional ${e.type}`,validator:(t,n)=>!a(n)||e.validator(t,n),refiner:(t,n)=>!a(n)||e.refiner(t,n)})}function c(e){if(null===e||"boolean"==typeof e||"string"==typeof e)return!0;if("number"==typeof e&&Number.isFinite(e))return!0;if("object"==typeof e){let t=!0;if(Array.isArray(e)){for(let n=0;n<e.length;n++)if(!c(e[n])){t=!1;break}return t}const n=Object.entries(e);for(let e=0;e<n.length;e++)if("string"!=typeof n[e][0]||!c(n[e][1])){t=!1;break}return t}return!1}function u(e){return(0,r.create)(e,n.JsonStruct)}n.object=e=>(0,r.object)(e),n.exactOptional=o,n.UnsafeJsonStruct=(0,r.define)("JSON",(e=>c(e))),n.JsonStruct=(0,r.coerce)(n.UnsafeJsonStruct,(0,r.refine)((0,r.any)(),"JSON",(e=>(0,r.is)(e,n.UnsafeJsonStruct))),(e=>JSON.parse(JSON.stringify(e,((e,t)=>"__proto__"===e||"constructor"===e?undefined:t))))),n.isValidJson=function(e){try{return u(e),!0}catch{return!1}},n.getSafeJson=u,n.getJsonSize=function(e){(0,s.assertStruct)(e,n.JsonStruct,"Invalid JSON value");const t=JSON.stringify(e);return(new TextEncoder).encode(t).byteLength},n.jsonrpc2="2.0",n.JsonRpcVersionStruct=(0,r.literal)(n.jsonrpc2),n.JsonRpcIdStruct=(0,r.nullable)((0,r.union)([(0,r.number)(),(0,r.string)()])),n.JsonRpcErrorStruct=(0,n.object)({code:(0,r.integer)(),message:(0,r.string)(),data:o(n.JsonStruct),stack:o((0,r.string)())}),n.JsonRpcParamsStruct=(0,r.union)([(0,r.record)((0,r.string)(),n.JsonStruct),(0,r.array)(n.JsonStruct)]),n.JsonRpcRequestStruct=(0,n.object)({id:n.JsonRpcIdStruct,jsonrpc:n.JsonRpcVersionStruct,method:(0,r.string)(),params:o(n.JsonRpcParamsStruct)}),n.JsonRpcNotificationStruct=(0,n.object)({jsonrpc:n.JsonRpcVersionStruct,method:(0,r.string)(),params:o(n.JsonRpcParamsStruct)}),n.isJsonRpcNotification=function(e){return(0,r.is)(e,n.JsonRpcNotificationStruct)},n.assertIsJsonRpcNotification=function(e,t){(0,s.assertStruct)(e,n.JsonRpcNotificationStruct,"Invalid JSON-RPC notification",t)},n.isJsonRpcRequest=function(e){return(0,r.is)(e,n.JsonRpcRequestStruct)},n.assertIsJsonRpcRequest=function(e,t){(0,s.assertStruct)(e,n.JsonRpcRequestStruct,"Invalid JSON-RPC request",t)},n.PendingJsonRpcResponseStruct=(0,r.object)({id:n.JsonRpcIdStruct,jsonrpc:n.JsonRpcVersionStruct,result:(0,r.optional)((0,r.unknown)()),error:(0,r.optional)(n.JsonRpcErrorStruct)}),n.JsonRpcSuccessStruct=(0,n.object)({id:n.JsonRpcIdStruct,jsonrpc:n.JsonRpcVersionStruct,result:n.JsonStruct}),n.JsonRpcFailureStruct=(0,n.object)({id:n.JsonRpcIdStruct,jsonrpc:n.JsonRpcVersionStruct,error:n.JsonRpcErrorStruct}),n.JsonRpcResponseStruct=(0,r.union)([n.JsonRpcSuccessStruct,n.JsonRpcFailureStruct]),n.isPendingJsonRpcResponse=function(e){return(0,r.is)(e,n.PendingJsonRpcResponseStruct)},n.assertIsPendingJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,n.PendingJsonRpcResponseStruct,"Invalid pending JSON-RPC response",t)},n.isJsonRpcResponse=function(e){return(0,r.is)(e,n.JsonRpcResponseStruct)},n.assertIsJsonRpcResponse=function(e,t){(0,s.assertStruct)(e,n.JsonRpcResponseStruct,"Invalid JSON-RPC response",t)},n.isJsonRpcSuccess=function(e){return(0,r.is)(e,n.JsonRpcSuccessStruct)},n.assertIsJsonRpcSuccess=function(e,t){(0,s.assertStruct)(e,n.JsonRpcSuccessStruct,"Invalid JSON-RPC success response",t)},n.isJsonRpcFailure=function(e){return(0,r.is)(e,n.JsonRpcFailureStruct)},n.assertIsJsonRpcFailure=function(e,t){(0,s.assertStruct)(e,n.JsonRpcFailureStruct,"Invalid JSON-RPC failure response",t)},n.isJsonRpcError=function(e){return(0,r.is)(e,n.JsonRpcErrorStruct)},n.assertIsJsonRpcError=function(e,t){(0,s.assertStruct)(e,n.JsonRpcErrorStruct,"Invalid JSON-RPC error",t)},n.getJsonRpcIdValidator=function(e){const{permitEmptyString:t,permitFractions:n,permitNull:r}={permitEmptyString:!0,permitFractions:!1,permitNull:!0,...e};return e=>Boolean("number"==typeof e&&(n||Number.isInteger(e))||"string"==typeof e&&(t||e.length>0)||r&&null===e)}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/json.cjs"}],[2824,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0})}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/keyring.cjs"}],[2825,{debug:4095},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.createModuleLogger=n.createProjectLogger=void 0;const s=(0,r(e("debug")).default)("metamask");n.createProjectLogger=function(e){return s.extend(e)},n.createModuleLogger=function(e,t){return e.extend(t)}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/logging.cjs"}],[2826,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.calculateNumberSize=n.calculateStringSize=n.isASCII=n.isPlainObject=n.ESCAPE_CHARACTERS_REGEXP=n.JsonSize=n.getKnownPropertyNames=n.hasProperty=n.isObject=n.isNullOrUndefined=n.isNonEmptyArray=void 0,n.isNonEmptyArray=function(e){return Array.isArray(e)&&e.length>0},n.isNullOrUndefined=function(e){return null===e||e===undefined},n.isObject=function(e){return Boolean(e)&&"object"==typeof e&&!Array.isArray(e)};function r(e){return e.charCodeAt(0)<=127}n.hasProperty=(e,t)=>Object.hasOwnProperty.call(e,t),n.getKnownPropertyNames=function(e){return Object.getOwnPropertyNames(e)},function(e){e[e.Null=4]="Null",e[e.Comma=1]="Comma",e[e.Wrapper=1]="Wrapper",e[e.True=4]="True",e[e.False=5]="False",e[e.Quote=1]="Quote",e[e.Colon=1]="Colon",e[e.Date=24]="Date"}(n.JsonSize||(n.JsonSize={})),n.ESCAPE_CHARACTERS_REGEXP=/"|\\|\n|\r|\t/gu,n.isPlainObject=function(e){if("object"!=typeof e||null===e)return!1;try{let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}catch(e){return!1}},n.isASCII=r,n.calculateStringSize=function(e){return e.split("").reduce(((e,t)=>r(t)?e+1:e+2),0)+(e.match(n.ESCAPE_CHARACTERS_REGEXP)??[]).length},n.calculateNumberSize=function(e){return e.toString().length}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/misc.cjs"}],[2827,{"./assert.cjs":2812,"./hex.cjs":2821},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.hexToBigInt=n.hexToNumber=n.bigIntToHex=n.numberToHex=void 0;const r=e("./assert.cjs"),s=e("./hex.cjs");n.numberToHex=e=>((0,r.assert)("number"==typeof e,"Value must be a number."),(0,r.assert)(e>=0,"Value must be a non-negative number."),(0,r.assert)(Number.isSafeInteger(e),"Value is not a safe integer. Use `bigIntToHex` instead."),(0,s.add0x)(e.toString(16)));n.bigIntToHex=e=>((0,r.assert)("bigint"==typeof e,"Value must be a bigint."),(0,r.assert)(e>=0,"Value must be a non-negative bigint."),(0,s.add0x)(e.toString(16)));n.hexToNumber=e=>{(0,s.assertIsHexString)(e);const t=parseInt(e,16);return(0,r.assert)(Number.isSafeInteger(t),"Value is not a safe integer. Use `hexToBigInt` instead."),t};n.hexToBigInt=e=>((0,s.assertIsHexString)(e),BigInt((0,s.add0x)(e)))}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/number.cjs"}],[2828,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0})}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/opaque.cjs"}],[2829,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createDeferredPromise=void 0,n.createDeferredPromise=function({suppressUnhandledRejection:e=!1}={}){let t,n;const r=new Promise(((e,r)=>{t=e,n=r}));return e&&r.catch((e=>{})),{promise:r,resolve:t,reject:n}}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/promise.cjs"}],[2830,{"@metamask/superstruct":2740},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.definePattern=void 0;const r=e("@metamask/superstruct");n.definePattern=function(e,t){return(0,r.define)(e,(e=>"string"==typeof e&&t.test(e)))}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/superstruct.cjs"}],[2831,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.timeSince=n.inMilliseconds=n.Duration=void 0,function(e){e[e.Millisecond=1]="Millisecond",e[e.Second=1e3]="Second",e[e.Minute=6e4]="Minute",e[e.Hour=36e5]="Hour",e[e.Day=864e5]="Day",e[e.Week=6048e5]="Week",e[e.Year=31536e6]="Year"}(n.Duration||(n.Duration={}));const r=(e,t)=>{if(!(e=>Number.isInteger(e)&&e>=0)(e))throw new Error(`"${t}" must be a non-negative integer. Received: "${e}".`)};n.inMilliseconds=function(e,t){return r(e,"count"),e*t},n.timeSince=function(e){return r(e,"timestamp"),Date.now()-e}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/time.cjs"}],[2832,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0})}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/transaction-types.cjs"}],[2833,{"./assert.cjs":2812,"@metamask/superstruct":2740,semver:5417},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.satisfiesVersionRange=n.gtRange=n.gtVersion=n.assertIsSemVerRange=n.assertIsSemVerVersion=n.isValidSemVerRange=n.isValidSemVerVersion=n.VersionRangeStruct=n.VersionStruct=void 0;const r=e("@metamask/superstruct"),s=e("semver"),i=e("./assert.cjs");n.VersionStruct=(0,r.refine)((0,r.string)(),"Version",(e=>null!==(0,s.valid)(e)||`Expected SemVer version, got "${e}"`)),n.VersionRangeStruct=(0,r.refine)((0,r.string)(),"Version range",(e=>null!==(0,s.validRange)(e)||`Expected SemVer range, got "${e}"`)),n.isValidSemVerVersion=function(e){return(0,r.is)(e,n.VersionStruct)},n.isValidSemVerRange=function(e){return(0,r.is)(e,n.VersionRangeStruct)},n.assertIsSemVerVersion=function(e){(0,i.assertStruct)(e,n.VersionStruct)},n.assertIsSemVerRange=function(e){(0,i.assertStruct)(e,n.VersionRangeStruct)},n.gtVersion=function(e,t){return(0,s.gt)(e,t)},n.gtRange=function(e,t){return(0,s.gtr)(e,t)},n.satisfiesVersionRange=function(e,t){return(0,s.satisfies)(e,t,{includePrerelease:!0})}}}},{package:"@metamask/utils",file:"node_modules/@metamask/utils/dist/versions.cjs"}],[2835,{"./utils":2845,assert:3939,buffer:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});const s=r(e("assert")),i=e("./utils");let a=[];var o;!function(e){e.STANDARD="standard",e.URI="uri",e.MINIMAL="minimal"}(o||(o={}));const c=e=>"ableacidalsoapexaquaarchatomauntawayaxisbackbaldbarnbeltbetabiasbluebodybragbrewbulbbuzzcalmcashcatschefcityclawcodecolacookcostcruxcurlcuspcyandarkdatadaysdelidicedietdoordowndrawdropdrumdulldutyeacheasyechoedgeepicevenexamexiteyesfactfairfernfigsfilmfishfizzflapflewfluxfoxyfreefrogfuelfundgalagamegeargemsgiftgirlglowgoodgraygrimgurugushgyrohalfhanghardhawkheathelphighhillholyhopehornhutsicedideaidleinchinkyintoirisironitemjadejazzjoinjoltjowljudojugsjumpjunkjurykeepkenokeptkeyskickkilnkingkitekiwiknoblamblavalazyleaflegsliarlimplionlistlogoloudloveluaulucklungmainmanymathmazememomenumeowmildmintmissmonknailnavyneednewsnextnoonnotenumbobeyoboeomitonyxopenovalowlspaidpartpeckplaypluspoempoolposepuffpumapurrquadquizraceramprealredorichroadrockroofrubyruinrunsrustsafesagascarsetssilkskewslotsoapsolosongstubsurfswantacotasktaxitenttiedtimetinytoiltombtoystriptunatwinuglyundouniturgeuservastveryvetovialvibeviewvisavoidvowswallwandwarmwaspwavewaxywebswhatwhenwhizwolfworkyankyawnyellyogayurtzapszerozestzinczonezoom".slice(4*e,4*e+4),u=e=>`${e}${i.getCRCHex(t.from(e,"hex"))}`,l=(e,n)=>{const r=u(e);return t.from(r,"hex").reduce(((e,t)=>[...e,c(t)]),[]).join(n)},d=e=>{const n=u(e);return t.from(n,"hex").reduce(((e,t)=>e+(e=>{const t=c(e);return`${t[0]}${t[3]}`})(t)),"")},f=(e,n,r)=>{const o=(4==r?e.split(n):i.partition(e,2)).map((e=>((e,n)=>{s.default(e.length===n,"Invalid Bytewords: word.length does not match wordLength provided");const r=26;if(0===a.length){a=[...new Array(676)].map((()=>-1));for(let e=0;e<256;e++){const t=c(e);let n=t[0].charCodeAt(0)-"a".charCodeAt(0),s=t[3].charCodeAt(0)-"a".charCodeAt(0);a[s*r+n]=e}}let i=e[0].toLowerCase().charCodeAt(0)-"a".charCodeAt(0),o=e[4==n?3:1].toLowerCase().charCodeAt(0)-"a".charCodeAt(0);s.default(0<=i&&i<r&&0<=o&&o<r,"Invalid Bytewords: invalid word");let u=a[o*r+i];if(s.default(-1!==u,"Invalid Bytewords: value not in lookup table"),4==n){const t=c(u);let n=e[1].toLowerCase(),r=e[2].toLowerCase();s.default(n===t[1]&&r===t[2],"Invalid Bytewords: invalid middle letters of word")}return t.from([u]).toString("hex")})(e,r))).join("");s.default(o.length>=5,"Invalid Bytewords: invalid decoded string length");const[u,l]=i.split(t.from(o,"hex"),4),d=i.getCRCHex(u);return s.default(d===l.toString("hex"),"Invalid Checksum"),u.toString("hex")};n.default={decode:(e,t=o.MINIMAL)=>{switch(t){case o.STANDARD:return f(e," ",4);case o.URI:return f(e,"-",4);case o.MINIMAL:return f(e,"",2);default:throw new Error(`Invalid style ${t}`)}},encode:(e,t=o.MINIMAL)=>{switch(t){case o.STANDARD:return l(e," ");case o.URI:return l(e,"-");case o.MINIMAL:return d(e);default:throw new Error(`Invalid style ${t}`)}},STYLES:o}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@ngraveio/bc-ur",file:"node_modules/@ngraveio/bc-ur/dist/bytewords.js"}],[2836,{buffer:3943,"cbor-sync":3961},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.cborDecode=n.cborEncode=void 0;const r=e("cbor-sync");n.cborEncode=e=>r.encode(e);n.cborDecode=e=>r.decode(t.isBuffer(e)?e:t.from(e,"hex"))}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@ngraveio/bc-ur",file:"node_modules/@ngraveio/bc-ur/dist/cbor.js"}],[2837,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.InvalidChecksumError=n.InvalidSequenceComponentError=n.InvalidTypeError=n.InvalidPathLengthError=n.InvalidSchemeError=void 0;class r extends Error{constructor(){super("Invalid Scheme"),this.name="InvalidSchemeError"}}n.InvalidSchemeError=r;class s extends Error{constructor(){super("Invalid Path"),this.name="InvalidPathLengthError"}}n.InvalidPathLengthError=s;class i extends Error{constructor(){super("Invalid Type"),this.name="InvalidTypeError"}}n.InvalidTypeError=i;class a extends Error{constructor(){super("Invalid Sequence Component"),this.name="InvalidSequenceComponentError"}}n.InvalidSequenceComponentError=a;class o extends Error{constructor(){super("Invalid Checksum"),this.name="InvalidChecksumError"}}n.InvalidChecksumError=o}}},{package:"@ngraveio/bc-ur",file:"node_modules/@ngraveio/bc-ur/dist/errors.js"}],[2838,{"./errors":2837,"./fountainUtils":2840,"./utils":2845,buffer:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.FountainDecoderPart=void 0;const r=e("./utils"),s=e("./fountainUtils"),i=e("./errors");class a{constructor(e,t){this._indexes=e,this._fragment=t}get indexes(){return this._indexes}get fragment(){return this._fragment}static fromEncoderPart(e){const t=s.chooseFragments(e.seqNum,e.seqLength,e.checksum),n=e.fragment;return new a(t,n)}isSimple(){return 1===this.indexes.length}}n.FountainDecoderPart=a;class o{constructor(){this.result=undefined,this.expectedMessageLength=0,this.expectedChecksum=0,this.expectedFragmentLength=0,this.processedPartsCount=0,this.expectedPartIndexes=[],this.lastPartIndexes=[],this.queuedParts=[],this.receivedPartIndexes=[],this.mixedParts=[],this.simpleParts=[]}validatePart(e){if(0===this.expectedPartIndexes.length)[...new Array(e.seqLength)].forEach(((e,t)=>this.expectedPartIndexes.push(t))),this.expectedMessageLength=e.messageLength,this.expectedChecksum=e.checksum,this.expectedFragmentLength=e.fragment.length;else{if(this.expectedPartIndexes.length!==e.seqLength)return!1;if(this.expectedMessageLength!==e.messageLength)return!1;if(this.expectedChecksum!==e.checksum)return!1;if(this.expectedFragmentLength!==e.fragment.length)return!1}return!0}reducePartByPart(e,t){if(r.arrayContains(e.indexes,t.indexes)){const n=r.setDifference(e.indexes,t.indexes),s=r.bufferXOR(e.fragment,t.fragment);return new a(n,s)}return e}reduceMixedBy(e){const t=[];this.mixedParts.map((({value:t})=>this.reducePartByPart(t,e))).forEach((e=>{e.isSimple()?this.queuedParts.push(e):t.push({key:e.indexes,value:e})})),this.mixedParts=t}processSimplePart(e){const t=e.indexes[0];if(!this.receivedPartIndexes.includes(t))if(this.simpleParts.push({key:e.indexes,value:e}),this.receivedPartIndexes.push(t),r.arraysEqual(this.receivedPartIndexes,this.expectedPartIndexes)){const e=this.simpleParts.map((({value:e})=>e)).sort(((e,t)=>e.indexes[0]-t.indexes[0])),t=o.joinFragments(e.map((e=>e.fragment)),this.expectedMessageLength);r.getCRC(t)===this.expectedChecksum?this.result=t:this.error=new i.InvalidChecksumError}else this.reduceMixedBy(e)}processMixedPart(e){if(this.mixedParts.some((({key:t})=>r.arraysEqual(t,e.indexes))))return;let t=this.simpleParts.reduce(((e,{value:t})=>this.reducePartByPart(e,t)),e);t=this.mixedParts.reduce(((e,{value:t})=>this.reducePartByPart(e,t)),t),t.isSimple()?this.queuedParts.push(t):(this.reduceMixedBy(t),this.mixedParts.push({key:t.indexes,value:t}))}processQueuedItem(){if(0===this.queuedParts.length)return;const e=this.queuedParts.shift();e.isSimple()?this.processSimplePart(e):this.processMixedPart(e)}receivePart(e){if(this.isComplete())return!1;if(!this.validatePart(e))return!1;const t=a.fromEncoderPart(e);for(this.lastPartIndexes=t.indexes,this.queuedParts.push(t);!this.isComplete()&&this.queuedParts.length>0;)this.processQueuedItem();return this.processedPartsCount+=1,!0}isComplete(){return Boolean(this.result!==undefined&&this.result.length>0)}isSuccess(){return Boolean(this.error===undefined&&this.isComplete())}resultMessage(){return this.isSuccess()?this.result:t.from([])}isFailure(){return this.error!==undefined}resultError(){return this.error?this.error.message:""}expectedPartCount(){return this.expectedPartIndexes.length}getExpectedPartIndexes(){return[...this.expectedPartIndexes]}getReceivedPartIndexes(){return[...this.receivedPartIndexes]}getLastPartIndexes(){return[...this.lastPartIndexes]}estimatedPercentComplete(){if(this.isComplete())return 1;const e=this.expectedPartCount();return 0===e?0:Math.min(.99,this.processedPartsCount/(1.75*e))}getProgress(){if(this.isComplete())return 1;const e=this.expectedPartCount();return 0===e?0:this.receivedPartIndexes.length/e}}n.default=o,o.joinFragments=(e,n)=>t.concat(e).slice(0,n)}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@ngraveio/bc-ur",file:"node_modules/@ngraveio/bc-ur/dist/fountainDecoder.js"}],[2839,{"./cbor":2836,"./fountainUtils":2840,"./utils":2845,assert:3939,buffer:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.FountainEncoderPart=void 0;const s=r(e("assert")),i=e("./utils"),a=e("./fountainUtils"),o=e("./cbor");class c{constructor(e,t,n,r,s){this._seqNum=e,this._seqLength=t,this._messageLength=n,this._checksum=r,this._fragment=s}get messageLength(){return this._messageLength}get fragment(){return this._fragment}get seqNum(){return this._seqNum}get seqLength(){return this._seqLength}get checksum(){return this._checksum}cbor(){const e=o.cborEncode([this._seqNum,this._seqLength,this._messageLength,this._checksum,this._fragment]);return t.from(e)}description(){return`seqNum:${this._seqNum}, seqLen:${this._seqLength}, messageLen:${this._messageLength}, checksum:${this._checksum}, data:${this._fragment.toString("hex")}`}static fromCBOR(e){const[n,r,i,a,u]=o.cborDecode(e);return s.default("number"==typeof n),s.default("number"==typeof r),s.default("number"==typeof i),s.default("number"==typeof a),s.default(t.isBuffer(u)&&u.length>0),new c(n,r,i,a,t.from(u))}}n.FountainEncoderPart=c;class u{constructor(e,t=100,n=0,r=10){const s=u.findNominalFragmentLength(e.length,r,t);this._messageLength=e.length,this._fragments=u.partitionMessage(e,s),this.fragmentLength=s,this.seqNum=i.toUint32(n),this.checksum=i.getCRC(e)}get fragmentsLength(){return this._fragments.length}get fragments(){return this._fragments}get messageLength(){return this._messageLength}isComplete(){return this.seqNum>=this._fragments.length}isSinglePart(){return 1===this._fragments.length}seqLength(){return this._fragments.length}mix(e){return e.reduce(((e,t)=>i.bufferXOR(this._fragments[t],e)),t.alloc(this.fragmentLength,0))}nextPart(){this.seqNum=i.toUint32(this.seqNum+1);const e=a.chooseFragments(this.seqNum,this._fragments.length,this.checksum),t=this.mix(e);return new c(this.seqNum,this._fragments.length,this._messageLength,this.checksum,t)}static findNominalFragmentLength(e,t,n){s.default(e>0),s.default(t>0),s.default(n>=t);const r=Math.ceil(e/t);let i=0;for(let t=1;t<=r&&(i=Math.ceil(e/t),!(i<=n));t++);return i}static partitionMessage(e,n){let r,s=t.from(e),a=[];for(;s.length>0;)[r,s]=i.split(s,-n),r=t.alloc(n,0).fill(r,0,r.length),a.push(r);return a}}n.default=u}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@ngraveio/bc-ur",file:"node_modules/@ngraveio/bc-ur/dist/fountainEncoder.js"}],[2840,{"./utils":2845,"./xoshiro":2846,"@keystonehq/alias-sampling":632,buffer:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.chooseFragments=n.shuffle=n.chooseDegree=void 0;const s=e("./utils"),i=r(e("./xoshiro")),a=r(e("@keystonehq/alias-sampling"));n.chooseDegree=(e,t)=>{const n=[...new Array(e)].map(((e,t)=>1/(t+1)));return a.default(n,undefined,t.nextDouble).next()+1};n.shuffle=(e,t)=>{let n=[...e],r=[];for(;n.length>0;){let e=t.nextInt(0,n.length-1),s=n[e];n.splice(e,1),r.push(s)}return r};n.chooseFragments=(e,r,a)=>{if(e<=r)return[e-1];{const o=t.concat([s.intToBytes(e),s.intToBytes(a)]),c=new i.default(o),u=n.chooseDegree(r,c),l=[...new Array(r)].map(((e,t)=>t));return n.shuffle(l,c).slice(0,u)}}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@ngraveio/bc-ur",file:"node_modules/@ngraveio/bc-ur/dist/fountainUtils.js"}],[2841,{"./ur":2842,"./urDecoder":2843,"./urEncoder":2844},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.URDecoder=n.UREncoder=n.UR=void 0;const s=r(e("./ur"));n.UR=s.default;const i=r(e("./urEncoder"));n.UREncoder=i.default;const a=r(e("./urDecoder"));n.URDecoder=a.default}}},{package:"@ngraveio/bc-ur",file:"node_modules/@ngraveio/bc-ur/dist/index.js"}],[2842,{"./cbor":2836,"./errors":2837,"./utils":2845,buffer:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0});const r=e("./errors"),s=e("./utils"),i=e("./cbor");class a{constructor(e,t="bytes"){if(this._cborPayload=e,this._type=t,!s.isURType(this._type))throw new r.InvalidTypeError}static fromBuffer(e){return new a(i.cborEncode(e))}static from(e,n){return a.fromBuffer(t.from(e,n))}decodeCBOR(){return i.cborDecode(this._cborPayload)}get type(){return this._type}get cbor(){return this._cborPayload}equals(e){return this.type===e.type&&this.cbor.equals(e.cbor)}}n.default=a}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@ngraveio/bc-ur",file:"node_modules/@ngraveio/bc-ur/dist/ur.js"}],[2843,{"./bytewords":2835,"./errors":2837,"./fountainDecoder":2838,"./fountainEncoder":2839,"./ur":2842,"./utils":2845,assert:3939,buffer:3943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});const s=r(e("./fountainDecoder")),i=r(e("./bytewords")),a=r(e("assert")),o=e("./utils"),c=e("./errors"),u=r(e("./ur")),l=e("./fountainEncoder");class d{constructor(e=new s.default,t="bytes"){this.fountainDecoder=e,this.type=t,a.default(o.isURType(t),"Invalid UR type"),this.expected_type=""}static decodeBody(e,n){const r=i.default.decode(n,i.default.STYLES.MINIMAL);return new u.default(t.from(r,"hex"),e)}validatePart(e){return this.expected_type?this.expected_type===e:!!o.isURType(e)&&(this.expected_type=e,!0)}static decode(e){const[t,n]=this.parse(e);if(0===n.length)throw new c.InvalidPathLengthError;const r=n[0];return d.decodeBody(t,r)}static parse(e){const t=e.toLowerCase();if("ur:"!==t.slice(0,3))throw new c.InvalidSchemeError;const n=t.slice(3).split("/"),r=n[0];if(n.length<2)throw new c.InvalidPathLengthError;if(!o.isURType(r))throw new c.InvalidTypeError;return[r,n.slice(1)]}static parseSequenceComponent(e){const t=e.split("-");if(2!==t.length)throw new c.InvalidSequenceComponentError;const n=o.toUint32(Number(t[0])),r=Number(t[1]);if(n<1||r<1)throw new c.InvalidSequenceComponentError;return[n,r]}receivePart(e){if(this.result!==undefined)return!1;const[t,n]=d.parse(e);if(!this.validatePart(t))return!1;if(1===n.length)return this.result=d.decodeBody(t,n[0]),!0;if(2!==n.length)throw new c.InvalidPathLengthError;const[r,s]=n,[a,o]=d.parseSequenceComponent(r),f=i.default.decode(s,i.default.STYLES.MINIMAL),h=l.FountainEncoderPart.fromCBOR(f);return a===h.seqNum&&o===h.seqLength&&(!!this.fountainDecoder.receivePart(h)&&(this.fountainDecoder.isSuccess()?this.result=new u.default(this.fountainDecoder.resultMessage(),t):this.fountainDecoder.isFailure()&&(this.error=new c.InvalidSchemeError),!0))}resultUR(){return this.result?this.result:new u.default(t.from([]))}isComplete(){return this.result&&this.result.cbor.length>0}isSuccess(){return!this.error&&this.isComplete()}isError(){return this.error!==undefined}resultError(){return this.error?this.error.message:""}expectedPartCount(){return this.fountainDecoder.expectedPartCount()}expectedPartIndexes(){return this.fountainDecoder.getExpectedPartIndexes()}receivedPartIndexes(){return this.fountainDecoder.getReceivedPartIndexes()}lastPartIndexes(){return this.fountainDecoder.getLastPartIndexes()}estimatedPercentComplete(){return this.fountainDecoder.estimatedPercentComplete()}getProgress(){return this.fountainDecoder.getProgress()}}n.default=d}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@ngraveio/bc-ur",file:"node_modules/@ngraveio/bc-ur/dist/urDecoder.js"}],[2844,{"./bytewords":2835,"./fountainEncoder":2839},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});const s=r(e("./fountainEncoder")),i=r(e("./bytewords"));class a{constructor(e,t,n,r){this.ur=e,this.fountainEncoder=new s.default(e.cbor,t,n,r)}get fragmentsLength(){return this.fountainEncoder.fragmentsLength}get fragments(){return this.fountainEncoder.fragments}get messageLength(){return this.fountainEncoder.messageLength}get cbor(){return this.ur.cbor}encodeWhole(){return[...new Array(this.fragmentsLength)].map((()=>this.nextPart()))}nextPart(){const e=this.fountainEncoder.nextPart();return this.fountainEncoder.isSinglePart()?a.encodeSinglePart(this.ur):a.encodePart(this.ur.type,e)}static encodeUri(e,t){return[e,t.join("/")].join(":")}static encodeUR(e){return a.encodeUri("ur",e)}static encodePart(e,t){const n=`${t.seqNum}-${t.seqLength}`,r=i.default.encode(t.cbor().toString("hex"),i.default.STYLES.MINIMAL);return a.encodeUR([e,n,r])}static encodeSinglePart(e){const t=i.default.encode(e.cbor.toString("hex"),i.default.STYLES.MINIMAL);return a.encodeUR([e.type,t])}}n.default=a}}},{package:"@ngraveio/bc-ur",file:"node_modules/@ngraveio/bc-ur/dist/urEncoder.js"}],[2845,{buffer:3943,crc:4038,"sha.js":5439},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.bufferXOR=n.setDifference=n.arrayContains=n.arraysEqual=n.hasPrefix=n.isURType=n.intToBytes=n.toUint32=n.getCRCHex=n.getCRC=n.split=n.partition=n.sha256Hash=void 0;const s=r(e("sha.js")),i=e("crc");n.sha256Hash=e=>s.default("sha256").update(e).digest();n.partition=(e,t)=>e.match(new RegExp(".{1,"+t+"}","g"))||[e];n.split=(e,t)=>[e.slice(0,-t),e.slice(-t)];n.getCRC=e=>i.crc32(e);n.getCRCHex=e=>i.crc32(e).toString(16).padStart(8,"0");n.toUint32=e=>e>>>0;n.intToBytes=e=>{const n=new ArrayBuffer(4);return new DataView(n).setUint32(0,e,!1),t.from(n)};n.isURType=e=>e.split("").every(((t,n)=>{let r=e.charCodeAt(n);return"a".charCodeAt(0)<=r&&r<="z".charCodeAt(0)||("0".charCodeAt(0)<=r&&r<="9".charCodeAt(0)||r==="-".charCodeAt(0))}));n.hasPrefix=(e,t)=>0===e.indexOf(t);n.arraysEqual=(e,t)=>e.length===t.length&&e.every((e=>t.includes(e)));n.arrayContains=(e,t)=>t.every((t=>e.includes(t)));n.setDifference=(e,t)=>e.filter((e=>t.indexOf(e)<0));n.bufferXOR=(e,n)=>{const r=Math.max(e.length,n.length),s=t.allocUnsafe(r);for(let t=0;t<r;++t)s[t]=e[t]^n[t];return s}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"@ngraveio/bc-ur",file:"node_modules/@ngraveio/bc-ur/dist/utils.js"}],[2846,{"./utils":2845,"bignumber.js":2847,jsbi:4556},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});const s=e("./utils"),i=r(e("bignumber.js")),a=r(e("jsbi")),o=(e,t)=>a.default.bitwiseXor(a.default.asUintN(64,a.default.leftShift(e,a.default.BigInt(t))),a.default.BigInt(a.default.asUintN(64,a.default.signedRightShift(e,a.default.subtract(a.default.BigInt(64),a.default.BigInt(t))))));n.default=class{constructor(e){this.next=()=>new i.default(this.roll().toString()),this.nextDouble=()=>new i.default(this.roll().toString()).div(0x10000000000000000),this.nextInt=(e,t)=>Math.floor(this.nextDouble().toNumber()*(t-e+1)+e),this.nextByte=()=>this.nextInt(0,255),this.nextData=e=>[...new Array(e)].map((()=>this.nextByte()));const t=s.sha256Hash(e);this.s=[a.default.BigInt(0),a.default.BigInt(0),a.default.BigInt(0),a.default.BigInt(0)],this.setS(t)}setS(e){for(let t=0;t<4;t++){let n=8*t,r=a.default.BigInt(0);for(let t=0;t<8;t++)r=a.default.asUintN(64,a.default.leftShift(r,a.default.BigInt(8))),r=a.default.asUintN(64,a.default.bitwiseOr(r,a.default.BigInt(e[n+t])));this.s[t]=a.default.asUintN(64,r)}}roll(){const e=a.default.asUintN(64,a.default.multiply(o(a.default.asUintN(64,a.default.multiply(this.s[1],a.default.BigInt(5))),7),a.default.BigInt(9))),t=a.default.asUintN(64,a.default.leftShift(this.s[1],a.default.BigInt(17)));return this.s[2]=a.default.asUintN(64,a.default.bitwiseXor(this.s[2],a.default.BigInt(this.s[0]))),this.s[3]=a.default.asUintN(64,a.default.bitwiseXor(this.s[3],a.default.BigInt(this.s[1]))),this.s[1]=a.default.asUintN(64,a.default.bitwiseXor(this.s[1],a.default.BigInt(this.s[2]))),this.s[0]=a.default.asUintN(64,a.default.bitwiseXor(this.s[0],a.default.BigInt(this.s[3]))),this.s[2]=a.default.asUintN(64,a.default.bitwiseXor(this.s[2],a.default.BigInt(t))),this.s[3]=a.default.asUintN(64,o(this.s[3],45)),e}}}}},{package:"@ngraveio/bc-ur",file:"node_modules/@ngraveio/bc-ur/dist/xoshiro.js"}],[2847,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){!function(e){var n,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,s=Math.ceil,i=Math.floor,a="[BigNumber Error] ",o=a+"Number primitive has more than 15 significant digits: ",c=1e14,u=14,l=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],f=1e7,h=1e9;function p(e){var t=0|e;return e>0||e===t?t:t-1}function m(e){for(var t,n,r=1,s=e.length,i=e[0]+"";r<s;){for(t=e[r++]+"",n=u-t.length;n--;t="0"+t);i+=t}for(s=i.length;48===i.charCodeAt(--s););return i.slice(0,s+1||1)}function g(e,t){var n,r,s=e.c,i=t.c,a=e.s,o=t.s,c=e.e,u=t.e;if(!a||!o)return null;if(n=s&&!s[0],r=i&&!i[0],n||r)return n?r?0:-o:a;if(a!=o)return a;if(n=a<0,r=c==u,!s||!i)return r?0:!s^n?1:-1;if(!r)return c>u^n?1:-1;for(o=(c=s.length)<(u=i.length)?c:u,a=0;a<o;a++)if(s[a]!=i[a])return s[a]>i[a]^n?1:-1;return c==u?0:c>u^n?1:-1}function y(e,t,n,r){if(e<t||e>n||e!==i(e))throw Error(a+(r||"Argument")+("number"==typeof e?e<t||e>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function b(e){var t=e.c.length-1;return p(e.e/u)==t&&e.c[t]%2!=0}function w(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function v(e,t,n){var r,s;if(t<0){for(s=n+".";++t;s+=n);e=s+e}else if(++t>(r=e.length)){for(s=n,t-=r;--t;s+=n);e+=s}else t<r&&(e=e.slice(0,t)+"."+e.slice(t));return e}n=function e(t){var n,S,T,E,j,k,x,_,I,P,A=q.prototype={constructor:q,toString:null,valueOf:null},C=new q(1),O=20,B=4,R=-7,N=21,F=-1e7,M=1e7,L=!1,D=1,H=0,U={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},G="0123456789abcdefghijklmnopqrstuvwxyz",$=!0;function q(e,t){var n,s,a,c,d,f,h,p,m=this;if(!(m instanceof q))return new q(e,t);if(null==t){if(e&&!0===e._isBigNumber)return m.s=e.s,void(!e.c||e.e>M?m.c=m.e=null:e.e<F?m.c=[m.e=0]:(m.e=e.e,m.c=e.c.slice()));if((f="number"==typeof e)&&0*e==0){if(m.s=1/e<0?(e=-e,-1):1,e===~~e){for(c=0,d=e;d>=10;d/=10,c++);return void(c>M?m.c=m.e=null:(m.e=c,m.c=[e]))}p=String(e)}else{if(!r.test(p=String(e)))return T(m,p,f);m.s=45==p.charCodeAt(0)?(p=p.slice(1),-1):1}(c=p.indexOf("."))>-1&&(p=p.replace(".","")),(d=p.search(/e/i))>0?(c<0&&(c=d),c+=+p.slice(d+1),p=p.substring(0,d)):c<0&&(c=p.length)}else{if(y(t,2,G.length,"Base"),10==t&&$)return K(m=new q(e),O+m.e+1,B);if(p=String(e),f="number"==typeof e){if(0*e!=0)return T(m,p,f,t);if(m.s=1/e<0?(p=p.slice(1),-1):1,q.DEBUG&&p.replace(/^0\.0*|\./,"").length>15)throw Error(o+e)}else m.s=45===p.charCodeAt(0)?(p=p.slice(1),-1):1;for(n=G.slice(0,t),c=d=0,h=p.length;d<h;d++)if(n.indexOf(s=p.charAt(d))<0){if("."==s){if(d>c){c=h;continue}}else if(!a&&(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase()))){a=!0,d=-1,c=0;continue}return T(m,String(e),f,t)}f=!1,(c=(p=S(p,t,10,m.s)).indexOf("."))>-1?p=p.replace(".",""):c=p.length}for(d=0;48===p.charCodeAt(d);d++);for(h=p.length;48===p.charCodeAt(--h););if(p=p.slice(d,++h)){if(h-=d,f&&q.DEBUG&&h>15&&(e>l||e!==i(e)))throw Error(o+m.s*e);if((c=c-d-1)>M)m.c=m.e=null;else if(c<F)m.c=[m.e=0];else{if(m.e=c,m.c=[],d=(c+1)%u,c<0&&(d+=u),d<h){for(d&&m.c.push(+p.slice(0,d)),h-=u;d<h;)m.c.push(+p.slice(d,d+=u));d=u-(p=p.slice(d)).length}else d-=h;for(;d--;p+="0");m.c.push(+p)}}else m.c=[m.e=0]}function z(e,t,n,r){var s,i,a,o,c;if(null==n?n=B:y(n,0,8),!e.c)return e.toString();if(s=e.c[0],a=e.e,null==t)c=m(e.c),c=1==r||2==r&&(a<=R||a>=N)?w(c,a):v(c,a,"0");else if(i=(e=K(new q(e),t,n)).e,o=(c=m(e.c)).length,1==r||2==r&&(t<=i||i<=R)){for(;o<t;c+="0",o++);c=w(c,i)}else if(t-=a,c=v(c,i,"0"),i+1>o){if(--t>0)for(c+=".";t--;c+="0");}else if((t+=i-o)>0)for(i+1==o&&(c+=".");t--;c+="0");return e.s<0&&s?"-"+c:c}function W(e,t){for(var n,r,s=1,i=new q(e[0]);s<e.length;s++)(!(r=new q(e[s])).s||(n=g(i,r))===t||0===n&&i.s===t)&&(i=r);return i}function V(e,t,n){for(var r=1,s=t.length;!t[--s];t.pop());for(s=t[0];s>=10;s/=10,r++);return(n=r+n*u-1)>M?e.c=e.e=null:n<F?e.c=[e.e=0]:(e.e=n,e.c=t),e}function K(e,t,n,r){var a,o,l,f,h,p,m,g=e.c,y=d;if(g){e:{for(a=1,f=g[0];f>=10;f/=10,a++);if((o=t-a)<0)o+=u,l=t,h=g[p=0],m=i(h/y[a-l-1]%10);else if((p=s((o+1)/u))>=g.length){if(!r)break e;for(;g.length<=p;g.push(0));h=m=0,a=1,l=(o%=u)-u+1}else{for(h=f=g[p],a=1;f>=10;f/=10,a++);m=(l=(o%=u)-u+a)<0?0:i(h/y[a-l-1]%10)}if(r=r||t<0||null!=g[p+1]||(l<0?h:h%y[a-l-1]),r=n<4?(m||r)&&(0==n||n==(e.s<0?3:2)):m>5||5==m&&(4==n||r||6==n&&(o>0?l>0?h/y[a-l]:0:g[p-1])%10&1||n==(e.s<0?8:7)),t<1||!g[0])return g.length=0,r?(t-=e.e+1,g[0]=y[(u-t%u)%u],e.e=-t||0):g[0]=e.e=0,e;if(0==o?(g.length=p,f=1,p--):(g.length=p+1,f=y[u-o],g[p]=l>0?i(h/y[a-l]%y[l])*f:0),r)for(;;){if(0==p){for(o=1,l=g[0];l>=10;l/=10,o++);for(l=g[0]+=f,f=1;l>=10;l/=10,f++);o!=f&&(e.e++,g[0]==c&&(g[0]=1));break}if(g[p]+=f,g[p]!=c)break;g[p--]=0,f=1}for(o=g.length;0===g[--o];g.pop());}e.e>M?e.c=e.e=null:e.e<F&&(e.c=[e.e=0])}return e}function J(e){var t,n=e.e;return null===n?e.toString():(t=m(e.c),t=n<=R||n>=N?w(t,n):v(t,n,"0"),e.s<0?"-"+t:t)}return q.clone=e,q.ROUND_UP=0,q.ROUND_DOWN=1,q.ROUND_CEIL=2,q.ROUND_FLOOR=3,q.ROUND_HALF_UP=4,q.ROUND_HALF_DOWN=5,q.ROUND_HALF_EVEN=6,q.ROUND_HALF_CEIL=7,q.ROUND_HALF_FLOOR=8,q.EUCLID=9,q.config=q.set=function(e){var t,n;if(null!=e){if("object"!=typeof e)throw Error(a+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(y(n=e[t],0,h,t),O=n),e.hasOwnProperty(t="ROUNDING_MODE")&&(y(n=e[t],0,8,t),B=n),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((n=e[t])&&n.pop?(y(n[0],-h,0,t),y(n[1],0,h,t),R=n[0],N=n[1]):(y(n,-h,h,t),R=-(N=n<0?-n:n))),e.hasOwnProperty(t="RANGE"))if((n=e[t])&&n.pop)y(n[0],-h,-1,t),y(n[1],1,h,t),F=n[0],M=n[1];else{if(y(n,-h,h,t),!n)throw Error(a+t+" cannot be zero: "+n);F=-(M=n<0?-n:n)}if(e.hasOwnProperty(t="CRYPTO")){if((n=e[t])!==!!n)throw Error(a+t+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw L=!n,Error(a+"crypto unavailable");L=n}else L=n}if(e.hasOwnProperty(t="MODULO_MODE")&&(y(n=e[t],0,9,t),D=n),e.hasOwnProperty(t="POW_PRECISION")&&(y(n=e[t],0,h,t),H=n),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(n=e[t]))throw Error(a+t+" not an object: "+n);U=n}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(n=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(n))throw Error(a+t+" invalid: "+n);$="0123456789"==n.slice(0,10),G=n}}return{DECIMAL_PLACES:O,ROUNDING_MODE:B,EXPONENTIAL_AT:[R,N],RANGE:[F,M],CRYPTO:L,MODULO_MODE:D,POW_PRECISION:H,FORMAT:U,ALPHABET:G}},q.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!q.DEBUG)return!0;var t,n,r=e.c,s=e.e,o=e.s;e:if("[object Array]"=={}.toString.call(r)){if((1===o||-1===o)&&s>=-h&&s<=h&&s===i(s)){if(0===r[0]){if(0===s&&1===r.length)return!0;break e}if((t=(s+1)%u)<1&&(t+=u),String(r[0]).length==t){for(t=0;t<r.length;t++)if((n=r[t])<0||n>=c||n!==i(n))break e;if(0!==n)return!0}}}else if(null===r&&null===s&&(null===o||1===o||-1===o))return!0;throw Error(a+"Invalid BigNumber: "+e)},q.maximum=q.max=function(){return W(arguments,-1)},q.minimum=q.min=function(){return W(arguments,1)},q.random=(E=9007199254740992,j=Math.random()*E&2097151?function(){return i(Math.random()*E)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,n,r,o,c,l=0,f=[],p=new q(C);if(null==e?e=O:y(e,0,h),o=s(e/u),L)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(o*=2));l<o;)(c=131072*t[l]+(t[l+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),t[l]=n[0],t[l+1]=n[1]):(f.push(c%1e14),l+=2);l=o/2}else{if(!crypto.randomBytes)throw L=!1,Error(a+"crypto unavailable");for(t=crypto.randomBytes(o*=7);l<o;)(c=281474976710656*(31&t[l])+1099511627776*t[l+1]+4294967296*t[l+2]+16777216*t[l+3]+(t[l+4]<<16)+(t[l+5]<<8)+t[l+6])>=9e15?crypto.randomBytes(7).copy(t,l):(f.push(c%1e14),l+=7);l=o/7}if(!L)for(;l<o;)(c=j())<9e15&&(f[l++]=c%1e14);for(o=f[--l],e%=u,o&&e&&(c=d[u-e],f[l]=i(o/c)*c);0===f[l];f.pop(),l--);if(l<0)f=[r=0];else{for(r=-1;0===f[0];f.splice(0,1),r-=u);for(l=1,c=f[0];c>=10;c/=10,l++);l<u&&(r-=u-l)}return p.e=r,p.c=f,p}),q.sum=function(){for(var e=1,t=arguments,n=new q(t[0]);e<t.length;)n=n.plus(t[e++]);return n},S=function(){var e="0123456789";function t(e,t,n,r){for(var s,i,a=[0],o=0,c=e.length;o<c;){for(i=a.length;i--;a[i]*=t);for(a[0]+=r.indexOf(e.charAt(o++)),s=0;s<a.length;s++)a[s]>n-1&&(null==a[s+1]&&(a[s+1]=0),a[s+1]+=a[s]/n|0,a[s]%=n)}return a.reverse()}return function(r,s,i,a,o){var c,u,l,d,f,h,p,g,y=r.indexOf("."),b=O,w=B;for(y>=0&&(d=H,H=0,r=r.replace(".",""),h=(g=new q(s)).pow(r.length-y),H=d,g.c=t(v(m(h.c),h.e,"0"),10,i,e),g.e=g.c.length),l=d=(p=t(r,s,i,o?(c=G,e):(c=e,G))).length;0==p[--d];p.pop());if(!p[0])return c.charAt(0);if(y<0?--l:(h.c=p,h.e=l,h.s=a,p=(h=n(h,g,b,w,i)).c,f=h.r,l=h.e),y=p[u=l+b+1],d=i/2,f=f||u<0||null!=p[u+1],f=w<4?(null!=y||f)&&(0==w||w==(h.s<0?3:2)):y>d||y==d&&(4==w||f||6==w&&1&p[u-1]||w==(h.s<0?8:7)),u<1||!p[0])r=f?v(c.charAt(1),-b,c.charAt(0)):c.charAt(0);else{if(p.length=u,f)for(--i;++p[--u]>i;)p[u]=0,u||(++l,p=[1].concat(p));for(d=p.length;!p[--d];);for(y=0,r="";y<=d;r+=c.charAt(p[y++]));r=v(r,l,c.charAt(0))}return r}}(),n=function(){function e(e,t,n){var r,s,i,a,o=0,c=e.length,u=t%f,l=t/f|0;for(e=e.slice();c--;)o=((s=u*(i=e[c]%f)+(r=l*i+(a=e[c]/f|0)*u)%f*f+o)/n|0)+(r/f|0)+l*a,e[c]=s%n;return o&&(e=[o].concat(e)),e}function t(e,t,n,r){var s,i;if(n!=r)i=n>r?1:-1;else for(s=i=0;s<n;s++)if(e[s]!=t[s]){i=e[s]>t[s]?1:-1;break}return i}function n(e,t,n,r){for(var s=0;n--;)e[n]-=s,s=e[n]<t[n]?1:0,e[n]=s*r+e[n]-t[n];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(r,s,a,o,l){var d,f,h,m,g,y,b,w,v,S,T,E,j,k,x,_,I,P=r.s==s.s?1:-1,A=r.c,C=s.c;if(!(A&&A[0]&&C&&C[0]))return new q(r.s&&s.s&&(A?!C||A[0]!=C[0]:C)?A&&0==A[0]||!C?0*P:P/0:NaN);for(v=(w=new q(P)).c=[],P=a+(f=r.e-s.e)+1,l||(l=c,f=p(r.e/u)-p(s.e/u),P=P/u|0),h=0;C[h]==(A[h]||0);h++);if(C[h]>(A[h]||0)&&f--,P<0)v.push(1),m=!0;else{for(k=A.length,_=C.length,h=0,P+=2,(g=i(l/(C[0]+1)))>1&&(C=e(C,g,l),A=e(A,g,l),_=C.length,k=A.length),j=_,T=(S=A.slice(0,_)).length;T<_;S[T++]=0);I=C.slice(),I=[0].concat(I),x=C[0],C[1]>=l/2&&x++;do{if(g=0,(d=t(C,S,_,T))<0){if(E=S[0],_!=T&&(E=E*l+(S[1]||0)),(g=i(E/x))>1)for(g>=l&&(g=l-1),b=(y=e(C,g,l)).length,T=S.length;1==t(y,S,b,T);)g--,n(y,_<b?I:C,b,l),b=y.length,d=1;else 0==g&&(d=g=1),b=(y=C.slice()).length;if(b<T&&(y=[0].concat(y)),n(S,y,T,l),T=S.length,-1==d)for(;t(C,S,_,T)<1;)g++,n(S,_<T?I:C,T,l),T=S.length}else 0===d&&(g++,S=[0]);v[h++]=g,S[0]?S[T++]=A[j]||0:(S=[A[j]],T=1)}while((j++<k||null!=S[0])&&P--);m=null!=S[0],v[0]||v.splice(0,1)}if(l==c){for(h=1,P=v[0];P>=10;P/=10,h++);K(w,a+(w.e=h+f*u-1)+1,o,m)}else w.e=f,w.r=+m;return w}}(),k=/^(-?)0([xbo])(?=\w[\w.]*$)/i,x=/^([^.]+)\.$/,_=/^\.([^.]+)$/,I=/^-?(Infinity|NaN)$/,P=/^\s*\+(?=[\w.])|^\s+|\s+$/g,T=function(e,t,n,r){var s,i=n?t:t.replace(P,"");if(I.test(i))e.s=isNaN(i)?null:i<0?-1:1;else{if(!n&&(i=i.replace(k,(function(e,t,n){return s="x"==(n=n.toLowerCase())?16:"b"==n?2:8,r&&r!=s?e:t})),r&&(s=r,i=i.replace(x,"$1").replace(_,"0.$1")),t!=i))return new q(i,s);if(q.DEBUG)throw Error(a+"Not a"+(r?" base "+r:"")+" number: "+t);e.s=null}e.c=e.e=null},A.absoluteValue=A.abs=function(){var e=new q(this);return e.s<0&&(e.s=1),e},A.comparedTo=function(e,t){return g(this,new q(e,t))},A.decimalPlaces=A.dp=function(e,t){var n,r,s,i=this;if(null!=e)return y(e,0,h),null==t?t=B:y(t,0,8),K(new q(i),e+i.e+1,t);if(!(n=i.c))return null;if(r=((s=n.length-1)-p(this.e/u))*u,s=n[s])for(;s%10==0;s/=10,r--);return r<0&&(r=0),r},A.dividedBy=A.div=function(e,t){return n(this,new q(e,t),O,B)},A.dividedToIntegerBy=A.idiv=function(e,t){return n(this,new q(e,t),0,1)},A.exponentiatedBy=A.pow=function(e,t){var n,r,o,c,l,d,f,h,p=this;if((e=new q(e)).c&&!e.isInteger())throw Error(a+"Exponent not an integer: "+J(e));if(null!=t&&(t=new q(t)),l=e.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!e.c||!e.c[0])return h=new q(Math.pow(+J(p),l?e.s*(2-b(e)):+J(e))),t?h.mod(t):h;if(d=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new q(NaN);(r=!d&&p.isInteger()&&t.isInteger())&&(p=p.mod(t))}else{if(e.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||l&&p.c[1]>=24e7:p.c[0]<8e13||l&&p.c[0]<=9999975e7)))return c=p.s<0&&b(e)?-0:0,p.e>-1&&(c=1/c),new q(d?1/c:c);H&&(c=s(H/u+2))}for(l?(n=new q(.5),d&&(e.s=1),f=b(e)):f=(o=Math.abs(+J(e)))%2,h=new q(C);;){if(f){if(!(h=h.times(p)).c)break;c?h.c.length>c&&(h.c.length=c):r&&(h=h.mod(t))}if(o){if(0===(o=i(o/2)))break;f=o%2}else if(K(e=e.times(n),e.e+1,1),e.e>14)f=b(e);else{if(0===(o=+J(e)))break;f=o%2}p=p.times(p),c?p.c&&p.c.length>c&&(p.c.length=c):r&&(p=p.mod(t))}return r?h:(d&&(h=C.div(h)),t?h.mod(t):c?K(h,H,B,undefined):h)},A.integerValue=function(e){var t=new q(this);return null==e?e=B:y(e,0,8),K(t,t.e+1,e)},A.isEqualTo=A.eq=function(e,t){return 0===g(this,new q(e,t))},A.isFinite=function(){return!!this.c},A.isGreaterThan=A.gt=function(e,t){return g(this,new q(e,t))>0},A.isGreaterThanOrEqualTo=A.gte=function(e,t){return 1===(t=g(this,new q(e,t)))||0===t},A.isInteger=function(){return!!this.c&&p(this.e/u)>this.c.length-2},A.isLessThan=A.lt=function(e,t){return g(this,new q(e,t))<0},A.isLessThanOrEqualTo=A.lte=function(e,t){return-1===(t=g(this,new q(e,t)))||0===t},A.isNaN=function(){return!this.s},A.isNegative=function(){return this.s<0},A.isPositive=function(){return this.s>0},A.isZero=function(){return!!this.c&&0==this.c[0]},A.minus=function(e,t){var n,r,s,i,a=this,o=a.s;if(t=(e=new q(e,t)).s,!o||!t)return new q(NaN);if(o!=t)return e.s=-t,a.plus(e);var l=a.e/u,d=e.e/u,f=a.c,h=e.c;if(!l||!d){if(!f||!h)return f?(e.s=-t,e):new q(h?a:NaN);if(!f[0]||!h[0])return h[0]?(e.s=-t,e):new q(f[0]?a:3==B?-0:0)}if(l=p(l),d=p(d),f=f.slice(),o=l-d){for((i=o<0)?(o=-o,s=f):(d=l,s=h),s.reverse(),t=o;t--;s.push(0));s.reverse()}else for(r=(i=(o=f.length)<(t=h.length))?o:t,o=t=0;t<r;t++)if(f[t]!=h[t]){i=f[t]<h[t];break}if(i&&(s=f,f=h,h=s,e.s=-e.s),(t=(r=h.length)-(n=f.length))>0)for(;t--;f[n++]=0);for(t=c-1;r>o;){if(f[--r]<h[r]){for(n=r;n&&!f[--n];f[n]=t);--f[n],f[r]+=c}f[r]-=h[r]}for(;0==f[0];f.splice(0,1),--d);return f[0]?V(e,f,d):(e.s=3==B?-1:1,e.c=[e.e=0],e)},A.modulo=A.mod=function(e,t){var r,s,i=this;return e=new q(e,t),!i.c||!e.s||e.c&&!e.c[0]?new q(NaN):!e.c||i.c&&!i.c[0]?new q(i):(9==D?(s=e.s,e.s=1,r=n(i,e,0,3),e.s=s,r.s*=s):r=n(i,e,0,D),(e=i.minus(r.times(e))).c[0]||1!=D||(e.s=i.s),e)},A.multipliedBy=A.times=function(e,t){var n,r,s,i,a,o,l,d,h,m,g,y,b,w,v,S=this,T=S.c,E=(e=new q(e,t)).c;if(!(T&&E&&T[0]&&E[0]))return!S.s||!e.s||T&&!T[0]&&!E||E&&!E[0]&&!T?e.c=e.e=e.s=null:(e.s*=S.s,T&&E?(e.c=[0],e.e=0):e.c=e.e=null),e;for(r=p(S.e/u)+p(e.e/u),e.s*=S.s,(l=T.length)<(m=E.length)&&(b=T,T=E,E=b,s=l,l=m,m=s),s=l+m,b=[];s--;b.push(0));for(w=c,v=f,s=m;--s>=0;){for(n=0,g=E[s]%v,y=E[s]/v|0,i=s+(a=l);i>s;)n=((d=g*(d=T[--a]%v)+(o=y*d+(h=T[a]/v|0)*g)%v*v+b[i]+n)/w|0)+(o/v|0)+y*h,b[i--]=d%w;b[i]=n}return n?++r:b.splice(0,1),V(e,b,r)},A.negated=function(){var e=new q(this);return e.s=-e.s||null,e},A.plus=function(e,t){var n,r=this,s=r.s;if(t=(e=new q(e,t)).s,!s||!t)return new q(NaN);if(s!=t)return e.s=-t,r.minus(e);var i=r.e/u,a=e.e/u,o=r.c,l=e.c;if(!i||!a){if(!o||!l)return new q(s/0);if(!o[0]||!l[0])return l[0]?e:new q(o[0]?r:0*s)}if(i=p(i),a=p(a),o=o.slice(),s=i-a){for(s>0?(a=i,n=l):(s=-s,n=o),n.reverse();s--;n.push(0));n.reverse()}for((s=o.length)-(t=l.length)<0&&(n=l,l=o,o=n,t=s),s=0;t;)s=(o[--t]=o[t]+l[t]+s)/c|0,o[t]=c===o[t]?0:o[t]%c;return s&&(o=[s].concat(o),++a),V(e,o,a)},A.precision=A.sd=function(e,t){var n,r,s,i=this;if(null!=e&&e!==!!e)return y(e,1,h),null==t?t=B:y(t,0,8),K(new q(i),e,t);if(!(n=i.c))return null;if(r=(s=n.length-1)*u+1,s=n[s]){for(;s%10==0;s/=10,r--);for(s=n[0];s>=10;s/=10,r++);}return e&&i.e+1>r&&(r=i.e+1),r},A.shiftedBy=function(e){return y(e,-9007199254740991,l),this.times("1e"+e)},A.squareRoot=A.sqrt=function(){var e,t,r,s,i,a=this,o=a.c,c=a.s,u=a.e,l=O+4,d=new q("0.5");if(1!==c||!o||!o[0])return new q(!c||c<0&&(!o||o[0])?NaN:o?a:1/0);if(0==(c=Math.sqrt(+J(a)))||c==1/0?(((t=m(o)).length+u)%2==0&&(t+="0"),c=Math.sqrt(+t),u=p((u+1)/2)-(u<0||u%2),r=new q(t=c==1/0?"5e"+u:(t=c.toExponential()).slice(0,t.indexOf("e")+1)+u)):r=new q(c+""),r.c[0])for((c=(u=r.e)+l)<3&&(c=0);;)if(i=r,r=d.times(i.plus(n(a,i,l,1))),m(i.c).slice(0,c)===(t=m(r.c)).slice(0,c)){if(r.e<u&&--c,"9999"!=(t=t.slice(c-3,c+1))&&(s||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(K(r,r.e+O+2,1),e=!r.times(r).eq(a));break}if(!s&&(K(i,i.e+O+2,0),i.times(i).eq(a))){r=i;break}l+=4,c+=4,s=1}return K(r,r.e+O+1,B,e)},A.toExponential=function(e,t){return null!=e&&(y(e,0,h),e++),z(this,e,t,1)},A.toFixed=function(e,t){return null!=e&&(y(e,0,h),e=e+this.e+1),z(this,e,t)},A.toFormat=function(e,t,n){var r,s=this;if(null==n)null!=e&&t&&"object"==typeof t?(n=t,t=null):e&&"object"==typeof e?(n=e,e=t=null):n=U;else if("object"!=typeof n)throw Error(a+"Argument not an object: "+n);if(r=s.toFixed(e,t),s.c){var i,o=r.split("."),c=+n.groupSize,u=+n.secondaryGroupSize,l=n.groupSeparator||"",d=o[0],f=o[1],h=s.s<0,p=h?d.slice(1):d,m=p.length;if(u&&(i=c,c=u,u=i,m-=i),c>0&&m>0){for(i=m%c||c,d=p.substr(0,i);i<m;i+=c)d+=l+p.substr(i,c);u>0&&(d+=l+p.slice(i)),h&&(d="-"+d)}r=f?d+(n.decimalSeparator||"")+((u=+n.fractionGroupSize)?f.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):f):d}return(n.prefix||"")+r+(n.suffix||"")},A.toFraction=function(e){var t,r,s,i,o,c,l,f,h,p,g,y,b=this,w=b.c;if(null!=e&&(!(l=new q(e)).isInteger()&&(l.c||1!==l.s)||l.lt(C)))throw Error(a+"Argument "+(l.isInteger()?"out of range: ":"not an integer: ")+J(l));if(!w)return new q(b);for(t=new q(C),h=r=new q(C),s=f=new q(C),y=m(w),o=t.e=y.length-b.e-1,t.c[0]=d[(c=o%u)<0?u+c:c],e=!e||l.comparedTo(t)>0?o>0?t:h:l,c=M,M=1/0,l=new q(y),f.c[0]=0;p=n(l,t,0,1),1!=(i=r.plus(p.times(s))).comparedTo(e);)r=s,s=i,h=f.plus(p.times(i=h)),f=i,t=l.minus(p.times(i=t)),l=i;return i=n(e.minus(r),s,0,1),f=f.plus(i.times(h)),r=r.plus(i.times(s)),f.s=h.s=b.s,g=n(h,s,o*=2,B).minus(b).abs().comparedTo(n(f,r,o,B).minus(b).abs())<1?[h,s]:[f,r],M=c,g},A.toNumber=function(){return+J(this)},A.toPrecision=function(e,t){return null!=e&&y(e,1,h),z(this,e,t,2)},A.toString=function(e){var t,n=this,r=n.s,s=n.e;return null===s?r?(t="Infinity",r<0&&(t="-"+t)):t="NaN":(null==e?t=s<=R||s>=N?w(m(n.c),s):v(m(n.c),s,"0"):10===e&&$?t=v(m((n=K(new q(n),O+s+1,B)).c),n.e,"0"):(y(e,2,G.length,"Base"),t=S(v(m(n.c),s,"0"),10,e,r,!0)),r<0&&n.c[0]&&(t="-"+t)),t},A.valueOf=A.toJSON=function(){return J(this)},A._isBigNumber=!0,null!=t&&q.set(t),q}(),n.default=n.BigNumber=n,"function"==typeof define&&define.amd?define((function(){return n})):void 0!==t&&t.exports?t.exports=n:(e||(e="undefined"!=typeof self&&self?self:window),e.BigNumber=n)}(this)}}},{package:"@ngraveio/bc-ur>bignumber.js",file:"node_modules/@ngraveio/bc-ur/node_modules/bignumber.js/bignumber.js"}],[2848,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function s(e){if("boolean"!=typeof e)throw new Error(`boolean expected, not ${e}`)}function i(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function a(e,...t){if(!i(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function o(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("hash must be wrapped by utils.wrapConstructor");r(e.outputLen),r(e.blockLen)}function c(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function u(e,t){a(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(n,"__esModule",{value:!0}),n.output=n.exists=n.hash=n.bytes=n.bool=n.number=n.isBytes=void 0,n.number=r,n.bool=s,n.isBytes=i,n.bytes=a,n.hash=o,n.exists=c,n.output=u;const l={number:r,bool:s,bytes:a,hash:o,exists:c,output:u};n.default=l}}},{package:"@metamask/profile-sync-controller>@noble/ciphers",file:"node_modules/@noble/ciphers/_assert.js"}],[2849,{"./_assert.js":2848,"./utils.js":2852},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.polyval=n.ghash=n._toGHASHKey=void 0;const r=e("./utils.js"),s=e("./_assert.js"),i=16,a=new Uint8Array(16),o=(0,r.u32)(a),c=e=>(e>>>0&255)<<24|(e>>>8&255)<<16|(e>>>16&255)<<8|e>>>24&255;function u(e){e.reverse();const t=1&e[15];let n=0;for(let t=0;t<e.length;t++){const r=e[t];e[t]=r>>>1|n,n=(1&r)<<7}return e[0]^=225&-t,e}n._toGHASHKey=u;class l{constructor(e,t){this.blockLen=i,this.outputLen=i,this.s0=0,this.s1=0,this.s2=0,this.s3=0,this.finished=!1,e=(0,r.toBytes)(e),(0,s.bytes)(e,16);const n=(0,r.createView)(e);let a=n.getUint32(0,!1),o=n.getUint32(4,!1),u=n.getUint32(8,!1),l=n.getUint32(12,!1);const d=[];for(let e=0;e<128;e++)d.push({s0:c(a),s1:c(o),s2:c(u),s3:c(l)}),({s0:a,s1:o,s2:u,s3:l}={s3:(p=u)<<31|(m=l)>>>1,s2:(h=o)<<31|p>>>1,s1:(f=a)<<31|h>>>1,s0:f>>>1^225<<24&-(1&m)});var f,h,p,m;const g=(y=t||1024)>65536?8:y>1024?4:2;var y;if(![1,2,4,8].includes(g))throw new Error(`ghash: wrong window size=${g}, should be 2, 4 or 8`);this.W=g;const b=128/g,w=this.windowSize=2**g,v=[];for(let e=0;e<b;e++)for(let t=0;t<w;t++){let n=0,r=0,s=0,i=0;for(let a=0;a<g;a++){if(!(t>>>g-a-1&1))continue;const{s0:o,s1:c,s2:u,s3:l}=d[g*e+a];n^=o,r^=c,s^=u,i^=l}v.push({s0:n,s1:r,s2:s,s3:i})}this.t=v}_updateBlock(e,t,n,r){e^=this.s0,t^=this.s1,n^=this.s2,r^=this.s3;const{W:s,t:i,windowSize:a}=this;let o=0,c=0,u=0,l=0;const d=(1<<s)-1;let f=0;for(const h of[e,t,n,r])for(let e=0;e<4;e++){const t=h>>>8*e&255;for(let e=8/s-1;e>=0;e--){const n=t>>>s*e&d,{s0:r,s1:h,s2:p,s3:m}=i[f*a+n];o^=r,c^=h,u^=p,l^=m,f+=1}}this.s0=o,this.s1=c,this.s2=u,this.s3=l}update(e){e=(0,r.toBytes)(e),(0,s.exists)(this);const t=(0,r.u32)(e),n=Math.floor(e.length/i),c=e.length%i;for(let e=0;e<n;e++)this._updateBlock(t[4*e+0],t[4*e+1],t[4*e+2],t[4*e+3]);return c&&(a.set(e.subarray(n*i)),this._updateBlock(o[0],o[1],o[2],o[3]),o.fill(0)),this}destroy(){const{t:e}=this;for(const t of e)t.s0=0,t.s1=0,t.s2=0,t.s3=0}digestInto(e){(0,s.exists)(this),(0,s.output)(e,this),this.finished=!0;const{s0:t,s1:n,s2:i,s3:a}=this,o=(0,r.u32)(e);return o[0]=t,o[1]=n,o[2]=i,o[3]=a,e}digest(){const e=new Uint8Array(i);return this.digestInto(e),this.destroy(),e}}class d extends l{constructor(e,t){const n=u((e=(0,r.toBytes)(e)).slice());super(n,t),n.fill(0)}update(e){e=(0,r.toBytes)(e),(0,s.exists)(this);const t=(0,r.u32)(e),n=e.length%i,u=Math.floor(e.length/i);for(let e=0;e<u;e++)this._updateBlock(c(t[4*e+3]),c(t[4*e+2]),c(t[4*e+1]),c(t[4*e+0]));return n&&(a.set(e.subarray(u*i)),this._updateBlock(c(o[3]),c(o[2]),c(o[1]),c(o[0])),o.fill(0)),this}digestInto(e){(0,s.exists)(this),(0,s.output)(e,this),this.finished=!0;const{s0:t,s1:n,s2:i,s3:a}=this,o=(0,r.u32)(e);return o[0]=t,o[1]=n,o[2]=i,o[3]=a,e.reverse()}}function f(e){const t=(t,n)=>e(n,t.length).update((0,r.toBytes)(t)).digest(),n=e(new Uint8Array(16),0);return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=(t,n)=>e(t,n),t}n.ghash=f(((e,t)=>new l(e,t))),n.polyval=f(((e,t)=>new d(e,t)))}}},{package:"@metamask/profile-sync-controller>@noble/ciphers",file:"node_modules/@noble/ciphers/_polyval.js"}],[2850,{"./_assert.js":2848,"./_polyval.js":2849,"./utils.js":2852},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.unsafe=n.siv=n.gcm=n.cfb=n.cbc=n.ecb=n.ctr=n.expandKeyDecLE=n.expandKeyLE=void 0;const r=e("./utils.js"),s=e("./_polyval.js"),i=e("./_assert.js"),a=16,o=new Uint8Array(a),c=283;function u(e){return e<<1^c&-(e>>7)}function l(e,t){let n=0;for(;t>0;t>>=1)n^=e&-(1&t),e=u(e);return n}const d=(()=>{let e=new Uint8Array(256);for(let t=0,n=1;t<256;t++,n^=u(n))e[t]=n;const t=new Uint8Array(256);t[0]=99;for(let n=0;n<255;n++){let r=e[255-n];r|=r<<8,t[e[n]]=255&(r^r>>4^r>>5^r>>6^r>>7^99)}return t})(),f=d.map(((e,t)=>d.indexOf(t))),h=e=>e<<24|e>>>8,p=e=>e<<8|e>>>24;function m(e,t){if(256!==e.length)throw new Error("Wrong sbox length");const n=new Uint32Array(256).map(((n,r)=>t(e[r]))),r=n.map(p),s=r.map(p),i=s.map(p),a=new Uint32Array(65536),o=new Uint32Array(65536),c=new Uint16Array(65536);for(let t=0;t<256;t++)for(let u=0;u<256;u++){const l=256*t+u;a[l]=n[t]^r[u],o[l]=s[t]^i[u],c[l]=e[t]<<8|e[u]}return{sbox:e,sbox2:c,T0:n,T1:r,T2:s,T3:i,T01:a,T23:o}}const g=m(d,(e=>l(e,3)<<24|e<<16|e<<8|l(e,2))),y=m(f,(e=>l(e,11)<<24|l(e,13)<<16|l(e,9)<<8|l(e,14))),b=(()=>{const e=new Uint8Array(16);for(let t=0,n=1;t<16;t++,n=u(n))e[t]=n;return e})();function w(e){(0,i.bytes)(e);const t=e.length;if(![16,24,32].includes(t))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${t}`);const{sbox2:n}=g,s=(0,r.u32)(e),a=s.length,o=e=>T(n,e,e,e,e),c=new Uint32Array(t+28);c.set(s);for(let e=a;e<c.length;e++){let t=c[e-1];e%a==0?t=o(h(t))^b[e/a-1]:a>6&&e%a==4&&(t=o(t)),c[e]=c[e-a]^t}return c}function v(e){const t=w(e),n=t.slice(),r=t.length,{sbox2:s}=g,{T0:i,T1:a,T2:o,T3:c}=y;for(let e=0;e<r;e+=4)for(let s=0;s<4;s++)n[e+s]=t[r-e-4+s];t.fill(0);for(let e=4;e<r-4;e++){const t=n[e],r=T(s,t,t,t,t);n[e]=i[255&r]^a[r>>>8&255]^o[r>>>16&255]^c[r>>>24]}return n}function S(e,t,n,r,s,i){return e[n<<8&65280|r>>>8&255]^t[s>>>8&65280|i>>>24&255]}function T(e,t,n,r,s){return e[255&t|65280&n]|e[r>>>16&255|s>>>16&65280]<<16}function E(e,t,n,r,s){const{sbox2:i,T01:a,T23:o}=g;let c=0;t^=e[c++],n^=e[c++],r^=e[c++],s^=e[c++];const u=e.length/4-2;for(let i=0;i<u;i++){const i=e[c++]^S(a,o,t,n,r,s),u=e[c++]^S(a,o,n,r,s,t),l=e[c++]^S(a,o,r,s,t,n),d=e[c++]^S(a,o,s,t,n,r);t=i,n=u,r=l,s=d}return{s0:e[c++]^T(i,t,n,r,s),s1:e[c++]^T(i,n,r,s,t),s2:e[c++]^T(i,r,s,t,n),s3:e[c++]^T(i,s,t,n,r)}}function j(e,t,n,r,s){const{sbox2:i,T01:a,T23:o}=y;let c=0;t^=e[c++],n^=e[c++],r^=e[c++],s^=e[c++];const u=e.length/4-2;for(let i=0;i<u;i++){const i=e[c++]^S(a,o,t,s,r,n),u=e[c++]^S(a,o,n,t,s,r),l=e[c++]^S(a,o,r,n,t,s),d=e[c++]^S(a,o,s,r,n,t);t=i,n=u,r=l,s=d}return{s0:e[c++]^T(i,t,s,r,n),s1:e[c++]^T(i,n,t,s,r),s2:e[c++]^T(i,r,n,t,s),s3:e[c++]^T(i,s,r,n,t)}}function k(e,t){if(!t)return new Uint8Array(e);if((0,i.bytes)(t),t.length<e)throw new Error(`aes: wrong destination length, expected at least ${e}, got: ${t.length}`);return t}function x(e,t,n,s){(0,i.bytes)(t,a),(0,i.bytes)(n);const o=n.length;s=k(o,s);const c=t,u=(0,r.u32)(c);let{s0:l,s1:d,s2:f,s3:h}=E(e,u[0],u[1],u[2],u[3]);const p=(0,r.u32)(n),m=(0,r.u32)(s);for(let t=0;t+4<=p.length;t+=4){m[t+0]=p[t+0]^l,m[t+1]=p[t+1]^d,m[t+2]=p[t+2]^f,m[t+3]=p[t+3]^h;let n=1;for(let e=c.length-1;e>=0;e--)n=n+(255&c[e])|0,c[e]=255&n,n>>>=8;({s0:l,s1:d,s2:f,s3:h}=E(e,u[0],u[1],u[2],u[3]))}const g=a*Math.floor(p.length/4);if(g<o){const e=new Uint32Array([l,d,f,h]),t=(0,r.u8)(e);for(let e=g,r=0;e<o;e++,r++)s[e]=n[e]^t[r]}return s}function _(e,t,n,s,o){(0,i.bytes)(n,a),(0,i.bytes)(s),o=k(s.length,o);const c=n,u=(0,r.u32)(c),l=(0,r.createView)(c),d=(0,r.u32)(s),f=(0,r.u32)(o),h=t?0:12,p=s.length;let m=l.getUint32(h,t),{s0:g,s1:y,s2:b,s3:w}=E(e,u[0],u[1],u[2],u[3]);for(let n=0;n+4<=d.length;n+=4)f[n+0]=d[n+0]^g,f[n+1]=d[n+1]^y,f[n+2]=d[n+2]^b,f[n+3]=d[n+3]^w,m=m+1>>>0,l.setUint32(h,m,t),({s0:g,s1:y,s2:b,s3:w}=E(e,u[0],u[1],u[2],u[3]));const v=a*Math.floor(d.length/4);if(v<p){const e=new Uint32Array([g,y,b,w]),t=(0,r.u8)(e);for(let e=v,n=0;e<p;e++,n++)o[e]=s[e]^t[n]}return o}function I(e){if((0,i.bytes)(e),e.length%a!=0)throw new Error("aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size 16")}function P(e,t,n){let s=e.length;const i=s%a;if(!t&&0!==i)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");const o=(0,r.u32)(e);if(t){let e=a-i;e||(e=a),s+=e}const c=k(s,n);return{b:o,o:(0,r.u32)(c),out:c}}function A(e,t){if(!t)return e;const n=e.length;if(!n)throw new Error("aes/pcks5: empty ciphertext not allowed");const r=e[n-1];if(r<=0||r>16)throw new Error(`aes/pcks5: wrong padding byte: ${r}`);const s=e.subarray(0,-r);for(let t=0;t<r;t++)if(e[n-t-1]!==r)throw new Error("aes/pcks5: wrong padding");return s}function C(e){const t=new Uint8Array(16),n=(0,r.u32)(t);t.set(e);const s=a-e.length;for(let e=a-s;e<a;e++)t[e]=s;return n}function O(e,t,n,s,i){const a=e.create(n,s.length+(i?.length||0));i&&a.update(i),a.update(s);const o=new Uint8Array(16),c=(0,r.createView)(o);return i&&(0,r.setBigUint64)(c,0,BigInt(8*i.length),t),(0,r.setBigUint64)(c,8,BigInt(8*s.length),t),a.update(o),a.digest()}n.expandKeyLE=w,n.expandKeyDecLE=v,n.ctr=(0,r.wrapCipher)({blockSize:16,nonceLength:16},(function(e,t){function n(n,r){const s=w(e),i=t.slice(),a=x(s,i,n,r);return s.fill(0),i.fill(0),a}return(0,i.bytes)(e),(0,i.bytes)(t,a),{encrypt:(e,t)=>n(e,t),decrypt:(e,t)=>n(e,t)}})),n.ecb=(0,r.wrapCipher)({blockSize:16},(function(e,t={}){(0,i.bytes)(e);const n=!t.disablePadding;return{encrypt:(t,r)=>{(0,i.bytes)(t);const{b:s,o:a,out:o}=P(t,n,r),c=w(e);let u=0;for(;u+4<=s.length;){const{s0:e,s1:t,s2:n,s3:r}=E(c,s[u+0],s[u+1],s[u+2],s[u+3]);a[u++]=e,a[u++]=t,a[u++]=n,a[u++]=r}if(n){const e=C(t.subarray(4*u)),{s0:n,s1:r,s2:s,s3:i}=E(c,e[0],e[1],e[2],e[3]);a[u++]=n,a[u++]=r,a[u++]=s,a[u++]=i}return c.fill(0),o},decrypt:(t,s)=>{I(t);const i=v(e),a=k(t.length,s),o=(0,r.u32)(t),c=(0,r.u32)(a);for(let e=0;e+4<=o.length;){const{s0:t,s1:n,s2:r,s3:s}=j(i,o[e+0],o[e+1],o[e+2],o[e+3]);c[e++]=t,c[e++]=n,c[e++]=r,c[e++]=s}return i.fill(0),A(a,n)}}})),n.cbc=(0,r.wrapCipher)({blockSize:16,nonceLength:16},(function(e,t,n={}){(0,i.bytes)(e),(0,i.bytes)(t,16);const s=!n.disablePadding;return{encrypt:(n,i)=>{const a=w(e),{b:o,o:c,out:u}=P(n,s,i),l=(0,r.u32)(t);let d=l[0],f=l[1],h=l[2],p=l[3],m=0;for(;m+4<=o.length;)d^=o[m+0],f^=o[m+1],h^=o[m+2],p^=o[m+3],({s0:d,s1:f,s2:h,s3:p}=E(a,d,f,h,p)),c[m++]=d,c[m++]=f,c[m++]=h,c[m++]=p;if(s){const e=C(n.subarray(4*m));d^=e[0],f^=e[1],h^=e[2],p^=e[3],({s0:d,s1:f,s2:h,s3:p}=E(a,d,f,h,p)),c[m++]=d,c[m++]=f,c[m++]=h,c[m++]=p}return a.fill(0),u},decrypt:(n,i)=>{I(n);const a=v(e),o=(0,r.u32)(t),c=k(n.length,i),u=(0,r.u32)(n),l=(0,r.u32)(c);let d=o[0],f=o[1],h=o[2],p=o[3];for(let e=0;e+4<=u.length;){const t=d,n=f,r=h,s=p;d=u[e+0],f=u[e+1],h=u[e+2],p=u[e+3];const{s0:i,s1:o,s2:c,s3:m}=j(a,d,f,h,p);l[e++]=i^t,l[e++]=o^n,l[e++]=c^r,l[e++]=m^s}return a.fill(0),A(c,s)}}})),n.cfb=(0,r.wrapCipher)({blockSize:16,nonceLength:16},(function(e,t){function n(n,s,i){const o=w(e),c=n.length;i=k(c,i);const u=(0,r.u32)(n),l=(0,r.u32)(i),d=s?l:u,f=(0,r.u32)(t);let h=f[0],p=f[1],m=f[2],g=f[3];for(let e=0;e+4<=u.length;){const{s0:t,s1:n,s2:r,s3:s}=E(o,h,p,m,g);l[e+0]=u[e+0]^t,l[e+1]=u[e+1]^n,l[e+2]=u[e+2]^r,l[e+3]=u[e+3]^s,h=d[e++],p=d[e++],m=d[e++],g=d[e++]}const y=a*Math.floor(u.length/4);if(y<c){({s0:h,s1:p,s2:m,s3:g}=E(o,h,p,m,g));const e=(0,r.u8)(new Uint32Array([h,p,m,g]));for(let t=y,r=0;t<c;t++,r++)i[t]=n[t]^e[r];e.fill(0)}return o.fill(0),i}return(0,i.bytes)(e),(0,i.bytes)(t,16),{encrypt:(e,t)=>n(e,!0,t),decrypt:(e,t)=>n(e,!1,t)}})),n.gcm=(0,r.wrapCipher)({blockSize:16,nonceLength:12,tagLength:16},(function(e,t,n){if((0,i.bytes)(t),0===t.length)throw new Error("aes/gcm: empty nonce");const a=16;function c(e,t,r){const i=O(s.ghash,!1,e,r,n);for(let e=0;e<t.length;e++)i[e]^=t[e];return i}function u(){const n=w(e),i=o.slice(),a=o.slice();if(_(n,!1,a,a,i),12===t.length)a.set(t);else{const e=o.slice(),n=(0,r.createView)(e);(0,r.setBigUint64)(n,8,BigInt(8*t.length),!1),s.ghash.create(i).update(t).update(e).digestInto(a)}return{xk:n,authKey:i,counter:a,tagMask:_(n,!1,a,o)}}return{encrypt:e=>{(0,i.bytes)(e);const{xk:t,authKey:n,counter:r,tagMask:s}=u(),o=new Uint8Array(e.length+a);_(t,!1,r,e,o);const l=c(n,s,o.subarray(0,o.length-a));return o.set(l,e.length),t.fill(0),o},decrypt:e=>{if((0,i.bytes)(e),e.length<a)throw new Error("aes/gcm: ciphertext less than tagLen (16)");const{xk:t,authKey:n,counter:s,tagMask:o}=u(),l=e.subarray(0,-16),d=e.subarray(-16),f=c(n,o,l);if(!(0,r.equalBytes)(f,d))throw new Error("aes/gcm: invalid ghash tag");const h=_(t,!1,s,l);return n.fill(0),o.fill(0),t.fill(0),h}}}));const B=(e,t,n)=>r=>{if(!Number.isSafeInteger(r)||t>r||r>n)throw new Error(`${e}: invalid value=${r}, must be [${t}..${n}]`)};function R(e){return null!=e&&"object"==typeof e&&(e instanceof Uint32Array||"Uint32Array"===e.constructor.name)}n.siv=(0,r.wrapCipher)({blockSize:16,nonceLength:12,tagLength:16},(function(e,t,n){const a=B("AAD",0,2**36),o=B("plaintext",0,2**36),c=B("nonce",12,12),u=B("ciphertext",16,2**36+16);function l(){const n=e.length;if(16!==n&&24!==n&&32!==n)throw new Error(`key length must be 16, 24 or 32 bytes, got: ${n} bytes`);const s=w(e),i=new Uint8Array(n),a=new Uint8Array(16),o=(0,r.u32)(t);let c=0,u=o[0],l=o[1],d=o[2],f=0;for(const e of[a,i].map(r.u32)){const t=(0,r.u32)(e);for(let e=0;e<t.length;e+=2){const{s0:n,s1:r}=E(s,c,u,l,d);t[e+0]=n,t[e+1]=r,c=++f}}return s.fill(0),{authKey:a,encKey:w(i)}}function d(e,i,a){const o=O(s.polyval,!0,i,a,n);for(let e=0;e<12;e++)o[e]^=t[e];o[15]&=127;const c=(0,r.u32)(o);let u=c[0],l=c[1],d=c[2],f=c[3];return({s0:u,s1:l,s2:d,s3:f}=E(e,u,l,d,f)),c[0]=u,c[1]=l,c[2]=d,c[3]=f,o}function f(e,t,n){let r=t.slice();return r[15]|=128,_(e,!0,r,n)}return(0,i.bytes)(t),c(t.length),n&&((0,i.bytes)(n),a(n.length)),{encrypt:e=>{(0,i.bytes)(e),o(e.length);const{encKey:t,authKey:n}=l(),r=d(t,n,e),s=new Uint8Array(e.length+16);return s.set(r,e.length),s.set(f(t,r,e)),t.fill(0),n.fill(0),s},decrypt:e=>{(0,i.bytes)(e),u(e.length);const t=e.subarray(-16),{encKey:n,authKey:s}=l(),a=f(n,t,e.subarray(0,-16)),o=d(n,s,a);if(n.fill(0),s.fill(0),!(0,r.equalBytes)(t,o))throw new Error("invalid polyval tag");return a}}})),n.unsafe={expandKeyLE:w,expandKeyDecLE:v,encrypt:E,decrypt:j,encryptBlock:function(e,t){if((0,i.bytes)(t,16),!R(e))throw new Error("_encryptBlock accepts result of expandKeyLE");const n=(0,r.u32)(t);let{s0:s,s1:a,s2:o,s3:c}=E(e,n[0],n[1],n[2],n[3]);return n[0]=s,n[1]=a,n[2]=o,n[3]=c,t},decryptBlock:function(e,t){if((0,i.bytes)(t,16),!R(e))throw new Error("_decryptBlock accepts result of expandKeyLE");const n=(0,r.u32)(t);let{s0:s,s1:a,s2:o,s3:c}=j(e,n[0],n[1],n[2],n[3]);return n[0]=s,n[1]=a,n[2]=o,n[3]=c,t},ctrCounter:x,ctr32:_}}}},{package:"@metamask/profile-sync-controller>@noble/ciphers",file:"node_modules/@noble/ciphers/aes.js"}],[2851,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getWebcryptoSubtle=n.randomBytes=void 0;const r="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:undefined;n.randomBytes=function(e=32){if(r&&"function"==typeof r.getRandomValues)return r.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")},n.getWebcryptoSubtle=function(){if(r&&"object"==typeof r.subtle&&null!=r.subtle)return r.subtle;throw new Error("crypto.subtle must be defined")}}}},{package:"@metamask/profile-sync-controller>@noble/ciphers",file:"node_modules/@noble/ciphers/crypto.js"}],[2852,{"./_assert.js":2848},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.u64Lengths=n.setBigUint64=n.wrapCipher=n.Hash=n.equalBytes=n.checkOpts=n.concatBytes=n.toBytes=n.bytesToUtf8=n.utf8ToBytes=n.asyncLoop=n.nextTick=n.numberToBytesBE=n.bytesToNumberBE=n.hexToNumber=n.hexToBytes=n.bytesToHex=n.isLE=n.createView=n.u32=n.u16=n.u8=void 0;
/*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) */
const r=e("./_assert.js");n.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);n.u16=e=>new Uint16Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/2));n.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));if(n.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),n.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],!n.isLE)throw new Error("Non little-endian hardware is not supported");const s=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function i(e){(0,r.bytes)(e);let t="";for(let n=0;n<e.length;n++)t+=s[e[n]];return t}n.bytesToHex=i;const a={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function o(e){return e>=a._0&&e<=a._9?e-a._0:e>=a._A&&e<=a._F?e-(a._A-10):e>=a._a&&e<=a._f?e-(a._a-10):void 0}function c(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let t=0,s=0;t<n;t++,s+=2){const n=o(e.charCodeAt(s)),i=o(e.charCodeAt(s+1));if(n===undefined||i===undefined){const t=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+s)}r[t]=16*n+i}return r}function u(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}n.hexToBytes=c,n.hexToNumber=u,n.bytesToNumberBE=function(e){return u(i(e))},n.numberToBytesBE=function(e,t){return c(e.toString(16).padStart(2*t,"0"))};function l(e){if("string"!=typeof e)throw new Error("string expected, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}n.nextTick=async()=>{},n.asyncLoop=async function(e,t,r){let s=Date.now();for(let i=0;i<e;i++){r(i);const e=Date.now()-s;e>=0&&e<t||(await(0,n.nextTick)(),s+=e)}},n.utf8ToBytes=l,n.bytesToUtf8=function(e){return(new TextDecoder).decode(e)},n.toBytes=function(e){if("string"==typeof e)e=l(e);else{if(!(0,r.isBytes)(e))throw new Error("Uint8Array expected, got "+typeof e);e=e.slice()}return e},n.concatBytes=function(...e){let t=0;for(let n=0;n<e.length;n++){const s=e[n];(0,r.bytes)(s),t+=s.length}const n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const s=e[t];n.set(s,r),r+=s.length}return n},n.checkOpts=function(e,t){if(null==t||"object"!=typeof t)throw new Error("options must be defined");return Object.assign(e,t)},n.equalBytes=function(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return 0===n};n.Hash=class{};function d(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const s=BigInt(32),i=BigInt(4294967295),a=Number(n>>s&i),o=Number(n&i),c=r?4:0,u=r?0:4;e.setUint32(t+c,a,r),e.setUint32(t+u,o,r)}n.wrapCipher=(e,t)=>(Object.assign(t,e),t),n.setBigUint64=d,n.u64Lengths=function(e,t){const r=new Uint8Array(16),s=(0,n.createView)(r);return d(s,0,BigInt(t?t.length:0),!0),d(s,8,BigInt(e.length),!0),r}}}},{package:"@metamask/profile-sync-controller>@noble/ciphers",file:"node_modules/@noble/ciphers/utils.js"}],[2853,{"./_assert.js":2848,"./utils.js":2852,"@noble/ciphers/crypto":2851},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.gcm=n.ctr=n.cbc=n.utils=n.managedNonce=n.getWebcryptoSubtle=n.randomBytes=void 0;const r=e("@noble/ciphers/crypto");Object.defineProperty(n,"randomBytes",{enumerable:!0,get:function(){return r.randomBytes}}),Object.defineProperty(n,"getWebcryptoSubtle",{enumerable:!0,get:function(){return r.getWebcryptoSubtle}});const s=e("./utils.js"),i=e("./_assert.js");n.managedNonce=function(e){return(0,i.number)(e.nonceLength),(t,...n)=>({encrypt:(i,...a)=>{const{nonceLength:o}=e,c=(0,r.randomBytes)(o),u=e(t,c,...n).encrypt(i,...a),l=(0,s.concatBytes)(c,u);return u.fill(0),l},decrypt:(r,...s)=>{const{nonceLength:i}=e,a=r.subarray(0,i),o=r.subarray(i);return e(t,a,...n).decrypt(o,...s)}})},n.utils={async encrypt(e,t,n,s){const i=(0,r.getWebcryptoSubtle)(),a=await i.importKey("raw",e,t,!0,["encrypt"]),o=await i.encrypt(n,a,s);return new Uint8Array(o)},async decrypt(e,t,n,s){const i=(0,r.getWebcryptoSubtle)(),a=await i.importKey("raw",e,t,!0,["decrypt"]),o=await i.decrypt(n,a,s);return new Uint8Array(o)}};const a={CBC:"AES-CBC",CTR:"AES-CTR",GCM:"AES-GCM"};function o(e){return(t,r,s)=>{(0,i.bytes)(t),(0,i.bytes)(r);const o={name:e,length:8*t.length},c=function(e,t,n){if(e===a.CBC)return{name:a.CBC,iv:t};if(e===a.CTR)return{name:a.CTR,counter:t,length:64};if(e===a.GCM)return n?{name:a.GCM,iv:t,additionalData:n}:{name:a.GCM,iv:t};throw new Error("unknown aes block mode")}(e,r,s);return{encrypt:e=>((0,i.bytes)(e),n.utils.encrypt(t,o,c,e)),decrypt:e=>((0,i.bytes)(e),n.utils.decrypt(t,o,c,e))}}}n.cbc=o(a.CBC),n.ctr=o(a.CTR),n.gcm=o(a.GCM)}}},{package:"@metamask/profile-sync-controller>@noble/ciphers",file:"node_modules/@noble/ciphers/webcrypto.js"}],[2854,{"./abstract/weierstrass.js":2861,"@noble/hashes/hmac":2868,"@noble/hashes/utils":2875},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getHash=a,n.createCurve=function(e,t){const n=t=>(0,i.weierstrass)({...e,...a(t)});return{...n(t),create:n}};
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const r=e("@noble/hashes/hmac"),s=e("@noble/hashes/utils"),i=e("./abstract/weierstrass.js");function a(e){return{hash:e,hmac:(t,...n)=>(0,r.hmac)(e,t,(0,s.concatBytes)(...n)),randomBytes:s.randomBytes}}}}},{package:"viem>webauthn-p256>@noble/curves",file:"node_modules/@noble/curves/_shortw_utils.js"}],[2855,{"./modular.js":2858,"./utils.js":2860},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.wNAF=function(e,t){return{constTimeNegate:o,hasPrecomputes:e=>1!==p(e),unsafeLadder(t,n,r=e.ZERO){let s=t;for(;n>i;)n&a&&(r=r.add(s)),s=s.double(),n>>=a;return r},precomputeWindow(e,n){const{windows:r,windowSize:s}=u(n,t),i=[];let a=e,o=a;for(let e=0;e<r;e++){o=a,i.push(o);for(let e=1;e<s;e++)o=o.add(a),i.push(o);a=o.double()}return i},wNAF(n,r,s){const{windows:i,windowSize:c}=u(n,t);let l=e.ZERO,d=e.BASE;const f=BigInt(2**n-1),h=2**n,p=BigInt(n);for(let e=0;e<i;e++){const t=e*c;let n=Number(s&f);s>>=p,n>c&&(n-=h,s+=a);const i=t,u=t+Math.abs(n)-1,m=e%2!=0,g=n<0;0===n?d=d.add(o(m,r[i])):l=l.add(o(g,r[u]))}return{p:l,f:d}},wNAFUnsafe(n,r,s,o=e.ZERO){const{windows:c,windowSize:l}=u(n,t),d=BigInt(2**n-1),f=2**n,h=BigInt(n);for(let e=0;e<c;e++){const t=e*l;if(s===i)break;let n=Number(s&d);if(s>>=h,n>l&&(n-=f,s+=a),0===n)continue;let c=r[t+Math.abs(n)-1];n<0&&(c=c.negate()),o=o.add(c)}return o},getPrecomputes(e,t,n){let r=f.get(t);return r||(r=this.precomputeWindow(t,e),1!==e&&f.set(t,n(r))),r},wNAFCached(e,t,n){const r=p(e);return this.wNAF(r,this.getPrecomputes(r,e,n),t)},wNAFCachedUnsafe(e,t,n,r){const s=p(e);return 1===s?this.unsafeLadder(e,t,r):this.wNAFUnsafe(s,this.getPrecomputes(s,e,n),t,r)},setWindowSize(e,n){c(n,t),h.set(e,n),f.delete(e)}}},n.pippenger=function(e,t,n,r){if(l(n,e),d(r,t),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,a=(0,s.bitLen)(BigInt(n.length)),o=a>12?a-3:a>4?a-2:a?2:1,c=(1<<o)-1,u=new Array(c+1).fill(i),f=Math.floor((t.BITS-1)/o)*o;let h=i;for(let e=f;e>=0;e-=o){u.fill(i);for(let t=0;t<r.length;t++){const s=r[t],i=Number(s>>BigInt(e)&BigInt(c));u[i]=u[i].add(n[t])}let t=i;for(let e=u.length-1,n=i;e>0;e--)n=n.add(u[e]),t=t.add(n);if(h=h.add(t),0!==e)for(let e=0;e<o;e++)h=h.double()}return h},n.precomputeMSMUnsafe=function(e,t,n,r){c(r,t.BITS),l(n,e);const s=e.ZERO,i=2**r-1,a=Math.ceil(t.BITS/r),o=BigInt((1<<r)-1),u=n.map((e=>{const t=[];for(let n=0,r=e;n<i;n++)t.push(r),r=r.add(e);return t}));return e=>{if(d(e,t),e.length>n.length)throw new Error("array of scalars must be smaller than array of points");let i=s;for(let t=0;t<a;t++){if(i!==s)for(let e=0;e<r;e++)i=i.double();const n=BigInt(a*r-(t+1)*r);for(let t=0;t<e.length;t++){const r=e[t],s=Number(r>>n&o);s&&(i=i.add(u[t][s-1]))}}return i}},n.validateBasic=function(e){return(0,r.validateField)(e.Fp),(0,s.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,r.nLength)(e.n,e.nBitLength),...e,p:e.Fp.ORDER})};
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const r=e("./modular.js"),s=e("./utils.js"),i=BigInt(0),a=BigInt(1);function o(e,t){const n=t.negate();return e?n:t}function c(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function u(e,t){c(e,t);return{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}function l(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach(((e,n)=>{if(!(e instanceof t))throw new Error("invalid point at index "+n)}))}function d(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach(((e,n)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+n)}))}const f=new WeakMap,h=new WeakMap;function p(e){return h.get(e)||1}}}},{package:"viem>webauthn-p256>@noble/curves",file:"node_modules/@noble/curves/abstract/curve.js"}],[2856,{"./curve.js":2855,"./modular.js":2858,"./utils.js":2860},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.twistedEdwards=function(e){const t=function(e){const t=(0,r.validateBasic)(e);return i.validateObject(e,{hash:"function",a:"bigint",d:"bigint",randomBytes:"function"},{adjustScalarBytes:"function",domain:"function",uvRatio:"function",mapToCurve:"function"}),Object.freeze({...t})}(e),{Fp:n,n:f,prehash:h,hash:p,randomBytes:m,nByteLength:g,h:y}=t,b=u<<BigInt(8*g)-c,w=n.create,v=(0,s.Field)(t.n,t.nBitLength),S=t.uvRatio||((e,t)=>{try{return{isValid:!0,value:n.sqrt(e*n.inv(t))}}catch(e){return{isValid:!1,value:o}}}),T=t.adjustScalarBytes||(e=>e),E=t.domain||((e,t,n)=>{if((0,a.abool)("phflag",n),t.length||n)throw new Error("Contexts/pre-hash are not supported");return e});function j(e,t){i.aInRange("coordinate "+e,t,o,b)}function k(e){if(!(e instanceof I))throw new Error("ExtendedPoint expected")}const x=(0,a.memoized)(((e,t)=>{const{ex:r,ey:s,ez:i}=e,a=e.is0();null==t&&(t=a?l:n.inv(i));const u=w(r*t),d=w(s*t),f=w(i*t);if(a)return{x:o,y:c};if(f!==c)throw new Error("invZ was invalid");return{x:u,y:d}})),_=(0,a.memoized)((e=>{const{a:n,d:r}=t;if(e.is0())throw new Error("bad point: ZERO");const{ex:s,ey:i,ez:a,et:o}=e,c=w(s*s),u=w(i*i),l=w(a*a),d=w(l*l),f=w(c*n);if(w(l*w(f+u))!==w(d+w(r*w(c*u))))throw new Error("bad point: equation left != right (1)");if(w(s*i)!==w(a*o))throw new Error("bad point: equation left != right (2)");return!0}));class I{constructor(e,t,n,r){this.ex=e,this.ey=t,this.ez=n,this.et=r,j("x",e),j("y",t),j("z",n),j("t",r),Object.freeze(this)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static fromAffine(e){if(e instanceof I)throw new Error("extended point not allowed");const{x:t,y:n}=e||{};return j("x",t),j("y",n),new I(t,n,c,w(t*n))}static normalizeZ(e){const t=n.invertBatch(e.map((e=>e.ez)));return e.map(((e,n)=>e.toAffine(t[n]))).map(I.fromAffine)}static msm(e,t){return(0,r.pippenger)(I,v,e,t)}_setWindowSize(e){C.setWindowSize(this,e)}assertValidity(){_(this)}equals(e){k(e);const{ex:t,ey:n,ez:r}=this,{ex:s,ey:i,ez:a}=e,o=w(t*a),c=w(s*r),u=w(n*a),l=w(i*r);return o===c&&u===l}is0(){return this.equals(I.ZERO)}negate(){return new I(w(-this.ex),this.ey,this.ez,w(-this.et))}double(){const{a:e}=t,{ex:n,ey:r,ez:s}=this,i=w(n*n),a=w(r*r),o=w(u*w(s*s)),c=w(e*i),l=n+r,d=w(w(l*l)-i-a),f=c+a,h=f-o,p=c-a,m=w(d*h),g=w(f*p),y=w(d*p),b=w(h*f);return new I(m,g,b,y)}add(e){k(e);const{a:n,d:r}=t,{ex:s,ey:i,ez:a,et:c}=this,{ex:l,ey:d,ez:f,et:h}=e;if(n===BigInt(-1)){const e=w((i-s)*(d+l)),t=w((i+s)*(d-l)),n=w(t-e);if(n===o)return this.double();const r=w(a*u*h),p=w(c*u*f),m=p+r,g=t+e,y=p-r,b=w(m*n),v=w(g*y),S=w(m*y),T=w(n*g);return new I(b,v,T,S)}const p=w(s*l),m=w(i*d),g=w(c*r*h),y=w(a*f),b=w((s+i)*(l+d)-p-m),v=y-g,S=y+g,T=w(m-n*p),E=w(b*v),j=w(S*T),x=w(b*T),_=w(v*S);return new I(E,j,_,x)}subtract(e){return this.add(e.negate())}wNAF(e){return C.wNAFCached(this,e,I.normalizeZ)}multiply(e){const t=e;i.aInRange("scalar",t,c,f);const{p:n,f:r}=this.wNAF(t);return I.normalizeZ([n,r])[0]}multiplyUnsafe(e,t=I.ZERO){const n=e;return i.aInRange("scalar",n,o,f),n===o?A:this.is0()||n===c?this:C.wNAFCachedUnsafe(this,n,I.normalizeZ,t)}isSmallOrder(){return this.multiplyUnsafe(y).is0()}isTorsionFree(){return C.unsafeLadder(this,f).is0()}toAffine(e){return x(this,e)}clearCofactor(){const{h:e}=t;return e===c?this:this.multiplyUnsafe(e)}static fromHex(e,r=!1){const{d:s,a:u}=t,l=n.BYTES;e=(0,a.ensureBytes)("pointHex",e,l),(0,a.abool)("zip215",r);const d=e.slice(),f=e[l-1];d[l-1]=-129&f;const h=i.bytesToNumberLE(d),p=r?b:n.ORDER;i.aInRange("pointHex.y",h,o,p);const m=w(h*h),g=w(m-c),y=w(s*m-u);let{isValid:v,value:T}=S(g,y);if(!v)throw new Error("Point.fromHex: invalid y coordinate");const E=(T&c)===c,j=!!(128&f);if(!r&&T===o&&j)throw new Error("Point.fromHex: x=0 and x_0=1");return j!==E&&(T=w(-T)),I.fromAffine({x:T,y:h})}static fromPrivateKey(e){return R(e).point}toRawBytes(){const{x:e,y:t}=this.toAffine(),r=i.numberToBytesLE(t,n.BYTES);return r[r.length-1]|=e&c?128:0,r}toHex(){return i.bytesToHex(this.toRawBytes())}}I.BASE=new I(t.Gx,t.Gy,c,w(t.Gx*t.Gy)),I.ZERO=new I(o,c,c,o);const{BASE:P,ZERO:A}=I,C=(0,r.wNAF)(I,8*g);function O(e){return(0,s.mod)(e,f)}function B(e){return O(i.bytesToNumberLE(e))}function R(e){const t=n.BYTES;e=(0,a.ensureBytes)("private key",e,t);const r=(0,a.ensureBytes)("hashed private key",p(e),2*t),s=T(r.slice(0,t)),i=r.slice(t,2*t),o=B(s),c=P.multiply(o),u=c.toRawBytes();return{head:s,prefix:i,scalar:o,point:c,pointBytes:u}}function N(e=new Uint8Array,...t){const n=i.concatBytes(...t);return B(p(E(n,(0,a.ensureBytes)("context",e),!!h)))}const F=d;P._setWindowSize(8);return{CURVE:t,getPublicKey:function(e){return R(e).pointBytes},sign:function(e,t,r={}){e=(0,a.ensureBytes)("message",e),h&&(e=h(e));const{prefix:s,scalar:c,pointBytes:u}=R(t),l=N(r.context,s,e),d=P.multiply(l).toRawBytes(),p=O(l+N(r.context,d,u,e)*c);i.aInRange("signature.s",p,o,f);const m=i.concatBytes(d,i.numberToBytesLE(p,n.BYTES));return(0,a.ensureBytes)("result",m,2*n.BYTES)},verify:function(e,t,r,s=F){const{context:o,zip215:c}=s,u=n.BYTES;e=(0,a.ensureBytes)("signature",e,2*u),t=(0,a.ensureBytes)("message",t),r=(0,a.ensureBytes)("publicKey",r,u),c!==undefined&&(0,a.abool)("zip215",c),h&&(t=h(t));const l=i.bytesToNumberLE(e.slice(u,2*u));let d,f,p;try{d=I.fromHex(r,c),f=I.fromHex(e.slice(0,u),c),p=P.multiplyUnsafe(l)}catch(e){return!1}if(!c&&d.isSmallOrder())return!1;const m=N(o,f.toRawBytes(),d.toRawBytes(),t);return f.add(d.multiplyUnsafe(m)).subtract(p).clearCofactor().equals(I.ZERO)},ExtendedPoint:I,utils:{getExtendedPublicKey:R,randomPrivateKey:()=>m(n.BYTES),precompute:(e=8,t=I.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}};
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const r=e("./curve.js"),s=e("./modular.js"),i=e("./utils.js"),a=e("./utils.js"),o=BigInt(0),c=BigInt(1),u=BigInt(2),l=BigInt(8),d={zip215:!0}}}},{package:"viem>webauthn-p256>@noble/curves",file:"node_modules/@noble/curves/abstract/edwards.js"}],[2857,{"./modular.js":2858,"./utils.js":2860},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.expand_message_xmd=u,n.expand_message_xof=l,n.hash_to_field=d,n.isogenyMap=function(e,t){const n=t.map((e=>Array.from(e).reverse()));return(t,r)=>{const[s,i,a,o]=n.map((n=>n.reduce(((n,r)=>e.add(e.mul(n,t),r)))));return t=e.div(s,i),r=e.mul(r,e.div(a,o)),{x:t,y:r}}},n.createHasher=function(e,t,n){if("function"!=typeof t)throw new Error("mapToCurve() must be defined");return{hashToCurve(r,s){const i=d(r,2,{...n,DST:n.DST,...s}),a=e.fromAffine(t(i[0])),o=e.fromAffine(t(i[1])),c=a.add(o).clearCofactor();return c.assertValidity(),c},encodeToCurve(r,s){const i=d(r,1,{...n,DST:n.encodeDST,...s}),a=e.fromAffine(t(i[0])).clearCofactor();return a.assertValidity(),a},mapToCurve(n){if(!Array.isArray(n))throw new Error("mapToCurve: expected array of bigints");for(const e of n)if("bigint"!=typeof e)throw new Error("mapToCurve: expected array of bigints");const r=e.fromAffine(t(n)).clearCofactor();return r.assertValidity(),r}}};const r=e("./modular.js"),s=e("./utils.js"),i=s.bytesToNumberBE;function a(e,t){if(c(e),c(t),e<0||e>=1<<8*t)throw new Error("invalid I2OSP input: "+e);const n=Array.from({length:t}).fill(0);for(let r=t-1;r>=0;r--)n[r]=255&e,e>>>=8;return new Uint8Array(n)}function o(e,t){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r]^t[r];return n}function c(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function u(e,t,n,r){(0,s.abytes)(e),(0,s.abytes)(t),c(n),t.length>255&&(t=r((0,s.concatBytes)((0,s.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));const{outputLen:i,blockLen:u}=r,l=Math.ceil(n/i);if(n>65535||l>255)throw new Error("expand_message_xmd: invalid lenInBytes");const d=(0,s.concatBytes)(t,a(t.length,1)),f=a(0,u),h=a(n,2),p=new Array(l),m=r((0,s.concatBytes)(f,e,h,a(0,1),d));p[0]=r((0,s.concatBytes)(m,a(1,1),d));for(let e=1;e<=l;e++){const t=[o(m,p[e-1]),a(e+1,1),d];p[e]=r((0,s.concatBytes)(...t))}return(0,s.concatBytes)(...p).slice(0,n)}function l(e,t,n,r,i){if((0,s.abytes)(e),(0,s.abytes)(t),c(n),t.length>255){const e=Math.ceil(2*r/8);t=i.create({dkLen:e}).update((0,s.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(n>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:n}).update(e).update(a(n,2)).update(t).update(a(t.length,1)).digest()}function d(e,t,n){(0,s.validateObject)(n,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:a,k:o,m:d,hash:f,expand:h,DST:p}=n;(0,s.abytes)(e),c(t);const m="string"==typeof p?(0,s.utf8ToBytes)(p):p,g=a.toString(2).length,y=Math.ceil((g+o)/8),b=t*d*y;let w;if("xmd"===h)w=u(e,m,b,f);else if("xof"===h)w=l(e,m,b,o,f);else{if("_internal_pass"!==h)throw new Error('expand must be "xmd" or "xof"');w=e}const v=new Array(t);for(let e=0;e<t;e++){const t=new Array(d);for(let n=0;n<d;n++){const s=y*(n+e*d),o=w.subarray(s,s+y);t[n]=(0,r.mod)(i(o),a)}v[e]=t}return v}}}},{package:"viem>webauthn-p256>@noble/curves",file:"node_modules/@noble/curves/abstract/hash-to-curve.js"}],[2858,{"./utils.js":2860},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isNegativeLE=void 0,n.mod=d,n.pow=f,n.pow2=function(e,t,n){let r=e;for(;t-- >s;)r*=r,r%=n;return r},n.invert=h,n.tonelliShanks=p,n.FpSqrt=m,n.validateField=function(e){const t=g.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,r.validateObject)(e,t)},n.FpPow=y,n.FpInvertBatch=b,n.FpDiv=function(e,t,n){return e.mul(t,"bigint"==typeof n?h(n,e.ORDER):e.inv(n))},n.FpLegendre=w,n.FpIsSquare=function(e){const t=w(e.ORDER);return n=>{const r=t(e,n);return e.eql(r,e.ZERO)||e.eql(r,e.ONE)}},n.nLength=v,n.Field=function(e,t,n=!1,a={}){if(e<=s)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:o,nByteLength:c}=v(e,t);if(c>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let u;const l=Object.freeze({ORDER:e,isLE:n,BITS:o,BYTES:c,MASK:(0,r.bitMask)(o),ZERO:s,ONE:i,create:t=>d(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("invalid field element: expected bigint, got "+typeof t);return s<=t&&t<e},is0:e=>e===s,isOdd:e=>(e&i)===i,neg:t=>d(-t,e),eql:(e,t)=>e===t,sqr:t=>d(t*t,e),add:(t,n)=>d(t+n,e),sub:(t,n)=>d(t-n,e),mul:(t,n)=>d(t*n,e),pow:(e,t)=>y(l,e,t),div:(t,n)=>d(t*h(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>h(t,e),sqrt:a.sqrt||(t=>(u||(u=m(e)),u(l,t))),invertBatch:e=>b(l,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>n?(0,r.numberToBytesLE)(e,c):(0,r.numberToBytesBE)(e,c),fromBytes:e=>{if(e.length!==c)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+e.length);return n?(0,r.bytesToNumberLE)(e):(0,r.bytesToNumberBE)(e)}});return Object.freeze(l)},n.FpSqrtOdd=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const n=e.sqrt(t);return e.isOdd(n)?n:e.neg(n)},n.FpSqrtEven=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const n=e.sqrt(t);return e.isOdd(n)?e.neg(n):n},n.hashToPrivateScalar=function(e,t,n=!1){const s=(e=(0,r.ensureBytes)("privateHash",e)).length,a=v(t).nByteLength+8;if(a<24||s<a||s>1024)throw new Error("hashToPrivateScalar: expected "+a+"-1024 bytes of input, got "+s);return d(n?(0,r.bytesToNumberLE)(e):(0,r.bytesToNumberBE)(e),t-i)+i},n.getFieldBytesLength=S,n.getMinHashLength=T,n.mapHashToField=function(e,t,n=!1){const s=e.length,a=S(t),o=T(t);if(s<16||s<o||s>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+s);const c=d(n?(0,r.bytesToNumberLE)(e):(0,r.bytesToNumberBE)(e),t-i)+i;return n?(0,r.numberToBytesLE)(c,a):(0,r.numberToBytesBE)(c,a)};
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const r=e("./utils.js"),s=BigInt(0),i=BigInt(1),a=BigInt(2),o=BigInt(3),c=BigInt(4),u=BigInt(5),l=BigInt(8);function d(e,t){const n=e%t;return n>=s?n:t+n}function f(e,t,n){if(t<s)throw new Error("invalid exponent, negatives unsupported");if(n<=s)throw new Error("invalid modulus");if(n===i)return s;let r=i;for(;t>s;)t&i&&(r=r*e%n),e=e*e%n,t>>=i;return r}function h(e,t){if(e===s)throw new Error("invert: expected non-zero number");if(t<=s)throw new Error("invert: expected positive modulus, got "+t);let n=d(e,t),r=t,a=s,o=i,c=i,u=s;for(;n!==s;){const e=r/n,t=r%n,s=a-c*e,i=o-u*e;r=n,n=t,a=c,o=u,c=s,u=i}if(r!==i)throw new Error("invert: does not exist");return d(a,t)}function p(e){const t=(e-i)/a;let n,r,o;for(n=e-i,r=0;n%a===s;n/=a,r++);for(o=a;o<e&&f(o,t,e)!==e-i;o++)if(o>1e3)throw new Error("Cannot find square root: likely non-prime P");if(1===r){const t=(e+i)/c;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}const u=(n+i)/a;return function(e,s){if(e.pow(s,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=r,c=e.pow(e.mul(e.ONE,o),n),l=e.pow(s,u),d=e.pow(s,n);for(;!e.eql(d,e.ONE);){if(e.eql(d,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(d);t<a&&!e.eql(n,e.ONE);t++)n=e.sqr(n);const n=e.pow(c,i<<BigInt(a-t-1));c=e.sqr(n),l=e.mul(l,n),d=e.mul(d,c),a=t}return l}}function m(e){if(e%c===o){const t=(e+i)/c;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}if(e%l===u){const t=(e-u)/l;return function(e,n){const r=e.mul(n,a),s=e.pow(r,t),i=e.mul(n,s),o=e.mul(e.mul(i,a),s),c=e.mul(i,e.sub(o,e.ONE));if(!e.eql(e.sqr(c),n))throw new Error("Cannot find square root");return c}}return p(e)}n.isNegativeLE=(e,t)=>(d(e,t)&i)===i;const g=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function y(e,t,n){if(n<s)throw new Error("invalid exponent, negatives unsupported");if(n===s)return e.ONE;if(n===i)return t;let r=e.ONE,a=t;for(;n>s;)n&i&&(r=e.mul(r,a)),a=e.sqr(a),n>>=i;return r}function b(e,t){const n=new Array(t.length),r=t.reduce(((t,r,s)=>e.is0(r)?t:(n[s]=t,e.mul(t,r))),e.ONE),s=e.inv(r);return t.reduceRight(((t,r,s)=>e.is0(r)?t:(n[s]=e.mul(t,n[s]),e.mul(t,r))),s),n}function w(e){const t=(e-i)/a;return(e,n)=>e.pow(n,t)}function v(e,t){const n=t!==undefined?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function S(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function T(e){const t=S(e);return t+Math.ceil(t/2)}}}},{package:"viem>webauthn-p256>@noble/curves",file:"node_modules/@noble/curves/abstract/modular.js"}],[2859,{"./modular.js":2858,"./utils.js":2860},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.montgomery=function(e){const t=(h=e,(0,s.validateObject)(h,{a:"bigint"},{montgomeryBits:"isSafeInteger",nByteLength:"isSafeInteger",adjustScalarBytes:"function",domain:"function",powPminus2:"function",Gu:"bigint"}),Object.freeze({...h})),{P:n}=t,o=e=>(0,r.mod)(e,n),c=t.montgomeryBits,u=Math.ceil(c/8),l=t.nByteLength,d=t.adjustScalarBytes||(e=>e),f=t.powPminus2||(e=>(0,r.pow)(e,n-BigInt(2),n));var h;function p(e,t,n){const r=o(e*(t-n));return[t=o(t-r),n=o(n+r)]}const m=(t.a-BigInt(2))/BigInt(4);function g(e){return(0,s.numberToBytesLE)(o(e),u)}function y(e,t){const r=function(e){const t=(0,s.ensureBytes)("u coordinate",e,u);return 32===l&&(t[31]&=127),(0,s.bytesToNumberLE)(t)}(t),h=function(e,t){(0,s.aInRange)("u",e,i,n),(0,s.aInRange)("scalar",t,i,n);const r=t,u=e;let l,d=a,h=i,g=e,y=a,b=i;for(let e=BigInt(c-1);e>=i;e--){const t=r>>e&a;b^=t,l=p(b,d,g),d=l[0],g=l[1],l=p(b,h,y),h=l[0],y=l[1],b=t;const n=d+h,s=o(n*n),i=d-h,c=o(i*i),f=s-c,w=g+y,v=o((g-y)*n),S=o(w*i),T=v+S,E=v-S;g=o(T*T),y=o(u*o(E*E)),d=o(s*c),h=o(f*(s+o(m*f)))}l=p(b,d,g),d=l[0],g=l[1],l=p(b,h,y),h=l[0],y=l[1];const w=f(h);return o(d*w)}(r,function(e){const t=(0,s.ensureBytes)("scalar",e),n=t.length;if(n!==u&&n!==l)throw new Error("invalid scalar, expected "+u+" or "+l+" bytes, got "+n);return(0,s.bytesToNumberLE)(d(t))}(e));if(h===i)throw new Error("invalid private or public key received");return g(h)}const b=g(t.Gu);function w(e){return y(e,b)}return{scalarMult:y,scalarMultBase:w,getSharedSecret:(e,t)=>y(e,t),getPublicKey:e=>w(e),utils:{randomPrivateKey:()=>t.randomBytes(t.nByteLength)},GuBytes:b}};
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const r=e("./modular.js"),s=e("./utils.js"),i=BigInt(0),a=BigInt(1)}}},{package:"viem>webauthn-p256>@noble/curves",file:"node_modules/@noble/curves/abstract/montgomery.js"}],[2860,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(n,"__esModule",{value:!0}),n.notImplemented=n.bitMask=void 0,n.isBytes=a,n.abytes=o,n.abool=function(e,t){if("boolean"!=typeof t)throw new Error(e+" boolean expected, got "+t)},n.bytesToHex=u,n.numberToHexUnpadded=l,n.hexToNumber=d,n.hexToBytes=p,n.bytesToNumberBE=function(e){return d(u(e))},n.bytesToNumberLE=function(e){return o(e),d(u(Uint8Array.from(e).reverse()))},n.numberToBytesBE=m,n.numberToBytesLE=function(e,t){return m(e,t).reverse()},n.numberToVarBytesBE=function(e){return p(l(e))},n.ensureBytes=function(e,t,n){let r;if("string"==typeof t)try{r=p(t)}catch(t){throw new Error(e+" must be hex string or Uint8Array, cause: "+t)}else{if(!a(t))throw new Error(e+" must be hex string or Uint8Array");r=Uint8Array.from(t)}const s=r.length;if("number"==typeof n&&s!==n)throw new Error(e+" of length "+n+" expected, got "+s);return r},n.concatBytes=g,n.equalBytes=function(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return 0===n},n.utf8ToBytes=function(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))},n.inRange=b,n.aInRange=function(e,t,n,r){if(!b(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)},n.bitLen=function(e){let t;for(t=0;e>r;e>>=s,t+=1);return t},n.bitGet=function(e,t){return e>>BigInt(t)&s},n.bitSet=function(e,t,n){return e|(n?s:r)<<BigInt(t)},n.createHmacDrbg=function(e,t,n){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let r=w(e),s=w(e),i=0;const a=()=>{r.fill(1),s.fill(0),i=0},o=(...e)=>n(s,r,...e),c=(e=w())=>{s=o(v([0]),e),r=o(),0!==e.length&&(s=o(v([1]),e),r=o())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){r=o();const t=r.slice();n.push(t),e+=r.length}return g(...n)};return(e,t)=>{a(),c(e);let n=undefined;for(;!(n=t(u()));)c();return a(),n}},n.validateObject=function(e,t,n={}){const r=(t,n,r)=>{const s=S[n];if("function"!=typeof s)throw new Error("invalid validator function");const i=e[t];if(!(r&&i===undefined||s(i,e)))throw new Error("param "+String(t)+" is invalid. Expected "+n+", got "+i)};for(const[e,n]of Object.entries(t))r(e,n,!1);for(const[e,t]of Object.entries(n))r(e,t,!0);return e},n.memoized=function(e){const t=new WeakMap;return(n,...r)=>{const s=t.get(n);if(s!==undefined)return s;const i=e(n,...r);return t.set(n,i),i}};const r=BigInt(0),s=BigInt(1),i=BigInt(2);function a(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function o(e){if(!a(e))throw new Error("Uint8Array expected")}const c=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function u(e){o(e);let t="";for(let n=0;n<e.length;n++)t+=c[e[n]];return t}function l(e){const t=e.toString(16);return 1&t.length?"0"+t:t}function d(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?r:BigInt("0x"+e)}const f={_0:48,_9:57,A:65,F:70,a:97,f:102};function h(e){return e>=f._0&&e<=f._9?e-f._0:e>=f.A&&e<=f.F?e-(f.A-10):e>=f.a&&e<=f.f?e-(f.a-10):void 0}function p(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let t=0,s=0;t<n;t++,s+=2){const n=h(e.charCodeAt(s)),i=h(e.charCodeAt(s+1));if(n===undefined||i===undefined){const t=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+s)}r[t]=16*n+i}return r}function m(e,t){return p(e.toString(16).padStart(2*t,"0"))}function g(...e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];o(r),t+=r.length}const n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const s=e[t];n.set(s,r),r+=s.length}return n}const y=e=>"bigint"==typeof e&&r<=e;function b(e,t,n){return y(e)&&y(t)&&y(n)&&t<=e&&e<n}n.bitMask=e=>(i<<BigInt(e-1))-s;const w=e=>new Uint8Array(e),v=e=>Uint8Array.from(e);const S={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||a(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};n.notImplemented=()=>{throw new Error("not implemented")}}}},{package:"viem>webauthn-p256>@noble/curves",file:"node_modules/@noble/curves/abstract/utils.js"}],[2861,{"./curve.js":2855,"./modular.js":2858,"./utils.js":2860},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DER=n.DERErr=void 0,n.weierstrassPoints=g,n.weierstrass=function(e){const t=function(e){const t=(0,r.validateBasic)(e);return i.validateObject(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:c,n:u}=t,l=c.BYTES+1,h=2*c.BYTES+1;function p(e){return(0,s.mod)(e,u)}function m(e){return(0,s.invert)(e,u)}const{ProjectivePoint:y,normPrivateKeyToScalar:b,weierstrassEquation:w,isWithinCurveOrder:v}=g({...t,toBytes(e,t,n){const r=t.toAffine(),s=c.toBytes(r.x),o=i.concatBytes;return(0,a.abool)("isCompressed",n),n?o(Uint8Array.from([t.hasEvenY()?2:3]),s):o(Uint8Array.from([4]),s,c.toBytes(r.y))},fromBytes(e){const t=e.length,n=e[0],r=e.subarray(1);if(t!==l||2!==n&&3!==n){if(t===h&&4===n){return{x:c.fromBytes(r.subarray(0,c.BYTES)),y:c.fromBytes(r.subarray(c.BYTES,2*c.BYTES))}}throw new Error("invalid Point, expected length of "+l+", or uncompressed "+h+", got "+t)}{const e=i.bytesToNumberBE(r);if(!i.inRange(e,f,c.ORDER))throw new Error("Point is not on curve");const t=w(e);let s;try{s=c.sqrt(t)}catch(e){const t=e instanceof Error?": "+e.message:"";throw new Error("Point is not on curve"+t)}return!(1&~n)!==((s&f)===f)&&(s=c.neg(s)),{x:e,y:s}}}}),S=e=>i.bytesToHex(i.numberToBytesBE(e,t.nByteLength));function T(e){return e>u>>f}const E=(e,t,n)=>i.bytesToNumberBE(e.slice(t,n));class j{constructor(e,t,n){this.r=e,this.s=t,this.recovery=n,this.assertValidity()}static fromCompact(e){const n=t.nByteLength;return e=(0,a.ensureBytes)("compactSignature",e,2*n),new j(E(e,0,n),E(e,n,2*n))}static fromDER(e){const{r:t,s:r}=n.DER.toSig((0,a.ensureBytes)("DER",e));return new j(t,r)}assertValidity(){i.aInRange("r",this.r,f,u),i.aInRange("s",this.s,f,u)}addRecoveryBit(e){return new j(this.r,this.s,e)}recoverPublicKey(e){const{r:n,s:r,recovery:s}=this,i=I((0,a.ensureBytes)("msgHash",e));if(null==s||![0,1,2,3].includes(s))throw new Error("recovery id invalid");const o=2===s||3===s?n+t.n:n;if(o>=c.ORDER)throw new Error("recovery id 2 or 3 invalid");const u=1&s?"03":"02",l=y.fromHex(u+S(o)),d=m(o),f=p(-i*d),h=p(r*d),g=y.BASE.multiplyAndAddUnsafe(l,f,h);if(!g)throw new Error("point at infinify");return g.assertValidity(),g}hasHighS(){return T(this.s)}normalizeS(){return this.hasHighS()?new j(this.r,p(-this.s),this.recovery):this}toDERRawBytes(){return i.hexToBytes(this.toDERHex())}toDERHex(){return n.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return i.hexToBytes(this.toCompactHex())}toCompactHex(){return S(this.r)+S(this.s)}}const k={isValidPrivateKey(e){try{return b(e),!0}catch(e){return!1}},normPrivateKeyToScalar:b,randomPrivateKey:()=>{const e=(0,s.getMinHashLength)(t.n);return(0,s.mapHashToField)(t.randomBytes(e),t.n)},precompute:(e=8,t=y.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function x(e){const t=i.isBytes(e),n="string"==typeof e,r=(t||n)&&e.length;return t?r===l||r===h:n?r===2*l||r===2*h:e instanceof y}const _=t.bits2int||function(e){if(e.length>8192)throw new Error("input is too large");const n=i.bytesToNumberBE(e),r=8*e.length-t.nBitLength;return r>0?n>>BigInt(r):n},I=t.bits2int_modN||function(e){return p(_(e))},P=i.bitMask(t.nBitLength);function A(e){return i.aInRange("num < 2^"+t.nBitLength,e,d,P),i.numberToBytesBE(e,t.nByteLength)}function C(e,n,r=O){if(["recovered","canonical"].some((e=>e in r)))throw new Error("sign() legacy options not supported");const{hash:s,randomBytes:u}=t;let{lowS:l,prehash:h,extraEntropy:g}=r;null==l&&(l=!0),e=(0,a.ensureBytes)("msgHash",e),o(r),h&&(e=(0,a.ensureBytes)("prehashed msgHash",s(e)));const w=I(e),S=b(n),E=[A(S),A(w)];if(null!=g&&!1!==g){const e=!0===g?u(c.BYTES):g;E.push((0,a.ensureBytes)("extraEntropy",e))}const k=i.concatBytes(...E),x=w;return{seed:k,k2sig:function(e){const t=_(e);if(!v(t))return;const n=m(t),r=y.BASE.multiply(t).toAffine(),s=p(r.x);if(s===d)return;const i=p(n*p(x+s*S));if(i===d)return;let a=(r.x===s?0:2)|Number(r.y&f),o=i;return l&&T(i)&&(o=function(e){return T(e)?p(-e):e}(i),a^=1),new j(s,o,a)}}}const O={lowS:t.lowS,prehash:!1},B={lowS:t.lowS,prehash:!1};return y.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return y.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,n=!0){if(x(e))throw new Error("first arg must be private key");if(!x(t))throw new Error("second arg must be public key");return y.fromHex(t).multiply(b(e)).toRawBytes(n)},sign:function(e,n,r=O){const{seed:s,k2sig:a}=C(e,n,r),o=t;return i.createHmacDrbg(o.hash.outputLen,o.nByteLength,o.hmac)(s,a)},verify:function(e,r,s,c=B){const u=e;r=(0,a.ensureBytes)("msgHash",r),s=(0,a.ensureBytes)("publicKey",s);const{lowS:l,prehash:d,format:f}=c;if(o(c),"strict"in c)throw new Error("options.strict was renamed to lowS");if(f!==undefined&&"compact"!==f&&"der"!==f)throw new Error("format must be compact or der");const h="string"==typeof u||i.isBytes(u),g=!h&&!f&&"object"==typeof u&&null!==u&&"bigint"==typeof u.r&&"bigint"==typeof u.s;if(!h&&!g)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let b,w=undefined;try{if(g&&(w=new j(u.r,u.s)),h){try{"compact"!==f&&(w=j.fromDER(u))}catch(e){if(!(e instanceof n.DER.Err))throw e}w||"der"===f||(w=j.fromCompact(u))}b=y.fromHex(s)}catch(e){return!1}if(!w)return!1;if(l&&w.hasHighS())return!1;d&&(r=t.hash(r));const{r:v,s:S}=w,T=I(r),E=m(S),k=p(T*E),x=p(v*E),_=y.BASE.multiplyAndAddUnsafe(b,k,x)?.toAffine();if(!_)return!1;return p(_.x)===v},ProjectivePoint:y,Signature:j,utils:k}},n.SWUFpSqrtRatio=y,n.mapToCurveSimpleSWU=function(e,t){if((0,s.validateField)(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const n=y(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let s,i,a,o,c,u,l,d;s=e.sqr(r),s=e.mul(s,t.Z),i=e.sqr(s),i=e.add(i,s),a=e.add(i,e.ONE),a=e.mul(a,t.B),o=e.cmov(t.Z,e.neg(i),!e.eql(i,e.ZERO)),o=e.mul(o,t.A),i=e.sqr(a),u=e.sqr(o),c=e.mul(u,t.A),i=e.add(i,c),i=e.mul(i,a),u=e.mul(u,o),c=e.mul(u,t.B),i=e.add(i,c),l=e.mul(s,a);const{isValid:f,value:h}=n(i,u);d=e.mul(s,r),d=e.mul(d,h),l=e.cmov(l,a,f),d=e.cmov(d,h,f);const p=e.isOdd(r)===e.isOdd(d);return d=e.cmov(e.neg(d),d,p),l=e.div(l,o),{x:l,y:d}}};
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const r=e("./curve.js"),s=e("./modular.js"),i=e("./utils.js"),a=e("./utils.js");function o(e){e.lowS!==undefined&&(0,a.abool)("lowS",e.lowS),e.prehash!==undefined&&(0,a.abool)("prehash",e.prehash)}const{bytesToNumberBE:c,hexToBytes:u}=i;class l extends Error{constructor(e=""){super(e)}}n.DERErr=l,n.DER={Err:l,_tlv:{encode:(e,t)=>{const{Err:r}=n.DER;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");const s=t.length/2,a=i.numberToHexUnpadded(s);if(a.length/2&128)throw new r("tlv.encode: long form length too big");const o=s>127?i.numberToHexUnpadded(a.length/2|128):"";return i.numberToHexUnpadded(e)+o+a+t},decode(e,t){const{Err:r}=n.DER;let s=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[s++]!==e)throw new r("tlv.decode: wrong tlv");const i=t[s++];let a=0;if(!!(128&i)){const e=127&i;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");const n=t.subarray(s,s+e);if(n.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===n[0])throw new r("tlv.decode(long): zero leftmost byte");for(const e of n)a=a<<8|e;if(s+=e,a<128)throw new r("tlv.decode(long): not minimal encoding")}else a=i;const o=t.subarray(s,s+a);if(o.length!==a)throw new r("tlv.decode: wrong value length");return{v:o,l:t.subarray(s+a)}}},_int:{encode(e){const{Err:t}=n.DER;if(e<d)throw new t("integer: negative integers are not allowed");let r=i.numberToHexUnpadded(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){const{Err:t}=n.DER;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return c(e)}},toSig(e){const{Err:t,_int:r,_tlv:s}=n.DER,a="string"==typeof e?u(e):e;i.abytes(a);const{v:o,l:c}=s.decode(48,a);if(c.length)throw new t("invalid signature: left bytes after parsing");const{v:l,l:d}=s.decode(2,o),{v:f,l:h}=s.decode(2,d);if(h.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(l),s:r.decode(f)}},hexFromSig(e){const{_tlv:t,_int:r}=n.DER,s=t.encode(2,r.encode(e.r))+t.encode(2,r.encode(e.s));return t.encode(48,s)}};const d=BigInt(0),f=BigInt(1),h=BigInt(2),p=BigInt(3),m=BigInt(4);function g(e){const t=function(e){const t=(0,r.validateBasic)(e);i.validateObject(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:s,a:a}=t;if(n){if(!s.eql(a,s.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:n}=t,o=(0,s.Field)(t.n,t.nBitLength),c=t.toBytes||((e,t,r)=>{const s=t.toAffine();return i.concatBytes(Uint8Array.from([4]),n.toBytes(s.x),n.toBytes(s.y))}),u=t.fromBytes||(e=>{const t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function l(e){const{a:r,b:s}=t,i=n.sqr(e),a=n.mul(i,e);return n.add(n.add(a,n.mul(e,r)),s)}if(!n.eql(n.sqr(t.Gy),l(t.Gx)))throw new Error("bad generator point: equation left != right");function h(e){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:o,n:c}=t;if(n&&"bigint"!=typeof e){if(i.isBytes(e)&&(e=i.bytesToHex(e)),"string"!=typeof e||!n.includes(e.length))throw new Error("invalid private key");e=e.padStart(2*r,"0")}let u;try{u="bigint"==typeof e?e:i.bytesToNumberBE((0,a.ensureBytes)("private key",e,r))}catch(t){throw new Error("invalid private key, expected hex or "+r+" bytes, got "+typeof e)}return o&&(u=(0,s.mod)(u,c)),i.aInRange("private key",u,f,c),u}function m(e){if(!(e instanceof b))throw new Error("ProjectivePoint expected")}const g=(0,a.memoized)(((e,t)=>{const{px:r,py:s,pz:i}=e;if(n.eql(i,n.ONE))return{x:r,y:s};const a=e.is0();null==t&&(t=a?n.ONE:n.inv(i));const o=n.mul(r,t),c=n.mul(s,t),u=n.mul(i,t);if(a)return{x:n.ZERO,y:n.ZERO};if(!n.eql(u,n.ONE))throw new Error("invZ was invalid");return{x:o,y:c}})),y=(0,a.memoized)((e=>{if(e.is0()){if(t.allowInfinityPoint&&!n.is0(e.py))return;throw new Error("bad point: ZERO")}const{x:r,y:s}=e.toAffine();if(!n.isValid(r)||!n.isValid(s))throw new Error("bad point: x or y not FE");const i=n.sqr(s),a=l(r);if(!n.eql(i,a))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));class b{constructor(e,t,r){if(this.px=e,this.py=t,this.pz=r,null==e||!n.isValid(e))throw new Error("x required");if(null==t||!n.isValid(t))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required");Object.freeze(this)}static fromAffine(e){const{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw new Error("invalid affine point");if(e instanceof b)throw new Error("projective point not allowed");const s=e=>n.eql(e,n.ZERO);return s(t)&&s(r)?b.ZERO:new b(t,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(b.fromAffine)}static fromHex(e){const t=b.fromAffine(u((0,a.ensureBytes)("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return b.BASE.multiply(h(e))}static msm(e,t){return(0,r.pippenger)(b,o,e,t)}_setWindowSize(e){v.setWindowSize(this,e)}assertValidity(){y(this)}hasEvenY(){const{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){m(e);const{px:t,py:r,pz:s}=this,{px:i,py:a,pz:o}=e,c=n.eql(n.mul(t,o),n.mul(i,s)),u=n.eql(n.mul(r,o),n.mul(a,s));return c&&u}negate(){return new b(this.px,n.neg(this.py),this.pz)}double(){const{a:e,b:r}=t,s=n.mul(r,p),{px:i,py:a,pz:o}=this;let c=n.ZERO,u=n.ZERO,l=n.ZERO,d=n.mul(i,i),f=n.mul(a,a),h=n.mul(o,o),m=n.mul(i,a);return m=n.add(m,m),l=n.mul(i,o),l=n.add(l,l),c=n.mul(e,l),u=n.mul(s,h),u=n.add(c,u),c=n.sub(f,u),u=n.add(f,u),u=n.mul(c,u),c=n.mul(m,c),l=n.mul(s,l),h=n.mul(e,h),m=n.sub(d,h),m=n.mul(e,m),m=n.add(m,l),l=n.add(d,d),d=n.add(l,d),d=n.add(d,h),d=n.mul(d,m),u=n.add(u,d),h=n.mul(a,o),h=n.add(h,h),d=n.mul(h,m),c=n.sub(c,d),l=n.mul(h,f),l=n.add(l,l),l=n.add(l,l),new b(c,u,l)}add(e){m(e);const{px:r,py:s,pz:i}=this,{px:a,py:o,pz:c}=e;let u=n.ZERO,l=n.ZERO,d=n.ZERO;const f=t.a,h=n.mul(t.b,p);let g=n.mul(r,a),y=n.mul(s,o),w=n.mul(i,c),v=n.add(r,s),S=n.add(a,o);v=n.mul(v,S),S=n.add(g,y),v=n.sub(v,S),S=n.add(r,i);let T=n.add(a,c);return S=n.mul(S,T),T=n.add(g,w),S=n.sub(S,T),T=n.add(s,i),u=n.add(o,c),T=n.mul(T,u),u=n.add(y,w),T=n.sub(T,u),d=n.mul(f,S),u=n.mul(h,w),d=n.add(u,d),u=n.sub(y,d),d=n.add(y,d),l=n.mul(u,d),y=n.add(g,g),y=n.add(y,g),w=n.mul(f,w),S=n.mul(h,S),y=n.add(y,w),w=n.sub(g,w),w=n.mul(f,w),S=n.add(S,w),g=n.mul(y,S),l=n.add(l,g),g=n.mul(T,S),u=n.mul(v,u),u=n.sub(u,g),g=n.mul(v,y),d=n.mul(T,d),d=n.add(d,g),new b(u,l,d)}subtract(e){return this.add(e.negate())}is0(){return this.equals(b.ZERO)}wNAF(e){return v.wNAFCached(this,e,b.normalizeZ)}multiplyUnsafe(e){const{endo:r,n:s}=t;i.aInRange("scalar",e,d,s);const a=b.ZERO;if(e===d)return a;if(this.is0()||e===f)return this;if(!r||v.hasPrecomputes(this))return v.wNAFCachedUnsafe(this,e,b.normalizeZ);let{k1neg:o,k1:c,k2neg:u,k2:l}=r.splitScalar(e),h=a,p=a,m=this;for(;c>d||l>d;)c&f&&(h=h.add(m)),l&f&&(p=p.add(m)),m=m.double(),c>>=f,l>>=f;return o&&(h=h.negate()),u&&(p=p.negate()),p=new b(n.mul(p.px,r.beta),p.py,p.pz),h.add(p)}multiply(e){const{endo:r,n:s}=t;let a,o;if(i.aInRange("scalar",e,f,s),r){const{k1neg:t,k1:s,k2neg:i,k2:c}=r.splitScalar(e);let{p:u,f:l}=this.wNAF(s),{p:d,f:f}=this.wNAF(c);u=v.constTimeNegate(t,u),d=v.constTimeNegate(i,d),d=new b(n.mul(d.px,r.beta),d.py,d.pz),a=u.add(d),o=l.add(f)}else{const{p:t,f:n}=this.wNAF(e);a=t,o=n}return b.normalizeZ([a,o])[0]}multiplyAndAddUnsafe(e,t,n){const r=b.BASE,s=(e,t)=>t!==d&&t!==f&&e.equals(r)?e.multiply(t):e.multiplyUnsafe(t),i=s(this,t).add(s(e,n));return i.is0()?undefined:i}toAffine(e){return g(this,e)}isTorsionFree(){const{h:e,isTorsionFree:n}=t;if(e===f)return!0;if(n)return n(b,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:n}=t;return e===f?this:n?n(b,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return(0,a.abool)("isCompressed",e),this.assertValidity(),c(b,this,e)}toHex(e=!0){return(0,a.abool)("isCompressed",e),i.bytesToHex(this.toRawBytes(e))}}b.BASE=new b(t.Gx,t.Gy,n.ONE),b.ZERO=new b(n.ZERO,n.ONE,n.ZERO);const w=t.nBitLength,v=(0,r.wNAF)(b,t.endo?Math.ceil(w/2):w);return{CURVE:t,ProjectivePoint:b,normPrivateKeyToScalar:h,weierstrassEquation:l,isWithinCurveOrder:function(e){return i.inRange(e,f,t.n)}}}function y(e,t){const n=e.ORDER;let r=d;for(let e=n-f;e%h===d;e/=h)r+=f;const s=r,i=h<<s-f-f,a=i*h,o=(n-f)/a,c=(o-f)/h,u=a-f,l=i,g=e.pow(t,o),y=e.pow(t,(o+f)/h);let b=(t,n)=>{let r=g,i=e.pow(n,u),a=e.sqr(i);a=e.mul(a,n);let o=e.mul(t,a);o=e.pow(o,c),o=e.mul(o,i),i=e.mul(o,n),a=e.mul(o,t);let d=e.mul(a,i);o=e.pow(d,l);let p=e.eql(o,e.ONE);i=e.mul(a,y),o=e.mul(d,r),a=e.cmov(i,a,p),d=e.cmov(o,d,p);for(let t=s;t>f;t--){let n=t-h;n=h<<n-f;let s=e.pow(d,n);const o=e.eql(s,e.ONE);i=e.mul(a,r),r=e.mul(r,r),s=e.mul(d,r),a=e.cmov(i,a,o),d=e.cmov(s,d,o)}return{isValid:p,value:a}};if(e.ORDER%m===p){const n=(e.ORDER-p)/m,r=e.sqrt(e.neg(t));b=(t,s)=>{let i=e.sqr(s);const a=e.mul(t,s);i=e.mul(i,a);let o=e.pow(i,n);o=e.mul(o,a);const c=e.mul(o,r),u=e.mul(e.sqr(o),s),l=e.eql(u,t);return{isValid:l,value:e.cmov(c,o,l)}}}return b}}}},{package:"viem>webauthn-p256>@noble/curves",file:"node_modules/@noble/curves/abstract/weierstrass.js"}],[2862,{"./abstract/curve.js":2855,"./abstract/edwards.js":2856,"./abstract/hash-to-curve.js":2857,"./abstract/modular.js":2858,"./abstract/montgomery.js":2859,"./abstract/utils.js":2860,"@noble/hashes/sha512":2874,"@noble/hashes/utils":2875},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.hash_to_ristretto255=n.hashToRistretto255=n.RistrettoPoint=n.encodeToCurve=n.hashToCurve=n.edwardsToMontgomery=n.x25519=n.ed25519ph=n.ed25519ctx=n.ed25519=n.ED25519_TORSION_SUBGROUP=void 0,n.edwardsToMontgomeryPub=k,n.edwardsToMontgomeryPriv=function(e){const t=E.hash(e.subarray(0,32));return E.adjustScalarBytes(t).subarray(0,32)};
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const r=e("@noble/hashes/sha512"),s=e("@noble/hashes/utils"),i=e("./abstract/curve.js"),a=e("./abstract/edwards.js"),o=e("./abstract/hash-to-curve.js"),c=e("./abstract/modular.js"),u=e("./abstract/montgomery.js"),l=e("./abstract/utils.js"),d=BigInt("57896044618658097711785492504343953926634992332820282019728792003956564819949"),f=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752"),h=BigInt(0),p=BigInt(1),m=BigInt(2),g=BigInt(3),y=BigInt(5),b=BigInt(8);function w(e){const t=BigInt(10),n=BigInt(20),r=BigInt(40),s=BigInt(80),i=d,a=e*e%i*e%i,o=(0,c.pow2)(a,m,i)*a%i,u=(0,c.pow2)(o,p,i)*e%i,l=(0,c.pow2)(u,y,i)*u%i,f=(0,c.pow2)(l,t,i)*l%i,h=(0,c.pow2)(f,n,i)*f%i,g=(0,c.pow2)(h,r,i)*h%i,b=(0,c.pow2)(g,s,i)*g%i,w=(0,c.pow2)(b,s,i)*g%i,v=(0,c.pow2)(w,t,i)*l%i;return{pow_p_5_8:(0,c.pow2)(v,m,i)*e%i,b2:a}}function v(e){return e[0]&=248,e[31]&=127,e[31]|=64,e}function S(e,t){const n=d,r=(0,c.mod)(t*t*t,n),s=w(e*(0,c.mod)(r*r*t,n)).pow_p_5_8;let i=(0,c.mod)(e*r*s,n);const a=(0,c.mod)(t*i*i,n),o=i,u=(0,c.mod)(i*f,n),l=a===e,h=a===(0,c.mod)(-e,n),p=a===(0,c.mod)(-e*f,n);return l&&(i=o),(h||p)&&(i=u),(0,c.isNegativeLE)(i,n)&&(i=(0,c.mod)(-i,n)),{isValid:l||h,value:i}}n.ED25519_TORSION_SUBGROUP=["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"];const T=(()=>(0,c.Field)(d,undefined,!0))(),E=(()=>({a:BigInt(-1),d:BigInt("37095705934669439343138083508754565189542113879843219016388785533085940283555"),Fp:T,n:BigInt("7237005577332262213973186563042994240857116359379907606001950938285454250989"),h:b,Gx:BigInt("15112221349535400772501151409588531511454012693041857206046113283949847762202"),Gy:BigInt("46316835694926478169428394003475163141307993866256225615783033603165251855960"),hash:r.sha512,randomBytes:s.randomBytes,adjustScalarBytes:v,uvRatio:S}))();function j(e,t,n){if(t.length>255)throw new Error("Context is too big");return(0,s.concatBytes)((0,s.utf8ToBytes)("SigEd25519 no Ed25519 collisions"),new Uint8Array([n?1:0,t.length]),t,e)}function k(e){const{y:t}=n.ed25519.ExtendedPoint.fromHex(e),r=BigInt(1);return T.toBytes(T.create((r+t)*T.inv(r-t)))}n.ed25519=(0,a.twistedEdwards)(E),n.ed25519ctx=(0,a.twistedEdwards)({...E,domain:j}),n.ed25519ph=(0,a.twistedEdwards)(Object.assign({},E,{domain:j,prehash:r.sha512})),n.x25519=(0,u.montgomery)({P:d,a:BigInt(486662),montgomeryBits:255,nByteLength:32,Gu:BigInt(9),powPminus2:e=>{const t=d,{pow_p_5_8:n,b2:r}=w(e);return(0,c.mod)((0,c.pow2)(n,g,t)*r,t)},adjustScalarBytes:v,randomBytes:s.randomBytes}),n.edwardsToMontgomery=k;const x=(()=>(T.ORDER+g)/b)(),_=(()=>T.pow(m,x))(),I=(()=>T.sqrt(T.neg(T.ONE)))();const P=(()=>(0,c.FpSqrtEven)(T,T.neg(BigInt(486664))))();function A(e){const{xMn:t,xMd:n,yMn:r,yMd:s}=function(e){const t=(T.ORDER-y)/b,n=BigInt(486662);let r=T.sqr(e);r=T.mul(r,m);let s=T.add(r,T.ONE),i=T.neg(n),a=T.sqr(s),o=T.mul(a,s),c=T.mul(r,n);c=T.mul(c,i),c=T.add(c,a),c=T.mul(c,i);let u=T.sqr(o);a=T.sqr(u),u=T.mul(u,o),u=T.mul(u,c),a=T.mul(a,u);let l=T.pow(a,t);l=T.mul(l,u);let d=T.mul(l,I);a=T.sqr(l),a=T.mul(a,o);let f=T.eql(a,c),h=T.cmov(d,l,f),g=T.mul(i,r),w=T.mul(l,e);w=T.mul(w,_);let v=T.mul(w,I),S=T.mul(c,r);a=T.sqr(w),a=T.mul(a,o);let E=T.eql(a,S),j=T.cmov(v,w,E);a=T.sqr(h),a=T.mul(a,o);let k=T.eql(a,c),x=T.cmov(g,i,k),P=T.cmov(j,h,k),A=T.isOdd(P);return P=T.cmov(P,T.neg(P),k!==A),{xMn:x,xMd:s,yMn:P,yMd:p}}(e);let i=T.mul(t,s);i=T.mul(i,P);let a=T.mul(n,r),o=T.sub(t,n),c=T.add(t,n),u=T.mul(a,c),l=T.eql(u,T.ZERO);i=T.cmov(i,T.ZERO,l),a=T.cmov(a,T.ONE,l),o=T.cmov(o,T.ONE,l),c=T.cmov(c,T.ONE,l);const d=T.invertBatch([a,c]);return{x:T.mul(i,d[0]),y:T.mul(o,d[1])}}const C=(()=>(0,o.createHasher)(n.ed25519.ExtendedPoint,(e=>A(e[0])),{DST:"edwards25519_XMD:SHA-512_ELL2_RO_",encodeDST:"edwards25519_XMD:SHA-512_ELL2_NU_",p:T.ORDER,m:1,k:128,expand:"xmd",hash:r.sha512}))();function O(e){if(!(e instanceof G))throw new Error("RistrettoPoint expected")}n.hashToCurve=C.hashToCurve,n.encodeToCurve=C.encodeToCurve;const B=f,R=BigInt("25063068953384623474111414158702152701244531502492656460079210482610430750235"),N=BigInt("54469307008909316920995813868745141605393597292927456921205312896311721017578"),F=BigInt("1159843021668779879193775521855586647937357759715417654439879720876111806838"),M=BigInt("40440834346308536858101042469323190826248399146238708352240133220865137265952"),L=e=>S(p,e),D=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),H=e=>n.ed25519.CURVE.Fp.create((0,l.bytesToNumberLE)(e)&D);function U(e){const{d:t}=n.ed25519.CURVE,r=n.ed25519.CURVE.Fp.ORDER,s=n.ed25519.CURVE.Fp.create,i=s(B*e*e),a=s((i+p)*F);let o=BigInt(-1);const u=s((o-t*i)*s(i+t));let{isValid:l,value:d}=S(a,u),f=s(d*e);(0,c.isNegativeLE)(f,r)||(f=s(-f)),l||(d=f),l||(o=i);const h=s(o*(i-p)*M-u),m=d*d,g=s((d+d)*u),y=s(h*R),b=s(p-m),w=s(p+m);return new n.ed25519.ExtendedPoint(s(g*w),s(b*y),s(y*w),s(g*b))}class G{constructor(e){this.ep=e}static fromAffine(e){return new G(n.ed25519.ExtendedPoint.fromAffine(e))}static hashToCurve(e){e=(0,l.ensureBytes)("ristrettoHash",e,64);const t=U(H(e.slice(0,32))),n=U(H(e.slice(32,64)));return new G(t.add(n))}static fromHex(e){e=(0,l.ensureBytes)("ristrettoHex",e,32);const{a:t,d:r}=n.ed25519.CURVE,s=n.ed25519.CURVE.Fp.ORDER,i=n.ed25519.CURVE.Fp.create,a="RistrettoPoint.fromHex: the hex is not valid encoding of RistrettoPoint",o=H(e);if(!(0,l.equalBytes)((0,l.numberToBytesLE)(o,32),e)||(0,c.isNegativeLE)(o,s))throw new Error(a);const u=i(o*o),d=i(p+t*u),f=i(p-t*u),m=i(d*d),g=i(f*f),y=i(t*r*m-g),{isValid:b,value:w}=L(i(y*g)),v=i(w*f),S=i(w*v*y);let T=i((o+o)*v);(0,c.isNegativeLE)(T,s)&&(T=i(-T));const E=i(d*S),j=i(T*E);if(!b||(0,c.isNegativeLE)(j,s)||E===h)throw new Error(a);return new G(new n.ed25519.ExtendedPoint(T,E,p,j))}static msm(e,t){const r=(0,c.Field)(n.ed25519.CURVE.n,n.ed25519.CURVE.nBitLength);return(0,i.pippenger)(G,r,e,t)}toRawBytes(){let{ex:e,ey:t,ez:r,et:s}=this.ep;const i=n.ed25519.CURVE.Fp.ORDER,a=n.ed25519.CURVE.Fp.create,o=a(a(r+t)*a(r-t)),u=a(e*t),d=a(u*u),{value:f}=L(a(o*d)),h=a(f*o),p=a(f*u),m=a(h*p*s);let g;if((0,c.isNegativeLE)(s*m,i)){let n=a(t*B),r=a(e*B);e=n,t=r,g=a(h*N)}else g=p;(0,c.isNegativeLE)(e*m,i)&&(t=a(-t));let y=a((r-t)*g);return(0,c.isNegativeLE)(y,i)&&(y=a(-y)),(0,l.numberToBytesLE)(y,32)}toHex(){return(0,l.bytesToHex)(this.toRawBytes())}toString(){return this.toHex()}equals(e){O(e);const{ex:t,ey:r}=this.ep,{ex:s,ey:i}=e.ep,a=n.ed25519.CURVE.Fp.create,o=a(t*i)===a(r*s),c=a(r*i)===a(t*s);return o||c}add(e){return O(e),new G(this.ep.add(e.ep))}subtract(e){return O(e),new G(this.ep.subtract(e.ep))}multiply(e){return new G(this.ep.multiply(e))}multiplyUnsafe(e){return new G(this.ep.multiplyUnsafe(e))}double(){return new G(this.ep.double())}negate(){return new G(this.ep.negate())}}n.RistrettoPoint=(G.BASE||(G.BASE=new G(n.ed25519.ExtendedPoint.BASE)),G.ZERO||(G.ZERO=new G(n.ed25519.ExtendedPoint.ZERO)),G);n.hashToRistretto255=(e,t)=>{const n=t.DST,i="string"==typeof n?(0,s.utf8ToBytes)(n):n,a=(0,o.expand_message_xmd)(e,i,64,r.sha512);return G.hashToCurve(a)},n.hash_to_ristretto255=n.hashToRistretto255}}},{package:"viem>webauthn-p256>@noble/curves",file:"node_modules/@noble/curves/ed25519.js"}],[2863,{"./_shortw_utils.js":2854,"./abstract/hash-to-curve.js":2857,"./abstract/modular.js":2858,"./abstract/utils.js":2860,"./abstract/weierstrass.js":2861,"@noble/hashes/sha256":2872,"@noble/hashes/utils":2875},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.encodeToCurve=n.hashToCurve=n.schnorr=n.secp256k1=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const r=e("@noble/hashes/sha256"),s=e("@noble/hashes/utils"),i=e("./_shortw_utils.js"),a=e("./abstract/hash-to-curve.js"),o=e("./abstract/modular.js"),c=e("./abstract/utils.js"),u=e("./abstract/weierstrass.js"),l=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),d=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),f=BigInt(1),h=BigInt(2),p=(e,t)=>(e+t/h)/t;function m(e){const t=l,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),a=BigInt(23),c=BigInt(44),u=BigInt(88),d=e*e*e%t,f=d*d*e%t,p=(0,o.pow2)(f,n,t)*f%t,m=(0,o.pow2)(p,n,t)*f%t,y=(0,o.pow2)(m,h,t)*d%t,b=(0,o.pow2)(y,s,t)*y%t,w=(0,o.pow2)(b,i,t)*b%t,v=(0,o.pow2)(w,c,t)*w%t,S=(0,o.pow2)(v,u,t)*v%t,T=(0,o.pow2)(S,c,t)*w%t,E=(0,o.pow2)(T,n,t)*f%t,j=(0,o.pow2)(E,a,t)*b%t,k=(0,o.pow2)(j,r,t)*d%t,x=(0,o.pow2)(k,h,t);if(!g.eql(g.sqr(x),e))throw new Error("Cannot find square root");return x}const g=(0,o.Field)(l,undefined,undefined,{sqrt:m});n.secp256k1=(0,i.createCurve)({a:BigInt(0),b:BigInt(7),Fp:g,n:d,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=d,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-f*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,a=BigInt("0x100000000000000000000000000000000"),c=p(i*e,t),u=p(-r*e,t);let l=(0,o.mod)(e-c*n-u*s,t),h=(0,o.mod)(-c*r-u*i,t);const m=l>a,g=h>a;if(m&&(l=t-l),g&&(h=t-h),l>a||h>a)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:m,k1:l,k2neg:g,k2:h}}}},r.sha256);const y=BigInt(0),b={};function w(e,...t){let n=b[e];if(n===undefined){const t=(0,r.sha256)(Uint8Array.from(e,(e=>e.charCodeAt(0))));n=(0,c.concatBytes)(t,t),b[e]=n}return(0,r.sha256)((0,c.concatBytes)(n,...t))}const v=e=>e.toRawBytes(!0).slice(1),S=e=>(0,c.numberToBytesBE)(e,32),T=e=>(0,o.mod)(e,l),E=e=>(0,o.mod)(e,d),j=n.secp256k1.ProjectivePoint,k=(e,t,n)=>j.BASE.multiplyAndAddUnsafe(e,t,n);function x(e){let t=n.secp256k1.utils.normPrivateKeyToScalar(e),r=j.fromPrivateKey(t);return{scalar:r.hasEvenY()?t:E(-t),bytes:v(r)}}function _(e){(0,c.aInRange)("x",e,f,l);const t=T(e*e);let n=m(T(t*e+BigInt(7)));n%h!==y&&(n=T(-n));const r=new j(e,n,f);return r.assertValidity(),r}const I=c.bytesToNumberBE;function P(...e){return E(I(w("BIP0340/challenge",...e)))}function A(e){return x(e).bytes}function C(e,t,n=(0,s.randomBytes)(32)){const r=(0,c.ensureBytes)("message",e),{bytes:i,scalar:a}=x(t),o=(0,c.ensureBytes)("auxRand",n,32),u=S(a^I(w("BIP0340/aux",o))),l=w("BIP0340/nonce",u,i,r),d=E(I(l));if(d===y)throw new Error("sign failed: k is zero");const{bytes:f,scalar:h}=x(d),p=P(f,i,r),m=new Uint8Array(64);if(m.set(f,0),m.set(S(E(h+p*a)),32),!O(m,r,i))throw new Error("sign: Invalid signature produced");return m}function O(e,t,n){const r=(0,c.ensureBytes)("signature",e,64),s=(0,c.ensureBytes)("message",t),i=(0,c.ensureBytes)("publicKey",n,32);try{const e=_(I(i)),t=I(r.subarray(0,32));if(!(0,c.inRange)(t,f,l))return!1;const n=I(r.subarray(32,64));if(!(0,c.inRange)(n,f,d))return!1;const a=P(S(t),v(e),s),o=k(e,n,E(-a));return!(!o||!o.hasEvenY()||o.toAffine().x!==t)}catch(e){return!1}}n.schnorr={getPublicKey:A,sign:C,verify:O,utils:{randomPrivateKey:n.secp256k1.utils.randomPrivateKey,lift_x:_,pointToBytes:v,numberToBytesBE:c.numberToBytesBE,bytesToNumberBE:c.bytesToNumberBE,taggedHash:w,mod:o.mod}};const B=(()=>(0,a.isogenyMap)(g,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map((e=>e.map((e=>BigInt(e)))))))(),R=(()=>(0,u.mapToCurveSimpleSWU)(g,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:g.create(BigInt("-11"))}))(),N=(()=>(0,a.createHasher)(n.secp256k1.ProjectivePoint,(e=>{const{x:t,y:n}=R(g.create(e[0]));return B(t,n)}),{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:g.ORDER,m:1,k:128,expand:"xmd",hash:r.sha256}))();n.hashToCurve=N.hashToCurve,n.encodeToCurve=N.encodeToCurve}}},{package:"viem>webauthn-p256>@noble/curves",file:"node_modules/@noble/curves/secp256k1.js"}],[2864,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function s(e,...t){if(!((n=e)instanceof Uint8Array||ArrayBuffer.isView(n)&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");var n;if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}Object.defineProperty(n,"__esModule",{value:!0}),n.anumber=r,n.abytes=s,n.ahash=function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");r(e.outputLen),r(e.blockLen)},n.aexists=function(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")},n.aoutput=function(e,t){s(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/_assert.js"}],[2865,{"./_assert.js":2864,"./utils.js":2875},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.HashMD=void 0,n.setBigUint64=i,n.Chi=function(e,t,n){return e&t^~e&n},n.Maj=function(e,t,n){return e&t^e&n^t&n};const r=e("./_assert.js"),s=e("./utils.js");function i(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const s=BigInt(32),i=BigInt(4294967295),a=Number(n>>s&i),o=Number(n&i),c=r?4:0,u=r?0:4;e.setUint32(t+c,a,r),e.setUint32(t+u,o,r)}class a extends s.Hash{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,s.createView)(this.buffer)}update(e){(0,r.aexists)(this);const{view:t,buffer:n,blockLen:i}=this,a=(e=(0,s.toBytes)(e)).length;for(let r=0;r<a;){const o=Math.min(i-this.pos,a-r);if(o!==i)n.set(e.subarray(r,r+o),this.pos),this.pos+=o,r+=o,this.pos===i&&(this.process(t,0),this.pos=0);else{const t=(0,s.createView)(e);for(;i<=a-r;r+=i)this.process(t,r)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,r.aexists)(this),(0,r.aoutput)(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:a,isLE:o}=this;let{pos:c}=this;t[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>a-c&&(this.process(n,0),c=0);for(let e=c;e<a;e++)t[e]=0;i(n,a-8,BigInt(8*this.length),o),this.process(n,0);const u=(0,s.createView)(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=l/4,f=this.get();if(d>f.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<d;e++)u.setUint32(4*e,f[e],o)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:s,destroyed:i,pos:a}=this;return e.length=r,e.pos=a,e.finished=s,e.destroyed=i,r%t&&e.buffer.set(n),e}}n.HashMD=a}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/_md.js"}],[2866,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.add5L=n.add5H=n.add4H=n.add4L=n.add3H=n.add3L=n.rotlBL=n.rotlBH=n.rotlSL=n.rotlSH=n.rotr32L=n.rotr32H=n.rotrBL=n.rotrBH=n.rotrSL=n.rotrSH=n.shrSL=n.shrSH=n.toBig=void 0,n.fromBig=i,n.split=a,n.add=v;const r=BigInt(2**32-1),s=BigInt(32);function i(e,t=!1){return t?{h:Number(e&r),l:Number(e>>s&r)}:{h:0|Number(e>>s&r),l:0|Number(e&r)}}function a(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let s=0;s<e.length;s++){const{h:a,l:o}=i(e[s],t);[n[s],r[s]]=[a,o]}return[n,r]}const o=(e,t)=>BigInt(e>>>0)<<s|BigInt(t>>>0);n.toBig=o;const c=(e,t,n)=>e>>>n;n.shrSH=c;const u=(e,t,n)=>e<<32-n|t>>>n;n.shrSL=u;const l=(e,t,n)=>e>>>n|t<<32-n;n.rotrSH=l;const d=(e,t,n)=>e<<32-n|t>>>n;n.rotrSL=d;const f=(e,t,n)=>e<<64-n|t>>>n-32;n.rotrBH=f;const h=(e,t,n)=>e>>>n-32|t<<64-n;n.rotrBL=h;const p=(e,t)=>t;n.rotr32H=p;const m=(e,t)=>e;n.rotr32L=m;const g=(e,t,n)=>e<<n|t>>>32-n;n.rotlSH=g;const y=(e,t,n)=>t<<n|e>>>32-n;n.rotlSL=y;const b=(e,t,n)=>t<<n-32|e>>>64-n;n.rotlBH=b;const w=(e,t,n)=>e<<n-32|t>>>64-n;function v(e,t,n,r){const s=(t>>>0)+(r>>>0);return{h:e+n+(s/2**32|0)|0,l:0|s}}n.rotlBL=w;const S=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0);n.add3L=S;const T=(e,t,n,r)=>t+n+r+(e/2**32|0)|0;n.add3H=T;const E=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0);n.add4L=E;const j=(e,t,n,r,s)=>t+n+r+s+(e/2**32|0)|0;n.add4H=j;const k=(e,t,n,r,s)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(s>>>0);n.add5L=k;const x=(e,t,n,r,s,i)=>t+n+r+s+i+(e/2**32|0)|0;n.add5H=x;const _={fromBig:i,split:a,toBig:o,shrSH:c,shrSL:u,rotrSH:l,rotrSL:d,rotrBH:f,rotrBL:h,rotr32H:p,rotr32L:m,rotlSH:g,rotlSL:y,rotlBH:b,rotlBL:w,add:v,add3L:S,add3H:T,add4L:E,add4H:j,add5H:x,add5L:k};n.default=_}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/_u64.js"}],[2867,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.crypto=void 0,n.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:undefined}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/crypto.js"}],[2868,{"./_assert.js":2864,"./utils.js":2875},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.hmac=n.HMAC=void 0;const r=e("./_assert.js"),s=e("./utils.js");class i extends s.Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,r.ahash)(e);const n=(0,s.toBytes)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,a=new Uint8Array(i);a.set(n.length>i?e.create().update(n).digest():n);for(let e=0;e<a.length;e++)a[e]^=54;this.iHash.update(a),this.oHash=e.create();for(let e=0;e<a.length;e++)a[e]^=106;this.oHash.update(a),a.fill(0)}update(e){return(0,r.aexists)(this),this.iHash.update(e),this}digestInto(e){(0,r.aexists)(this),(0,r.abytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:s,blockLen:i,outputLen:a}=this;return e.finished=r,e.destroyed=s,e.blockLen=i,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}n.HMAC=i;n.hmac=(e,t,n)=>new i(e,t).update(n).digest(),n.hmac.create=(e,t)=>new i(e,t)}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/hmac.js"}],[2869,{"./_assert.js":2864,"./hmac.js":2868,"./utils.js":2875},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.pbkdf2=function(e,t,n,r){const{c:s,dkLen:c,DK:u,PRF:l,PRFSalt:d}=a(e,t,n,r);let f;const h=new Uint8Array(4),p=(0,i.createView)(h),m=new Uint8Array(l.outputLen);for(let e=1,t=0;t<c;e++,t+=l.outputLen){const n=u.subarray(t,t+l.outputLen);p.setInt32(0,e,!1),(f=d._cloneInto(f)).update(h).digestInto(m),n.set(m.subarray(0,n.length));for(let e=1;e<s;e++){l._cloneInto(f).update(m).digestInto(m);for(let e=0;e<n.length;e++)n[e]^=m[e]}}return o(l,d,u,f,m)},n.pbkdf2Async=async function(e,t,n,r){const{c:s,dkLen:c,asyncTick:u,DK:l,PRF:d,PRFSalt:f}=a(e,t,n,r);let h;const p=new Uint8Array(4),m=(0,i.createView)(p),g=new Uint8Array(d.outputLen);for(let e=1,t=0;t<c;e++,t+=d.outputLen){const n=l.subarray(t,t+d.outputLen);m.setInt32(0,e,!1),(h=f._cloneInto(h)).update(p).digestInto(g),n.set(g.subarray(0,n.length)),await(0,i.asyncLoop)(s-1,u,(()=>{d._cloneInto(h).update(g).digestInto(g);for(let e=0;e<n.length;e++)n[e]^=g[e]}))}return o(d,f,l,h,g)};const r=e("./_assert.js"),s=e("./hmac.js"),i=e("./utils.js");function a(e,t,n,a){(0,r.ahash)(e);const o=(0,i.checkOpts)({dkLen:32,asyncTick:10},a),{c:c,dkLen:u,asyncTick:l}=o;if((0,r.anumber)(c),(0,r.anumber)(u),(0,r.anumber)(l),c<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const d=(0,i.toBytes)(t),f=(0,i.toBytes)(n),h=new Uint8Array(u),p=s.hmac.create(e,d),m=p._cloneInto().update(f);return{c:c,dkLen:u,asyncTick:l,DK:h,PRF:p,PRFSalt:m}}function o(e,t,n,r,s){return e.destroy(),t.destroy(),r&&r.destroy(),s.fill(0),n}}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/pbkdf2.js"}],[2870,{"./_md.js":2865,"./utils.js":2875},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ripemd160=n.RIPEMD160=void 0;const r=e("./_md.js"),s=e("./utils.js"),i=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),a=new Uint8Array(new Array(16).fill(0).map(((e,t)=>t)));let o=[a],c=[a.map((e=>(9*e+5)%16))];for(let e=0;e<4;e++)for(let t of[o,c])t.push(t[e].map((e=>i[e])));const u=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((e=>new Uint8Array(e))),l=o.map(((e,t)=>e.map((e=>u[t][e])))),d=c.map(((e,t)=>e.map((e=>u[t][e])))),f=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),h=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]);function p(e,t,n,r){return 0===e?t^n^r:1===e?t&n|~t&r:2===e?(t|~n)^r:3===e?t&r|n&~r:t^(n|~r)}const m=new Uint32Array(16);class g extends r.HashMD{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:t,h2:n,h3:r,h4:s}=this;return[e,t,n,r,s]}set(e,t,n,r,s){this.h0=0|e,this.h1=0|t,this.h2=0|n,this.h3=0|r,this.h4=0|s}process(e,t){for(let n=0;n<16;n++,t+=4)m[n]=e.getUint32(t,!0);let n=0|this.h0,r=n,i=0|this.h1,a=i,u=0|this.h2,g=u,y=0|this.h3,b=y,w=0|this.h4,v=w;for(let e=0;e<5;e++){const t=4-e,S=f[e],T=h[e],E=o[e],j=c[e],k=l[e],x=d[e];for(let t=0;t<16;t++){const r=(0,s.rotl)(n+p(e,i,u,y)+m[E[t]]+S,k[t])+w|0;n=w,w=y,y=0|(0,s.rotl)(u,10),u=i,i=r}for(let e=0;e<16;e++){const n=(0,s.rotl)(r+p(t,a,g,b)+m[j[e]]+T,x[e])+v|0;r=v,v=b,b=0|(0,s.rotl)(g,10),g=a,a=n}}this.set(this.h1+u+b|0,this.h2+y+v|0,this.h3+w+r|0,this.h4+n+a|0,this.h0+i+g|0)}roundClean(){m.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}n.RIPEMD160=g,n.ripemd160=(0,s.wrapConstructor)((()=>new g))}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/ripemd160.js"}],[2871,{"./_assert.js":2864,"./pbkdf2.js":2869,"./sha256.js":2872,"./utils.js":2875},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.scrypt=function(e,t,n){const{N:r,r:s,p:i,dkLen:o,blockSize32:d,V:f,B32:h,B:p,tmp:m,blockMixCb:g}=u(e,t,n);a.isLE||(0,a.byteSwap32)(h);for(let e=0;e<i;e++){const t=d*e;for(let e=0;e<d;e++)f[e]=h[t+e];for(let e=0,t=0;e<r-1;e++)c(f,t,f,t+=d,s),g();c(f,(r-1)*d,h,t,s),g();for(let e=0;e<r;e++){const e=h[t+d-16]%r;for(let n=0;n<d;n++)m[n]=h[t+n]^f[e*d+n];c(m,0,h,t,s),g()}}a.isLE||(0,a.byteSwap32)(h);return l(e,o,p,f,m)},n.scryptAsync=async function(e,t,n){const{N:r,r:s,p:i,dkLen:o,blockSize32:d,V:f,B32:h,B:p,tmp:m,blockMixCb:g,asyncTick:y}=u(e,t,n);a.isLE||(0,a.byteSwap32)(h);for(let e=0;e<i;e++){const t=d*e;for(let e=0;e<d;e++)f[e]=h[t+e];let n=0;await(0,a.asyncLoop)(r-1,y,(()=>{c(f,n,f,n+=d,s),g()})),c(f,(r-1)*d,h,t,s),g(),await(0,a.asyncLoop)(r,y,(()=>{const e=h[t+d-16]%r;for(let n=0;n<d;n++)m[n]=h[t+n]^f[e*d+n];c(m,0,h,t,s),g()}))}a.isLE||(0,a.byteSwap32)(h);return l(e,o,p,f,m)};const r=e("./_assert.js"),s=e("./pbkdf2.js"),i=e("./sha256.js"),a=e("./utils.js");function o(e,t,n,r,s,i){let o=e[t++]^n[r++],c=e[t++]^n[r++],u=e[t++]^n[r++],l=e[t++]^n[r++],d=e[t++]^n[r++],f=e[t++]^n[r++],h=e[t++]^n[r++],p=e[t++]^n[r++],m=e[t++]^n[r++],g=e[t++]^n[r++],y=e[t++]^n[r++],b=e[t++]^n[r++],w=e[t++]^n[r++],v=e[t++]^n[r++],S=e[t++]^n[r++],T=e[t++]^n[r++],E=o,j=c,k=u,x=l,_=d,I=f,P=h,A=p,C=m,O=g,B=y,R=b,N=w,F=v,M=S,L=T;for(let e=0;e<8;e+=2)_^=(0,a.rotl)(E+N|0,7),C^=(0,a.rotl)(_+E|0,9),N^=(0,a.rotl)(C+_|0,13),E^=(0,a.rotl)(N+C|0,18),O^=(0,a.rotl)(I+j|0,7),F^=(0,a.rotl)(O+I|0,9),j^=(0,a.rotl)(F+O|0,13),I^=(0,a.rotl)(j+F|0,18),M^=(0,a.rotl)(B+P|0,7),k^=(0,a.rotl)(M+B|0,9),P^=(0,a.rotl)(k+M|0,13),B^=(0,a.rotl)(P+k|0,18),x^=(0,a.rotl)(L+R|0,7),A^=(0,a.rotl)(x+L|0,9),R^=(0,a.rotl)(A+x|0,13),L^=(0,a.rotl)(R+A|0,18),j^=(0,a.rotl)(E+x|0,7),k^=(0,a.rotl)(j+E|0,9),x^=(0,a.rotl)(k+j|0,13),E^=(0,a.rotl)(x+k|0,18),P^=(0,a.rotl)(I+_|0,7),A^=(0,a.rotl)(P+I|0,9),_^=(0,a.rotl)(A+P|0,13),I^=(0,a.rotl)(_+A|0,18),R^=(0,a.rotl)(B+O|0,7),C^=(0,a.rotl)(R+B|0,9),O^=(0,a.rotl)(C+R|0,13),B^=(0,a.rotl)(O+C|0,18),N^=(0,a.rotl)(L+M|0,7),F^=(0,a.rotl)(N+L|0,9),M^=(0,a.rotl)(F+N|0,13),L^=(0,a.rotl)(M+F|0,18);s[i++]=o+E|0,s[i++]=c+j|0,s[i++]=u+k|0,s[i++]=l+x|0,s[i++]=d+_|0,s[i++]=f+I|0,s[i++]=h+P|0,s[i++]=p+A|0,s[i++]=m+C|0,s[i++]=g+O|0,s[i++]=y+B|0,s[i++]=b+R|0,s[i++]=w+N|0,s[i++]=v+F|0,s[i++]=S+M|0,s[i++]=T+L|0}function c(e,t,n,r,s){let i=r+0,a=r+16*s;for(let r=0;r<16;r++)n[a+r]=e[t+16*(2*s-1)+r];for(let r=0;r<s;r++,i+=16,t+=16)o(n,a,e,t,n,i),r>0&&(a+=16),o(n,i,e,t+=16,n,a)}function u(e,t,n){const o=(0,a.checkOpts)({dkLen:32,asyncTick:10,maxmem:1073742848},n),{N:c,r:u,p:l,dkLen:d,asyncTick:f,maxmem:h,onProgress:p}=o;if((0,r.anumber)(c),(0,r.anumber)(u),(0,r.anumber)(l),(0,r.anumber)(d),(0,r.anumber)(f),(0,r.anumber)(h),p!==undefined&&"function"!=typeof p)throw new Error("progressCb should be function");const m=128*u,g=m/4;if(c<=1||c&c-1||c>2**32)throw new Error("Scrypt: N must be larger than 1, a power of 2, and less than 2^32");if(l<0||l>137438953440/m)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(d<0||d>137438953440)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");if(m*(c+l)>h)throw new Error("Scrypt: memused is bigger than maxMem. Expected 128 * r * (N + p) > maxmem of "+h);const y=(0,s.pbkdf2)(i.sha256,e,t,{c:1,dkLen:m*l}),b=(0,a.u32)(y),w=(0,a.u32)(new Uint8Array(m*c)),v=(0,a.u32)(new Uint8Array(m));let S=()=>{};if(p){const e=2*c*l,t=Math.max(Math.floor(e/1e4),1);let n=0;S=()=>{n++,!p||n%t&&n!==e||p(n/e)}}return{N:c,r:u,p:l,dkLen:d,blockSize32:g,V:w,B32:b,B:y,tmp:v,blockMixCb:S,asyncTick:f}}function l(e,t,n,r,a){const o=(0,s.pbkdf2)(i.sha256,e,n,{c:1,dkLen:t});return n.fill(0),r.fill(0),a.fill(0),o}}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/scrypt.js"}],[2872,{"./_md.js":2865,"./utils.js":2875},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.sha224=n.sha256=n.SHA256=void 0;const r=e("./_md.js"),s=e("./utils.js"),i=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),a=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),o=new Uint32Array(64);class c extends r.HashMD{constructor(){super(64,32,8,!1),this.A=0|a[0],this.B=0|a[1],this.C=0|a[2],this.D=0|a[3],this.E=0|a[4],this.F=0|a[5],this.G=0|a[6],this.H=0|a[7]}get(){const{A:e,B:t,C:n,D:r,E:s,F:i,G:a,H:o}=this;return[e,t,n,r,s,i,a,o]}set(e,t,n,r,s,i,a,o){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|s,this.F=0|i,this.G=0|a,this.H=0|o}process(e,t){for(let n=0;n<16;n++,t+=4)o[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=o[e-15],n=o[e-2],r=(0,s.rotr)(t,7)^(0,s.rotr)(t,18)^t>>>3,i=(0,s.rotr)(n,17)^(0,s.rotr)(n,19)^n>>>10;o[e]=i+o[e-7]+r+o[e-16]|0}let{A:n,B:a,C:c,D:u,E:l,F:d,G:f,H:h}=this;for(let e=0;e<64;e++){const t=h+((0,s.rotr)(l,6)^(0,s.rotr)(l,11)^(0,s.rotr)(l,25))+(0,r.Chi)(l,d,f)+i[e]+o[e]|0,p=((0,s.rotr)(n,2)^(0,s.rotr)(n,13)^(0,s.rotr)(n,22))+(0,r.Maj)(n,a,c)|0;h=f,f=d,d=l,l=u+t|0,u=c,c=a,a=n,n=t+p|0}n=n+this.A|0,a=a+this.B|0,c=c+this.C|0,u=u+this.D|0,l=l+this.E|0,d=d+this.F|0,f=f+this.G|0,h=h+this.H|0,this.set(n,a,c,u,l,d,f,h)}roundClean(){o.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}n.SHA256=c;class u extends c{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}n.sha256=(0,s.wrapConstructor)((()=>new c)),n.sha224=(0,s.wrapConstructor)((()=>new u))}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/sha256.js"}],[2873,{"./_assert.js":2864,"./_u64.js":2866,"./utils.js":2875},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.shake256=n.shake128=n.keccak_512=n.keccak_384=n.keccak_256=n.keccak_224=n.sha3_512=n.sha3_384=n.sha3_256=n.sha3_224=n.Keccak=void 0,n.keccakP=w;const r=e("./_assert.js"),s=e("./_u64.js"),i=e("./utils.js"),a=[],o=[],c=[],u=BigInt(0),l=BigInt(1),d=BigInt(2),f=BigInt(7),h=BigInt(256),p=BigInt(113);for(let e=0,t=l,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],a.push(2*(5*r+n)),o.push((e+1)*(e+2)/2%64);let s=u;for(let e=0;e<7;e++)t=(t<<l^(t>>f)*p)%h,t&d&&(s^=l<<(l<<BigInt(e))-l);c.push(s)}const[m,g]=(0,s.split)(c,!0),y=(e,t,n)=>n>32?(0,s.rotlBH)(e,t,n):(0,s.rotlSH)(e,t,n),b=(e,t,n)=>n>32?(0,s.rotlBL)(e,t,n):(0,s.rotlSL)(e,t,n);function w(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let t=0;t<10;t++)n[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){const r=(t+8)%10,s=(t+2)%10,i=n[s],a=n[s+1],o=y(i,a,1)^n[r],c=b(i,a,1)^n[r+1];for(let n=0;n<50;n+=10)e[t+n]^=o,e[t+n+1]^=c}let t=e[2],s=e[3];for(let n=0;n<24;n++){const r=o[n],i=y(t,s,r),c=b(t,s,r),u=a[n];t=e[u],s=e[u+1],e[u]=i,e[u+1]=c}for(let t=0;t<50;t+=10){for(let r=0;r<10;r++)n[r]=e[t+r];for(let r=0;r<10;r++)e[t+r]^=~n[(r+2)%10]&n[(r+4)%10]}e[0]^=m[r],e[1]^=g[r]}n.fill(0)}class v extends i.Hash{constructor(e,t,n,s=!1,a=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=s,this.rounds=a,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,r.anumber)(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,i.u32)(this.state)}keccak(){i.isLE||(0,i.byteSwap32)(this.state32),w(this.state32,this.rounds),i.isLE||(0,i.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(e){(0,r.aexists)(this);const{blockLen:t,state:n}=this,s=(e=(0,i.toBytes)(e)).length;for(let r=0;r<s;){const i=Math.min(t-this.pos,s-r);for(let t=0;t<i;t++)n[this.pos++]^=e[r++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:r}=this;e[n]^=t,128&t&&n===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}writeInto(e){(0,r.aexists)(this,!1),(0,r.abytes)(e),this.finish();const t=this.state,{blockLen:n}=this;for(let r=0,s=e.length;r<s;){this.posOut>=n&&this.keccak();const i=Math.min(n-this.posOut,s-r);e.set(t.subarray(this.posOut,this.posOut+i),r),this.posOut+=i,r+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,r.anumber)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,r.aoutput)(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:r,rounds:s,enableXOF:i}=this;return e||(e=new v(t,n,r,i,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=r,e.enableXOF=i,e.destroyed=this.destroyed,e}}n.Keccak=v;const S=(e,t,n)=>(0,i.wrapConstructor)((()=>new v(t,e,n)));n.sha3_224=S(6,144,28),n.sha3_256=S(6,136,32),n.sha3_384=S(6,104,48),n.sha3_512=S(6,72,64),n.keccak_224=S(1,144,28),n.keccak_256=S(1,136,32),n.keccak_384=S(1,104,48),n.keccak_512=S(1,72,64);const T=(e,t,n)=>(0,i.wrapXOFConstructorWithOpts)(((r={})=>new v(t,e,r.dkLen===undefined?n:r.dkLen,!0)));n.shake128=T(31,168,16),n.shake256=T(31,136,32)}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/sha3.js"}],[2874,{"./_md.js":2865,"./_u64.js":2866,"./utils.js":2875},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.sha384=n.sha512_256=n.sha512_224=n.sha512=n.SHA384=n.SHA512_256=n.SHA512_224=n.SHA512=void 0;const r=e("./_md.js"),s=e("./_u64.js"),i=e("./utils.js"),[a,o]=(()=>s.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),c=new Uint32Array(80),u=new Uint32Array(80);class l extends r.HashMD{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:r,Ch:s,Cl:i,Dh:a,Dl:o,Eh:c,El:u,Fh:l,Fl:d,Gh:f,Gl:h,Hh:p,Hl:m}=this;return[e,t,n,r,s,i,a,o,c,u,l,d,f,h,p,m]}set(e,t,n,r,s,i,a,o,c,u,l,d,f,h,p,m){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|s,this.Cl=0|i,this.Dh=0|a,this.Dl=0|o,this.Eh=0|c,this.El=0|u,this.Fh=0|l,this.Fl=0|d,this.Gh=0|f,this.Gl=0|h,this.Hh=0|p,this.Hl=0|m}process(e,t){for(let n=0;n<16;n++,t+=4)c[n]=e.getUint32(t),u[n]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|c[e-15],n=0|u[e-15],r=s.default.rotrSH(t,n,1)^s.default.rotrSH(t,n,8)^s.default.shrSH(t,n,7),i=s.default.rotrSL(t,n,1)^s.default.rotrSL(t,n,8)^s.default.shrSL(t,n,7),a=0|c[e-2],o=0|u[e-2],l=s.default.rotrSH(a,o,19)^s.default.rotrBH(a,o,61)^s.default.shrSH(a,o,6),d=s.default.rotrSL(a,o,19)^s.default.rotrBL(a,o,61)^s.default.shrSL(a,o,6),f=s.default.add4L(i,d,u[e-7],u[e-16]),h=s.default.add4H(f,r,l,c[e-7],c[e-16]);c[e]=0|h,u[e]=0|f}let{Ah:n,Al:r,Bh:i,Bl:l,Ch:d,Cl:f,Dh:h,Dl:p,Eh:m,El:g,Fh:y,Fl:b,Gh:w,Gl:v,Hh:S,Hl:T}=this;for(let e=0;e<80;e++){const t=s.default.rotrSH(m,g,14)^s.default.rotrSH(m,g,18)^s.default.rotrBH(m,g,41),E=s.default.rotrSL(m,g,14)^s.default.rotrSL(m,g,18)^s.default.rotrBL(m,g,41),j=m&y^~m&w,k=g&b^~g&v,x=s.default.add5L(T,E,k,o[e],u[e]),_=s.default.add5H(x,S,t,j,a[e],c[e]),I=0|x,P=s.default.rotrSH(n,r,28)^s.default.rotrBH(n,r,34)^s.default.rotrBH(n,r,39),A=s.default.rotrSL(n,r,28)^s.default.rotrBL(n,r,34)^s.default.rotrBL(n,r,39),C=n&i^n&d^i&d,O=r&l^r&f^l&f;S=0|w,T=0|v,w=0|y,v=0|b,y=0|m,b=0|g,({h:m,l:g}=s.default.add(0|h,0|p,0|_,0|I)),h=0|d,p=0|f,d=0|i,f=0|l,i=0|n,l=0|r;const B=s.default.add3L(I,A,O);n=s.default.add3H(B,_,P,C),r=0|B}({h:n,l:r}=s.default.add(0|this.Ah,0|this.Al,0|n,0|r)),({h:i,l:l}=s.default.add(0|this.Bh,0|this.Bl,0|i,0|l)),({h:d,l:f}=s.default.add(0|this.Ch,0|this.Cl,0|d,0|f)),({h:h,l:p}=s.default.add(0|this.Dh,0|this.Dl,0|h,0|p)),({h:m,l:g}=s.default.add(0|this.Eh,0|this.El,0|m,0|g)),({h:y,l:b}=s.default.add(0|this.Fh,0|this.Fl,0|y,0|b)),({h:w,l:v}=s.default.add(0|this.Gh,0|this.Gl,0|w,0|v)),({h:S,l:T}=s.default.add(0|this.Hh,0|this.Hl,0|S,0|T)),this.set(n,r,i,l,d,f,h,p,m,g,y,b,w,v,S,T)}roundClean(){c.fill(0),u.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}n.SHA512=l;class d extends l{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}n.SHA512_224=d;class f extends l{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}n.SHA512_256=f;class h extends l{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}n.SHA384=h,n.sha512=(0,i.wrapConstructor)((()=>new l)),n.sha512_224=(0,i.wrapConstructor)((()=>new d)),n.sha512_256=(0,i.wrapConstructor)((()=>new f)),n.sha384=(0,i.wrapConstructor)((()=>new h))}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/sha512.js"}],[2875,{"./_assert.js":2864,"@noble/hashes/crypto":2867},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(n,"__esModule",{value:!0}),n.Hash=n.nextTick=n.byteSwapIfBE=n.isLE=void 0,n.isBytes=function(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name},n.u8=function(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)},n.u32=function(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))},n.createView=function(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)},n.rotr=function(e,t){return e<<32-t|e>>>t},n.rotl=function(e,t){return e<<t|e>>>32-t>>>0},n.byteSwap=i,n.byteSwap32=function(e){for(let t=0;t<e.length;t++)e[t]=i(e[t])},n.bytesToHex=function(e){(0,s.abytes)(e);let t="";for(let n=0;n<e.length;n++)t+=a[e[n]];return t},n.hexToBytes=function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let t=0,s=0;t<n;t++,s+=2){const n=c(e.charCodeAt(s)),i=c(e.charCodeAt(s+1));if(n===undefined||i===undefined){const t=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+s)}r[t]=16*n+i}return r},n.asyncLoop=async function(e,t,r){let s=Date.now();for(let i=0;i<e;i++){r(i);const e=Date.now()-s;e>=0&&e<t||(await(0,n.nextTick)(),s+=e)}},n.utf8ToBytes=u,n.toBytes=l,n.concatBytes=function(...e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];(0,s.abytes)(r),t+=r.length}const n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const s=e[t];n.set(s,r),r+=s.length}return n},n.checkOpts=function(e,t){if(t!==undefined&&"[object Object]"!=={}.toString.call(t))throw new Error("Options should be object or undefined");return Object.assign(e,t)},n.wrapConstructor=function(e){const t=t=>e().update(l(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t},n.wrapConstructorWithOpts=function(e){const t=(t,n)=>e(n).update(l(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},n.wrapXOFConstructorWithOpts=function(e){const t=(t,n)=>e(n).update(l(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},n.randomBytes=function(e=32){if(r.crypto&&"function"==typeof r.crypto.getRandomValues)return r.crypto.getRandomValues(new Uint8Array(e));if(r.crypto&&"function"==typeof r.crypto.randomBytes)return r.crypto.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")};const r=e("@noble/hashes/crypto"),s=e("./_assert.js");function i(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}n.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],n.byteSwapIfBE=n.isLE?e=>e:e=>i(e);const a=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));const o={_0:48,_9:57,A:65,F:70,a:97,f:102};function c(e){return e>=o._0&&e<=o._9?e-o._0:e>=o.A&&e<=o.F?e-(o.A-10):e>=o.a&&e<=o.f?e-(o.a-10):void 0}function u(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function l(e){return"string"==typeof e&&(e=u(e)),(0,s.abytes)(e),e}n.nextTick=async()=>{};n.Hash=class{clone(){return this._cloneInto()}}}}},{package:"@noble/hashes",file:"node_modules/@noble/hashes/utils.js"}],[2880,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e){var t=e.getBoundingClientRect();return{width:t.width,height:t.height,top:t.top,right:t.right,bottom:t.bottom,left:t.left,x:t.left,y:t.top}}function s(e){if(null==e)return window;if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function i(e){var t=s(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function a(e){return e instanceof s(e).Element||e instanceof Element}function o(e){return e instanceof s(e).HTMLElement||e instanceof HTMLElement}function c(e){return"undefined"!=typeof ShadowRoot&&(e instanceof s(e).ShadowRoot||e instanceof ShadowRoot)}function u(e){return e?(e.nodeName||"").toLowerCase():null}function l(e){return((a(e)?e.ownerDocument:e.document)||window.document).documentElement}function d(e){return r(l(e)).left+i(e).scrollLeft}function f(e){return s(e).getComputedStyle(e)}function h(e){var t=f(e),n=t.overflow,r=t.overflowX,s=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+s+r)}function p(e,t,n){void 0===n&&(n=!1);var a,c,f=l(t),p=r(e),m=o(t),g={scrollLeft:0,scrollTop:0},y={x:0,y:0};return(m||!m&&!n)&&(("body"!==u(t)||h(f))&&(g=(a=t)!==s(a)&&o(a)?{scrollLeft:(c=a).scrollLeft,scrollTop:c.scrollTop}:i(a)),o(t)?((y=r(t)).x+=t.clientLeft,y.y+=t.clientTop):f&&(y.x=d(f))),{x:p.left+g.scrollLeft-y.x,y:p.top+g.scrollTop-y.y,width:p.width,height:p.height}}function m(e){var t=r(e),n=e.offsetWidth,s=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-s)<=1&&(s=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:s}}function g(e){return"html"===u(e)?e:e.assignedSlot||e.parentNode||(c(e)?e.host:null)||l(e)}function y(e){return["html","body","#document"].indexOf(u(e))>=0?e.ownerDocument.body:o(e)&&h(e)?e:y(g(e))}function b(e,t){var n;void 0===t&&(t=[]);var r=y(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),a=s(r),o=i?[a].concat(a.visualViewport||[],h(r)?r:[]):r,c=t.concat(o);return i?c:c.concat(b(g(o)))}function w(e){return["table","td","th"].indexOf(u(e))>=0}function v(e){return o(e)&&"fixed"!==f(e).position?e.offsetParent:null}function S(e){for(var t=s(e),n=v(e);n&&w(n)&&"static"===f(n).position;)n=v(n);return n&&("html"===u(n)||"body"===u(n)&&"static"===f(n).position)?t:n||function(e){var t=-1!==navigator.userAgent.toLowerCase().indexOf("firefox");if(-1!==navigator.userAgent.indexOf("Trident")&&o(e)&&"fixed"===f(e).position)return null;for(var n=g(e);o(n)&&["html","body"].indexOf(u(n))<0;){var r=f(n);if("none"!==r.transform||"none"!==r.perspective||"paint"===r.contain||-1!==["transform","perspective"].indexOf(r.willChange)||t&&"filter"===r.willChange||t&&r.filter&&"none"!==r.filter)return n;n=n.parentNode}return null}(e)||t}Object.defineProperty(n,"__esModule",{value:!0});var T="top",E="bottom",j="right",k="left",x="auto",_=[T,E,j,k],I="start",P="end",A="clippingParents",C="viewport",O="popper",B="reference",R=_.reduce((function(e,t){return e.concat([t+"-"+I,t+"-"+P])}),[]),N=[].concat(_,[x]).reduce((function(e,t){return e.concat([t,t+"-"+I,t+"-"+P])}),[]),F=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function M(e){var t=new Map,n=new Set,r=[];function s(e){n.add(e.name),[].concat(e.requires||[],e.requiresIfExists||[]).forEach((function(e){if(!n.has(e)){var r=t.get(e);r&&s(r)}})),r.push(e)}return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||s(e)})),r}function L(e){return e.split("-")[0]}var D=Math.max,H=Math.min,U=Math.round;function G(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&c(n)){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function $(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function q(e,t){return t===C?$(function(e){var t=s(e),n=l(e),r=t.visualViewport,i=n.clientWidth,a=n.clientHeight,o=0,c=0;return r&&(i=r.width,a=r.height,/^((?!chrome|android).)*safari/i.test(navigator.userAgent)||(o=r.offsetLeft,c=r.offsetTop)),{width:i,height:a,x:o+d(e),y:c}}(e)):o(t)?function(e){var t=r(e);return t.top=t.top+e.clientTop,t.left=t.left+e.clientLeft,t.bottom=t.top+e.clientHeight,t.right=t.left+e.clientWidth,t.width=e.clientWidth,t.height=e.clientHeight,t.x=t.left,t.y=t.top,t}(t):$(function(e){var t,n=l(e),r=i(e),s=null==(t=e.ownerDocument)?void 0:t.body,a=D(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),o=D(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0),c=-r.scrollLeft+d(e),u=-r.scrollTop;return"rtl"===f(s||n).direction&&(c+=D(n.clientWidth,s?s.clientWidth:0)-a),{width:a,height:o,x:c,y:u}}(l(e)))}function z(e,t,n){var r="clippingParents"===t?function(e){var t=b(g(e)),n=["absolute","fixed"].indexOf(f(e).position)>=0&&o(e)?S(e):e;return a(n)?t.filter((function(e){return a(e)&&G(e,n)&&"body"!==u(e)})):[]}(e):[].concat(t),s=[].concat(r,[n]),i=s[0],c=s.reduce((function(t,n){var r=q(e,n);return t.top=D(r.top,t.top),t.right=H(r.right,t.right),t.bottom=H(r.bottom,t.bottom),t.left=D(r.left,t.left),t}),q(e,i));return c.width=c.right-c.left,c.height=c.bottom-c.top,c.x=c.left,c.y=c.top,c}function W(e){return e.split("-")[1]}function V(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function K(e){var t,n=e.reference,r=e.element,s=e.placement,i=s?L(s):null,a=s?W(s):null,o=n.x+n.width/2-r.width/2,c=n.y+n.height/2-r.height/2;switch(i){case T:t={x:o,y:n.y-r.height};break;case E:t={x:o,y:n.y+n.height};break;case j:t={x:n.x+n.width,y:c};break;case k:t={x:n.x-r.width,y:c};break;default:t={x:n.x,y:n.y}}var u=i?V(i):null;if(null!=u){var l="y"===u?"height":"width";switch(a){case I:t[u]=t[u]-(n[l]/2-r[l]/2);break;case P:t[u]=t[u]+(n[l]/2-r[l]/2)}}return t}function J(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},e)}function X(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function Z(e,t){void 0===t&&(t={});var n=t,s=n.placement,i=void 0===s?e.placement:s,o=n.boundary,c=void 0===o?A:o,u=n.rootBoundary,d=void 0===u?C:u,f=n.elementContext,h=void 0===f?O:f,p=n.altBoundary,m=void 0!==p&&p,g=n.padding,y=void 0===g?0:g,b=J("number"!=typeof y?y:X(y,_)),w=h===O?B:O,v=e.elements.reference,S=e.rects.popper,k=e.elements[m?w:h],x=z(a(k)?k:k.contextElement||l(e.elements.popper),c,d),I=r(v),P=K({reference:I,element:S,strategy:"absolute",placement:i}),R=$(Object.assign({},S,P)),N=h===O?R:I,F={top:x.top-N.top+b.top,bottom:N.bottom-x.bottom+b.bottom,left:x.left-N.left+b.left,right:N.right-x.right+b.right},M=e.modifiersData.offset;if(h===O&&M){var L=M[i];Object.keys(F).forEach((function(e){var t=[j,E].indexOf(e)>=0?1:-1,n=[T,E].indexOf(e)>=0?"y":"x";F[e]+=L[n]*t}))}return F}var Y={placement:"bottom",modifiers:[],strategy:"absolute"};function Q(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function ee(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,s=t.defaultOptions,i=void 0===s?Y:s;return function(e,t,n){void 0===n&&(n=i);var s,o,c={placement:"bottom",orderedModifiers:[],options:Object.assign({},Y,i),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},u=[],l=!1,d={state:c,setOptions:function(n){f(),c.options=Object.assign({},i,c.options,n),c.scrollParents={reference:a(e)?b(e):e.contextElement?b(e.contextElement):[],popper:b(t)};var s=function(e){var t=M(e);return F.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,t,{options:Object.assign({},n.options,t.options),data:Object.assign({},n.data,t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,c.options.modifiers)));return c.orderedModifiers=s.filter((function(e){return e.enabled})),c.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,s=e.effect;if("function"==typeof s){var i=s({state:c,name:t,instance:d,options:r}),a=function(){};u.push(i||a)}})),d.update()},forceUpdate:function(){if(!l){var e=c.elements,t=e.reference,n=e.popper;if(Q(t,n)){c.rects={reference:p(t,S(n),"fixed"===c.options.strategy),popper:m(n)},c.reset=!1,c.placement=c.options.placement,c.orderedModifiers.forEach((function(e){return c.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<c.orderedModifiers.length;r++)if(!0!==c.reset){var s=c.orderedModifiers[r],i=s.fn,a=s.options,o=void 0===a?{}:a,u=s.name;"function"==typeof i&&(c=i({state:c,options:o,name:u,instance:d})||c)}else c.reset=!1,r=-1}}},update:(s=function(){return new Promise((function(e){d.forceUpdate(),e(c)}))},function(){return o||(o=new Promise((function(e){Promise.resolve().then((function(){o=undefined,e(s())}))}))),o}),destroy:function(){f(),l=!0}};if(!Q(e,t))return d;function f(){u.forEach((function(e){return e()})),u=[]}return d.setOptions(n).then((function(e){!l&&n.onFirstUpdate&&n.onFirstUpdate(e)})),d}}var te={passive:!0};var ne={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,i=r.scroll,a=void 0===i||i,o=r.resize,c=void 0===o||o,u=s(t.elements.popper),l=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&l.forEach((function(e){e.addEventListener("scroll",n.update,te)})),c&&u.addEventListener("resize",n.update,te),function(){a&&l.forEach((function(e){e.removeEventListener("scroll",n.update,te)})),c&&u.removeEventListener("resize",n.update,te)}},data:{}};var re={name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=K({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},se={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ie(e){var t,n=e.popper,r=e.popperRect,i=e.placement,a=e.offsets,o=e.position,c=e.gpuAcceleration,u=e.adaptive,d=e.roundOffsets,h=!0===d?function(e){var t=e.x,n=e.y,r=window.devicePixelRatio||1;return{x:U(U(t*r)/r)||0,y:U(U(n*r)/r)||0}}(a):"function"==typeof d?d(a):a,p=h.x,m=void 0===p?0:p,g=h.y,y=void 0===g?0:g,b=a.hasOwnProperty("x"),w=a.hasOwnProperty("y"),v=k,x=T,_=window;if(u){var I=S(n),P="clientHeight",A="clientWidth";I===s(n)&&"static"!==f(I=l(n)).position&&(P="scrollHeight",A="scrollWidth"),i===T&&(x=E,y-=I[P]-r.height,y*=c?1:-1),i===k&&(v=j,m-=I[A]-r.width,m*=c?1:-1)}var C,O=Object.assign({position:o},u&&se);return c?Object.assign({},O,((C={})[x]=w?"0":"",C[v]=b?"0":"",C.transform=(_.devicePixelRatio||1)<2?"translate("+m+"px, "+y+"px)":"translate3d("+m+"px, "+y+"px, 0)",C)):Object.assign({},O,((t={})[x]=w?y+"px":"",t[v]=b?m+"px":"",t.transform="",t))}var ae={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,s=void 0===r||r,i=n.adaptive,a=void 0===i||i,o=n.roundOffsets,c=void 0===o||o,u={placement:L(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:s};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,ie(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:a,roundOffsets:c})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,ie(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}};var oe={name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},s=t.elements[e];o(s)&&u(s)&&(Object.assign(s.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?s.removeAttribute(e):s.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],s=t.attributes[e]||{},i=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});o(r)&&u(r)&&(Object.assign(r.style,i),Object.keys(s).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]};var ce={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,s=n.offset,i=void 0===s?[0,0]:s,a=N.reduce((function(e,n){return e[n]=function(e,t,n){var r=L(e),s=[k,T].indexOf(r)>=0?-1:1,i="function"==typeof n?n(Object.assign({},t,{placement:e})):n,a=i[0],o=i[1];return a=a||0,o=(o||0)*s,[k,j].indexOf(r)>=0?{x:o,y:a}:{x:a,y:o}}(n,t.rects,i),e}),{}),o=a[t.placement],c=o.x,u=o.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=u),t.modifiersData[r]=a}},ue={left:"right",right:"left",bottom:"top",top:"bottom"};function le(e){return e.replace(/left|right|bottom|top/g,(function(e){return ue[e]}))}var de={start:"end",end:"start"};function fe(e){return e.replace(/start|end/g,(function(e){return de[e]}))}function he(e,t){void 0===t&&(t={});var n=t,r=n.placement,s=n.boundary,i=n.rootBoundary,a=n.padding,o=n.flipVariations,c=n.allowedAutoPlacements,u=void 0===c?N:c,l=W(r),d=l?o?R:R.filter((function(e){return W(e)===l})):_,f=d.filter((function(e){return u.indexOf(e)>=0}));0===f.length&&(f=d);var h=f.reduce((function(t,n){return t[n]=Z(e,{placement:n,boundary:s,rootBoundary:i,padding:a})[L(n)],t}),{});return Object.keys(h).sort((function(e,t){return h[e]-h[t]}))}var pe={name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var s=n.mainAxis,i=void 0===s||s,a=n.altAxis,o=void 0===a||a,c=n.fallbackPlacements,u=n.padding,l=n.boundary,d=n.rootBoundary,f=n.altBoundary,h=n.flipVariations,p=void 0===h||h,m=n.allowedAutoPlacements,g=t.options.placement,y=L(g),b=c||(y===g||!p?[le(g)]:function(e){if(L(e)===x)return[];var t=le(e);return[fe(e),t,fe(t)]}(g)),w=[g].concat(b).reduce((function(e,n){return e.concat(L(n)===x?he(t,{placement:n,boundary:l,rootBoundary:d,padding:u,flipVariations:p,allowedAutoPlacements:m}):n)}),[]),v=t.rects.reference,S=t.rects.popper,_=new Map,P=!0,A=w[0],C=0;C<w.length;C++){var O=w[C],B=L(O),R=W(O)===I,N=[T,E].indexOf(B)>=0,F=N?"width":"height",M=Z(t,{placement:O,boundary:l,rootBoundary:d,altBoundary:f,padding:u}),D=N?R?j:k:R?E:T;v[F]>S[F]&&(D=le(D));var H=le(D),U=[];if(i&&U.push(M[B]<=0),o&&U.push(M[D]<=0,M[H]<=0),U.every((function(e){return e}))){A=O,P=!1;break}_.set(O,U)}if(P)for(var G=function(e){var t=w.find((function(t){var n=_.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return A=t,"break"},$=p?3:1;$>0;$--){if("break"===G($))break}t.placement!==A&&(t.modifiersData[r]._skip=!0,t.placement=A,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function me(e,t,n){return D(e,H(t,n))}var ge={name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,s=n.mainAxis,i=void 0===s||s,a=n.altAxis,o=void 0!==a&&a,c=n.boundary,u=n.rootBoundary,l=n.altBoundary,d=n.padding,f=n.tether,h=void 0===f||f,p=n.tetherOffset,g=void 0===p?0:p,y=Z(t,{boundary:c,rootBoundary:u,padding:d,altBoundary:l}),b=L(t.placement),w=W(t.placement),v=!w,x=V(b),_="x"===x?"y":"x",P=t.modifiersData.popperOffsets,A=t.rects.reference,C=t.rects.popper,O="function"==typeof g?g(Object.assign({},t.rects,{placement:t.placement})):g,B={x:0,y:0};if(P){if(i||o){var R="y"===x?T:k,N="y"===x?E:j,F="y"===x?"height":"width",M=P[x],U=P[x]+y[R],G=P[x]-y[N],$=h?-C[F]/2:0,q=w===I?A[F]:C[F],z=w===I?-C[F]:-A[F],K=t.elements.arrow,J=h&&K?m(K):{width:0,height:0},X=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},Y=X[R],Q=X[N],ee=me(0,A[F],J[F]),te=v?A[F]/2-$-ee-Y-O:q-ee-Y-O,ne=v?-A[F]/2+$+ee+Q+O:z+ee+Q+O,re=t.elements.arrow&&S(t.elements.arrow),se=re?"y"===x?re.clientTop||0:re.clientLeft||0:0,ie=t.modifiersData.offset?t.modifiersData.offset[t.placement][x]:0,ae=P[x]+te-ie-se,oe=P[x]+ne-ie;if(i){var ce=me(h?H(U,ae):U,M,h?D(G,oe):G);P[x]=ce,B[x]=ce-M}if(o){var ue="x"===x?T:k,le="x"===x?E:j,de=P[_],fe=de+y[ue],he=de-y[le],pe=me(h?H(fe,ae):fe,de,h?D(he,oe):he);P[_]=pe,B[_]=pe-de}}t.modifiersData[r]=B}},requiresIfExists:["offset"]};var ye={name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,s=e.options,i=n.elements.arrow,a=n.modifiersData.popperOffsets,o=L(n.placement),c=V(o),u=[k,j].indexOf(o)>=0?"height":"width";if(i&&a){var l=function(e,t){return J("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:X(e,_))}(s.padding,n),d=m(i),f="y"===c?T:k,h="y"===c?E:j,p=n.rects.reference[u]+n.rects.reference[c]-a[c]-n.rects.popper[u],g=a[c]-n.rects.reference[c],y=S(i),b=y?"y"===c?y.clientHeight||0:y.clientWidth||0:0,w=p/2-g/2,v=l[f],x=b-d[u]-l[h],I=b/2-d[u]/2+w,P=me(v,I,x),A=c;n.modifiersData[r]=((t={})[A]=P,t.centerOffset=P-I,t)}},effect:function(e){var t=e.state,n=e.options.element,r=void 0===n?"[data-popper-arrow]":n;null!=r&&("string"!=typeof r||(r=t.elements.popper.querySelector(r)))&&G(t.elements.popper,r)&&(t.elements.arrow=r)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function be(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function we(e){return[T,j,E,k].some((function(t){return e[t]>=0}))}var ve={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,s=t.rects.popper,i=t.modifiersData.preventOverflow,a=Z(t,{elementContext:"reference"}),o=Z(t,{altBoundary:!0}),c=be(a,r),u=be(o,s,i),l=we(c),d=we(u);t.modifiersData[n]={referenceClippingOffsets:c,popperEscapeOffsets:u,isReferenceHidden:l,hasPopperEscaped:d},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":l,"data-popper-escaped":d})}},Se=ee({defaultModifiers:[ne,re,ae,oe]}),Te=[ne,re,ae,oe,ce,pe,ge,ye,ve],Ee=ee({defaultModifiers:Te});n.applyStyles=oe,n.arrow=ye,n.computeStyles=ae,n.createPopper=Ee,n.createPopperLite=Se,n.defaultModifiers=Te,n.detectOverflow=Z,n.eventListeners=ne,n.flip=pe,n.hide=ve,n.offset=ce,n.popperGenerator=ee,n.popperOffsets=re,n.preventOverflow=ge}}},{package:"@popperjs/core",file:"node_modules/@popperjs/core/dist/cjs/popper.js"}],[2881,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=function(e,t){var n=new Array(arguments.length-1),r=0,s=2,i=!0;for(;s<arguments.length;)n[r++]=arguments[s++];return new Promise((function(s,a){n[r]=function(e){if(i)if(i=!1,e)a(e);else{for(var t=new Array(arguments.length-1),n=0;n<t.length;)t[n++]=arguments[n];s.apply(null,t)}};try{e.apply(t||null,n)}catch(e){i&&(i=!1,a(e))}}))}}}},{package:"@trezor/connect-web>@trezor/connect>@trezor/protobuf>protobufjs>@protobufjs/aspromise",file:"node_modules/@protobufjs/aspromise/index.js"}],[2882,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=n;r.length=function(e){var t=e.length;if(!t)return 0;for(var n=0;--t%4>1&&"="===e.charAt(t);)++n;return Math.ceil(3*e.length)/4-n};for(var s=new Array(64),i=new Array(123),a=0;a<64;)i[s[a]=a<26?a+65:a<52?a+71:a<62?a-4:a-59|43]=a++;r.encode=function(e,t,n){for(var r,i=null,a=[],o=0,c=0;t<n;){var u=e[t++];switch(c){case 0:a[o++]=s[u>>2],r=(3&u)<<4,c=1;break;case 1:a[o++]=s[r|u>>4],r=(15&u)<<2,c=2;break;case 2:a[o++]=s[r|u>>6],a[o++]=s[63&u],c=0}o>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,a)),o=0)}return c&&(a[o++]=s[r],a[o++]=61,1===c&&(a[o++]=61)),i?(o&&i.push(String.fromCharCode.apply(String,a.slice(0,o))),i.join("")):String.fromCharCode.apply(String,a.slice(0,o))};var o="invalid encoding";r.decode=function(e,t,n){for(var r,s=n,a=0,c=0;c<e.length;){var u=e.charCodeAt(c++);if(61===u&&a>1)break;if((u=i[u])===undefined)throw Error(o);switch(a){case 0:r=u,a=1;break;case 1:t[n++]=r<<2|(48&u)>>4,r=u,a=2;break;case 2:t[n++]=(15&r)<<4|(60&u)>>2,r=u,a=3;break;case 3:t[n++]=(3&r)<<6|u,a=0}}if(1===a)throw Error(o);return n-s},r.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}}}},{package:"@trezor/connect-web>@trezor/connect>@trezor/protobuf>protobufjs>@protobufjs/base64",file:"node_modules/@protobufjs/base64/index.js"}],[2883,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e,t){"string"==typeof e&&(t=e,e=undefined);var n=[];function s(e){if("string"!=typeof e){var t=i();if(r.verbose&&console.log("codegen: "+t),t="return "+t,e){for(var a=Object.keys(e),o=new Array(a.length+1),c=new Array(a.length),u=0;u<a.length;)o[u]=a[u],c[u]=e[a[u++]];return o[u]=t,Function.apply(null,o).apply(null,c)}return Function(t)()}for(var l=new Array(arguments.length-1),d=0;d<l.length;)l[d]=arguments[++d];if(d=0,e=e.replace(/%([%dfijs])/g,(function(e,t){var n=l[d++];switch(t){case"d":case"f":return String(Number(n));case"i":return String(Math.floor(n));case"j":return JSON.stringify(n);case"s":return String(n)}return"%"})),d!==l.length)throw Error("parameter count mismatch");return n.push(e),s}function i(r){return"function "+(r||t||"")+"("+(e&&e.join(",")||"")+"){\n  "+n.join("\n  ")+"\n}"}return s.toString=i,s}t.exports=r,r.verbose=!1}}},{package:"@trezor/connect-web>@trezor/connect>@trezor/protobuf>protobufjs>@protobufjs/codegen",file:"node_modules/@protobufjs/codegen/index.js"}],[2884,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(){this._listeners={}}t.exports=r,r.prototype.on=function(e,t,n){return(this._listeners[e]||(this._listeners[e]=[])).push({fn:t,ctx:n||this}),this},r.prototype.off=function(e,t){if(e===undefined)this._listeners={};else if(t===undefined)this._listeners[e]=[];else for(var n=this._listeners[e],r=0;r<n.length;)n[r].fn===t?n.splice(r,1):++r;return this},r.prototype.emit=function(e){var t=this._listeners[e];if(t){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<t.length;)t[r].fn.apply(t[r++].ctx,n)}return this}}}},{package:"@trezor/connect-web>@trezor/connect>@trezor/protobuf>protobufjs>@protobufjs/eventemitter",file:"node_modules/@protobufjs/eventemitter/index.js"}],[2885,{"@protobufjs/aspromise":2881,"@protobufjs/inquire":2887},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=i;var r=e("@protobufjs/aspromise"),s=e("@protobufjs/inquire")("fs");function i(e,t,n){return"function"==typeof t?(n=t,t={}):t||(t={}),n?!t.xhr&&s&&s.readFile?s.readFile(e,(function(r,s){return r&&"undefined"!=typeof XMLHttpRequest?i.xhr(e,t,n):r?n(r):n(null,t.binary?s:s.toString("utf8"))})):i.xhr(e,t,n):r(i,this,e,t)}i.xhr=function(e,t,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4!==r.readyState)return undefined;if(0!==r.status&&200!==r.status)return n(Error("status "+r.status));if(t.binary){var e=r.response;if(!e){e=[];for(var s=0;s<r.responseText.length;++s)e.push(255&r.responseText.charCodeAt(s))}return n(null,"undefined"!=typeof Uint8Array?new Uint8Array(e):e)}return n(null,r.responseText)},t.binary&&("overrideMimeType"in r&&r.overrideMimeType("text/plain; charset=x-user-defined"),r.responseType="arraybuffer"),r.open("GET",e),r.send()}}}},{package:"@trezor/connect-web>@trezor/connect>@trezor/protobuf>protobufjs>@protobufjs/fetch",file:"node_modules/@protobufjs/fetch/index.js"}],[2886,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e){return"undefined"!=typeof Float32Array?function(){var t=new Float32Array([-0]),n=new Uint8Array(t.buffer),r=128===n[3];function s(e,r,s){t[0]=e,r[s]=n[0],r[s+1]=n[1],r[s+2]=n[2],r[s+3]=n[3]}function i(e,r,s){t[0]=e,r[s]=n[3],r[s+1]=n[2],r[s+2]=n[1],r[s+3]=n[0]}function a(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],t[0]}function o(e,r){return n[3]=e[r],n[2]=e[r+1],n[1]=e[r+2],n[0]=e[r+3],t[0]}e.writeFloatLE=r?s:i,e.writeFloatBE=r?i:s,e.readFloatLE=r?a:o,e.readFloatBE=r?o:a}():function(){function t(e,t,n,r){var s=t<0?1:0;if(s&&(t=-t),0===t)e(1/t>0?0:2147483648,n,r);else if(isNaN(t))e(2143289344,n,r);else if(t>34028234663852886e22)e((s<<31|2139095040)>>>0,n,r);else if(t<11754943508222875e-54)e((s<<31|Math.round(t/1401298464324817e-60))>>>0,n,r);else{var i=Math.floor(Math.log(t)/Math.LN2);e((s<<31|i+127<<23|8388607&Math.round(t*Math.pow(2,-i)*8388608))>>>0,n,r)}}function n(e,t,n){var r=e(t,n),s=2*(r>>31)+1,i=r>>>23&255,a=8388607&r;return 255===i?a?NaN:s*Infinity:0===i?1401298464324817e-60*s*a:s*Math.pow(2,i-150)*(a+8388608)}e.writeFloatLE=t.bind(null,s),e.writeFloatBE=t.bind(null,i),e.readFloatLE=n.bind(null,a),e.readFloatBE=n.bind(null,o)}(),"undefined"!=typeof Float64Array?function(){var t=new Float64Array([-0]),n=new Uint8Array(t.buffer),r=128===n[7];function s(e,r,s){t[0]=e,r[s]=n[0],r[s+1]=n[1],r[s+2]=n[2],r[s+3]=n[3],r[s+4]=n[4],r[s+5]=n[5],r[s+6]=n[6],r[s+7]=n[7]}function i(e,r,s){t[0]=e,r[s]=n[7],r[s+1]=n[6],r[s+2]=n[5],r[s+3]=n[4],r[s+4]=n[3],r[s+5]=n[2],r[s+6]=n[1],r[s+7]=n[0]}function a(e,r){return n[0]=e[r],n[1]=e[r+1],n[2]=e[r+2],n[3]=e[r+3],n[4]=e[r+4],n[5]=e[r+5],n[6]=e[r+6],n[7]=e[r+7],t[0]}function o(e,r){return n[7]=e[r],n[6]=e[r+1],n[5]=e[r+2],n[4]=e[r+3],n[3]=e[r+4],n[2]=e[r+5],n[1]=e[r+6],n[0]=e[r+7],t[0]}e.writeDoubleLE=r?s:i,e.writeDoubleBE=r?i:s,e.readDoubleLE=r?a:o,e.readDoubleBE=r?o:a}():function(){function t(e,t,n,r,s,i){var a=r<0?1:0;if(a&&(r=-r),0===r)e(0,s,i+t),e(1/r>0?0:2147483648,s,i+n);else if(isNaN(r))e(0,s,i+t),e(2146959360,s,i+n);else if(r>17976931348623157e292)e(0,s,i+t),e((a<<31|2146435072)>>>0,s,i+n);else{var o;if(r<22250738585072014e-324)e((o=r/5e-324)>>>0,s,i+t),e((a<<31|o/4294967296)>>>0,s,i+n);else{var c=Math.floor(Math.log(r)/Math.LN2);1024===c&&(c=1023),e(4503599627370496*(o=r*Math.pow(2,-c))>>>0,s,i+t),e((a<<31|c+1023<<20|1048576*o&1048575)>>>0,s,i+n)}}}function n(e,t,n,r,s){var i=e(r,s+t),a=e(r,s+n),o=2*(a>>31)+1,c=a>>>20&2047,u=4294967296*(1048575&a)+i;return 2047===c?u?NaN:o*Infinity:0===c?5e-324*o*u:o*Math.pow(2,c-1075)*(u+4503599627370496)}e.writeDoubleLE=t.bind(null,s,0,4),e.writeDoubleBE=t.bind(null,i,4,0),e.readDoubleLE=n.bind(null,a,0,4),e.readDoubleBE=n.bind(null,o,4,0)}(),e}function s(e,t,n){t[n]=255&e,t[n+1]=e>>>8&255,t[n+2]=e>>>16&255,t[n+3]=e>>>24}function i(e,t,n){t[n]=e>>>24,t[n+1]=e>>>16&255,t[n+2]=e>>>8&255,t[n+3]=255&e}function a(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16|e[t+3]<<24)>>>0}function o(e,t){return(e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3])>>>0}t.exports=r(r)}}},{package:"@trezor/connect-web>@trezor/connect>@trezor/protobuf>protobufjs>@protobufjs/float",file:"node_modules/@protobufjs/float/index.js"}],[2887,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=function(e){try{var t=(0,eval)("quire".replace(/^/,"re"))(e);if(t&&(t.length||Object.keys(t).length))return t}catch(e){}return null}}}},{package:"@trezor/connect-web>@trezor/connect>@trezor/protobuf>protobufjs>@protobufjs/inquire",file:"node_modules/@protobufjs/inquire/index.js"}],[2888,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=n,s=r.isAbsolute=function(e){return/^(?:\/|\w+:)/.test(e)},i=r.normalize=function(e){var t=(e=e.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),n=s(e),r="";n&&(r=t.shift()+"/");for(var i=0;i<t.length;)".."===t[i]?i>0&&".."!==t[i-1]?t.splice(--i,2):n?t.splice(i,1):++i:"."===t[i]?t.splice(i,1):++i;return r+t.join("/")};r.resolve=function(e,t,n){return n||(t=i(t)),s(t)?t:(n||(e=i(e)),(e=e.replace(/(?:\/|^)[^/]+$/,"")).length?i(e+"/"+t):t)}}}},{package:"@trezor/connect-web>@trezor/connect>@trezor/protobuf>protobufjs>@protobufjs/path",file:"node_modules/@protobufjs/path/index.js"}],[2889,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=function(e,t,n){var r=n||8192,s=r>>>1,i=null,a=r;return function(n){if(n<1||n>s)return e(n);a+n>r&&(i=e(r),a=0);var o=t.call(i,a,a+=n);return 7&a&&(a=1+(7|a)),o}}}}},{package:"@trezor/connect-web>@trezor/connect>@trezor/protobuf>protobufjs>@protobufjs/pool",file:"node_modules/@protobufjs/pool/index.js"}],[2890,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var r=n;r.length=function(e){for(var t=0,n=0,r=0;r<e.length;++r)(n=e.charCodeAt(r))<128?t+=1:n<2048?t+=2:55296==(64512&n)&&56320==(64512&e.charCodeAt(r+1))?(++r,t+=4):t+=3;return t},r.read=function(e,t,n){if(n-t<1)return"";for(var r,s=null,i=[],a=0;t<n;)(r=e[t++])<128?i[a++]=r:r>191&&r<224?i[a++]=(31&r)<<6|63&e[t++]:r>239&&r<365?(r=((7&r)<<18|(63&e[t++])<<12|(63&e[t++])<<6|63&e[t++])-65536,i[a++]=55296+(r>>10),i[a++]=56320+(1023&r)):i[a++]=(15&r)<<12|(63&e[t++])<<6|63&e[t++],a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,i)),a=0);return s?(a&&s.push(String.fromCharCode.apply(String,i.slice(0,a))),s.join("")):String.fromCharCode.apply(String,i.slice(0,a))},r.write=function(e,t,n){for(var r,s,i=n,a=0;a<e.length;++a)(r=e.charCodeAt(a))<128?t[n++]=r:r<2048?(t[n++]=r>>6|192,t[n++]=63&r|128):55296==(64512&r)&&56320==(64512&(s=e.charCodeAt(a+1)))?(r=65536+((1023&r)<<10)+(1023&s),++a,t[n++]=r>>18|240,t[n++]=r>>12&63|128,t[n++]=r>>6&63|128,t[n++]=63&r|128):(t[n++]=r>>12|224,t[n++]=r>>6&63|128,t[n++]=63&r|128);return n-i}}}},{package:"@trezor/connect-web>@trezor/connect>@trezor/protobuf>protobufjs>@protobufjs/utf8",file:"node_modules/@protobufjs/utf8/index.js"}],[2891,{"./redux-toolkit.cjs.development.js":2892},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){t.exports=e("./redux-toolkit.cjs.development.js")}}},{package:"@reduxjs/toolkit",file:"node_modules/@reduxjs/toolkit/dist/index.js"}],[2892,{_process:4878,immer:4519,redux:5147,"redux-thunk":5146,reselect:2894},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){var r,s=this&&this.__define||function(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]},i=this&&this.__extends||(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){s(this,constructor,e)}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__generator||function(e,t){var n,r,s,i,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return i={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(i){return function(o){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(s=2&i[0]?r.return:i[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,i[1])).done)return s;switch(r=0,s&&(i=[2&i[0],s.value]),i[0]){case 0:case 1:s=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(s=a.trys,(s=s.length>0&&s[s.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!s||i[1]>s[0]&&i[1]<s[3])){a.label=i[1];break}if(6===i[0]&&a.label<s[1]){a.label=s[1],s=i;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(i);break}s[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=s=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,o])}}},o=this&&this.__spreadArray||function(e,t){for(var n=0,r=t.length,s=e.length;n<r;n++,s++)e[s]=t[n];return e},c=Object.create,u=Object.defineProperty,l=Object.defineProperties,d=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyDescriptors,h=Object.getOwnPropertyNames,p=Object.getOwnPropertySymbols,m=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty,y=Object.prototype.propertyIsEnumerable,b=function(e,t,n){return t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},w=function(e,t){for(var n in t||(t={}))g.call(t,n)&&b(e,n,t[n]);if(p)for(var r=0,s=p(t);r<s.length;r++){n=s[r];y.call(t,n)&&b(e,n,t[n])}return e},v=function(e,t){return l(e,f(t))},S=function(e){return u(e,"__esModule",{value:!0})},T=function(e,t,n){if(t&&"object"==typeof t||"function"==typeof t)for(var r=function(r){g.call(e,r)||"default"===r||u(e,r,{get:function(){return t[r]},enumerable:!(n=d(t,r))||n.enumerable})},s=0,i=h(t);s<i.length;s++){r(i[s])}return e},E=function(e){return T(S(u(null!=e?c(m(e)):{},"default",e&&e.__esModule&&"default"in e?{get:function(){return e.default},enumerable:!0}:{value:e,enumerable:!0})),e)},j=function(e,t,n){return new Promise((function(r,s){var i=function(e){try{o(n.next(e))}catch(e){s(e)}},a=function(e){try{o(n.throw(e))}catch(e){s(e)}},o=function(e){return e.done?r(e.value):Promise.resolve(e.value).then(i,a)};o((n=n.apply(e,t)).next())}))};S(n),function(e,t){for(var n in t)u(e,n,{get:t[n],enumerable:!0})}(n,{EnhancerArray:function(){return V},MiddlewareArray:function(){return W},SHOULD_AUTOBATCH:function(){return St},TaskAbortError:function(){return et},addListener:function(){return mt},autoBatchEnhancer:function(){return xt},clearAllListeners:function(){return gt},configureStore:function(){return de},createAction:function(){return M},createActionCreatorInvariantMiddleware:function(){return $},createAsyncThunk:function(){return Ae},createDraftSafeSelector:function(){return A},createEntityAdapter:function(){return je},createImmutableStateInvariantMiddleware:function(){return re},createListenerMiddleware:function(){return wt},createNextState:function(){return x.default},createReducer:function(){return me},createSelector:function(){return _.createSelector},createSerializableStateInvariantMiddleware:function(){return oe},createSlice:function(){return ye},current:function(){return x.current},findNonSerializableValue:function(){return ie},freeze:function(){return x.freeze},getDefaultMiddleware:function(){return ue},getType:function(){return G},isAction:function(){return L},isActionCreator:function(){return D},isAllOf:function(){return Re},isAnyOf:function(){return Be},isAsyncThunkAction:function(){return Ue},isDraft:function(){return x.isDraft},isFluxStandardAction:function(){return H},isFulfilled:function(){return He},isImmutableDefault:function(){return Q},isPending:function(){return Me},isPlain:function(){return se},isPlainObject:function(){return R},isRejected:function(){return Le},isRejectedWithValue:function(){return De},miniSerializeError:function(){return Pe},nanoid:function(){return ke},original:function(){return x.original},prepareAutoBatched:function(){return Tt},removeListener:function(){return yt},unwrapResult:function(){return Ce}});var k=E(e("immer"));T(n,E(e("redux")));var x=E(e("immer")),_=E(e("reselect")),I=E(e("immer")),P=E(e("reselect")),A=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=P.createSelector.apply(void 0,e);return function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return n.apply(void 0,o([(0,I.isDraft)(e)?(0,I.current)(e):e],t))}},C=E(e("redux")),O=E(e("redux")),B="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?O.compose:O.compose.apply(null,arguments)};"undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function R(e){if("object"!=typeof e||null===e)return!1;var t=Object.getPrototypeOf(e);if(null===t)return!0;for(var n=t;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return t===n}var N=E(e("redux-thunk")),F=function(e){return e&&"function"==typeof e.match};function M(e,t){function n(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];if(t){var s=t.apply(void 0,n);if(!s)throw new Error("prepareAction did not return an object");return w(w({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:n[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(t){return t.type===e},n}function L(e){return R(e)&&"type"in e}function D(e){return"function"==typeof e&&"type"in e&&F(e)}function H(e){return L(e)&&"string"==typeof e.type&&Object.keys(e).every(U)}function U(e){return["type","payload","error","meta"].indexOf(e)>-1}function G(e){return""+e}function $(e){void 0===e&&(e={});var t=e.isActionCreator,n=void 0===t?D:t;return function(){return function(e){return function(t){var r,s,i;return n(t)&&console.warn((r=t.type,s=r?(""+r).split("/"):[],i=s[s.length-1]||"actionCreator",'Detected an action creator with type "'+(r||"unknown")+"\" being dispatched. \nMake sure you're calling the action creator before dispatching, i.e. `dispatch("+i+"())` instead of `dispatch("+i+")`. This is necessary even if the action has no payload.")),e(t)}}}}var q=E(e("immer"));function z(e,t){var n=0;return{measureTime:function(e){var t=Date.now();try{return e()}finally{var r=Date.now();n+=r-t}},warnIfExceeded:function(){n>e&&console.warn(t+" took "+n+"ms, which is more than the warning threshold of "+e+"ms. \nIf your state or actions are very large, you may want to disable the middleware as it might cause too much of a slowdown in development mode. See https://redux-toolkit.js.org/api/getDefaultMiddleware for instructions.\nIt is disabled in production builds, so you don't need to worry about that.")}}}var W=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=e.apply(this,n)||this;return Object.setPrototypeOf(s,t.prototype),s}return i(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),s(t.prototype,"concat",(function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)})),s(t.prototype,"prepend",(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,o([void 0],e[0].concat(this)))):new(t.bind.apply(t,o([void 0],e.concat(this))))})),t}(Array),V=function(e){function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=e.apply(this,n)||this;return Object.setPrototypeOf(s,t.prototype),s}return i(t,e),Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),s(t.prototype,"concat",(function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.prototype.concat.apply(this,t)})),s(t.prototype,"prepend",(function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return 1===e.length&&Array.isArray(e[0])?new(t.bind.apply(t,o([void 0],e[0].concat(this)))):new(t.bind.apply(t,o([void 0],e.concat(this))))})),t}(Array);function K(e){return(0,q.isDraftable)(e)?(0,q.default)(e,(function(){})):e}var J=!1,X="Invariant failed";function Z(e,t){if(!e){if(J)throw new Error(X);throw new Error(X+": "+(t||""))}}function Y(e,t,n,r){return JSON.stringify(e,function(e,t){var n=[],r=[];t||(t=function(e,t){return n[0]===t?"[Circular ~]":"[Circular ~."+r.slice(0,n.indexOf(t)).join(".")+"]"});return function(s,i){if(n.length>0){var a=n.indexOf(this);~a?n.splice(a+1):n.push(this),~a?r.splice(a,Infinity,s):r.push(s),~n.indexOf(i)&&(i=t.call(this,s,i))}else n.push(i);return null==e?i:e.call(this,s,i)}}(t,r),n)}function Q(e){return"object"!=typeof e||null==e||Object.isFrozen(e)}function ee(e,t,n){var r=te(e,t,n);return{detectMutations:function(){return ne(e,t,r,n)}}}function te(e,t,n,r,s){void 0===t&&(t=[]),void 0===r&&(r=""),void 0===s&&(s=new Set);var i={value:n};if(!e(n)&&!s.has(n))for(var a in s.add(n),i.children={},n){var o=r?r+"."+a:a;t.length&&-1!==t.indexOf(o)||(i.children[a]=te(e,t,n[a],o))}return i}function ne(e,t,n,r,s,i){void 0===t&&(t=[]),void 0===s&&(s=!1),void 0===i&&(i="");var a=n?n.value:void 0,o=a===r;if(s&&!o&&!Number.isNaN(r))return{wasMutated:!0,path:i};if(e(a)||e(r))return{wasMutated:!1};var c={};for(var u in n.children)c[u]=!0;for(var u in r)c[u]=!0;var l=t.length>0,d=function(s){var a=i?i+"."+s:s;if(l&&t.some((function(e){return e instanceof RegExp?e.test(a):a===e})))return"continue";var c=ne(e,t,n.children[s],r[s],o,a);if(c.wasMutated)return{value:c}};for(var u in c){var f=d(u);if("object"==typeof f)return f.value}return{wasMutated:!1}}function re(e){void 0===e&&(e={});var t=e.isImmutable,n=void 0===t?Q:t,r=e.ignoredPaths,s=e.warnAfter,i=void 0===s?32:s,a=e.ignore;r=r||a;var o=ee.bind(null,n,r);return function(e){var t,n=e.getState,r=n(),s=o(r);return function(e){return function(a){var c=z(i,"ImmutableStateInvariantMiddleware");c.measureTime((function(){r=n(),t=s.detectMutations(),s=o(r),Z(!t.wasMutated,"A state mutation was detected between dispatches, in the path '"+(t.path||"")+"'.  This may cause incorrect behavior. (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)")}));var u=e(a);return c.measureTime((function(){r=n(),t=s.detectMutations(),s=o(r),t.wasMutated&&Z(!t.wasMutated,"A state mutation was detected inside a dispatch, in the path: "+(t.path||"")+". Take a look at the reducer(s) handling the action "+Y(a)+". (https://redux.js.org/style-guide/style-guide#do-not-mutate-state)")})),c.warnIfExceeded(),u}}}}function se(e){var t=typeof e;return null==e||"string"===t||"boolean"===t||"number"===t||Array.isArray(e)||R(e)}function ie(e,t,n,r,s,i){var a;if(void 0===t&&(t=""),void 0===n&&(n=se),void 0===s&&(s=[]),!n(e))return{keyPath:t||"<root>",value:e};if("object"!=typeof e||null===e)return!1;if(null==i?void 0:i.has(e))return!1;for(var o=null!=r?r(e):Object.entries(e),c=s.length>0,u=function(e,o){var u=t?t+"."+e:e;if(c&&s.some((function(e){return e instanceof RegExp?e.test(u):u===e})))return"continue";return n(o)?"object"==typeof o&&(a=ie(o,u,n,r,s,i))?{value:a}:void 0:{value:{keyPath:u,value:o}}},l=0,d=o;l<d.length;l++){var f=d[l],h=u(f[0],f[1]);if("object"==typeof h)return h.value}return i&&ae(e)&&i.add(e),!1}function ae(e){if(!Object.isFrozen(e))return!1;for(var t=0,n=Object.values(e);t<n.length;t++){var r=n[t];if("object"==typeof r&&null!==r&&!ae(r))return!1}return!0}function oe(e){void 0===e&&(e={});var t=e.isSerializable,n=void 0===t?se:t,r=e.getEntries,s=e.ignoredActions,i=void 0===s?[]:s,a=e.ignoredActionPaths,o=void 0===a?["meta.arg","meta.baseQueryMeta"]:a,c=e.ignoredPaths,u=void 0===c?[]:c,l=e.warnAfter,d=void 0===l?32:l,f=e.ignoreState,h=void 0!==f&&f,p=e.ignoreActions,m=void 0!==p&&p,g=e.disableCache,y=!(void 0!==g&&g)&&WeakSet?new WeakSet:void 0;return function(e){return function(t){return function(s){var a=t(s),c=z(d,"SerializableStateInvariantMiddleware");return m||i.length&&-1!==i.indexOf(s.type)||c.measureTime((function(){var e=ie(s,"",n,r,o,y);if(e){var t=e.keyPath,i=e.value;console.error("A non-serializable value was detected in an action, in the path: `"+t+"`. Value:",i,"\nTake a look at the logic that dispatched this action: ",s,"\n(See https://redux.js.org/faq/actions#why-should-type-be-a-string-or-at-least-serializable-why-should-my-action-types-be-constants)","\n(To allow non-serializable values see: https://redux-toolkit.js.org/usage/usage-guide#working-with-non-serializable-data)")}})),h||(c.measureTime((function(){var t=ie(e.getState(),"",n,r,u,y);if(t){var i=t.keyPath,a=t.value;console.error("A non-serializable value was detected in the state, in the path: `"+i+"`. Value:",a,"\nTake a look at the reducer(s) handling this action type: "+s.type+".\n(See https://redux.js.org/faq/organizing-state#can-i-put-functions-promises-or-other-non-serializable-items-in-my-store-state)")}})),c.warnIfExceeded()),a}}}}function ce(e){return"boolean"==typeof e}function ue(e){void 0===e&&(e={});var t=e.thunk,n=void 0===t||t,r=e.immutableCheck,s=void 0===r||r,i=e.serializableCheck,a=void 0===i||i,o=e.actionCreatorCheck,c=void 0===o||o,u=new W;if(n&&(ce(n)?u.push(N.default):u.push(N.default.withExtraArgument(n.extraArgument))),s){var l={};ce(s)||(l=s),u.unshift(re(l))}if(a){var d={};ce(a)||(d=a),u.push(oe(d))}if(c){var f={};ce(c)||(f=c),u.unshift($(f))}return u}var le=!1;function de(e){var t,n=function(e){return ue(e)},r=e||{},s=r.reducer,i=void 0===s?void 0:s,a=r.middleware,c=void 0===a?n():a,u=r.devTools,l=void 0===u||u,d=r.preloadedState,f=void 0===d?void 0:d,h=r.enhancers,p=void 0===h?void 0:h;if("function"==typeof i)t=i;else{if(!R(i))throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');t=(0,C.combineReducers)(i)}var m=c;if("function"==typeof m&&(m=m(n),!le&&!Array.isArray(m)))throw new Error("when using a middleware builder function, an array of middleware must be returned");if(!le&&m.some((function(e){return"function"!=typeof e})))throw new Error("each middleware provided to configureStore must be a function");var g=C.applyMiddleware.apply(void 0,m),y=C.compose;l&&(y=B(w({trace:!le},"object"==typeof l&&l)));var b=new V(g),v=b;Array.isArray(p)?v=o([g],p):"function"==typeof p&&(v=p(b));var S=y.apply(void 0,v);return(0,C.createStore)(t,f,S)}var fe=E(e("immer"));function he(e){var t,n={},r=[],s={addCase:function(e,i){if(r.length>0)throw new Error("`builder.addCase` should only be called before calling `builder.addMatcher`");if(t)throw new Error("`builder.addCase` should only be called before calling `builder.addDefaultCase`");var a="string"==typeof e?e:e.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in n)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return n[a]=i,s},addMatcher:function(e,n){if(t)throw new Error("`builder.addMatcher` should only be called before calling `builder.addDefaultCase`");return r.push({matcher:e,reducer:n}),s},addDefaultCase:function(e){if(t)throw new Error("`builder.addDefaultCase` can only be called once");return t=e,s}};return e(s),[n,r,t]}var pe=!1;function me(e,t,n,r){void 0===n&&(n=[]),"object"==typeof t&&(pe||(pe=!0,console.warn("The object notation for `createReducer` is deprecated, and will be removed in RTK 2.0. Please use the 'builder callback' notation instead: https://redux-toolkit.js.org/api/createReducer")));var s,i="function"==typeof t?he(t):[t,n,r],a=i[0],c=i[1],u=i[2];if("function"==typeof e)s=function(){return K(e())};else{var l=K(e);s=function(){return l}}function d(e,t){void 0===e&&(e=s());var n=o([a[t.type]],c.filter((function(e){return(0,e.matcher)(t)})).map((function(e){return e.reducer})));return 0===n.filter((function(e){return!!e})).length&&(n=[u]),n.reduce((function(e,n){if(n){var r;if((0,fe.isDraft)(e))return void 0===(r=n(e,t))?e:r;if((0,fe.isDraftable)(e))return(0,fe.default)(e,(function(e){return n(e,t)}));if(void 0===(r=n(e,t))){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}return e}),e)}return d.getInitialState=s,d}var ge=!1;function ye(e){var n=e.name;if(!n)throw new Error("`name` is a required option for createSlice");void 0!==t&&void 0===e.initialState&&console.error("You must provide an `initialState` value that is not `undefined`. You may have misspelled `initialState`");var r,s="function"==typeof e.initialState?e.initialState:K(e.initialState),i=e.reducers||{},a=Object.keys(i),o={},c={},u={};function l(){"object"==typeof e.extraReducers&&(ge||(ge=!0,console.warn("The object notation for `createSlice.extraReducers` is deprecated, and will be removed in RTK 2.0. Please use the 'builder callback' notation instead: https://redux-toolkit.js.org/api/createSlice")));var t="function"==typeof e.extraReducers?he(e.extraReducers):[e.extraReducers],n=t[0],r=void 0===n?{}:n,i=t[1],a=void 0===i?[]:i,o=t[2],u=void 0===o?void 0:o,l=w(w({},r),c);return me(s,(function(e){for(var t in l)e.addCase(t,l[t]);for(var n=0,r=a;n<r.length;n++){var s=r[n];e.addMatcher(s.matcher,s.reducer)}u&&e.addDefaultCase(u)}))}return a.forEach((function(e){var t,r,s=i[e],a=n+"/"+e;"reducer"in s?(t=s.reducer,r=s.prepare):t=s,o[e]=t,c[a]=t,u[e]=r?M(a,r):M(a)})),{name:n,reducer:function(e,t){return r||(r=l()),r(e,t)},actions:u,caseReducers:o,getInitialState:function(){return r||(r=l()),r.getInitialState()}}}var be=E(e("immer"));function we(e){return function(t,n){var r=function(t){H(n)?e(n.payload,t):e(n,t)};return(0,be.isDraft)(t)?(r(t),t):(0,be.default)(t,r)}}function ve(e,t){var n=t(e);return void 0===n&&console.warn("The entity passed to the `selectId` implementation returned undefined.","You should probably provide your own `selectId` implementation.","The entity that was passed:",e,"The `selectId` implementation:",t.toString()),n}function Se(e){return Array.isArray(e)||(e=Object.values(e)),e}function Te(e,t,n){for(var r=[],s=[],i=0,a=e=Se(e);i<a.length;i++){var o=a[i],c=ve(o,t);c in n.entities?s.push({id:c,changes:o}):r.push(o)}return[r,s]}function Ee(e){function t(t,n){var r=ve(t,e);r in n.entities||(n.ids.push(r),n.entities[r]=t)}function n(e,n){for(var r=0,s=e=Se(e);r<s.length;r++){t(s[r],n)}}function r(t,n){var r=ve(t,e);r in n.entities||n.ids.push(r),n.entities[r]=t}function s(e,t){var n=!1;e.forEach((function(e){e in t.entities&&(delete t.entities[e],n=!0)})),n&&(t.ids=t.ids.filter((function(e){return e in t.entities})))}function i(t,n){var r={},s={};if(t.forEach((function(e){e.id in n.entities&&(s[e.id]={id:e.id,changes:w(w({},s[e.id]?s[e.id].changes:null),e.changes)})})),(t=Object.values(s)).length>0){var i=t.filter((function(t){return function(t,n,r){var s=r.entities[n.id],i=Object.assign({},s,n.changes),a=ve(i,e),o=a!==n.id;return o&&(t[n.id]=a,delete r.entities[n.id]),r.entities[a]=i,o}(r,t,n)})).length>0;i&&(n.ids=Object.keys(n.entities))}}function a(t,r){var s=Te(t,e,r),a=s[0];i(s[1],r),n(a,r)}return{removeAll:(o=function(e){Object.assign(e,{ids:[],entities:{}})},c=we((function(e,t){return o(t)})),function(e){return c(e,void 0)}),addOne:we(t),addMany:we(n),setOne:we(r),setMany:we((function(e,t){for(var n=0,s=e=Se(e);n<s.length;n++){r(s[n],t)}})),setAll:we((function(e,t){e=Se(e),t.ids=[],t.entities={},n(e,t)})),updateOne:we((function(e,t){return i([e],t)})),updateMany:we(i),upsertOne:we((function(e,t){return a([e],t)})),upsertMany:we(a),removeOne:we((function(e,t){return s([e],t)})),removeMany:we(s)};var o,c}function je(e){void 0===e&&(e={});var t=w({sortComparer:!1,selectId:function(e){return e.id}},e),n=t.selectId,r=t.sortComparer,s={getInitialState:function(e){return void 0===e&&(e={}),Object.assign({ids:[],entities:{}},e)}},i={getSelectors:function(e){var t=function(e){return e.ids},n=function(e){return e.entities},r=A(t,n,(function(e,t){return e.map((function(e){return t[e]}))})),s=function(e,t){return t},i=function(e,t){return e[t]},a=A(t,(function(e){return e.length}));if(!e)return{selectIds:t,selectEntities:n,selectAll:r,selectTotal:a,selectById:A(n,s,i)};var o=A(e,n);return{selectIds:A(e,t),selectEntities:o,selectAll:A(e,r),selectTotal:A(e,a),selectById:A(o,s,i)}}},a=r?function(e,t){var n=Ee(e);function r(t,n){var r=(t=Se(t)).filter((function(t){return!(ve(t,e)in n.entities)}));0!==r.length&&o(r,n)}function s(e,t){0!==(e=Se(e)).length&&o(e,t)}function i(t,n){for(var r=!1,s=0,i=t;s<i.length;s++){var a=i[s],o=n.entities[a.id];if(o){r=!0,Object.assign(o,a.changes);var u=e(o);a.id!==u&&(delete n.entities[a.id],n.entities[u]=o)}}r&&c(n)}function a(t,n){var s=Te(t,e,n),a=s[0];i(s[1],n),r(a,n)}function o(t,n){t.forEach((function(t){n.entities[e(t)]=t})),c(n)}function c(n){var r=Object.values(n.entities);r.sort(t);var s=r.map(e);(function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(e[n]!==t[n])return!1;return!0})(n.ids,s)||(n.ids=s)}return{removeOne:n.removeOne,removeMany:n.removeMany,removeAll:n.removeAll,addOne:we((function(e,t){return r([e],t)})),updateOne:we((function(e,t){return i([e],t)})),upsertOne:we((function(e,t){return a([e],t)})),setOne:we((function(e,t){return s([e],t)})),setMany:we(s),setAll:we((function(e,t){e=Se(e),t.entities={},t.ids=[],r(e,t)})),addMany:we(r),updateMany:we(i),upsertMany:we(a)}}(n,r):Ee(n);return w(w(w({selectId:n,sortComparer:r},s),i),a)}var ke=function(e){void 0===e&&(e=21);for(var t="",n=e;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t},xe=["name","message","stack","code"],_e=function(e,t){this.payload=e,this.meta=t},Ie=function(e,t){this.payload=e,this.meta=t},Pe=function(e){if("object"==typeof e&&null!==e){for(var t={},n=0,r=xe;n<r.length;n++){var s=r[n];"string"==typeof e[s]&&(t[s]=e[s])}return t}return{message:String(e)}},Ae=function(){function e(e,t,n){var r=M(e+"/fulfilled",(function(e,t,n,r){return{payload:e,meta:v(w({},r||{}),{arg:n,requestId:t,requestStatus:"fulfilled"})}})),s=M(e+"/pending",(function(e,t,n){return{payload:void 0,meta:v(w({},n||{}),{arg:t,requestId:e,requestStatus:"pending"})}})),i=M(e+"/rejected",(function(e,t,r,s,i){return{payload:s,error:(n&&n.serializeError||Pe)(e||"Rejected"),meta:v(w({},i||{}),{arg:r,requestId:t,rejectedWithValue:!!s,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)})}})),o=!1,c="undefined"!=typeof AbortController?AbortController:function(){function e(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return e.prototype.abort=function(){o||(o=!0,console.info("This platform does not implement AbortController. \nIf you want to use the AbortController to react to `abort` events, please consider importing a polyfill like 'abortcontroller-polyfill/dist/abortcontroller-polyfill-only'."))},e}();return Object.assign((function(e){return function(o,u,l){var d,f=(null==n?void 0:n.idGenerator)?n.idGenerator(e):ke(),h=new c;function p(e){d=e,h.abort()}var m=function(){return j(this,null,(function(){var c,m,g,y,b,w;return a(this,(function(a){switch(a.label){case 0:return a.trys.push([0,4,,5]),y=null==(c=null==n?void 0:n.condition)?void 0:c.call(n,e,{getState:u,extra:l}),null===(v=y)||"object"!=typeof v||"function"!=typeof v.then?[3,2]:[4,y];case 1:y=a.sent(),a.label=2;case 2:if(!1===y||h.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return!0,b=new Promise((function(e,t){return h.signal.addEventListener("abort",(function(){return t({name:"AbortError",message:d||"Aborted"})}))})),o(s(f,e,null==(m=null==n?void 0:n.getPendingMeta)?void 0:m.call(n,{requestId:f,arg:e},{getState:u,extra:l}))),[4,Promise.race([b,Promise.resolve(t(e,{dispatch:o,getState:u,extra:l,requestId:f,signal:h.signal,abort:p,rejectWithValue:function(e,t){return new _e(e,t)},fulfillWithValue:function(e,t){return new Ie(e,t)}})).then((function(t){if(t instanceof _e)throw t;return t instanceof Ie?r(t.payload,f,e,t.meta):r(t,f,e)}))])];case 3:return g=a.sent(),[3,5];case 4:return w=a.sent(),g=w instanceof _e?i(null,f,e,w.payload,w.meta):i(w,f,e),[3,5];case 5:return n&&!n.dispatchConditionRejection&&i.match(g)&&g.meta.condition||o(g),[2,g]}var v}))}))}();return Object.assign(m,{abort:p,requestId:f,arg:e,unwrap:function(){return m.then(Ce)}})}}),{pending:s,rejected:i,fulfilled:r,typePrefix:e})}return e.withTypes=function(){return e},e}();function Ce(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}var Oe=function(e,t){return F(e)?e.match(t):e(t)};function Be(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.some((function(e){return Oe(e,t)}))}}function Re(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t){return e.every((function(e){return Oe(e,t)}))}}function Ne(e,t){if(!e||!e.meta)return!1;var n="string"==typeof e.meta.requestId,r=t.indexOf(e.meta.requestStatus)>-1;return n&&r}function Fe(e){return"function"==typeof e[0]&&"pending"in e[0]&&"fulfilled"in e[0]&&"rejected"in e[0]}function Me(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return Ne(e,["pending"])}:Fe(e)?function(t){var n=e.map((function(e){return e.pending}));return Be.apply(void 0,n)(t)}:Me()(e[0])}function Le(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return Ne(e,["rejected"])}:Fe(e)?function(t){var n=e.map((function(e){return e.rejected}));return Be.apply(void 0,n)(t)}:Le()(e[0])}function De(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=function(e){return e&&e.meta&&e.meta.rejectedWithValue};return 0===e.length||Fe(e)?function(t){return Re(Le.apply(void 0,e),n)(t)}:De()(e[0])}function He(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return Ne(e,["fulfilled"])}:Fe(e)?function(t){var n=e.map((function(e){return e.fulfilled}));return Be.apply(void 0,n)(t)}:He()(e[0])}function Ue(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?function(e){return Ne(e,["pending","fulfilled","rejected"])}:Fe(e)?function(t){for(var n=[],r=0,s=e;r<s.length;r++){var i=s[r];n.push(i.pending,i.rejected,i.fulfilled)}return Be.apply(void 0,n)(t)}:Ue()(e[0])}var Ge=function(e,t){if("function"!=typeof e)throw new TypeError(t+" is not a function")},$e=function(){},qe=function(e,t){return void 0===t&&(t=$e),e.catch(t),e},ze=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},We=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Ve="listener",Ke="completed",Je="cancelled",Xe="task-"+Je,Ze="task-"+Ke,Ye=Ve+"-"+Je,Qe=Ve+"-"+Ke,et=function(e){this.code=e,this.name="TaskAbortError",this.message="task "+Je+" (reason: "+e+")"},tt=function(e){if(e.aborted)throw new et(e.reason)};function nt(e,t){var n=$e;return new Promise((function(r,s){var i=function(){return s(new et(e.reason))};e.aborted?i():(n=ze(e,i),t.finally((function(){return n()})).then(r,s))})).finally((function(){n=$e}))}var rt=function(e){return function(t){return qe(nt(e,t).then((function(t){return tt(e),t})))}},st=function(e){var t=rt(e);return function(e){return t(new Promise((function(t){return setTimeout(t,e)})))}},it=Object.assign,at={},ot="listenerMiddleware",ct=function(e,t){return function(n,r){Ge(n,"taskExecutor");var s,i=new AbortController;s=i,ze(e,(function(){return We(s,e.reason)}));var o,c,u=(o=function(){return j(void 0,null,(function(){var t;return a(this,(function(r){switch(r.label){case 0:return tt(e),tt(i.signal),[4,n({pause:rt(i.signal),delay:st(i.signal),signal:i.signal})];case 1:return t=r.sent(),tt(i.signal),[2,t]}}))}))},c=function(){return We(i,Ze)},j(void 0,null,(function(){var e;return a(this,(function(t){switch(t.label){case 0:return t.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return t.sent(),[4,o()];case 2:return[2,{status:"ok",value:t.sent()}];case 3:return[2,{status:(e=t.sent())instanceof et?"cancelled":"rejected",error:e}];case 4:return null==c||c(),[7];case 5:return[2]}}))})));return(null==r?void 0:r.autoJoin)&&t.push(u),{result:rt(e)(u),cancel:function(){We(i,Xe)}}}},ut=function(e,t){return function(n,r){return qe(function(n,r){return j(void 0,null,(function(){var s,i,o,c;return a(this,(function(a){switch(a.label){case 0:tt(t),s=function(){},i=new Promise((function(t,r){var i=e({predicate:n,effect:function(e,n){n.unsubscribe(),t([e,n.getState(),n.getOriginalState()])}});s=function(){i(),r()}})),o=[i],null!=r&&o.push(new Promise((function(e){return setTimeout(e,r,null)}))),a.label=1;case 1:return a.trys.push([1,,3,4]),[4,nt(t,Promise.race(o))];case 2:return c=a.sent(),tt(t),[2,c];case 3:return s(),[7];case 4:return[2]}}))}))}(n,r))}},lt=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,s=e.predicate,i=e.effect;if(t)s=M(t).match;else if(n)t=n.type,s=n.match;else if(r)s=r;else if(!s)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return Ge(i,"options.listener"),{predicate:s,type:t,effect:i}},dt=function(e){var t=lt(e),n=t.type,r=t.predicate,s=t.effect;return{id:ke(),effect:s,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}}},ft=function(e){e.pending.forEach((function(e){We(e,Ye)}))},ht=function(e){return function(){e.forEach(ft),e.clear()}},pt=function(e,t,n){try{e(t,n)}catch(e){setTimeout((function(){throw e}),0)}},mt=M(ot+"/add"),gt=M(ot+"/removeAll"),yt=M(ot+"/remove"),bt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,o([ot+"/error"],e))};function wt(e){var t=this;void 0===e&&(e={});var n=new Map,r=e.extra,s=e.onError,i=void 0===s?bt:s;Ge(i,"onError");var o=function(e){for(var t=0,r=Array.from(n.values());t<r.length;t++){var s=r[t];if(e(s))return s}},c=function(e){var t=o((function(t){return t.effect===e.effect}));return t||(t=dt(e)),function(e){return e.unsubscribe=function(){return n.delete(e.id)},n.set(e.id,e),function(t){e.unsubscribe(),(null==t?void 0:t.cancelActive)&&ft(e)}}(t)},u=function(e){var t=lt(e),n=t.type,r=t.effect,s=t.predicate,i=o((function(e){return("string"==typeof n?e.type===n:e.predicate===s)&&e.effect===r}));return i&&(i.unsubscribe(),e.cancelActive&&ft(i)),!!i},l=function(e,s,o,u){return j(t,null,(function(){var t,l,d,f;return a(this,(function(a){switch(a.label){case 0:t=new AbortController,l=ut(c,t.signal),d=[],a.label=1;case 1:return a.trys.push([1,3,4,6]),e.pending.add(t),[4,Promise.resolve(e.effect(s,it({},o,{getOriginalState:u,condition:function(e,t){return l(e,t).then(Boolean)},take:l,delay:st(t.signal),pause:rt(t.signal),extra:r,signal:t.signal,fork:ct(t.signal,d),unsubscribe:e.unsubscribe,subscribe:function(){n.set(e.id,e)},cancelActiveListeners:function(){e.pending.forEach((function(e,n,r){e!==t&&(We(e,Ye),r.delete(e))}))}})))];case 2:return a.sent(),[3,6];case 3:return(f=a.sent())instanceof et||pt(i,f,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(d)];case 5:return a.sent(),We(t,Qe),e.pending.delete(t),[7];case 6:return[2]}}))}))},d=ht(n);return{middleware:function(e){return function(t){return function(r){if(!L(r))return t(r);if(mt.match(r))return c(r.payload);if(!gt.match(r)){if(yt.match(r))return u(r.payload);var s,a=e.getState(),o=function(){if(a===at)throw new Error(ot+": getOriginalState can only be called synchronously");return a};try{if(s=t(r),n.size>0)for(var f=e.getState(),h=Array.from(n.values()),p=0,m=h;p<m.length;p++){var g=m[p],y=!1;try{y=g.predicate(r,f,a)}catch(e){y=!1,pt(i,e,{raisedBy:"predicate"})}y&&l(g,r,e,o)}}finally{a=at}return s}d()}}},startListening:c,stopListening:u,clearListeners:d}}var vt,St="RTK_autoBatch",Tt=function(){return function(e){var t;return{payload:e,meta:(t={},t[St]=!0,t)}}},Et="function"==typeof queueMicrotask?queueMicrotask.bind("undefined"!=typeof window?window:"undefined"!=typeof global?global:globalThis):function(e){return(vt||(vt=Promise.resolve())).then(e).catch((function(e){return setTimeout((function(){throw e}),0)}))},jt=function(e){return function(t){setTimeout(t,e)}},kt="undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:jt(10),xt=function(e){return void 0===e&&(e={type:"raf"}),function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=t.apply(void 0,n),i=!0,a=!1,o=!1,c=new Set,u="tick"===e.type?Et:"raf"===e.type?kt:"callback"===e.type?e.queueNotification:jt(e.timeout),l=function(){o=!1,a&&(a=!1,c.forEach((function(e){return e()})))};return Object.assign({},s,{subscribe:function(e){var t=s.subscribe((function(){return i&&e()}));return c.add(e),function(){t(),c.delete(e)}},dispatch:function(e){var t;try{return i=!(null==(t=null==e?void 0:e.meta)?void 0:t[St]),(a=!i)&&(o||(o=!0,u(l))),s.dispatch(e)}finally{i=!0}}})}}};(0,k.enableES5)()}).call(this)}).call(this,e("_process"))}}},{package:"@reduxjs/toolkit",file:"node_modules/@reduxjs/toolkit/dist/redux-toolkit.cjs.development.js"}],[2893,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createCacheKeyComparator=i,n.defaultEqualityCheck=void 0,n.defaultMemoize=function(e,t){var n="object"==typeof t?t:{equalityCheck:t},a=n.equalityCheck,o=void 0===a?s:a,c=n.maxSize,u=void 0===c?1:c,l=n.resultEqualityCheck,d=i(o),f=1===u?(h=d,{get:function(e){return p&&h(p.key,e)?p.value:r},put:function(e,t){p={key:e,value:t}},getEntries:function(){return p?[p]:[]},clear:function(){p=undefined}}):function(e,t){var n=[];function s(e){var s=n.findIndex((function(n){return t(e,n.key)}));if(s>-1){var i=n[s];return s>0&&(n.splice(s,1),n.unshift(i)),i.value}return r}function i(t,i){s(t)===r&&(n.unshift({key:t,value:i}),n.length>e&&n.pop())}function a(){return n}function o(){n=[]}return{get:s,put:i,getEntries:a,clear:o}}(u,d);var h,p;function m(){var t=f.get(arguments);if(t===r){if(t=e.apply(null,arguments),l){var n=f.getEntries().find((function(e){return l(e.value,t)}));n&&(t=n.value)}f.put(arguments,t)}return t}return m.clearCache=function(){return f.clear()},m};var r="NOT_FOUND";var s=function(e,t){return e===t};function i(e){return function(t,n){if(null===t||null===n||t.length!==n.length)return!1;for(var r=t.length,s=0;s<r;s++)if(!e(t[s],n[s]))return!1;return!0}}n.defaultEqualityCheck=s}}},{package:"@reduxjs/toolkit>reselect",file:"node_modules/@reduxjs/toolkit/node_modules/reselect/lib/defaultMemoize.js"}],[2894,{"./defaultMemoize":2893},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.createSelector=void 0,n.createSelectorCreator=s,n.createStructuredSelector=void 0,Object.defineProperty(n,"defaultEqualityCheck",{enumerable:!0,get:function(){return r.defaultEqualityCheck}}),Object.defineProperty(n,"defaultMemoize",{enumerable:!0,get:function(){return r.defaultMemoize}});var r=e("./defaultMemoize");function s(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];var i,a=0,o={memoizeOptions:undefined},c=r.pop();if("object"==typeof c&&(o=c,c=r.pop()),"function"!=typeof c)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof c+"]");var u=o.memoizeOptions,l=void 0===u?n:u,d=Array.isArray(l)?l:[l],f=function(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var n=t.map((function(e){return"function"==typeof e?"function "+(e.name||"unnamed")+"()":typeof e})).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+n+"]")}return t}(r),h=e.apply(void 0,[function(){return a++,c.apply(null,arguments)}].concat(d)),p=e((function(){for(var e=[],t=f.length,n=0;n<t;n++)e.push(f[n].apply(null,arguments));return i=h.apply(null,e)}));return Object.assign(p,{resultFunc:c,memoizedResultFunc:h,dependencies:f,lastResult:function(){return i},recomputations:function(){return a},resetRecomputations:function(){return a=0}}),p}}var i=s(r.defaultMemoize);n.createSelector=i;n.createStructuredSelector=function(e,t){if(void 0===t&&(t=i),"object"!=typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var n=Object.keys(e),r=t(n.map((function(t){return e[t]})),(function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((function(e,t,r){return e[n[r]]=t,e}),{})}));return r}}}},{package:"@reduxjs/toolkit>reselect",file:"node_modules/@reduxjs/toolkit/node_modules/reselect/lib/index.js"}],[2896,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e){if(!Number.isSafeInteger(e))throw new Error(`Wrong integer: ${e}`)}function s(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function i(...e){const t=e=>e,n=(e,t)=>n=>e(t(n));return{encode:e.map((e=>e.encode)).reduceRight(n,t),decode:e.map((e=>e.decode)).reduce(n,t)}}function a(e){return{encode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("alphabet.encode input should be an array of numbers");return t.map((t=>{if(r(t),t<0||t>=e.length)throw new Error(`Digit index outside alphabet: ${t} (alphabet: ${e.length})`);return e[t]}))},decode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("alphabet.decode input should be array of strings");return t.map((t=>{if("string"!=typeof t)throw new Error(`alphabet.decode: not string element=${t}`);const n=e.indexOf(t);if(-1===n)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return n}))}}}function o(e=""){if("string"!=typeof e)throw new Error("join separator should be string");return{encode:t=>{if(!Array.isArray(t)||t.length&&"string"!=typeof t[0])throw new Error("join.encode input should be array of strings");for(let e of t)if("string"!=typeof e)throw new Error(`join.encode: non-string input=${e}`);return t.join(e)},decode:t=>{if("string"!=typeof t)throw new Error("join.decode input should be string");return t.split(e)}}}function c(e,t="="){if(r(e),"string"!=typeof t)throw new Error("padding chr should be string");return{encode(n){if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!=typeof e)throw new Error(`padding.encode: non-string input=${e}`);for(;n.length*e%8;)n.push(t);return n},decode(n){if(!Array.isArray(n)||n.length&&"string"!=typeof n[0])throw new Error("padding.encode input should be array of strings");for(let e of n)if("string"!=typeof e)throw new Error(`padding.decode: non-string input=${e}`);let r=n.length;if(r*e%8)throw new Error("Invalid padding: string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if(!((r-1)*e%8))throw new Error("Invalid padding: string has too much padding");return n.slice(0,r)}}}function u(e){if("function"!=typeof e)throw new Error("normalize fn should be function");return{encode:e=>e,decode:t=>e(t)}}function l(e,t,n){if(t<2)throw new Error(`convertRadix: wrong from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: wrong to=${n}, base cannot be less than 2`);if(!Array.isArray(e))throw new Error("convertRadix: data should be array");if(!e.length)return[];let s=0;const i=[],a=Array.from(e);for(a.forEach((e=>{if(r(e),e<0||e>=t)throw new Error(`Wrong integer: ${e}`)}));;){let e=0,r=!0;for(let i=s;i<a.length;i++){const o=a[i],c=t*e+o;if(!Number.isSafeInteger(c)||t*e/t!==e||c-o!=t*e)throw new Error("convertRadix: carry overflow");e=c%n;const u=Math.floor(c/n);if(a[i]=u,!Number.isSafeInteger(u)||u*n+e!==c)throw new Error("convertRadix: carry overflow");r&&(u?r=!1:s=i)}if(i.push(e),r)break}for(let t=0;t<e.length-1&&0===e[t];t++)i.push(0);return i.reverse()}
/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(n,"__esModule",{value:!0}),n.bytes=n.stringToBytes=n.str=n.bytesToString=n.hex=n.utf8=n.bech32m=n.bech32=n.base58check=n.createBase58check=n.base58xmr=n.base58xrp=n.base58flickr=n.base58=n.base64urlnopad=n.base64url=n.base64nopad=n.base64=n.base32crockford=n.base32hexnopad=n.base32hex=n.base32nopad=n.base32=n.base16=n.utils=void 0,n.assertNumber=r;const d=(e,t)=>t?d(t,e%t):e,f=(e,t)=>e+(t-d(e,t));function h(e,t,n,s){if(!Array.isArray(e))throw new Error("convertRadix2: data should be array");if(t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(f(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${f(t,n)}`);let i=0,a=0;const o=2**n-1,c=[];for(const s of e){if(r(s),s>=2**t)throw new Error(`convertRadix2: invalid data word=${s} from=${t}`);if(i=i<<t|s,a+t>32)throw new Error(`convertRadix2: carry overflow pos=${a} from=${t}`);for(a+=t;a>=n;a-=n)c.push((i>>a-n&o)>>>0);i&=2**a-1}if(i=i<<n-a&o,!s&&a>=t)throw new Error("Excess padding");if(!s&&i)throw new Error(`Non-zero padding: ${i}`);return s&&a>0&&c.push(i>>>0),c}function p(e){return r(e),{encode:t=>{if(!s(t))throw new Error("radix.encode input should be Uint8Array");return l(Array.from(t),256,e)},decode:t=>{if(!Array.isArray(t)||t.length&&"number"!=typeof t[0])throw new Error("radix.decode input should be array of numbers");return Uint8Array.from(l(t,e,256))}}}function m(e,t=!1){if(r(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(f(8,e)>32||f(e,8)>32)throw new Error("radix2: carry overflow");return{encode:n=>{if(!s(n))throw new Error("radix2.encode input should be Uint8Array");return h(Array.from(n),8,e,!t)},decode:n=>{if(!Array.isArray(n)||n.length&&"number"!=typeof n[0])throw new Error("radix2.decode input should be array of numbers");return Uint8Array.from(h(n,e,8,t))}}}function g(e){if("function"!=typeof e)throw new Error("unsafeWrapper fn should be function");return function(...t){try{return e.apply(null,t)}catch(e){}}}function y(e,t){if(r(e),"function"!=typeof t)throw new Error("checksum fn should be function");return{encode(n){if(!s(n))throw new Error("checksum.encode: input should be Uint8Array");const r=t(n).slice(0,e),i=new Uint8Array(n.length+e);return i.set(n),i.set(r,n.length),i},decode(n){if(!s(n))throw new Error("checksum.decode: input should be Uint8Array");const r=n.slice(0,-e),i=t(r).slice(0,e),a=n.slice(-e);for(let t=0;t<e;t++)if(i[t]!==a[t])throw new Error("Invalid checksum");return r}}}n.utils={alphabet:a,chain:i,checksum:y,convertRadix:l,convertRadix2:h,radix:p,radix2:m,join:o,padding:c},n.base16=i(m(4),a("0123456789ABCDEF"),o("")),n.base32=i(m(5),a("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),c(5),o("")),n.base32nopad=i(m(5),a("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),o("")),n.base32hex=i(m(5),a("0123456789ABCDEFGHIJKLMNOPQRSTUV"),c(5),o("")),n.base32hexnopad=i(m(5),a("0123456789ABCDEFGHIJKLMNOPQRSTUV"),o("")),n.base32crockford=i(m(5),a("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),o(""),u((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),n.base64=i(m(6),a("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),c(6),o("")),n.base64nopad=i(m(6),a("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),o("")),n.base64url=i(m(6),a("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),c(6),o("")),n.base64urlnopad=i(m(6),a("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),o(""));const b=e=>i(p(58),a(e),o(""));n.base58=b("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),n.base58flickr=b("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),n.base58xrp=b("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const w=[0,2,3,5,6,7,9,10,11];n.base58xmr={encode(e){let t="";for(let r=0;r<e.length;r+=8){const s=e.subarray(r,r+8);t+=n.base58.encode(s).padStart(w[s.length],"1")}return t},decode(e){let t=[];for(let r=0;r<e.length;r+=11){const s=e.slice(r,r+11),i=w.indexOf(s.length),a=n.base58.decode(s);for(let e=0;e<a.length-i;e++)if(0!==a[e])throw new Error("base58xmr: wrong padding");t=t.concat(Array.from(a.slice(a.length-i)))}return Uint8Array.from(t)}};n.createBase58check=e=>i(y(4,(t=>e(e(t)))),n.base58),n.base58check=n.createBase58check;const v=i(a("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),o("")),S=[996825010,642813549,513874426,1027748829,705979059];function T(e){const t=e>>25;let n=(33554431&e)<<5;for(let e=0;e<S.length;e++)1==(t>>e&1)&&(n^=S[e]);return n}function E(e,t,n=1){const r=e.length;let s=1;for(let t=0;t<r;t++){const n=e.charCodeAt(t);if(n<33||n>126)throw new Error(`Invalid prefix (${e})`);s=T(s)^n>>5}s=T(s);for(let t=0;t<r;t++)s=T(s)^31&e.charCodeAt(t);for(let e of t)s=T(s)^e;for(let e=0;e<6;e++)s=T(s);return s^=n,v.encode(h([s%2**30],30,5,!1))}function j(e){const t="bech32"===e?1:734539939,n=m(5),r=n.decode,s=n.encode,i=g(r);function a(e,n,r=90){if("string"!=typeof e)throw new Error("bech32.encode prefix should be string, not "+typeof e);if(n instanceof Uint8Array&&(n=Array.from(n)),!Array.isArray(n)||n.length&&"number"!=typeof n[0])throw new Error("bech32.encode words should be array of numbers, not "+typeof n);if(0===e.length)throw new TypeError(`Invalid prefix length ${e.length}`);const s=e.length+7+n.length;if(!1!==r&&s>r)throw new TypeError(`Length ${s} exceeds limit ${r}`);const i=e.toLowerCase(),a=E(i,n,t);return`${i}1${v.encode(n)}${a}`}function o(e,n=90){if("string"!=typeof e)throw new Error("bech32.decode input should be string, not "+typeof e);if(e.length<8||!1!==n&&e.length>n)throw new TypeError(`Wrong string length: ${e.length} (${e}). Expected (8..${n})`);const r=e.toLowerCase();if(e!==r&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const s=r.lastIndexOf("1");if(0===s||-1===s)throw new Error('Letter "1" must be present between prefix and data only');const i=r.slice(0,s),a=r.slice(s+1);if(a.length<6)throw new Error("Data must be at least 6 characters long");const o=v.decode(a).slice(0,-6),c=E(i,o,t);if(!a.endsWith(c))throw new Error(`Invalid checksum in ${e}: expected "${c}"`);return{prefix:i,words:o}}return{encode:a,decode:o,encodeFromBytes:function(e,t){return a(e,s(t))},decodeToBytes:function(e){const{prefix:t,words:n}=o(e,!1);return{prefix:t,words:n,bytes:r(n)}},decodeUnsafe:g(o),fromWords:r,fromWordsUnsafe:i,toWords:s}}n.bech32=j("bech32"),n.bech32m=j("bech32m"),n.utf8={encode:e=>(new TextDecoder).decode(e),decode:e=>(new TextEncoder).encode(e)},n.hex=i(m(4),a("0123456789abcdef"),o(""),u((e=>{if("string"!=typeof e||e.length%2)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})));const k={utf8:n.utf8,hex:n.hex,base16:n.base16,base32:n.base32,base64:n.base64,base64url:n.base64url,base58:n.base58,base58xmr:n.base58xmr},x="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr";n.bytesToString=(e,t)=>{if("string"!=typeof e||!k.hasOwnProperty(e))throw new TypeError(x);if(!s(t))throw new TypeError("bytesToString() expects Uint8Array");return k[e].encode(t)},n.str=n.bytesToString;n.stringToBytes=(e,t)=>{if(!k.hasOwnProperty(e))throw new TypeError(x);if("string"!=typeof t)throw new TypeError("stringToBytes() expects string");return k[e].decode(t)},n.bytes=n.stringToBytes}}},{package:"@metamask/utils>@scure/base",file:"node_modules/@scure/base/lib/index.js"}],[2897,{"@noble/curves/abstract/modular":2901,"@noble/curves/secp256k1":2904,"@noble/hashes/_assert":2905,"@noble/hashes/hmac":2909,"@noble/hashes/ripemd160":2910,"@noble/hashes/sha256":2911,"@noble/hashes/sha512":2912,"@noble/hashes/utils":2913,"@scure/base":2896},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.HDKey=n.HARDENED_OFFSET=void 0;
/*! scure-bip32 - MIT License (c) 2022 Patricio Palladino, Paul Miller (paulmillr.com) */
const r=e("@noble/hashes/hmac"),s=e("@noble/hashes/ripemd160"),i=e("@noble/hashes/sha256"),a=e("@noble/hashes/sha512"),o=e("@noble/hashes/_assert"),c=e("@noble/hashes/utils"),u=e("@noble/curves/secp256k1"),l=e("@noble/curves/abstract/modular"),d=e("@scure/base"),f=u.secp256k1.ProjectivePoint,h=(0,d.createBase58check)(i.sha256);function p(e){return BigInt(`0x${(0,c.bytesToHex)(e)}`)}const m=(0,c.utf8ToBytes)("Bitcoin seed"),g={private:76066276,public:76067358};n.HARDENED_OFFSET=2147483648;const y=e=>{if(!Number.isSafeInteger(e)||e<0||e>2**32-1)throw new Error(`Invalid number=${e}. Should be from 0 to 2 ** 32 - 1`);const t=new Uint8Array(4);return(0,c.createView)(t).setUint32(0,e,!1),t};class b{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return e=this.pubHash,(0,c.createView)(e).getUint32(0,!1);var e}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const e=this.privateKey;if(!e)throw new Error("No private key");return h.encode(this.serialize(this.versions.private,(0,c.concatBytes)(new Uint8Array([0]),e)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return h.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(e,t=g){if((0,o.bytes)(e),8*e.length<128||8*e.length>512)throw new Error(`HDKey: wrong seed length=${e.length}. Should be between 128 and 512 bits; 256 bits is advised)`);const n=(0,r.hmac)(a.sha512,m,e);return new b({versions:t,chainCode:n.slice(32),privateKey:n.slice(0,32)})}static fromExtendedKey(e,t=g){const n=h.decode(e),r=(0,c.createView)(n),s=r.getUint32(0,!1),i={versions:t,depth:n[4],parentFingerprint:r.getUint32(5,!1),index:r.getUint32(9,!1),chainCode:n.slice(13,45)},a=n.slice(45),o=0===a[0];if(s!==t[o?"private":"public"])throw new Error("Version mismatch");return new b(o?{...i,privateKey:a.slice(1)}:{...i,publicKey:a})}static fromJSON(e){return b.fromExtendedKey(e.xpriv)}constructor(e){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!e||"object"!=typeof e)throw new Error("HDKey.constructor must not be called directly");if(this.versions=e.versions||g,this.depth=e.depth||0,this.chainCode=e.chainCode||null,this.index=e.index||0,this.parentFingerprint=e.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(e.publicKey&&e.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(e.privateKey){if(!u.secp256k1.utils.isValidPrivateKey(e.privateKey))throw new Error("Invalid private key");this.privKey="bigint"==typeof e.privateKey?e.privateKey:p(e.privateKey),this.privKeyBytes=(t=this.privKey,(0,c.hexToBytes)(t.toString(16).padStart(64,"0"))),this.pubKey=u.secp256k1.getPublicKey(e.privateKey,!0)}else{if(!e.publicKey)throw new Error("HDKey: no public or private key provided");this.pubKey=f.fromHex(e.publicKey).toRawBytes(!0)}var t,n;this.pubHash=(n=this.pubKey,(0,s.ripemd160)((0,i.sha256)(n)))}derive(e){if(!/^[mM]'?/.test(e))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(e))return this;const t=e.replace(/^[mM]'?\//,"").split("/");let r=this;for(const e of t){const t=/^(\d+)('?)$/.exec(e),s=t&&t[1];if(!t||3!==t.length||"string"!=typeof s)throw new Error(`Invalid child index: ${e}`);let i=+s;if(!Number.isSafeInteger(i)||i>=n.HARDENED_OFFSET)throw new Error("Invalid index");"'"===t[2]&&(i+=n.HARDENED_OFFSET),r=r.deriveChild(i)}return r}deriveChild(e){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let t=y(e);if(e>=n.HARDENED_OFFSET){const e=this.privateKey;if(!e)throw new Error("Could not derive hardened child key");t=(0,c.concatBytes)(new Uint8Array([0]),e,t)}else t=(0,c.concatBytes)(this.pubKey,t);const s=(0,r.hmac)(a.sha512,this.chainCode,t),i=p(s.slice(0,32)),o=s.slice(32);if(!u.secp256k1.utils.isValidPrivateKey(i))throw new Error("Tweak bigger than curve order");const d={versions:this.versions,chainCode:o,depth:this.depth+1,parentFingerprint:this.fingerprint,index:e};try{if(this.privateKey){const e=(0,l.mod)(this.privKey+i,u.secp256k1.CURVE.n);if(!u.secp256k1.utils.isValidPrivateKey(e))throw new Error("The tweak was out of range or the resulted private key is invalid");d.privateKey=e}else{const e=f.fromHex(this.pubKey).add(f.fromPrivateKey(i));if(e.equals(f.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");d.publicKey=e.toRawBytes(!0)}return new b(d)}catch(t){return this.deriveChild(e+1)}}sign(e){if(!this.privateKey)throw new Error("No privateKey set!");return(0,o.bytes)(e,32),u.secp256k1.sign(e,this.privKey).toCompactRawBytes()}verify(e,t){if((0,o.bytes)(e,32),(0,o.bytes)(t,64),!this.publicKey)throw new Error("No publicKey set!");let n;try{n=u.secp256k1.Signature.fromCompact(t)}catch(e){return!1}return u.secp256k1.verify(n,e,this.publicKey)}wipePrivateData(){return this.privKey=undefined,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=undefined),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(e,t){if(!this.chainCode)throw new Error("No chainCode set");return(0,o.bytes)(t,33),(0,c.concatBytes)(y(e),new Uint8Array([this.depth]),y(this.parentFingerprint),y(this.index),this.chainCode,t)}}n.HDKey=b}}},{package:"viem>@scure/bip32",file:"node_modules/@scure/bip32/lib/index.js"}],[2898,{"./abstract/weierstrass.js":2903,"@noble/hashes/hmac":2909,"@noble/hashes/utils":2913},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getHash=a,n.createCurve=function(e,t){const n=t=>(0,i.weierstrass)({...e,...a(t)});return Object.freeze({...n(t),create:n})};
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const r=e("@noble/hashes/hmac"),s=e("@noble/hashes/utils"),i=e("./abstract/weierstrass.js");function a(e){return{hash:e,hmac:(t,...n)=>(0,r.hmac)(e,t,(0,s.concatBytes)(...n)),randomBytes:s.randomBytes}}}}},{package:"viem>@scure/bip32>@noble/curves",file:"node_modules/@scure/bip32/node_modules/@noble/curves/_shortw_utils.js"}],[2899,{"./modular.js":2901,"./utils.js":2902},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.wNAF=function(e,t){const n=(e,t)=>{const n=t.negate();return e?n:t},r=e=>({windows:Math.ceil(t/e)+1,windowSize:2**(e-1)});return{constTimeNegate:n,unsafeLadder(t,n){let r=e.ZERO,s=t;for(;n>i;)n&a&&(r=r.add(s)),s=s.double(),n>>=a;return r},precomputeWindow(e,t){const{windows:n,windowSize:s}=r(t),i=[];let a=e,o=a;for(let e=0;e<n;e++){o=a,i.push(o);for(let e=1;e<s;e++)o=o.add(a),i.push(o);a=o.double()}return i},wNAF(t,s,i){const{windows:o,windowSize:c}=r(t);let u=e.ZERO,l=e.BASE;const d=BigInt(2**t-1),f=2**t,h=BigInt(t);for(let e=0;e<o;e++){const t=e*c;let r=Number(i&d);i>>=h,r>c&&(r-=f,i+=a);const o=t,p=t+Math.abs(r)-1,m=e%2!=0,g=r<0;0===r?l=l.add(n(m,s[o])):u=u.add(n(g,s[p]))}return{p:u,f:l}},wNAFCached(e,t,n,r){const s=e._WINDOW_SIZE||1;let i=t.get(e);return i||(i=this.precomputeWindow(e,s),1!==s&&t.set(e,r(i))),this.wNAF(s,i,n)}}},n.validateBasic=function(e){return(0,r.validateField)(e.Fp),(0,s.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,r.nLength)(e.n,e.nBitLength),...e,p:e.Fp.ORDER})};
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const r=e("./modular.js"),s=e("./utils.js"),i=BigInt(0),a=BigInt(1)}}},{package:"viem>@scure/bip32>@noble/curves",file:"node_modules/@scure/bip32/node_modules/@noble/curves/abstract/curve.js"}],[2900,{"./modular.js":2901,"./utils.js":2902},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.expand_message_xmd=u,n.expand_message_xof=l,n.hash_to_field=d,n.isogenyMap=function(e,t){const n=t.map((e=>Array.from(e).reverse()));return(t,r)=>{const[s,i,a,o]=n.map((n=>n.reduce(((n,r)=>e.add(e.mul(n,t),r)))));return t=e.div(s,i),r=e.mul(r,e.div(a,o)),{x:t,y:r}}},n.createHasher=function(e,t,n){if("function"!=typeof t)throw new Error("mapToCurve() must be defined");return{hashToCurve(r,s){const i=d(r,2,{...n,DST:n.DST,...s}),a=e.fromAffine(t(i[0])),o=e.fromAffine(t(i[1])),c=a.add(o).clearCofactor();return c.assertValidity(),c},encodeToCurve(r,s){const i=d(r,1,{...n,DST:n.encodeDST,...s}),a=e.fromAffine(t(i[0])).clearCofactor();return a.assertValidity(),a},mapToCurve(n){if(!Array.isArray(n))throw new Error("mapToCurve: expected array of bigints");for(const e of n)if("bigint"!=typeof e)throw new Error(`mapToCurve: expected array of bigints, got ${e} in array`);const r=e.fromAffine(t(n)).clearCofactor();return r.assertValidity(),r}}};const r=e("./modular.js"),s=e("./utils.js"),i=s.bytesToNumberBE;function a(e,t){if(e<0||e>=1<<8*t)throw new Error(`bad I2OSP call: value=${e} length=${t}`);const n=Array.from({length:t}).fill(0);for(let r=t-1;r>=0;r--)n[r]=255&e,e>>>=8;return new Uint8Array(n)}function o(e,t){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r]^t[r];return n}function c(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function u(e,t,n,r){(0,s.abytes)(e),(0,s.abytes)(t),c(n),t.length>255&&(t=r((0,s.concatBytes)((0,s.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));const{outputLen:i,blockLen:u}=r,l=Math.ceil(n/i);if(l>255)throw new Error("Invalid xmd length");const d=(0,s.concatBytes)(t,a(t.length,1)),f=a(0,u),h=a(n,2),p=new Array(l),m=r((0,s.concatBytes)(f,e,h,a(0,1),d));p[0]=r((0,s.concatBytes)(m,a(1,1),d));for(let e=1;e<=l;e++){const t=[o(m,p[e-1]),a(e+1,1),d];p[e]=r((0,s.concatBytes)(...t))}return(0,s.concatBytes)(...p).slice(0,n)}function l(e,t,n,r,i){if((0,s.abytes)(e),(0,s.abytes)(t),c(n),t.length>255){const e=Math.ceil(2*r/8);t=i.create({dkLen:e}).update((0,s.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(n>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:n}).update(e).update(a(n,2)).update(t).update(a(t.length,1)).digest()}function d(e,t,n){(0,s.validateObject)(n,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:a,k:o,m:d,hash:f,expand:h,DST:p}=n;(0,s.abytes)(e),c(t);const m="string"==typeof p?(0,s.utf8ToBytes)(p):p,g=a.toString(2).length,y=Math.ceil((g+o)/8),b=t*d*y;let w;if("xmd"===h)w=u(e,m,b,f);else if("xof"===h)w=l(e,m,b,o,f);else{if("_internal_pass"!==h)throw new Error('expand must be "xmd" or "xof"');w=e}const v=new Array(t);for(let e=0;e<t;e++){const t=new Array(d);for(let n=0;n<d;n++){const s=y*(n+e*d),o=w.subarray(s,s+y);t[n]=(0,r.mod)(i(o),a)}v[e]=t}return v}}}},{package:"viem>@scure/bip32>@noble/curves",file:"node_modules/@scure/bip32/node_modules/@noble/curves/abstract/hash-to-curve.js"}],[2901,{"./utils.js":2902},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.isNegativeLE=void 0,n.mod=d,n.pow=f,n.pow2=function(e,t,n){let r=e;for(;t-- >s;)r*=r,r%=n;return r},n.invert=h,n.tonelliShanks=p,n.FpSqrt=m,n.validateField=function(e){const t=g.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,r.validateObject)(e,t)},n.FpPow=y,n.FpInvertBatch=b,n.FpDiv=function(e,t,n){return e.mul(t,"bigint"==typeof n?h(n,e.ORDER):e.inv(n))},n.FpIsSquare=function(e){const t=(e.ORDER-i)/a;return n=>{const r=e.pow(n,t);return e.eql(r,e.ZERO)||e.eql(r,e.ONE)}},n.nLength=w,n.Field=function(e,t,n=!1,a={}){if(e<=s)throw new Error(`Expected Field ORDER > 0, got ${e}`);const{nBitLength:o,nByteLength:c}=w(e,t);if(c>2048)throw new Error("Field lengths over 2048 bytes are not supported");const u=m(e),l=Object.freeze({ORDER:e,BITS:o,BYTES:c,MASK:(0,r.bitMask)(o),ZERO:s,ONE:i,create:t=>d(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("Invalid field element: expected bigint, got "+typeof t);return s<=t&&t<e},is0:e=>e===s,isOdd:e=>(e&i)===i,neg:t=>d(-t,e),eql:(e,t)=>e===t,sqr:t=>d(t*t,e),add:(t,n)=>d(t+n,e),sub:(t,n)=>d(t-n,e),mul:(t,n)=>d(t*n,e),pow:(e,t)=>y(l,e,t),div:(t,n)=>d(t*h(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>h(t,e),sqrt:a.sqrt||(e=>u(l,e)),invertBatch:e=>b(l,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>n?(0,r.numberToBytesLE)(e,c):(0,r.numberToBytesBE)(e,c),fromBytes:e=>{if(e.length!==c)throw new Error(`Fp.fromBytes: expected ${c}, got ${e.length}`);return n?(0,r.bytesToNumberLE)(e):(0,r.bytesToNumberBE)(e)}});return Object.freeze(l)},n.FpSqrtOdd=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const n=e.sqrt(t);return e.isOdd(n)?n:e.neg(n)},n.FpSqrtEven=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const n=e.sqrt(t);return e.isOdd(n)?e.neg(n):n},n.hashToPrivateScalar=function(e,t,n=!1){const s=(e=(0,r.ensureBytes)("privateHash",e)).length,a=w(t).nByteLength+8;if(a<24||s<a||s>1024)throw new Error(`hashToPrivateScalar: expected ${a}-1024 bytes of input, got ${s}`);return d(n?(0,r.bytesToNumberLE)(e):(0,r.bytesToNumberBE)(e),t-i)+i},n.getFieldBytesLength=v,n.getMinHashLength=S,n.mapHashToField=function(e,t,n=!1){const s=e.length,a=v(t),o=S(t);if(s<16||s<o||s>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${s}`);const c=d(n?(0,r.bytesToNumberBE)(e):(0,r.bytesToNumberLE)(e),t-i)+i;return n?(0,r.numberToBytesLE)(c,a):(0,r.numberToBytesBE)(c,a)};
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const r=e("./utils.js"),s=BigInt(0),i=BigInt(1),a=BigInt(2),o=BigInt(3),c=BigInt(4),u=BigInt(5),l=BigInt(8);BigInt(9),BigInt(16);function d(e,t){const n=e%t;return n>=s?n:t+n}function f(e,t,n){if(n<=s||t<s)throw new Error("Expected power/modulo > 0");if(n===i)return s;let r=i;for(;t>s;)t&i&&(r=r*e%n),e=e*e%n,t>>=i;return r}function h(e,t){if(e===s||t<=s)throw new Error(`invert: expected positive integers, got n=${e} mod=${t}`);let n=d(e,t),r=t,a=s,o=i,c=i,u=s;for(;n!==s;){const e=r/n,t=r%n,s=a-c*e,i=o-u*e;r=n,n=t,a=c,o=u,c=s,u=i}if(r!==i)throw new Error("invert: does not exist");return d(a,t)}function p(e){const t=(e-i)/a;let n,r,o;for(n=e-i,r=0;n%a===s;n/=a,r++);for(o=a;o<e&&f(o,t,e)!==e-i;o++);if(1===r){const t=(e+i)/c;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}const u=(n+i)/a;return function(e,s){if(e.pow(s,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let a=r,c=e.pow(e.mul(e.ONE,o),n),l=e.pow(s,u),d=e.pow(s,n);for(;!e.eql(d,e.ONE);){if(e.eql(d,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(d);t<a&&!e.eql(n,e.ONE);t++)n=e.sqr(n);const n=e.pow(c,i<<BigInt(a-t-1));c=e.sqr(n),l=e.mul(l,n),d=e.mul(d,c),a=t}return l}}function m(e){if(e%c===o){const t=(e+i)/c;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}if(e%l===u){const t=(e-u)/l;return function(e,n){const r=e.mul(n,a),s=e.pow(r,t),i=e.mul(n,s),o=e.mul(e.mul(i,a),s),c=e.mul(i,e.sub(o,e.ONE));if(!e.eql(e.sqr(c),n))throw new Error("Cannot find square root");return c}}return p(e)}n.isNegativeLE=(e,t)=>(d(e,t)&i)===i;const g=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function y(e,t,n){if(n<s)throw new Error("Expected power > 0");if(n===s)return e.ONE;if(n===i)return t;let r=e.ONE,a=t;for(;n>s;)n&i&&(r=e.mul(r,a)),a=e.sqr(a),n>>=i;return r}function b(e,t){const n=new Array(t.length),r=t.reduce(((t,r,s)=>e.is0(r)?t:(n[s]=t,e.mul(t,r))),e.ONE),s=e.inv(r);return t.reduceRight(((t,r,s)=>e.is0(r)?t:(n[s]=e.mul(t,n[s]),e.mul(t,r))),s),n}function w(e,t){const n=t!==undefined?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function v(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function S(e){const t=v(e);return t+Math.ceil(t/2)}}}},{package:"viem>@scure/bip32>@noble/curves",file:"node_modules/@scure/bip32/node_modules/@noble/curves/abstract/modular.js"}],[2902,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.bitMask=void 0,n.isBytes=a,n.abytes=o,n.bytesToHex=u,n.numberToHexUnpadded=l,n.hexToNumber=d,n.hexToBytes=p,n.bytesToNumberBE=function(e){return d(u(e))},n.bytesToNumberLE=function(e){return o(e),d(u(Uint8Array.from(e).reverse()))},n.numberToBytesBE=m,n.numberToBytesLE=function(e,t){return m(e,t).reverse()},n.numberToVarBytesBE=function(e){return p(l(e))},n.ensureBytes=function(e,t,n){let r;if("string"==typeof t)try{r=p(t)}catch(n){throw new Error(`${e} must be valid hex string, got "${t}". Cause: ${n}`)}else{if(!a(t))throw new Error(`${e} must be hex string or Uint8Array`);r=Uint8Array.from(t)}const s=r.length;if("number"==typeof n&&s!==n)throw new Error(`${e} expected ${n} bytes, got ${s}`);return r},n.concatBytes=g,n.equalBytes=function(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return 0===n},n.utf8ToBytes=function(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))},n.bitLen=function(e){let t;for(t=0;e>r;e>>=s,t+=1);return t},n.bitGet=function(e,t){return e>>BigInt(t)&s},n.bitSet=function(e,t,n){return e|(n?s:r)<<BigInt(t)},n.createHmacDrbg=function(e,t,n){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let r=y(e),s=y(e),i=0;const a=()=>{r.fill(1),s.fill(0),i=0},o=(...e)=>n(s,r,...e),c=(e=y())=>{s=o(b([0]),e),r=o(),0!==e.length&&(s=o(b([1]),e),r=o())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){r=o();const t=r.slice();n.push(t),e+=r.length}return g(...n)};return(e,t)=>{a(),c(e);let n=undefined;for(;!(n=t(u()));)c();return a(),n}},n.validateObject=function(e,t,n={}){const r=(t,n,r)=>{const s=w[n];if("function"!=typeof s)throw new Error(`Invalid validator "${n}", expected function`);const i=e[t];if(!(r&&i===undefined||s(i,e)))throw new Error(`Invalid param ${String(t)}=${i} (${typeof i}), expected ${n}`)};for(const[e,n]of Object.entries(t))r(e,n,!1);for(const[e,t]of Object.entries(n))r(e,t,!0);return e};
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const r=BigInt(0),s=BigInt(1),i=BigInt(2);function a(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function o(e){if(!a(e))throw new Error("Uint8Array expected")}const c=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function u(e){o(e);let t="";for(let n=0;n<e.length;n++)t+=c[e[n]];return t}function l(e){const t=e.toString(16);return 1&t.length?`0${t}`:t}function d(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return BigInt(""===e?"0":`0x${e}`)}const f={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function h(e){return e>=f._0&&e<=f._9?e-f._0:e>=f._A&&e<=f._F?e-(f._A-10):e>=f._a&&e<=f._f?e-(f._a-10):void 0}function p(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let t=0,s=0;t<n;t++,s+=2){const n=h(e.charCodeAt(s)),i=h(e.charCodeAt(s+1));if(n===undefined||i===undefined){const t=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+s)}r[t]=16*n+i}return r}function m(e,t){return p(e.toString(16).padStart(2*t,"0"))}function g(...e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];o(r),t+=r.length}const n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const s=e[t];n.set(s,r),r+=s.length}return n}n.bitMask=e=>(i<<BigInt(e-1))-s;const y=e=>new Uint8Array(e),b=e=>Uint8Array.from(e);const w={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||a(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)}}}},{package:"viem>@scure/bip32>@noble/curves",file:"node_modules/@scure/bip32/node_modules/@noble/curves/abstract/utils.js"}],[2903,{"./curve.js":2899,"./modular.js":2901,"./utils.js":2902},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.DER=void 0,n.weierstrassPoints=p,n.weierstrass=function(e){const t=function(e){const t=(0,r.validateBasic)(e);return i.validateObject(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:o,n:c}=t,d=o.BYTES+1,f=2*o.BYTES+1;function h(e){return s.mod(e,c)}function m(e){return s.invert(e,c)}const{ProjectivePoint:g,normPrivateKeyToScalar:y,weierstrassEquation:b,isWithinCurveOrder:w}=p({...t,toBytes(e,t,n){const r=t.toAffine(),s=o.toBytes(r.x),a=i.concatBytes;return n?a(Uint8Array.from([t.hasEvenY()?2:3]),s):a(Uint8Array.from([4]),s,o.toBytes(r.y))},fromBytes(e){const t=e.length,n=e[0],r=e.subarray(1);if(t!==d||2!==n&&3!==n){if(t===f&&4===n){return{x:o.fromBytes(r.subarray(0,o.BYTES)),y:o.fromBytes(r.subarray(o.BYTES,2*o.BYTES))}}throw new Error(`Point of length ${t} was invalid. Expected ${d} compressed bytes or ${f} uncompressed bytes`)}{const e=i.bytesToNumberBE(r);if(!(u<(s=e)&&s<o.ORDER))throw new Error("Point is not on curve");const t=b(e);let a;try{a=o.sqrt(t)}catch(e){const t=e instanceof Error?": "+e.message:"";throw new Error("Point is not on curve"+t)}return!(1&~n)!==((a&l)===l)&&(a=o.neg(a)),{x:e,y:a}}var s}}),v=e=>i.bytesToHex(i.numberToBytesBE(e,t.nByteLength));function S(e){return e>c>>l}const T=(e,t,n)=>i.bytesToNumberBE(e.slice(t,n));class E{constructor(e,t,n){this.r=e,this.s=t,this.recovery=n,this.assertValidity()}static fromCompact(e){const n=t.nByteLength;return e=(0,a.ensureBytes)("compactSignature",e,2*n),new E(T(e,0,n),T(e,n,2*n))}static fromDER(e){const{r:t,s:r}=n.DER.toSig((0,a.ensureBytes)("DER",e));return new E(t,r)}assertValidity(){if(!w(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!w(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(e){return new E(this.r,this.s,e)}recoverPublicKey(e){const{r:n,s:r,recovery:s}=this,i=_((0,a.ensureBytes)("msgHash",e));if(null==s||![0,1,2,3].includes(s))throw new Error("recovery id invalid");const c=2===s||3===s?n+t.n:n;if(c>=o.ORDER)throw new Error("recovery id 2 or 3 invalid");const u=1&s?"03":"02",l=g.fromHex(u+v(c)),d=m(c),f=h(-i*d),p=h(r*d),y=g.BASE.multiplyAndAddUnsafe(l,f,p);if(!y)throw new Error("point at infinify");return y.assertValidity(),y}hasHighS(){return S(this.s)}normalizeS(){return this.hasHighS()?new E(this.r,h(-this.s),this.recovery):this}toDERRawBytes(){return i.hexToBytes(this.toDERHex())}toDERHex(){return n.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return i.hexToBytes(this.toCompactHex())}toCompactHex(){return v(this.r)+v(this.s)}}const j={isValidPrivateKey(e){try{return y(e),!0}catch(e){return!1}},normPrivateKeyToScalar:y,randomPrivateKey:()=>{const e=s.getMinHashLength(t.n);return s.mapHashToField(t.randomBytes(e),t.n)},precompute:(e=8,t=g.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function k(e){const t=i.isBytes(e),n="string"==typeof e,r=(t||n)&&e.length;return t?r===d||r===f:n?r===2*d||r===2*f:e instanceof g}const x=t.bits2int||function(e){const n=i.bytesToNumberBE(e),r=8*e.length-t.nBitLength;return r>0?n>>BigInt(r):n},_=t.bits2int_modN||function(e){return h(x(e))},I=i.bitMask(t.nBitLength);function P(e){if("bigint"!=typeof e)throw new Error("bigint expected");if(!(u<=e&&e<I))throw new Error(`bigint expected < 2^${t.nBitLength}`);return i.numberToBytesBE(e,t.nByteLength)}function A(e,n,r=C){if(["recovered","canonical"].some((e=>e in r)))throw new Error("sign() legacy options not supported");const{hash:s,randomBytes:c}=t;let{lowS:d,prehash:f,extraEntropy:p}=r;null==d&&(d=!0),e=(0,a.ensureBytes)("msgHash",e),f&&(e=(0,a.ensureBytes)("prehashed msgHash",s(e)));const b=_(e),v=y(n),T=[P(v),P(b)];if(null!=p&&!1!==p){const e=!0===p?c(o.BYTES):p;T.push((0,a.ensureBytes)("extraEntropy",e))}const j=i.concatBytes(...T),k=b;return{seed:j,k2sig:function(e){const t=x(e);if(!w(t))return;const n=m(t),r=g.BASE.multiply(t).toAffine(),s=h(r.x);if(s===u)return;const i=h(n*h(k+s*v));if(i===u)return;let a=(r.x===s?0:2)|Number(r.y&l),o=i;return d&&S(i)&&(o=function(e){return S(e)?h(-e):e}(i),a^=1),new E(s,o,a)}}}const C={lowS:t.lowS,prehash:!1},O={lowS:t.lowS,prehash:!1};return g.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return g.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,n=!0){if(k(e))throw new Error("first arg must be private key");if(!k(t))throw new Error("second arg must be public key");return g.fromHex(t).multiply(y(e)).toRawBytes(n)},sign:function(e,n,r=C){const{seed:s,k2sig:a}=A(e,n,r),o=t;return i.createHmacDrbg(o.hash.outputLen,o.nByteLength,o.hmac)(s,a)},verify:function(e,r,s,o=O){const c=e;if(r=(0,a.ensureBytes)("msgHash",r),s=(0,a.ensureBytes)("publicKey",s),"strict"in o)throw new Error("options.strict was renamed to lowS");const{lowS:u,prehash:l}=o;let d,f=undefined;try{if("string"==typeof c||i.isBytes(c))try{f=E.fromDER(c)}catch(e){if(!(e instanceof n.DER.Err))throw e;f=E.fromCompact(c)}else{if("object"!=typeof c||"bigint"!=typeof c.r||"bigint"!=typeof c.s)throw new Error("PARSE");{const{r:e,s:t}=c;f=new E(e,t)}}d=g.fromHex(s)}catch(e){if("PARSE"===e.message)throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(u&&f.hasHighS())return!1;l&&(r=t.hash(r));const{r:p,s:y}=f,b=_(r),w=m(y),v=h(b*w),S=h(p*w),T=g.BASE.multiplyAndAddUnsafe(d,v,S)?.toAffine();if(!T)return!1;return h(T.x)===p},ProjectivePoint:g,Signature:E,utils:j}},n.SWUFpSqrtRatio=m,n.mapToCurveSimpleSWU=function(e,t){if(s.validateField(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const n=m(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let s,i,a,o,c,u,l,d;s=e.sqr(r),s=e.mul(s,t.Z),i=e.sqr(s),i=e.add(i,s),a=e.add(i,e.ONE),a=e.mul(a,t.B),o=e.cmov(t.Z,e.neg(i),!e.eql(i,e.ZERO)),o=e.mul(o,t.A),i=e.sqr(a),u=e.sqr(o),c=e.mul(u,t.A),i=e.add(i,c),i=e.mul(i,a),u=e.mul(u,o),c=e.mul(u,t.B),i=e.add(i,c),l=e.mul(s,a);const{isValid:f,value:h}=n(i,u);d=e.mul(s,r),d=e.mul(d,h),l=e.cmov(l,a,f),d=e.cmov(d,h,f);const p=e.isOdd(r)===e.isOdd(d);return d=e.cmov(e.neg(d),d,p),l=e.div(l,o),{x:l,y:d}}};
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const r=e("./curve.js"),s=e("./modular.js"),i=e("./utils.js"),a=e("./utils.js");const{bytesToNumberBE:o,hexToBytes:c}=i;n.DER={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(e){const{Err:t}=n.DER;if(e.length<2||2!==e[0])throw new t("Invalid signature integer tag");const r=e[1],s=e.subarray(2,r+2);if(!r||s.length!==r)throw new t("Invalid signature integer: wrong length");if(128&s[0])throw new t("Invalid signature integer: negative");if(0===s[0]&&!(128&s[1]))throw new t("Invalid signature integer: unnecessary leading zero");return{d:o(s),l:e.subarray(r+2)}},toSig(e){const{Err:t}=n.DER,r="string"==typeof e?c(e):e;i.abytes(r);let s=r.length;if(s<2||48!=r[0])throw new t("Invalid signature tag");if(r[1]!==s-2)throw new t("Invalid signature: incorrect length");const{d:a,l:o}=n.DER._parseInt(r.subarray(2)),{d:u,l:l}=n.DER._parseInt(o);if(l.length)throw new t("Invalid signature: left bytes after parsing");return{r:a,s:u}},hexFromSig(e){const t=e=>8&Number.parseInt(e[0],16)?"00"+e:e,n=e=>{const t=e.toString(16);return 1&t.length?`0${t}`:t},r=t(n(e.s)),s=t(n(e.r)),i=r.length/2,a=s.length/2,o=n(i),c=n(a);return`30${n(a+i+4)}02${c}${s}02${o}${r}`}};const u=BigInt(0),l=BigInt(1),d=BigInt(2),f=BigInt(3),h=BigInt(4);function p(e){const t=function(e){const t=(0,r.validateBasic)(e);i.validateObject(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:s,a:a}=t;if(n){if(!s.eql(a,s.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:n}=t,o=t.toBytes||((e,t,r)=>{const s=t.toAffine();return i.concatBytes(Uint8Array.from([4]),n.toBytes(s.x),n.toBytes(s.y))}),c=t.fromBytes||(e=>{const t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function d(e){const{a:r,b:s}=t,i=n.sqr(e),a=n.mul(i,e);return n.add(n.add(a,n.mul(e,r)),s)}if(!n.eql(n.sqr(t.Gy),d(t.Gx)))throw new Error("bad generator point: equation left != right");function h(e){return"bigint"==typeof e&&u<e&&e<t.n}function p(e){if(!h(e))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function m(e){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:o,n:c}=t;if(n&&"bigint"!=typeof e){if(i.isBytes(e)&&(e=i.bytesToHex(e)),"string"!=typeof e||!n.includes(e.length))throw new Error("Invalid key");e=e.padStart(2*r,"0")}let u;try{u="bigint"==typeof e?e:i.bytesToNumberBE((0,a.ensureBytes)("private key",e,r))}catch(t){throw new Error(`private key must be ${r} bytes, hex or bigint, not ${typeof e}`)}return o&&(u=s.mod(u,c)),p(u),u}const g=new Map;function y(e){if(!(e instanceof b))throw new Error("ProjectivePoint expected")}class b{constructor(e,t,r){if(this.px=e,this.py=t,this.pz=r,null==e||!n.isValid(e))throw new Error("x required");if(null==t||!n.isValid(t))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required")}static fromAffine(e){const{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw new Error("invalid affine point");if(e instanceof b)throw new Error("projective point not allowed");const s=e=>n.eql(e,n.ZERO);return s(t)&&s(r)?b.ZERO:new b(t,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(b.fromAffine)}static fromHex(e){const t=b.fromAffine(c((0,a.ensureBytes)("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return b.BASE.multiply(m(e))}_setWindowSize(e){this._WINDOW_SIZE=e,g.delete(this)}assertValidity(){if(this.is0()){if(t.allowInfinityPoint&&!n.is0(this.py))return;throw new Error("bad point: ZERO")}const{x:e,y:r}=this.toAffine();if(!n.isValid(e)||!n.isValid(r))throw new Error("bad point: x or y not FE");const s=n.sqr(r),i=d(e);if(!n.eql(s,i))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){const{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){y(e);const{px:t,py:r,pz:s}=this,{px:i,py:a,pz:o}=e,c=n.eql(n.mul(t,o),n.mul(i,s)),u=n.eql(n.mul(r,o),n.mul(a,s));return c&&u}negate(){return new b(this.px,n.neg(this.py),this.pz)}double(){const{a:e,b:r}=t,s=n.mul(r,f),{px:i,py:a,pz:o}=this;let c=n.ZERO,u=n.ZERO,l=n.ZERO,d=n.mul(i,i),h=n.mul(a,a),p=n.mul(o,o),m=n.mul(i,a);return m=n.add(m,m),l=n.mul(i,o),l=n.add(l,l),c=n.mul(e,l),u=n.mul(s,p),u=n.add(c,u),c=n.sub(h,u),u=n.add(h,u),u=n.mul(c,u),c=n.mul(m,c),l=n.mul(s,l),p=n.mul(e,p),m=n.sub(d,p),m=n.mul(e,m),m=n.add(m,l),l=n.add(d,d),d=n.add(l,d),d=n.add(d,p),d=n.mul(d,m),u=n.add(u,d),p=n.mul(a,o),p=n.add(p,p),d=n.mul(p,m),c=n.sub(c,d),l=n.mul(p,h),l=n.add(l,l),l=n.add(l,l),new b(c,u,l)}add(e){y(e);const{px:r,py:s,pz:i}=this,{px:a,py:o,pz:c}=e;let u=n.ZERO,l=n.ZERO,d=n.ZERO;const h=t.a,p=n.mul(t.b,f);let m=n.mul(r,a),g=n.mul(s,o),w=n.mul(i,c),v=n.add(r,s),S=n.add(a,o);v=n.mul(v,S),S=n.add(m,g),v=n.sub(v,S),S=n.add(r,i);let T=n.add(a,c);return S=n.mul(S,T),T=n.add(m,w),S=n.sub(S,T),T=n.add(s,i),u=n.add(o,c),T=n.mul(T,u),u=n.add(g,w),T=n.sub(T,u),d=n.mul(h,S),u=n.mul(p,w),d=n.add(u,d),u=n.sub(g,d),d=n.add(g,d),l=n.mul(u,d),g=n.add(m,m),g=n.add(g,m),w=n.mul(h,w),S=n.mul(p,S),g=n.add(g,w),w=n.sub(m,w),w=n.mul(h,w),S=n.add(S,w),m=n.mul(g,S),l=n.add(l,m),m=n.mul(T,S),u=n.mul(v,u),u=n.sub(u,m),m=n.mul(v,g),d=n.mul(T,d),d=n.add(d,m),new b(u,l,d)}subtract(e){return this.add(e.negate())}is0(){return this.equals(b.ZERO)}wNAF(e){return v.wNAFCached(this,g,e,(e=>{const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(b.fromAffine)}))}multiplyUnsafe(e){const r=b.ZERO;if(e===u)return r;if(p(e),e===l)return this;const{endo:s}=t;if(!s)return v.unsafeLadder(this,e);let{k1neg:i,k1:a,k2neg:o,k2:c}=s.splitScalar(e),d=r,f=r,h=this;for(;a>u||c>u;)a&l&&(d=d.add(h)),c&l&&(f=f.add(h)),h=h.double(),a>>=l,c>>=l;return i&&(d=d.negate()),o&&(f=f.negate()),f=new b(n.mul(f.px,s.beta),f.py,f.pz),d.add(f)}multiply(e){p(e);let r,s,i=e;const{endo:a}=t;if(a){const{k1neg:e,k1:t,k2neg:o,k2:c}=a.splitScalar(i);let{p:u,f:l}=this.wNAF(t),{p:d,f:f}=this.wNAF(c);u=v.constTimeNegate(e,u),d=v.constTimeNegate(o,d),d=new b(n.mul(d.px,a.beta),d.py,d.pz),r=u.add(d),s=l.add(f)}else{const{p:e,f:t}=this.wNAF(i);r=e,s=t}return b.normalizeZ([r,s])[0]}multiplyAndAddUnsafe(e,t,n){const r=b.BASE,s=(e,t)=>t!==u&&t!==l&&e.equals(r)?e.multiply(t):e.multiplyUnsafe(t),i=s(this,t).add(s(e,n));return i.is0()?undefined:i}toAffine(e){const{px:t,py:r,pz:s}=this,i=this.is0();null==e&&(e=i?n.ONE:n.inv(s));const a=n.mul(t,e),o=n.mul(r,e),c=n.mul(s,e);if(i)return{x:n.ZERO,y:n.ZERO};if(!n.eql(c,n.ONE))throw new Error("invZ was invalid");return{x:a,y:o}}isTorsionFree(){const{h:e,isTorsionFree:n}=t;if(e===l)return!0;if(n)return n(b,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:n}=t;return e===l?this:n?n(b,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return this.assertValidity(),o(b,this,e)}toHex(e=!0){return i.bytesToHex(this.toRawBytes(e))}}b.BASE=new b(t.Gx,t.Gy,n.ONE),b.ZERO=new b(n.ZERO,n.ONE,n.ZERO);const w=t.nBitLength,v=(0,r.wNAF)(b,t.endo?Math.ceil(w/2):w);return{CURVE:t,ProjectivePoint:b,normPrivateKeyToScalar:m,weierstrassEquation:d,isWithinCurveOrder:h}}function m(e,t){const n=e.ORDER;let r=u;for(let e=n-l;e%d===u;e/=d)r+=l;const s=r,i=d<<s-l-l,a=i*d,o=(n-l)/a,c=(o-l)/d,p=a-l,m=i,g=e.pow(t,o),y=e.pow(t,(o+l)/d);let b=(t,n)=>{let r=g,i=e.pow(n,p),a=e.sqr(i);a=e.mul(a,n);let o=e.mul(t,a);o=e.pow(o,c),o=e.mul(o,i),i=e.mul(o,n),a=e.mul(o,t);let u=e.mul(a,i);o=e.pow(u,m);let f=e.eql(o,e.ONE);i=e.mul(a,y),o=e.mul(u,r),a=e.cmov(i,a,f),u=e.cmov(o,u,f);for(let t=s;t>l;t--){let n=t-d;n=d<<n-l;let s=e.pow(u,n);const o=e.eql(s,e.ONE);i=e.mul(a,r),r=e.mul(r,r),s=e.mul(u,r),a=e.cmov(i,a,o),u=e.cmov(s,u,o)}return{isValid:f,value:a}};if(e.ORDER%h===f){const n=(e.ORDER-f)/h,r=e.sqrt(e.neg(t));b=(t,s)=>{let i=e.sqr(s);const a=e.mul(t,s);i=e.mul(i,a);let o=e.pow(i,n);o=e.mul(o,a);const c=e.mul(o,r),u=e.mul(e.sqr(o),s),l=e.eql(u,t);return{isValid:l,value:e.cmov(c,o,l)}}}return b}}}},{package:"viem>@scure/bip32>@noble/curves",file:"node_modules/@scure/bip32/node_modules/@noble/curves/abstract/weierstrass.js"}],[2904,{"./_shortw_utils.js":2898,"./abstract/hash-to-curve.js":2900,"./abstract/modular.js":2901,"./abstract/utils.js":2902,"./abstract/weierstrass.js":2903,"@noble/hashes/sha256":2911,"@noble/hashes/utils":2913},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.encodeToCurve=n.hashToCurve=n.schnorr=n.secp256k1=void 0;
/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */
const r=e("@noble/hashes/sha256"),s=e("@noble/hashes/utils"),i=e("./_shortw_utils.js"),a=e("./abstract/hash-to-curve.js"),o=e("./abstract/modular.js"),c=e("./abstract/utils.js"),u=e("./abstract/weierstrass.js"),l=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),d=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),f=BigInt(1),h=BigInt(2),p=(e,t)=>(e+t/h)/t;function m(e){const t=l,n=BigInt(3),r=BigInt(6),s=BigInt(11),i=BigInt(22),a=BigInt(23),c=BigInt(44),u=BigInt(88),d=e*e*e%t,f=d*d*e%t,p=(0,o.pow2)(f,n,t)*f%t,m=(0,o.pow2)(p,n,t)*f%t,y=(0,o.pow2)(m,h,t)*d%t,b=(0,o.pow2)(y,s,t)*y%t,w=(0,o.pow2)(b,i,t)*b%t,v=(0,o.pow2)(w,c,t)*w%t,S=(0,o.pow2)(v,u,t)*v%t,T=(0,o.pow2)(S,c,t)*w%t,E=(0,o.pow2)(T,n,t)*f%t,j=(0,o.pow2)(E,a,t)*b%t,k=(0,o.pow2)(j,r,t)*d%t,x=(0,o.pow2)(k,h,t);if(!g.eql(g.sqr(x),e))throw new Error("Cannot find square root");return x}const g=(0,o.Field)(l,undefined,undefined,{sqrt:m});n.secp256k1=(0,i.createCurve)({a:BigInt(0),b:BigInt(7),Fp:g,n:d,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=d,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-f*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,a=BigInt("0x100000000000000000000000000000000"),c=p(i*e,t),u=p(-r*e,t);let l=(0,o.mod)(e-c*n-u*s,t),h=(0,o.mod)(-c*r-u*i,t);const m=l>a,g=h>a;if(m&&(l=t-l),g&&(h=t-h),l>a||h>a)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:m,k1:l,k2neg:g,k2:h}}}},r.sha256);const y=BigInt(0),b=e=>"bigint"==typeof e&&y<e&&e<l,w=e=>"bigint"==typeof e&&y<e&&e<d,v={};function S(e,...t){let n=v[e];if(n===undefined){const t=(0,r.sha256)(Uint8Array.from(e,(e=>e.charCodeAt(0))));n=(0,c.concatBytes)(t,t),v[e]=n}return(0,r.sha256)((0,c.concatBytes)(n,...t))}const T=e=>e.toRawBytes(!0).slice(1),E=e=>(0,c.numberToBytesBE)(e,32),j=e=>(0,o.mod)(e,l),k=e=>(0,o.mod)(e,d),x=n.secp256k1.ProjectivePoint,_=(e,t,n)=>x.BASE.multiplyAndAddUnsafe(e,t,n);function I(e){let t=n.secp256k1.utils.normPrivateKeyToScalar(e),r=x.fromPrivateKey(t);return{scalar:r.hasEvenY()?t:k(-t),bytes:T(r)}}function P(e){if(!b(e))throw new Error("bad x: need 0 < x < p");const t=j(e*e);let n=m(j(t*e+BigInt(7)));n%h!==y&&(n=j(-n));const r=new x(e,n,f);return r.assertValidity(),r}function A(...e){return k((0,c.bytesToNumberBE)(S("BIP0340/challenge",...e)))}function C(e){return I(e).bytes}function O(e,t,n=(0,s.randomBytes)(32)){const r=(0,c.ensureBytes)("message",e),{bytes:i,scalar:a}=I(t),o=(0,c.ensureBytes)("auxRand",n,32),u=E(a^(0,c.bytesToNumberBE)(S("BIP0340/aux",o))),l=S("BIP0340/nonce",u,i,r),d=k((0,c.bytesToNumberBE)(l));if(d===y)throw new Error("sign failed: k is zero");const{bytes:f,scalar:h}=I(d),p=A(f,i,r),m=new Uint8Array(64);if(m.set(f,0),m.set(E(k(h+p*a)),32),!B(m,r,i))throw new Error("sign: Invalid signature produced");return m}function B(e,t,n){const r=(0,c.ensureBytes)("signature",e,64),s=(0,c.ensureBytes)("message",t),i=(0,c.ensureBytes)("publicKey",n,32);try{const e=P((0,c.bytesToNumberBE)(i)),t=(0,c.bytesToNumberBE)(r.subarray(0,32));if(!b(t))return!1;const n=(0,c.bytesToNumberBE)(r.subarray(32,64));if(!w(n))return!1;const a=A(E(t),T(e),s),o=_(e,n,k(-a));return!(!o||!o.hasEvenY()||o.toAffine().x!==t)}catch(e){return!1}}n.schnorr={getPublicKey:C,sign:O,verify:B,utils:{randomPrivateKey:n.secp256k1.utils.randomPrivateKey,lift_x:P,pointToBytes:T,numberToBytesBE:c.numberToBytesBE,bytesToNumberBE:c.bytesToNumberBE,taggedHash:S,mod:o.mod}};const R=(()=>(0,a.isogenyMap)(g,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map((e=>e.map((e=>BigInt(e)))))))(),N=(()=>(0,u.mapToCurveSimpleSWU)(g,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:g.create(BigInt("-11"))}))(),F=(()=>(0,a.createHasher)(n.secp256k1.ProjectivePoint,(e=>{const{x:t,y:n}=N(g.create(e[0]));return R(t,n)}),{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:g.ORDER,m:1,k:128,expand:"xmd",hash:r.sha256}))();n.hashToCurve=F.hashToCurve,n.encodeToCurve=F.encodeToCurve}}},{package:"viem>@scure/bip32>@noble/curves",file:"node_modules/@scure/bip32/node_modules/@noble/curves/secp256k1.js"}],[2905,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){function r(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}function s(e){if("boolean"!=typeof e)throw new Error(`boolean expected, not ${e}`)}function i(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name}function a(e,...t){if(!i(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function o(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");r(e.outputLen),r(e.blockLen)}function c(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function u(e,t){a(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}Object.defineProperty(n,"__esModule",{value:!0}),n.output=n.exists=n.hash=n.bytes=n.bool=n.number=n.isBytes=void 0,n.number=r,n.bool=s,n.isBytes=i,n.bytes=a,n.hash=o,n.exists=c,n.output=u;const l={number:r,bool:s,bytes:a,hash:o,exists:c,output:u};n.default=l}}},{package:"viem>@scure/bip32>@noble/hashes",file:"node_modules/@scure/bip32/node_modules/@noble/hashes/_assert.js"}],[2906,{"./_assert.js":2905,"./utils.js":2913},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.HashMD=n.Maj=n.Chi=void 0;const r=e("./_assert.js"),s=e("./utils.js");n.Chi=(e,t,n)=>e&t^~e&n;n.Maj=(e,t,n)=>e&t^e&n^t&n;class i extends s.Hash{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,s.createView)(this.buffer)}update(e){(0,r.exists)(this);const{view:t,buffer:n,blockLen:i}=this,a=(e=(0,s.toBytes)(e)).length;for(let r=0;r<a;){const o=Math.min(i-this.pos,a-r);if(o!==i)n.set(e.subarray(r,r+o),this.pos),this.pos+=o,r+=o,this.pos===i&&(this.process(t,0),this.pos=0);else{const t=(0,s.createView)(e);for(;i<=a-r;r+=i)this.process(t,r)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,r.exists)(this),(0,r.output)(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:i,isLE:a}=this;let{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let e=o;e<i;e++)t[e]=0;!function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const s=BigInt(32),i=BigInt(4294967295),a=Number(n>>s&i),o=Number(n&i),c=r?4:0,u=r?0:4;e.setUint32(t+c,a,r),e.setUint32(t+u,o,r)}(n,i-8,BigInt(8*this.length),a),this.process(n,0);const c=(0,s.createView)(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=u/4,d=this.get();if(l>d.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)c.setUint32(4*e,d[e],a)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:s,destroyed:i,pos:a}=this;return e.length=r,e.pos=a,e.finished=s,e.destroyed=i,r%t&&e.buffer.set(n),e}}n.HashMD=i}}},{package:"viem>@scure/bip32>@noble/hashes",file:"node_modules/@scure/bip32/node_modules/@noble/hashes/_md.js"}],[2907,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.add5L=n.add5H=n.add4H=n.add4L=n.add3H=n.add3L=n.add=n.rotlBL=n.rotlBH=n.rotlSL=n.rotlSH=n.rotr32L=n.rotr32H=n.rotrBL=n.rotrBH=n.rotrSL=n.rotrSH=n.shrSL=n.shrSH=n.toBig=n.split=n.fromBig=void 0;const r=BigInt(2**32-1),s=BigInt(32);function i(e,t=!1){return t?{h:Number(e&r),l:Number(e>>s&r)}:{h:0|Number(e>>s&r),l:0|Number(e&r)}}function a(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let s=0;s<e.length;s++){const{h:a,l:o}=i(e[s],t);[n[s],r[s]]=[a,o]}return[n,r]}n.fromBig=i,n.split=a;const o=(e,t)=>BigInt(e>>>0)<<s|BigInt(t>>>0);n.toBig=o;const c=(e,t,n)=>e>>>n;n.shrSH=c;const u=(e,t,n)=>e<<32-n|t>>>n;n.shrSL=u;const l=(e,t,n)=>e>>>n|t<<32-n;n.rotrSH=l;const d=(e,t,n)=>e<<32-n|t>>>n;n.rotrSL=d;const f=(e,t,n)=>e<<64-n|t>>>n-32;n.rotrBH=f;const h=(e,t,n)=>e>>>n-32|t<<64-n;n.rotrBL=h;const p=(e,t)=>t;n.rotr32H=p;const m=(e,t)=>e;n.rotr32L=m;const g=(e,t,n)=>e<<n|t>>>32-n;n.rotlSH=g;const y=(e,t,n)=>t<<n|e>>>32-n;n.rotlSL=y;const b=(e,t,n)=>t<<n-32|e>>>64-n;n.rotlBH=b;const w=(e,t,n)=>e<<n-32|t>>>64-n;function v(e,t,n,r){const s=(t>>>0)+(r>>>0);return{h:e+n+(s/2**32|0)|0,l:0|s}}n.rotlBL=w,n.add=v;const S=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0);n.add3L=S;const T=(e,t,n,r)=>t+n+r+(e/2**32|0)|0;n.add3H=T;const E=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0);n.add4L=E;const j=(e,t,n,r,s)=>t+n+r+s+(e/2**32|0)|0;n.add4H=j;const k=(e,t,n,r,s)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(s>>>0);n.add5L=k;const x=(e,t,n,r,s,i)=>t+n+r+s+i+(e/2**32|0)|0;n.add5H=x;const _={fromBig:i,split:a,toBig:o,shrSH:c,shrSL:u,rotrSH:l,rotrSL:d,rotrBH:f,rotrBL:h,rotr32H:p,rotr32L:m,rotlSH:g,rotlSL:y,rotlBH:b,rotlBL:w,add:v,add3L:S,add3H:T,add4L:E,add4H:j,add5H:x,add5L:k};n.default=_}}},{package:"viem>@scure/bip32>@noble/hashes",file:"node_modules/@scure/bip32/node_modules/@noble/hashes/_u64.js"}],[2908,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.crypto=void 0,n.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:undefined}}},{package:"viem>@scure/bip32>@noble/hashes",file:"node_modules/@scure/bip32/node_modules/@noble/hashes/crypto.js"}],[2909,{"./_assert.js":2905,"./utils.js":2913},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.hmac=n.HMAC=void 0;const r=e("./_assert.js"),s=e("./utils.js");class i extends s.Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,r.hash)(e);const n=(0,s.toBytes)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,a=new Uint8Array(i);a.set(n.length>i?e.create().update(n).digest():n);for(let e=0;e<a.length;e++)a[e]^=54;this.iHash.update(a),this.oHash=e.create();for(let e=0;e<a.length;e++)a[e]^=106;this.oHash.update(a),a.fill(0)}update(e){return(0,r.exists)(this),this.iHash.update(e),this}digestInto(e){(0,r.exists)(this),(0,r.bytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:s,blockLen:i,outputLen:a}=this;return e.finished=r,e.destroyed=s,e.blockLen=i,e.outputLen=a,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}n.HMAC=i;n.hmac=(e,t,n)=>new i(e,t).update(n).digest(),n.hmac.create=(e,t)=>new i(e,t)}}},{package:"viem>@scure/bip32>@noble/hashes",file:"node_modules/@scure/bip32/node_modules/@noble/hashes/hmac.js"}],[2910,{"./_md.js":2906,"./utils.js":2913},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.ripemd160=n.RIPEMD160=void 0;const r=e("./_md.js"),s=e("./utils.js"),i=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),a=new Uint8Array(new Array(16).fill(0).map(((e,t)=>t)));let o=[a],c=[a.map((e=>(9*e+5)%16))];for(let e=0;e<4;e++)for(let t of[o,c])t.push(t[e].map((e=>i[e])));const u=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((e=>new Uint8Array(e))),l=o.map(((e,t)=>e.map((e=>u[t][e])))),d=c.map(((e,t)=>e.map((e=>u[t][e])))),f=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),h=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]);function p(e,t,n,r){return 0===e?t^n^r:1===e?t&n|~t&r:2===e?(t|~n)^r:3===e?t&r|n&~r:t^(n|~r)}const m=new Uint32Array(16);class g extends r.HashMD{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:t,h2:n,h3:r,h4:s}=this;return[e,t,n,r,s]}set(e,t,n,r,s){this.h0=0|e,this.h1=0|t,this.h2=0|n,this.h3=0|r,this.h4=0|s}process(e,t){for(let n=0;n<16;n++,t+=4)m[n]=e.getUint32(t,!0);let n=0|this.h0,r=n,i=0|this.h1,a=i,u=0|this.h2,g=u,y=0|this.h3,b=y,w=0|this.h4,v=w;for(let e=0;e<5;e++){const t=4-e,S=f[e],T=h[e],E=o[e],j=c[e],k=l[e],x=d[e];for(let t=0;t<16;t++){const r=(0,s.rotl)(n+p(e,i,u,y)+m[E[t]]+S,k[t])+w|0;n=w,w=y,y=0|(0,s.rotl)(u,10),u=i,i=r}for(let e=0;e<16;e++){const n=(0,s.rotl)(r+p(t,a,g,b)+m[j[e]]+T,x[e])+v|0;r=v,v=b,b=0|(0,s.rotl)(g,10),g=a,a=n}}this.set(this.h1+u+b|0,this.h2+y+v|0,this.h3+w+r|0,this.h4+n+a|0,this.h0+i+g|0)}roundClean(){m.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}n.RIPEMD160=g,n.ripemd160=(0,s.wrapConstructor)((()=>new g))}}},{package:"viem>@scure/bip32>@noble/hashes",file:"node_modules/@scure/bip32/node_modules/@noble/hashes/ripemd160.js"}],[2911,{"./_md.js":2906,"./utils.js":2913},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.sha224=n.sha256=void 0;const r=e("./_md.js"),s=e("./utils.js"),i=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),a=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),o=new Uint32Array(64);class c extends r.HashMD{constructor(){super(64,32,8,!1),this.A=0|a[0],this.B=0|a[1],this.C=0|a[2],this.D=0|a[3],this.E=0|a[4],this.F=0|a[5],this.G=0|a[6],this.H=0|a[7]}get(){const{A:e,B:t,C:n,D:r,E:s,F:i,G:a,H:o}=this;return[e,t,n,r,s,i,a,o]}set(e,t,n,r,s,i,a,o){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|s,this.F=0|i,this.G=0|a,this.H=0|o}process(e,t){for(let n=0;n<16;n++,t+=4)o[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=o[e-15],n=o[e-2],r=(0,s.rotr)(t,7)^(0,s.rotr)(t,18)^t>>>3,i=(0,s.rotr)(n,17)^(0,s.rotr)(n,19)^n>>>10;o[e]=i+o[e-7]+r+o[e-16]|0}let{A:n,B:a,C:c,D:u,E:l,F:d,G:f,H:h}=this;for(let e=0;e<64;e++){const t=h+((0,s.rotr)(l,6)^(0,s.rotr)(l,11)^(0,s.rotr)(l,25))+(0,r.Chi)(l,d,f)+i[e]+o[e]|0,p=((0,s.rotr)(n,2)^(0,s.rotr)(n,13)^(0,s.rotr)(n,22))+(0,r.Maj)(n,a,c)|0;h=f,f=d,d=l,l=u+t|0,u=c,c=a,a=n,n=t+p|0}n=n+this.A|0,a=a+this.B|0,c=c+this.C|0,u=u+this.D|0,l=l+this.E|0,d=d+this.F|0,f=f+this.G|0,h=h+this.H|0,this.set(n,a,c,u,l,d,f,h)}roundClean(){o.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}class u extends c{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}n.sha256=(0,s.wrapConstructor)((()=>new c)),n.sha224=(0,s.wrapConstructor)((()=>new u))}}},{package:"viem>@scure/bip32>@noble/hashes",file:"node_modules/@scure/bip32/node_modules/@noble/hashes/sha256.js"}],[2912,{"./_md.js":2906,"./_u64.js":2907,"./utils.js":2913},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.sha384=n.sha512_256=n.sha512_224=n.sha512=n.SHA512=void 0;const r=e("./_md.js"),s=e("./_u64.js"),i=e("./utils.js"),[a,o]=(()=>s.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),c=new Uint32Array(80),u=new Uint32Array(80);class l extends r.HashMD{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:r,Ch:s,Cl:i,Dh:a,Dl:o,Eh:c,El:u,Fh:l,Fl:d,Gh:f,Gl:h,Hh:p,Hl:m}=this;return[e,t,n,r,s,i,a,o,c,u,l,d,f,h,p,m]}set(e,t,n,r,s,i,a,o,c,u,l,d,f,h,p,m){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|s,this.Cl=0|i,this.Dh=0|a,this.Dl=0|o,this.Eh=0|c,this.El=0|u,this.Fh=0|l,this.Fl=0|d,this.Gh=0|f,this.Gl=0|h,this.Hh=0|p,this.Hl=0|m}process(e,t){for(let n=0;n<16;n++,t+=4)c[n]=e.getUint32(t),u[n]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|c[e-15],n=0|u[e-15],r=s.default.rotrSH(t,n,1)^s.default.rotrSH(t,n,8)^s.default.shrSH(t,n,7),i=s.default.rotrSL(t,n,1)^s.default.rotrSL(t,n,8)^s.default.shrSL(t,n,7),a=0|c[e-2],o=0|u[e-2],l=s.default.rotrSH(a,o,19)^s.default.rotrBH(a,o,61)^s.default.shrSH(a,o,6),d=s.default.rotrSL(a,o,19)^s.default.rotrBL(a,o,61)^s.default.shrSL(a,o,6),f=s.default.add4L(i,d,u[e-7],u[e-16]),h=s.default.add4H(f,r,l,c[e-7],c[e-16]);c[e]=0|h,u[e]=0|f}let{Ah:n,Al:r,Bh:i,Bl:l,Ch:d,Cl:f,Dh:h,Dl:p,Eh:m,El:g,Fh:y,Fl:b,Gh:w,Gl:v,Hh:S,Hl:T}=this;for(let e=0;e<80;e++){const t=s.default.rotrSH(m,g,14)^s.default.rotrSH(m,g,18)^s.default.rotrBH(m,g,41),E=s.default.rotrSL(m,g,14)^s.default.rotrSL(m,g,18)^s.default.rotrBL(m,g,41),j=m&y^~m&w,k=g&b^~g&v,x=s.default.add5L(T,E,k,o[e],u[e]),_=s.default.add5H(x,S,t,j,a[e],c[e]),I=0|x,P=s.default.rotrSH(n,r,28)^s.default.rotrBH(n,r,34)^s.default.rotrBH(n,r,39),A=s.default.rotrSL(n,r,28)^s.default.rotrBL(n,r,34)^s.default.rotrBL(n,r,39),C=n&i^n&d^i&d,O=r&l^r&f^l&f;S=0|w,T=0|v,w=0|y,v=0|b,y=0|m,b=0|g,({h:m,l:g}=s.default.add(0|h,0|p,0|_,0|I)),h=0|d,p=0|f,d=0|i,f=0|l,i=0|n,l=0|r;const B=s.default.add3L(I,A,O);n=s.default.add3H(B,_,P,C),r=0|B}({h:n,l:r}=s.default.add(0|this.Ah,0|this.Al,0|n,0|r)),({h:i,l:l}=s.default.add(0|this.Bh,0|this.Bl,0|i,0|l)),({h:d,l:f}=s.default.add(0|this.Ch,0|this.Cl,0|d,0|f)),({h:h,l:p}=s.default.add(0|this.Dh,0|this.Dl,0|h,0|p)),({h:m,l:g}=s.default.add(0|this.Eh,0|this.El,0|m,0|g)),({h:y,l:b}=s.default.add(0|this.Fh,0|this.Fl,0|y,0|b)),({h:w,l:v}=s.default.add(0|this.Gh,0|this.Gl,0|w,0|v)),({h:S,l:T}=s.default.add(0|this.Hh,0|this.Hl,0|S,0|T)),this.set(n,r,i,l,d,f,h,p,m,g,y,b,w,v,S,T)}roundClean(){c.fill(0),u.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}n.SHA512=l;class d extends l{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}class f extends l{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}class h extends l{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}n.sha512=(0,i.wrapConstructor)((()=>new l)),n.sha512_224=(0,i.wrapConstructor)((()=>new d)),n.sha512_256=(0,i.wrapConstructor)((()=>new f)),n.sha384=(0,i.wrapConstructor)((()=>new h))}}},{package:"viem>@scure/bip32>@noble/hashes",file:"node_modules/@scure/bip32/node_modules/@noble/hashes/sha512.js"}],[2913,{"./_assert.js":2905,"@noble/hashes/crypto":2908},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){
/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */
Object.defineProperty(n,"__esModule",{value:!0}),n.randomBytes=n.wrapXOFConstructorWithOpts=n.wrapConstructorWithOpts=n.wrapConstructor=n.checkOpts=n.Hash=n.concatBytes=n.toBytes=n.utf8ToBytes=n.asyncLoop=n.nextTick=n.hexToBytes=n.bytesToHex=n.byteSwap32=n.byteSwapIfBE=n.byteSwap=n.isLE=n.rotl=n.rotr=n.createView=n.u32=n.u8=n.isBytes=void 0;const r=e("@noble/hashes/crypto"),s=e("./_assert.js");n.isBytes=function(e){return e instanceof Uint8Array||null!=e&&"object"==typeof e&&"Uint8Array"===e.constructor.name};n.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength);n.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4));n.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);n.rotr=(e,t)=>e<<32-t|e>>>t;n.rotl=(e,t)=>e<<t|e>>>32-t>>>0,n.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0];n.byteSwap=e=>e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255,n.byteSwapIfBE=n.isLE?e=>e:e=>(0,n.byteSwap)(e),n.byteSwap32=function(e){for(let t=0;t<e.length;t++)e[t]=(0,n.byteSwap)(e[t])};const i=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));n.bytesToHex=function(e){(0,s.bytes)(e);let t="";for(let n=0;n<e.length;n++)t+=i[e[n]];return t};const a={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function o(e){return e>=a._0&&e<=a._9?e-a._0:e>=a._A&&e<=a._F?e-(a._A-10):e>=a._a&&e<=a._f?e-(a._a-10):void 0}n.hexToBytes=function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("padded hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let t=0,s=0;t<n;t++,s+=2){const n=o(e.charCodeAt(s)),i=o(e.charCodeAt(s+1));if(n===undefined||i===undefined){const t=e[s]+e[s+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+s)}r[t]=16*n+i}return r};function c(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function u(e){return"string"==typeof e&&(e=c(e)),(0,s.bytes)(e),e}n.nextTick=async()=>{},n.asyncLoop=async function(e,t,r){let s=Date.now();for(let i=0;i<e;i++){r(i);const e=Date.now()-s;e>=0&&e<t||(await(0,n.nextTick)(),s+=e)}},n.utf8ToBytes=c,n.toBytes=u,n.concatBytes=function(...e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];(0,s.bytes)(r),t+=r.length}const n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const s=e[t];n.set(s,r),r+=s.length}return n};n.Hash=class{clone(){return this._cloneInto()}};const l={}.toString;n.checkOpts=function(e,t){if(t!==undefined&&"[object Object]"!==l.call(t))throw new Error("Options should be object or undefined");return Object.assign(e,t)},n.wrapConstructor=function(e){const t=t=>e().update(u(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t},n.wrapConstructorWithOpts=function(e){const t=(t,n)=>e(n).update(u(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},n.wrapXOFConstructorWithOpts=function(e){const t=(t,n)=>e(n).update(u(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},n.randomBytes=function(e=32){if(r.crypto&&"function"==typeof r.crypto.getRandomValues)return r.crypto.getRandomValues(new Uint8Array(e));throw new Error("crypto.getRandomValues must be defined")}}}},{package:"viem>@scure/bip32>@noble/hashes",file:"node_modules/@scure/bip32/node_modules/@noble/hashes/utils.js"}],[2915,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;n.DEBUG_BUILD=r}}},{package:"@sentry/browser>@sentry-internal/browser-utils",file:"node_modules/@sentry-internal/browser-utils/build/cjs/debug-build.js"}],[2916,{"./debug-build.js":2915,"./types.js":2943,"@sentry/utils":3073},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("@sentry/utils"),s=e("./debug-build.js"),i=e("./types.js"),a={};function o(e){const t=a[e];if(t)return t;let n=i.WINDOW[e];if(r.isNativeFunction(n))return a[e]=n.bind(i.WINDOW);const o=i.WINDOW.document;if(o&&"function"==typeof o.createElement)try{const t=o.createElement("iframe");t.hidden=!0,o.head.appendChild(t);const r=t.contentWindow;r&&r[e]&&(n=r[e]),o.head.removeChild(t)}catch(t){s.DEBUG_BUILD&&r.logger.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,t)}return n?a[e]=n.bind(i.WINDOW):n}n.clearCachedImplementation=function(e){a[e]=undefined},n.fetch=function(...e){return o("fetch")(...e)},n.getNativeImplementation=o,n.setTimeout=function(...e){return o("setTimeout")(...e)}}}},{package:"@sentry/browser>@sentry-internal/browser-utils",file:"node_modules/@sentry-internal/browser-utils/build/cjs/getNativeImplementation.js"}],[2917,{"./getNativeImplementation.js":2916,"./instrument/dom.js":2918,"./instrument/history.js":2919,"./instrument/xhr.js":2920,"./metrics/browserMetrics.js":2921,"./metrics/inp.js":2923,"./metrics/instrument.js":2924},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("./metrics/instrument.js"),s=e("./metrics/browserMetrics.js"),i=e("./instrument/dom.js"),a=e("./instrument/history.js"),o=e("./getNativeImplementation.js"),c=e("./instrument/xhr.js"),u=e("./metrics/inp.js");n.addClsInstrumentationHandler=r.addClsInstrumentationHandler,n.addFidInstrumentationHandler=r.addFidInstrumentationHandler,n.addInpInstrumentationHandler=r.addInpInstrumentationHandler,n.addLcpInstrumentationHandler=r.addLcpInstrumentationHandler,n.addPerformanceInstrumentationHandler=r.addPerformanceInstrumentationHandler,n.addTtfbInstrumentationHandler=r.addTtfbInstrumentationHandler,n.addPerformanceEntries=s.addPerformanceEntries,n.startTrackingInteractions=s.startTrackingInteractions,n.startTrackingLongAnimationFrames=s.startTrackingLongAnimationFrames,n.startTrackingLongTasks=s.startTrackingLongTasks,n.startTrackingWebVitals=s.startTrackingWebVitals,n.addClickKeypressInstrumentationHandler=i.addClickKeypressInstrumentationHandler,n.addHistoryInstrumentationHandler=a.addHistoryInstrumentationHandler,n.clearCachedImplementation=o.clearCachedImplementation,n.fetch=o.fetch,n.getNativeImplementation=o.getNativeImplementation,n.setTimeout=o.setTimeout,n.SENTRY_XHR_DATA_KEY=c.SENTRY_XHR_DATA_KEY,n.addXhrInstrumentationHandler=c.addXhrInstrumentationHandler,n.registerInpInteractionListener=u.registerInpInteractionListener,n.startTrackingINP=u.startTrackingINP}}},{package:"@sentry/browser>@sentry-internal/browser-utils",file:"node_modules/@sentry-internal/browser-utils/build/cjs/index.js"}],[2918,{"../types.js":2943,"@sentry/utils":3073},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("@sentry/utils"),s=e("../types.js"),i=1e3;let a,o,c;function u(){if(!s.WINDOW.document)return;const e=r.triggerHandlers.bind(null,"dom"),t=l(e,!0);s.WINDOW.document.addEventListener("click",t,!1),s.WINDOW.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((t=>{const n=s.WINDOW[t]&&s.WINDOW[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(r.fill(n,"addEventListener",(function(t){return function(n,r,s){if("click"===n||"keypress"==n)try{const r=this,i=r.__sentry_instrumentation_handlers__=r.__sentry_instrumentation_handlers__||{},a=i[n]=i[n]||{refCount:0};if(!a.handler){const r=l(e);a.handler=r,t.call(this,n,r,s)}a.refCount++}catch(e){}return t.call(this,n,r,s)}})),r.fill(n,"removeEventListener",(function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{const n=this,s=n.__sentry_instrumentation_handlers__||{},i=s[t];i&&(i.refCount--,i.refCount<=0&&(e.call(this,t,i.handler,r),i.handler=undefined,delete s[t]),0===Object.keys(s).length&&delete n.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,r)}})))}))}function l(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const u=function(e){try{return e.target}catch(e){return null}}(n);if(function(e,t){return"keypress"===e&&(!t||!t.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(n.type,u))return;r.addNonEnumerableProperty(n,"_sentryCaptured",!0),u&&!u._sentryId&&r.addNonEnumerableProperty(u,"_sentryId",r.uuid4());const l="keypress"===n.type?"input":n.type;if(!function(e){if(e.type!==o)return!1;try{if(!e.target||e.target._sentryId!==c)return!1}catch(e){}return!0}(n)){e({event:n,name:l,global:t}),o=n.type,c=u?u._sentryId:undefined}clearTimeout(a),a=s.WINDOW.setTimeout((()=>{c=undefined,o=undefined}),i)}}n.addClickKeypressInstrumentationHandler=function(e){r.addHandler("dom",e),r.maybeInstrument("dom",u)},n.instrumentDOM=u}}},{package:"@sentry/browser>@sentry-internal/browser-utils",file:"node_modules/@sentry-internal/browser-utils/build/cjs/instrument/dom.js"}],[2919,{"../types.js":2943,"@sentry/utils":3073},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("@sentry/utils"),s=e("../types.js");let i;function a(){if(!r.supportsHistory())return;const e=s.WINDOW.onpopstate;function t(e){return function(...t){const n=t.length>2?t[2]:undefined;if(n){const e=i,t=String(n);i=t;const s={from:e,to:t};r.triggerHandlers("history",s)}return e.apply(this,t)}}s.WINDOW.onpopstate=function(...t){const n=s.WINDOW.location.href,a=i;i=n;const o={from:a,to:n};if(r.triggerHandlers("history",o),e)try{return e.apply(this,t)}catch(e){}},r.fill(s.WINDOW.history,"pushState",t),r.fill(s.WINDOW.history,"replaceState",t)}n.addHistoryInstrumentationHandler=function(e){const t="history";r.addHandler(t,e),r.maybeInstrument(t,a)}}}},{package:"@sentry/browser>@sentry-internal/browser-utils",file:"node_modules/@sentry-internal/browser-utils/build/cjs/instrument/history.js"}],[2920,{"../types.js":2943,"@sentry/utils":3073},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("@sentry/utils"),s=e("../types.js"),i="__sentry_xhr_v3__";function a(){if(!s.WINDOW.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(e,t,n){const s=1e3*r.timestampInSeconds(),a=r.isString(n[0])?n[0].toUpperCase():undefined,o=function(e){if(r.isString(e))return e;try{return e.toString()}catch(e){}return undefined}(n[1]);if(!a||!o)return e.apply(t,n);t[i]={method:a,url:o,request_headers:{}},"POST"===a&&o.match(/sentry_key/)&&(t.__sentry_own_request__=!0);const c=()=>{const e=t[i];if(e&&4===t.readyState){try{e.status_code=t.status}catch(e){}const n={endTimestamp:1e3*r.timestampInSeconds(),startTimestamp:s,xhr:t};r.triggerHandlers("xhr",n)}};return"onreadystatechange"in t&&"function"==typeof t.onreadystatechange?t.onreadystatechange=new Proxy(t.onreadystatechange,{apply:(e,t,n)=>(c(),e.apply(t,n))}):t.addEventListener("readystatechange",c),t.setRequestHeader=new Proxy(t.setRequestHeader,{apply(e,t,n){const[s,a]=n,o=t[i];return o&&r.isString(s)&&r.isString(a)&&(o.request_headers[s.toLowerCase()]=a),e.apply(t,n)}}),e.apply(t,n)}}),e.send=new Proxy(e.send,{apply(e,t,n){const s=t[i];if(!s)return e.apply(t,n);n[0]!==undefined&&(s.body=n[0]);const a={startTimestamp:1e3*r.timestampInSeconds(),xhr:t};return r.triggerHandlers("xhr",a),e.apply(t,n)}})}n.SENTRY_XHR_DATA_KEY=i,n.addXhrInstrumentationHandler=function(e){r.addHandler("xhr",e),r.maybeInstrument("xhr",a)},n.instrumentXHR=a}}},{package:"@sentry/browser>@sentry-internal/browser-utils",file:"node_modules/@sentry-internal/browser-utils/build/cjs/instrument/xhr.js"}],[2921,{"../debug-build.js":2915,"../types.js":2943,"./cls.js":2922,"./instrument.js":2924,"./utils.js":2925,"./web-vitals/lib/getActivationStart.js":2932,"./web-vitals/lib/getNavigationEntry.js":2933,"./web-vitals/lib/getVisibilityWatcher.js":2934,"@sentry/core":2992,"@sentry/utils":3073},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("@sentry/core"),s=e("@sentry/utils"),i=e("../debug-build.js"),a=e("../types.js"),o=e("./cls.js"),c=e("./instrument.js"),u=e("./utils.js"),l=e("./web-vitals/lib/getActivationStart.js"),d=e("./web-vitals/lib/getNavigationEntry.js"),f=e("./web-vitals/lib/getVisibilityWatcher.js"),h=2147483647;let p,m,g=0,y={};function b(e,t,n,s,i){const a=d.getNavigationEntry(),o=u.msToSec(a?a.requestStart:0),c=i+Math.max(n,o),l=i+n,f=l+s,h={[r.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.resource.browser.metrics"};return c!==l&&(h["sentry.browser.measure_happened_before_request"]=!0,h["sentry.browser.measure_start_time"]=c),u.startAndEndSpan(e,c,f,{name:t.name,op:t.entryType,attributes:h}),c}function w(e,t,n,s,i,a){const o=a?t[a]:t[`${n}End`],c=t[`${n}Start`];c&&o&&u.startAndEndSpan(e,s+u.msToSec(c),s+u.msToSec(o),{op:`browser.${i||n}`,name:t.name,attributes:{[r.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}})}function v(e,t,n,i,o,c){if("xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType)return;const l=s.parseUrl(n),d={[r.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.resource.browser.metrics"};S(d,t,"transferSize","http.response_transfer_size"),S(d,t,"encodedBodySize","http.response_content_length"),S(d,t,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in t&&(d["resource.render_blocking_status"]=t.renderBlockingStatus),l.protocol&&(d["url.scheme"]=l.protocol.split(":").pop()),l.host&&(d["server.address"]=l.host),d["url.same_origin"]=n.includes(a.WINDOW.location.origin);const f=c+i,h=f+o;u.startAndEndSpan(e,f,h,{name:n.replace(a.WINDOW.location.origin,""),op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",attributes:d})}function S(e,t,n,r){const s=t[n];null!=s&&s<h&&(e[r]=s)}n._addMeasureSpans=b,n._addResourceSpans=v,n.addPerformanceEntries=function(e,t){const n=u.getBrowserPerformanceAPI();if(!n||!a.WINDOW.performance.getEntries||!s.browserPerformanceTimeOrigin)return;i.DEBUG_BUILD&&s.logger.log("[Tracing] Adding & adjusting spans using Performance API");const o=u.msToSec(s.browserPerformanceTimeOrigin),c=n.getEntries(),{op:h,start_timestamp:S}=r.spanToJSON(e);if(c.slice(g).forEach((t=>{const n=u.msToSec(t.startTime),a=u.msToSec(Math.max(0,t.duration));if(!("navigation"===h&&S&&o+n<S))switch(t.entryType){case"navigation":!function(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach((r=>{w(e,t,r,n)})),w(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),w(e,t,"fetch",n,"cache","domainLookupStart"),w(e,t,"domainLookup",n,"DNS"),function(e,t,n){const s=n+u.msToSec(t.requestStart),i=n+u.msToSec(t.responseEnd),a=n+u.msToSec(t.responseStart);t.responseEnd&&(u.startAndEndSpan(e,s,i,{op:"browser.request",name:t.name,attributes:{[r.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}}),u.startAndEndSpan(e,a,i,{op:"browser.response",name:t.name,attributes:{[r.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}}))}(e,t,n)}(e,t,o);break;case"mark":case"paint":case"measure":{b(e,t,n,a,o);const r=f.getVisibilityWatcher(),c=t.startTime<r.firstHiddenTime;"first-paint"===t.name&&c&&(i.DEBUG_BUILD&&s.logger.log("[Measurements] Adding FP"),y.fp={value:t.startTime,unit:"millisecond"}),"first-contentful-paint"===t.name&&c&&(i.DEBUG_BUILD&&s.logger.log("[Measurements] Adding FCP"),y.fcp={value:t.startTime,unit:"millisecond"});break}case"resource":v(e,t,t.name,n,a,o)}})),g=Math.max(c.length-1,0),function(e){const t=a.WINDOW.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&e.setAttribute("connectionType",n.type),u.isMeasurementValue(n.rtt)&&(y["connection.rtt"]={value:n.rtt,unit:"millisecond"}));u.isMeasurementValue(t.deviceMemory)&&e.setAttribute("deviceMemory",`${t.deviceMemory} GB`);u.isMeasurementValue(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}(e),"pageload"===h){!function(e){const t=d.getNavigationEntry();if(!t)return;const{responseStart:n,requestStart:r}=t;r<=n&&(i.DEBUG_BUILD&&s.logger.log("[Measurements] Adding TTFB Request Time"),e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}(y);const n=y["mark.fid"];n&&y.fid&&(u.startAndEndSpan(e,n.value,n.value+u.msToSec(y.fid.value),{name:"first input delay",op:"ui.action",attributes:{[r.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}}),delete y["mark.fid"]),"fcp"in y&&t.recordClsOnPageloadSpan||delete y.cls,Object.entries(y).forEach((([e,t])=>{r.setMeasurement(e,t.value,t.unit)})),e.setAttribute("performance.timeOrigin",o),e.setAttribute("performance.activationStart",l.getActivationStart()),function(e){p&&(i.DEBUG_BUILD&&s.logger.log("[Measurements] Adding LCP Data"),p.element&&e.setAttribute("lcp.element",s.htmlTreeAsString(p.element)),p.id&&e.setAttribute("lcp.id",p.id),p.url&&e.setAttribute("lcp.url",p.url.trim().slice(0,200)),e.setAttribute("lcp.size",p.size));m&&m.sources&&(i.DEBUG_BUILD&&s.logger.log("[Measurements] Adding CLS Data"),m.sources.forEach(((t,n)=>e.setAttribute(`cls.source.${n+1}`,s.htmlTreeAsString(t.node)))))}(e)}p=undefined,m=undefined,y={}},n.startTrackingInteractions=function(){c.addPerformanceInstrumentationHandler("event",(({entries:e})=>{if(r.getActiveSpan())for(const t of e)if("click"===t.name){const e=u.msToSec(s.browserPerformanceTimeOrigin+t.startTime),n=u.msToSec(t.duration),i={name:s.htmlTreeAsString(t.target),op:`ui.interaction.${t.name}`,startTime:e,attributes:{[r.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}},a=s.getComponentName(t.target);a&&(i.attributes["ui.component_name"]=a);const o=r.startInactiveSpan(i);o&&o.end(e+n)}}))},n.startTrackingLongAnimationFrames=function(){new PerformanceObserver((e=>{if(r.getActiveSpan())for(const t of e.getEntries()){if(!t.scripts[0])continue;const e=u.msToSec(s.browserPerformanceTimeOrigin+t.startTime),n=u.msToSec(t.duration),i={[r.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"},a=t.scripts[0],{invoker:o,invokerType:c,sourceURL:l,sourceFunctionName:d,sourceCharPosition:f}=a;i["browser.script.invoker"]=o,i["browser.script.invoker_type"]=c,l&&(i["code.filepath"]=l),d&&(i["code.function"]=d),-1!==f&&(i["browser.script.source_char_position"]=f);const h=r.startInactiveSpan({name:"Main UI thread blocked",op:"ui.long-animation-frame",startTime:e,attributes:i});h&&h.end(e+n)}})).observe({type:"long-animation-frame",buffered:!0})},n.startTrackingLongTasks=function(){c.addPerformanceInstrumentationHandler("longtask",(({entries:e})=>{if(r.getActiveSpan())for(const t of e){const e=u.msToSec(s.browserPerformanceTimeOrigin+t.startTime),n=u.msToSec(t.duration),i=r.startInactiveSpan({name:"Main UI thread blocked",op:"ui.long-task",startTime:e,attributes:{[r.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.ui.browser.metrics"}});i&&i.end(e+n)}}))},n.startTrackingWebVitals=function({recordClsStandaloneSpans:e}){const t=u.getBrowserPerformanceAPI();if(t&&s.browserPerformanceTimeOrigin){t.mark&&a.WINDOW.performance.mark("sentry-tracing-init");const n=c.addFidInstrumentationHandler((({metric:e})=>{const t=e.entries[e.entries.length-1];if(!t)return;const n=u.msToSec(s.browserPerformanceTimeOrigin),r=u.msToSec(t.startTime);i.DEBUG_BUILD&&s.logger.log("[Measurements] Adding FID"),y.fid={value:e.value,unit:"millisecond"},y["mark.fid"]={value:n+r,unit:"second"}})),r=c.addLcpInstrumentationHandler((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(i.DEBUG_BUILD&&s.logger.log("[Measurements] Adding LCP"),y.lcp={value:e.value,unit:"millisecond"},p=t)}),!0),l=c.addTtfbInstrumentationHandler((({metric:e})=>{e.entries[e.entries.length-1]&&(i.DEBUG_BUILD&&s.logger.log("[Measurements] Adding TTFB"),y.ttfb={value:e.value,unit:"millisecond"})})),d=e?o.trackClsAsStandaloneSpan():c.addClsInstrumentationHandler((({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(i.DEBUG_BUILD&&s.logger.log(`[Measurements] Adding CLS ${e.value}`),y.cls={value:e.value,unit:""},m=t)}),!0);return()=>{n(),r(),l(),d&&d()}}return()=>undefined}}}},{package:"@sentry/browser>@sentry-internal/browser-utils",file:"node_modules/@sentry-internal/browser-utils/build/cjs/metrics/browserMetrics.js"}],[2922,{"../debug-build.js":2915,"./instrument.js":2924,"./utils.js":2925,"./web-vitals/lib/onHidden.js":2937,"@sentry/core":2992,"@sentry/utils":3073},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var{_optionalChain:r}=e("@sentry/utils");Object.defineProperty(n,"__esModule",{value:!0});const s=e("@sentry/core"),i=e("@sentry/utils"),a=e("../debug-build.js"),o=e("./instrument.js"),c=e("./utils.js"),u=e("./web-vitals/lib/onHidden.js");n.trackClsAsStandaloneSpan=function(){let e,t,n=0;if(!function(){try{return r([PerformanceObserver,"access",e=>e.supportedEntryTypes,"optionalAccess",e=>e.includes,"call",e=>e("layout-shift")])}catch(e){return!1}}())return;let l=!1;function d(){l||(l=!0,t&&function(e,t,n){a.DEBUG_BUILD&&i.logger.log(`Sending CLS span (${e})`);const o=c.msToSec((i.browserPerformanceTimeOrigin||0)+(r([t,"optionalAccess",e=>e.startTime])||0)),u=s.getCurrentScope().getScopeData().transactionName,l=t?i.htmlTreeAsString(r([t,"access",e=>e.sources,"access",e=>e[0],"optionalAccess",e=>e.node])):"Layout shift",d=i.dropUndefinedKeys({[s.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.http.browser.cls",[s.SEMANTIC_ATTRIBUTE_SENTRY_OP]:"ui.webvital.cls",[s.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME]:r([t,"optionalAccess",e=>e.duration])||0,"sentry.pageload.span_id":n}),f=c.startStandaloneWebVitalSpan({name:l,transaction:u,attributes:d,startTime:o});r([f,"optionalAccess",e=>e.addEvent,"call",t=>t("cls",{[s.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT]:"",[s.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE]:e})]),r([f,"optionalAccess",e=>e.end,"call",e=>e(o)])}(n,e,t),f())}const f=o.addClsInstrumentationHandler((({metric:t})=>{const r=t.entries[t.entries.length-1];r&&(n=t.value,e=r)}),!0);u.onHidden((()=>{d()})),setTimeout((()=>{const e=s.getClient(),n=r([e,"optionalAccess",e=>e.on,"call",e=>e("startNavigationSpan",(()=>{d(),n&&n()}))]),i=s.getActiveSpan(),a=i&&s.getRootSpan(i),o=a&&s.spanToJSON(a);o&&"pageload"===o.op&&(t=a.spanContext().spanId)}),0)}}}},{package:"@sentry/browser>@sentry-internal/browser-utils",file:"node_modules/@sentry-internal/browser-utils/build/cjs/metrics/cls.js"}],[2923,{"./instrument.js":2924,"./utils.js":2925,"@sentry/core":2992,"@sentry/utils":3073},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){var{_optionalChain:r}=e("@sentry/utils");Object.defineProperty(n,"__esModule",{value:!0});const s=e("@sentry/core"),i=e("@sentry/utils"),a=e("./instrument.js"),o=e("./utils.js"),c=[],u=new Map;const l={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};n.registerInpInteractionListener=function(e){const t=({entries:e})=>{const t=s.getActiveSpan(),n=t&&s.getRootSpan(t);e.forEach((e=>{if(!a.isPerformanceEventTiming(e)||!n)return;const t=e.interactionId;if(null!=t&&!u.has(t)){if(c.length>10){const e=c.shift();u.delete(e)}c.push(t),u.set(t,n)}}))};a.addPerformanceInstrumentationHandler("event",t),a.addPerformanceInstrumentationHandler("first-input",t)},n.startTrackingINP=function(){if(o.getBrowserPerformanceAPI()&&i.browserPerformanceTimeOrigin){const e=a.addInpInstrumentationHandler((({metric:e})=>{if(e.value==undefined)return;const t=e.entries.find((t=>t.duration===e.value&&l[t.name]));if(!t)return;const{interactionId:n}=t,a=l[t.name],c=o.msToSec(i.browserPerformanceTimeOrigin+t.startTime),d=o.msToSec(e.value),f=s.getActiveSpan(),h=f?s.getRootSpan(f):undefined,p=(null!=n?u.get(n):undefined)||h,m=p?s.spanToJSON(p).description:s.getCurrentScope().getScopeData().transactionName,g=i.htmlTreeAsString(t.target),y=i.dropUndefinedKeys({[s.SEMANTIC_ATTRIBUTE_SENTRY_ORIGIN]:"auto.http.browser.inp",[s.SEMANTIC_ATTRIBUTE_SENTRY_OP]:`ui.interaction.${a}`,[s.SEMANTIC_ATTRIBUTE_EXCLUSIVE_TIME]:t.duration}),b=o.startStandaloneWebVitalSpan({name:g,transaction:m,attributes:y,startTime:c});r([b,"optionalAccess",e=>e.addEvent,"call",t=>t("inp",{[s.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_UNIT]:"millisecond",[s.SEMANTIC_ATTRIBUTE_SENTRY_MEASUREMENT_VALUE]:e.value})]),r([b,"optionalAccess",e=>e.end,"call",e=>e(c+d)])}));return()=>{e()}}return()=>undefined}}}},{package:"@sentry/browser>@sentry-internal/browser-utils",file:"node_modules/@sentry-internal/browser-utils/build/cjs/metrics/inp.js"}],[2924,{"../debug-build.js":2915,"./web-vitals/getCLS.js":2926,"./web-vitals/getFID.js":2927,"./web-vitals/getINP.js":2928,"./web-vitals/getLCP.js":2929,"./web-vitals/lib/observe.js":2936,"./web-vitals/onTTFB.js":2942,"@sentry/utils":3073},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("@sentry/utils"),s=e("../debug-build.js"),i=e("./web-vitals/getCLS.js"),a=e("./web-vitals/getFID.js"),o=e("./web-vitals/getINP.js"),c=e("./web-vitals/getLCP.js"),u=e("./web-vitals/lib/observe.js"),l=e("./web-vitals/onTTFB.js"),d={},f={};let h,p,m,g,y;function b(e,t){const n=d[e];if(n&&n.length)for(const i of n)try{i(t)}catch(t){s.DEBUG_BUILD&&r.logger.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${r.getFunctionName(i)}\nError:`,t)}}function w(){return i.onCLS((e=>{b("cls",{metric:e}),h=e}),{reportAllChanges:!0})}function v(){return a.onFID((e=>{b("fid",{metric:e}),p=e}))}function S(){return c.onLCP((e=>{b("lcp",{metric:e}),m=e}),{reportAllChanges:!0})}function T(){return l.onTTFB((e=>{b("ttfb",{metric:e}),g=e}))}function E(){return o.onINP((e=>{b("inp",{metric:e}),y=e}))}function j(e,t,n,r,s=!1){let i;return k(e,t),f[e]||(i=n(),f[e]=!0),r&&t({metric:r}),x(e,t,s?i:undefined)}function k(e,t){d[e]=d[e]||[],d[e].push(t)}function x(e,t,n){return()=>{n&&n();const r=d[e];if(!r)return;const s=r.indexOf(t);-1!==s&&r.splice(s,1)}}n.addClsInstrumentationHandler=function(e,t=!1){return j("cls",e,w,h,t)},n.addFidInstrumentationHandler=function(e){return j("fid",e,v,p)},n.addInpInstrumentationHandler=function(e){return j("inp",e,E,y)},n.addLcpInstrumentationHandler=function(e,t=!1){return j("lcp",e,S,m,t)},n.addPerformanceInstrumentationHandler=function(e,t){return k(e,t),f[e]||(!function(e){const t={};"event"===e&&(t.durationThreshold=0);u.observe(e,(t=>{b(e,{entries:t})}),t)}(e),f[e]=!0),x(e,t)},n.addTtfbInstrumentationHandler=function(e){return j("ttfb",e,T,g)},n.isPerformanceEventTiming=function(e){return"duration"in e}}}},{package:"@sentry/browser>@sentry-internal/browser-utils",file:"node_modules/@sentry-internal/browser-utils/build/cjs/metrics/instrument.js"}],[2925,{"../types.js":2943,"@sentry/core":2992},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("@sentry/core"),s=e("../types.js");n.getBrowserPerformanceAPI=function(){return s.WINDOW&&s.WINDOW.addEventListener&&s.WINDOW.performance},n.isMeasurementValue=function(e){return"number"==typeof e&&isFinite(e)},n.msToSec=function(e){return e/1e3},n.startAndEndSpan=function(e,t,n,{...s}){const i=r.spanToJSON(e).start_timestamp;return i&&i>t&&"function"==typeof e.updateStartTime&&e.updateStartTime(t),r.withActiveSpan(e,(()=>{const e=r.startInactiveSpan({startTime:t,...s});return e&&e.end(n),e}))},n.startStandaloneWebVitalSpan=function(e){const t=r.getClient();if(!t)return;const{name:n,transaction:i,attributes:a,startTime:o}=e,{release:c,environment:u}=t.getOptions(),l=t.getIntegrationByName("Replay"),d=l&&l.getReplayId(),f=r.getCurrentScope(),h=f.getUser(),p=h!==undefined?h.email||h.id||h.ip_address:undefined;let m;try{m=f.getScopeData().contexts.profile.profile_id}catch(e){}const g={release:c,environment:u,user:p||undefined,profile_id:m||undefined,replay_id:d||undefined,transaction:i,"user_agent.original":s.WINDOW.navigator&&s.WINDOW.navigator.userAgent,...a};return r.startInactiveSpan({name:n,attributes:g,startTime:o,experimental:{standalone:!0}})}}}},{package:"@sentry/browser>@sentry-internal/browser-utils",file:"node_modules/@sentry-internal/browser-utils/build/cjs/metrics/utils.js"}],[2926,{"./lib/bindReporter.js":2930,"./lib/initMetric.js":2935,"./lib/observe.js":2936,"./lib/onHidden.js":2937,"./lib/runOnce.js":2939,"./onFCP.js":2941},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("./lib/bindReporter.js"),s=e("./lib/initMetric.js"),i=e("./lib/observe.js"),a=e("./lib/onHidden.js"),o=e("./lib/runOnce.js"),c=e("./onFCP.js"),u=[.1,.25];n.CLSThresholds=u,n.onCLS=(e,t={})=>{c.onFCP(o.runOnce((()=>{const n=s.initMetric("CLS",0);let o,c=0,l=[];const d=e=>{e.forEach((e=>{if(!e.hadRecentInput){const t=l[0],n=l[l.length-1];c&&t&&n&&e.startTime-n.startTime<1e3&&e.startTime-t.startTime<5e3?(c+=e.value,l.push(e)):(c=e.value,l=[e])}})),c>n.value&&(n.value=c,n.entries=l,o())},f=i.observe("layout-shift",d);f&&(o=r.bindReporter(e,n,u,t.reportAllChanges),a.onHidden((()=>{d(f.takeRecords()),o(!0)})),setTimeout(o,0))})))}}}},{package:"@sentry/browser>@sentry-internal/browser-utils",file:"node_modules/@sentry-internal/browser-utils/build/cjs/metrics/web-vitals/getCLS.js"}],[2927,{"./lib/bindReporter.js":2930,"./lib/getVisibilityWatcher.js":2934,"./lib/initMetric.js":2935,"./lib/observe.js":2936,"./lib/onHidden.js":2937,"./lib/runOnce.js":2939,"./lib/whenActivated.js":2940},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("./lib/bindReporter.js"),s=e("./lib/getVisibilityWatcher.js"),i=e("./lib/initMetric.js"),a=e("./lib/observe.js"),o=e("./lib/onHidden.js"),c=e("./lib/runOnce.js"),u=e("./lib/whenActivated.js"),l=[100,300];n.FIDThresholds=l,n.onFID=(e,t={})=>{u.whenActivated((()=>{const n=s.getVisibilityWatcher(),u=i.initMetric("FID");let d;const f=e=>{e.startTime<n.firstHiddenTime&&(u.value=e.processingStart-e.startTime,u.entries.push(e),d(!0))},h=e=>{e.forEach(f)},p=a.observe("first-input",h);d=r.bindReporter(e,u,l,t.reportAllChanges),p&&o.onHidden(c.runOnce((()=>{h(p.takeRecords()),p.disconnect()})))}))}}}},{package:"@sentry/browser>@sentry-internal/browser-utils",file:"node_modules/@sentry-internal/browser-utils/build/cjs/metrics/web-vitals/getFID.js"}],[2928,{"../../types.js":2943,"./lib/bindReporter.js":2930,"./lib/initMetric.js":2935,"./lib/observe.js":2936,"./lib/onHidden.js":2937,"./lib/polyfills/interactionCountPolyfill.js":2938,"./lib/whenActivated.js":2940},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../types.js"),s=e("./lib/bindReporter.js"),i=e("./lib/initMetric.js"),a=e("./lib/observe.js"),o=e("./lib/onHidden.js"),c=e("./lib/polyfills/interactionCountPolyfill.js"),u=e("./lib/whenActivated.js"),l=[200,500],d=()=>c.getInteractionCount()-0,f=[],h={},p=e=>{const t=f[f.length-1],n=h[e.interactionId];if(n||f.length<10||t&&e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{const t={id:e.interactionId,latency:e.duration,entries:[e]};h[t.id]=t,f.push(t)}f.sort(((e,t)=>t.latency-e.latency)),f.splice(10).forEach((e=>{delete h[e.id]}))}};n.INPThresholds=l,n.onINP=(e,t={})=>{u.whenActivated((()=>{c.initInteractionCountPolyfill();const n=i.initMetric("INP");let u;const h=e=>{e.forEach((e=>{if(e.interactionId&&p(e),"first-input"===e.entryType){!f.some((t=>t.entries.some((t=>e.duration===t.duration&&e.startTime===t.startTime))))&&p(e)}}));const t=(()=>{const e=Math.min(f.length-1,Math.floor(d()/50));return f[e]})();t&&t.latency!==n.value&&(n.value=t.latency,n.entries=t.entries,u())},m=a.observe("event",h,{durationThreshold:null!=t.durationThreshold?t.durationThreshold:40});u=s.bindReporter(e,n,l,t.reportAllChanges),m&&("PerformanceEventTiming"in r.WINDOW&&"interactionId"in PerformanceEventTiming.prototype&&m.observe({type:"first-input",buffered:!0}),o.onHidden((()=>{h(m.takeRecords()),n.value<0&&d()>0&&(n.value=0,n.entries=[]),u(!0)})))}))}}}},{package:"@sentry/browser>@sentry-internal/browser-utils",file:"node_modules/@sentry-internal/browser-utils/build/cjs/metrics/web-vitals/getINP.js"}],[2929,{"../../types.js":2943,"./lib/bindReporter.js":2930,"./lib/getActivationStart.js":2932,"./lib/getVisibilityWatcher.js":2934,"./lib/initMetric.js":2935,"./lib/observe.js":2936,"./lib/onHidden.js":2937,"./lib/runOnce.js":2939,"./lib/whenActivated.js":2940},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../types.js"),s=e("./lib/bindReporter.js"),i=e("./lib/getActivationStart.js"),a=e("./lib/getVisibilityWatcher.js"),o=e("./lib/initMetric.js"),c=e("./lib/observe.js"),u=e("./lib/onHidden.js"),l=e("./lib/runOnce.js"),d=e("./lib/whenActivated.js"),f=[2500,4e3],h={};n.LCPThresholds=f,n.onLCP=(e,t={})=>{d.whenActivated((()=>{const n=a.getVisibilityWatcher(),d=o.initMetric("LCP");let p;const m=e=>{const t=e[e.length-1];t&&t.startTime<n.firstHiddenTime&&(d.value=Math.max(t.startTime-i.getActivationStart(),0),d.entries=[t],p())},g=c.observe("largest-contentful-paint",m);if(g){p=s.bindReporter(e,d,f,t.reportAllChanges);const n=l.runOnce((()=>{h[d.id]||(m(g.takeRecords()),g.disconnect(),h[d.id]=!0,p(!0))}));["keydown","click"].forEach((e=>{r.WINDOW.document&&addEventListener(e,(()=>setTimeout(n,0)),!0)})),u.onHidden(n)}}))}}}},{package:"@sentry/browser>@sentry-internal/browser-utils",file:"node_modules/@sentry-internal/browser-utils/build/cjs/metrics/web-vitals/getLCP.js"}],[2930,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.bindReporter=(e,t,n,r)=>{let s,i;return a=>{t.value>=0&&(a||r)&&(i=t.value-(s||0),(i||s===undefined)&&(s=t.value,t.delta=i,t.rating=((e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good")(t.value,n),e(t)))}}}}},{package:"@sentry/browser>@sentry-internal/browser-utils",file:"node_modules/@sentry-internal/browser-utils/build/cjs/metrics/web-vitals/lib/bindReporter.js"}],[2931,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.generateUniqueID=()=>`v3-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`}}},{package:"@sentry/browser>@sentry-internal/browser-utils",file:"node_modules/@sentry-internal/browser-utils/build/cjs/metrics/web-vitals/lib/generateUniqueID.js"}],[2932,{"./getNavigationEntry.js":2933},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("./getNavigationEntry.js");n.getActivationStart=()=>{const e=r.getNavigationEntry();return e&&e.activationStart||0}}}},{package:"@sentry/browser>@sentry-internal/browser-utils",file:"node_modules/@sentry-internal/browser-utils/build/cjs/metrics/web-vitals/lib/getActivationStart.js"}],[2933,{"../../../types.js":2943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../../types.js");n.getNavigationEntry=()=>r.WINDOW.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]}}},{package:"@sentry/browser>@sentry-internal/browser-utils",file:"node_modules/@sentry-internal/browser-utils/build/cjs/metrics/web-vitals/lib/getNavigationEntry.js"}],[2934,{"../../../types.js":2943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../../types.js");let s=-1;const i=e=>{"hidden"===r.WINDOW.document.visibilityState&&s>-1&&(s="visibilitychange"===e.type?e.timeStamp:0,removeEventListener("visibilitychange",i,!0),removeEventListener("prerenderingchange",i,!0))};n.getVisibilityWatcher=()=>(r.WINDOW.document&&s<0&&(s="hidden"!==r.WINDOW.document.visibilityState||r.WINDOW.document.prerendering?Infinity:0,addEventListener("visibilitychange",i,!0),addEventListener("prerenderingchange",i,!0)),{get firstHiddenTime(){return s}})}}},{package:"@sentry/browser>@sentry-internal/browser-utils",file:"node_modules/@sentry-internal/browser-utils/build/cjs/metrics/web-vitals/lib/getVisibilityWatcher.js"}],[2935,{"../../../types.js":2943,"./generateUniqueID.js":2931,"./getActivationStart.js":2932,"./getNavigationEntry.js":2933},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../../types.js"),s=e("./generateUniqueID.js"),i=e("./getActivationStart.js"),a=e("./getNavigationEntry.js");n.initMetric=(e,t)=>{const n=a.getNavigationEntry();let o="navigate";n&&(r.WINDOW.document&&r.WINDOW.document.prerendering||i.getActivationStart()>0?o="prerender":r.WINDOW.document&&r.WINDOW.document.wasDiscarded?o="restore":n.type&&(o=n.type.replace(/_/g,"-")));return{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:s.generateUniqueID(),navigationType:o}}}}},{package:"@sentry/browser>@sentry-internal/browser-utils",file:"node_modules/@sentry-internal/browser-utils/build/cjs/metrics/web-vitals/lib/initMetric.js"}],[2936,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.observe=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver((e=>{Promise.resolve().then((()=>{t(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}}}}},{package:"@sentry/browser>@sentry-internal/browser-utils",file:"node_modules/@sentry-internal/browser-utils/build/cjs/metrics/web-vitals/lib/observe.js"}],[2937,{"../../../types.js":2943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../../types.js");n.onHidden=e=>{const t=t=>{("pagehide"===t.type||r.WINDOW.document&&"hidden"===r.WINDOW.document.visibilityState)&&e(t)};r.WINDOW.document&&(addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0))}}}},{package:"@sentry/browser>@sentry-internal/browser-utils",file:"node_modules/@sentry-internal/browser-utils/build/cjs/metrics/web-vitals/lib/onHidden.js"}],[2938,{"../observe.js":2936},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../observe.js");let s=0,i=Infinity,a=0;const o=e=>{e.forEach((e=>{e.interactionId&&(i=Math.min(i,e.interactionId),a=Math.max(a,e.interactionId),s=a?(a-i)/7+1:0)}))};let c;n.getInteractionCount=()=>c?s:performance.interactionCount||0,n.initInteractionCountPolyfill=()=>{"interactionCount"in performance||c||(c=r.observe("event",o,{type:"event",buffered:!0,durationThreshold:0}))}}}},{package:"@sentry/browser>@sentry-internal/browser-utils",file:"node_modules/@sentry-internal/browser-utils/build/cjs/metrics/web-vitals/lib/polyfills/interactionCountPolyfill.js"}],[2939,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});n.runOnce=e=>{let t=!1;return n=>{t||(e(n),t=!0)}}}}},{package:"@sentry/browser>@sentry-internal/browser-utils",file:"node_modules/@sentry-internal/browser-utils/build/cjs/metrics/web-vitals/lib/runOnce.js"}],[2940,{"../../../types.js":2943},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../../types.js");n.whenActivated=e=>{r.WINDOW.document&&r.WINDOW.document.prerendering?addEventListener("prerenderingchange",(()=>e()),!0):e()}}}},{package:"@sentry/browser>@sentry-internal/browser-utils",file:"node_modules/@sentry-internal/browser-utils/build/cjs/metrics/web-vitals/lib/whenActivated.js"}],[2941,{"./lib/bindReporter.js":2930,"./lib/getActivationStart.js":2932,"./lib/getVisibilityWatcher.js":2934,"./lib/initMetric.js":2935,"./lib/observe.js":2936,"./lib/whenActivated.js":2940},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("./lib/bindReporter.js"),s=e("./lib/getActivationStart.js"),i=e("./lib/getVisibilityWatcher.js"),a=e("./lib/initMetric.js"),o=e("./lib/observe.js"),c=e("./lib/whenActivated.js"),u=[1800,3e3];n.FCPThresholds=u,n.onFCP=(e,t={})=>{c.whenActivated((()=>{const n=i.getVisibilityWatcher(),c=a.initMetric("FCP");let l;const d=o.observe("paint",(e=>{e.forEach((e=>{"first-contentful-paint"===e.name&&(d.disconnect(),e.startTime<n.firstHiddenTime&&(c.value=Math.max(e.startTime-s.getActivationStart(),0),c.entries.push(e),l(!0)))}))}));d&&(l=r.bindReporter(e,c,u,t.reportAllChanges))}))}}}},{package:"@sentry/browser>@sentry-internal/browser-utils",file:"node_modules/@sentry-internal/browser-utils/build/cjs/metrics/web-vitals/onFCP.js"}],[2942,{"../../types.js":2943,"./lib/bindReporter.js":2930,"./lib/getActivationStart.js":2932,"./lib/getNavigationEntry.js":2933,"./lib/initMetric.js":2935,"./lib/whenActivated.js":2940},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("../../types.js"),s=e("./lib/bindReporter.js"),i=e("./lib/getActivationStart.js"),a=e("./lib/getNavigationEntry.js"),o=e("./lib/initMetric.js"),c=e("./lib/whenActivated.js"),u=[800,1800],l=e=>{r.WINDOW.document&&r.WINDOW.document.prerendering?c.whenActivated((()=>l(e))):r.WINDOW.document&&"complete"!==r.WINDOW.document.readyState?addEventListener("load",(()=>l(e)),!0):setTimeout(e,0)};n.TTFBThresholds=u,n.onTTFB=(e,t={})=>{const n=o.initMetric("TTFB"),r=s.bindReporter(e,n,u,t.reportAllChanges);l((()=>{const e=a.getNavigationEntry();if(e){const t=e.responseStart;if(t<=0||t>performance.now())return;n.value=Math.max(t-i.getActivationStart(),0),n.entries=[e],r(!0)}}))}}}},{package:"@sentry/browser>@sentry-internal/browser-utils",file:"node_modules/@sentry-internal/browser-utils/build/cjs/metrics/web-vitals/onTTFB.js"}],[2943,{"@sentry/utils":3073},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0});const r=e("@sentry/utils").GLOBAL_OBJ;n.WINDOW=r}}},{package:"@sentry/browser>@sentry-internal/browser-utils",file:"node_modules/@sentry-internal/browser-utils/build/cjs/types.js"}]],[],{});